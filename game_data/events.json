[
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "transition;close",
            "music_clear;1000",
            "wait;1000",
            "transition;open",
            "s;;Warning: this is a +18 game.|It contains explicit sexual language.|This is a fangame tribute to the adult RPG The Last Sovereign, made by Sierra Lee.|This game contains spoilers up to the end of Chapter 3 of The Last Sovereign.|This game has no affiliation whatsoever to Intelligent Systems nor Sierra Lee.;center;;overworld_narration",
            "wait;4000",
            "end_skip",
            "music;FuckEmblem;3000",
            "transition;close;1000",
            "change_background;Fuck Emblem",
            "transition;open;2000",
            "wait;2000",
            "change_background;FuckEmblemdim",
            "s;;Fuck Emblems.|Nobody knows when, how or why they were created.|Possessing a Fuck Emblem makes someone the god of sex, virtually irresistible.|Well, now that I think about it, I can pretty much guess on why they were created.|Regardless of intentions or circunstamces, the Fuck Emblems changed the world.|Whole kingdoms rose and fell due to those wretched Emblems.|With time and enough battles they were broken, scattered far and wide.|Their status eventually amounting to nothing but silly fairy tales.|However, the world was never truly rid of them.|Indeed, this is a story surrounding those remaining Emblems.;center;;cinematic",
            "music_clear;1000",
            "s;;This is the story of The Last Emblem.;center;;cinematic",
            "transition;close;2000",
            "wait;4000",
            "music;First Choice",
            "change_background;SeaofClouds",
            "transition;open;3000",
            "wait;1500",
            "end_skip",
            "textbox;prolrecommend;Playing the prologue is highly recommended for first time Fire Emblem players.;top;;2",
            "choice;tutorialchoice;Do you wish to play the Prologue?;Yes,No",
            "if;'{v:_last_choice}' == 'Yes'",
            "    game_var;prologue;1",
            "    remove_table;prolrecommend",
            "    s;;When you finish naming your character, press [START] to proceed.|The default [START] button on keyboard control is the letter [S].;;;narration",
            "    text_entry;chosenname;What is your name?;9;force_entry",
            "    choice;tutorialivala;Do you wish to listen to Ivala? (Enables Tutorial);Yes,No",
            "    if;'{v:_last_choice}' == 'Yes'",
            "        game_var;ivala;1",
            "    elif;'{v:_last_choice}' == 'No'",
            "        game_var;ivala;0",
            "    end",
            "    set_next_chapter;P1",
            "    transition;close;2000",
            "    wait;1000",
            "    win_game",
            "elif;'{v:_last_choice}' == 'No'",
            "    remove_table;prolrecommend",
            "    game_var;prologue;0",
            "    set_next_chapter;Intro0",
            "    transition;close;2000",
            "    wait;1000",
            "    win_game",
            "end"
        ],
        "nid": "0 Intro"
    },
    {
        "name": "DeathSaar",
        "trigger": "unit_death",
        "level_nid": "5",
        "condition": "unit.nid == \"Saar\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Saar;Left",
            "speak;Saar;Emperor Vigarde...{br}Glory to His...Majesty...",
            "expression;Saar;CloseEyes",
            "remove_portrait;Saar"
        ],
        "nid": "5 DeathSaar"
    },
    {
        "name": "DeathBreguet",
        "trigger": "unit_death",
        "level_nid": "1",
        "condition": "unit.nid == \"Breguet\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Breguet;Left",
            "speak;Breguet;This... this can't be...|I...",
            "expression;Breguet;CloseEyes",
            "remove_portrait;Breguet"
        ],
        "nid": "1 DeathBreguet"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            ""
        ],
        "nid": "0 Outro"
    },
    {
        "name": "Defeat Boss",
        "trigger": "combat_end",
        "level_nid": "5",
        "condition": "game.check_dead(\"Saar\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "5 Defeat Boss"
    },
    {
        "name": "FightSaar",
        "trigger": "combat_start",
        "level_nid": "5",
        "condition": "unit.nid == \"Saar\" or unit2.nid == \"Saar\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Saar;Left",
            "speak;Saar;Enemy of the empire!{br}Death's too good for you!",
            "remove_portrait;Saar"
        ],
        "nid": "5 FightSaar"
    },
    {
        "name": "FightBreguet",
        "trigger": "combat_start",
        "level_nid": "1",
        "condition": "(unit.nid == \"Breguet\" and unit2.team == 'player') or (unit2.nid == \"Breguet\" and unit.team == 'player')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Breguet;Left",
            "speak;Breguet;Bah, what a worthless lot of curs I've been assigned!",
            "remove_portrait;Breguet"
        ],
        "nid": "1 FightBreguet"
    },
    {
        "name": "GilliamFranzArrive",
        "trigger": "turn_change",
        "level_nid": "1",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Move Franz and Gilliam into the game",
            "spawn_group;Rein;North;Starting",
            "# Hover cursor over Franz",
            "move_cursor;Franz",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "# Franz and Gilliam converse",
            "add_portrait;Franz;Left;no_block",
            "add_portrait;Gilliam;Right",
            "speak;Franz;Sir Gilliam, is that Mulan? Have we reached Frelia's border already?",
            "speak;Gilliam;Aye, we have. Her Highness Princess Tana should be inside the castle.",
            "speak;Franz;But look--the countryside is crawling with Grado soldiers!|Where's the castle guard? Has Mulan fallen? Are we too late?",
            "speak;Gilliam;Too tough to say from here.|Princess Tana's in no danger if they want her as a bargaining tool.|We men of the Eastern Watch will see her to safety.",
            "speak;Franz;Yes... Yes, of course.{br}We mustn't give up. We must move.|We must retake the castle. Then, we ride forth to Princess Eirika's aid.",
            "speak;Gilliam;I've stronger armor than you do. I'll take the lead. Watch my back.",
            "remove_portrait;Franz;no_block",
            "remove_portrait;Gilliam"
        ],
        "nid": "1 GilliamFranzArrive"
    },
    {
        "name": "House1",
        "trigger": "Visit",
        "level_nid": "1",
        "condition": "region.nid == 'House1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;Man1;Left;no_block",
            "add_portrait;{unit};Right",
            "speak;Man1;The rumors are true, aren't they? The Grado army's taken over the castle|It looks like they've seized the castle gate, too.|Smart work--the gate provides defense and heals wounds to boot.|They must be fierce warriors to have taken the gate. Watch yourself.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "has_traded;{unit}"
        ],
        "nid": "1 House1"
    },
    {
        "name": "House2",
        "trigger": "Visit",
        "level_nid": "1",
        "condition": "region.nid == 'House2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;Man2;Left;no_block",
            "add_portrait;{unit};Right",
            "speak;Man2;That knight encamped at the castle was wearing the finest armor I've seen.|It looked like it could turn aside alomst any blade you swing at it.|I know my armor, though. I wager a good rapier or armorslayer could get through it.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "has_traded;{unit}"
        ],
        "nid": "1 House2"
    },
    {
        "name": "Seize",
        "trigger": "Seize",
        "level_nid": "1",
        "condition": "'Lord' in unit.tags",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "1 Seize"
    },
    {
        "name": "Seize",
        "trigger": "Seize",
        "level_nid": "3",
        "condition": "'Lord' in unit.tags",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "3 Seize"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_talk;Eirika;Franz",
            "add_talk;Seth;Franz",
            "remove_group;Enemy1;immediate",
            "remove_group;Rein;immediate",
            "remove_group;EirikaSeth;immediate",
            "chapter_title",
            "# Fade in",
            "transition;Open",
            "# Move enemies into map",
            "spawn_group;Enemy1;South;Enemy1;;stack",
            "# Hover cursor over castle",
            "move_cursor;2,2",
            "# Flicker cursor",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "# Fade to inside castle",
            "transition;Close",
            "change_background;InsideCastle",
            "transition;Open",
            "add_portrait;SoldierBlue;Left;no_block",
            "add_portrait;Tana;Right",
            "speak;SoldierBlue;Princess Tana! Grado's forces are approaching!",
            "speak;Tana;What? So soon? Ah, we've had no time!",
            "speak;SoldierBlue;Milady, we lack the arms to defend this place. You must return to Castle Frelia.",
            "speak;Tana;I can't! Not yet. We haven't found Eirika and her companions yet.|Eirika is my friend, and she needs my help. I won't abandon her.|Oh, I know! Go and ask Father--{br}I mean King Hayden for more troops.",
            "speak;SoldierBlue;Yes, Your Highness!",
            "remove_portrait;SoldierBlue",
            "speak;Tana;Eirika, please be safe!",
            "transition;Close",
            "change_background",
            "end_skip",
            "transition;Open",
            "# Green units leave castle. Mercenary stays on castle.",
            "# Add and move cavalier",
            "add_unit;GreenCav;2,2",
            "move_unit;GreenCav;2,3",
            "# Add Mercenary",
            "add_unit;GreenMerc;2,2",
            "# Move Cavalier again",
            "move_unit;GreenCav;0,0",
            "remove_unit;GreenCav",
            "move_cursor;Breguet",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "# Fade in Breguet",
            "transition;Close",
            "change_background;Plains",
            "transition;Open",
            "add_portrait;SoldierRed;Left;no_block",
            "add_portrait;Breguet;Right",
            "speak;SoldierRed;Commander Breguet, the enemy appears to be fortifying its position in the castle.",
            "speak;Breguet;Hmph.|They're tenacious, but they have no hope of stopping our advance.",
            "speak;SoldierRed;What are your orders, sir?",
            "speak;Breguet;Ha! Orders? You just stand here and watch. I'll crush them myself!",
            "speak;SoldierRed;As you command, sir.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "# Breguet moves and attacks Green Mercenary. He crits the mercenary.",
            "move_unit;Breguet;2,3",
            "interact_unit;Breguet;GreenMerc;crit1",
            "move_cursor;Breguet",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "add_portrait;Breguet;Left",
            "speak;Breguet;Ha! That's what happens when you face my lance!",
            "remove_portrait;Breguet",
            "# Units move to their final positions",
            "move_unit;Breguet;2,2",
            "move_group;Enemy1;Starting",
            "move_cursor;Breguet",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "transition;Close",
            "change_background;InsideCastle",
            "end_skip",
            "transition;Open",
            "add_portrait;Breguet;Left;no_block",
            "add_portrait;Tana;Right",
            "move_portrait;Tana;MidRight",
            "speak;Tana;St-stop right there!|Call off your forces and turn back, or you'll have me to deal with!",
            "speak;Breguet;Is that so? And who might you be?",
            "speak;Tana;Who--? I am Tana, Princess of Frelia.|I will not permit you to abuse my country any longer.",
            "speak;Breguet;Frelia's royal brat, huh? How convenient...",
            "speak;Tana;Leave this castle immediately.|If you harm me, my father and brother will chase you to the earth's end.",
            "speak;Breguet;Yes, I've heard how King Hayden dotes on his precious little daughter.|Let's see how true that is. You'll make us a fine hostage, my dear.|Seize the girl and lock her up!",
            "add_portrait;SoldierRed;FarRight",
            "speak;SoldierRed;Right away, sir!",
            "bop_portrait;Tana",
            "speak;Tana;No! Let me go!",
            "transition;Close",
            "change_background",
            "end_skip",
            "transition;Open",
            "# Eirika and Seth arrive",
            "spawn_group;EirikaSeth;East;Starting",
            "move_cursor;Eirika",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "add_portrait;Eirika;Right;no_block",
            "add_portrait;Seth;Left",
            "speak;Eirika;Seth, look...",
            "speak;Seth;I see it. It seems like Grado's army has already reached Frelia.|Princess, this place is perilous.|We should bypass Mulan altogether and head straight to the castle.",
            "speak;Eirika;But we can't just ignore this...|You were there when Renais was invaded... You saw what I saw.|You saw how the people suffered at the hands of Grado's soldiers.|Homes were destroyed, possessions stolen, women kidnapped...|Anyone who resisted was executed without question, without hesitation.",
            "speak;Seth;...",
            "speak;Eirika;Please, Seth. I can't allow that to happen here.|I don't want to see any more people harmed by Grado's atrocities.",
            "speak;Seth;All right, Princess. I understand. Perhaps we can retake Mulan.|But, Princess, you must act with caution. Your people need you, too.",
            "speak;Eirika;Of course, Seth. Come on! Let's go!",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Eirika"
        ],
        "nid": "1 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Fade to black",
            "transition;Close",
            "change_background;InsideCastle",
            "transition;Open",
            "add_portrait;Tana;Left;no_block",
            "add_portrait;Gilliam;MidRight",
            "speak;Gilliam;Princess Tana.",
            "speak;Tana;Sir Gilliam...|I'm sorry. I never meant to cause you such trouble.",
            "speak;Gilliam;It was no trouble. I live to serve, Princess.",
            "# Move Eirika onscreen from offscreen",
            "add_portrait;Eirika;OffscreenRight;immediate",
            "move_portrait;Eirika;FarRight",
            "speak;Eirika;Tana!",
            "speak;Tana;...Eirika?!?|Is that really you?",
            "speak;Eirika;Tana, what are you doing, so far from Castle Frelia?",
            "# This is how you tell a character to change their expression",
            "expression;Tana;Smile",
            "speak;Tana;I heard that Renais had fallen, and I was so worried...|But I'm glad to see that you're safe...{w}{clear}Wait! Where is Ephraim? Is he well?",
            "expression;Tana;NoSmile",
            "speak;Eirika;I wish I knew.",
            "speak;Tana;You haven't heard from him? Oh, I hope he's not been harmed...|Come, we must go to Castle Frelia. My lord father may know something.",
            "speak;Eirika;Thank you, Tana.",
            "transition;Close",
            "end_skip",
            "",
            "# Let's have some fun in the overworld",
            "change_background",
            "# This command is necessary to load the overworld tilemap",
            "overworld_cinematic;0",
            "# The next two commands are self-explanatory. You'll use these to manipulate overworld data.",
            "reveal_overworld_node;0;immediate",
            "set_overworld_position;Eirika;0",
            "",
            "# Here are examples of overworld animations and sounds.",
            "# Notice that they are the same as the normal tilemap commands.",
            "transition;open;1500",
            "wait;1000",
            "sound;RefreshDance",
            "map_anim;AOE_Mend;2",
            "reveal_overworld_node;2",
            "wait;500",
            "sound;Mend",
            "reveal_overworld_road;0;2",
            "",
            "# Because narration is more involved than dialogue, we need some different commands",
            "# to animate the narration window in.",
            "toggle_narration_mode;open;1000",
            "wait;500",
            "narrate;Narrator;Eirika and her companions have liberated the border castle.",
            "overworld_move_unit;Eirika;2;no_block",
            "narrate;Narrator;Alongside Princess Tana of Frelia, they ride to the Frelian Capital.",
            "wait;500",
            "transition;close",
            "toggle_narration_mode;close",
            "",
            "change_background;Bedroom",
            "wait;1000",
            "transition;open",
            "add_portrait;Hayden;Left",
            "add_portrait;Tana;FarRight",
            "speak;Hayden;Oh, Tana... I'm grateful to see that you're safe and home again! |You've no idea how worried when I heard you were under attack at Border Mulan. |You are not to leave again without my permission. Do you understand?",
            "speak;Tana;Don't be mad, Father. Look, I come bearing good news. |Eirika! Come out now!",
            "add_portrait;Eirika;MidRight",
            "speak;Eirika;King Hayden, I am pleased to see you again, even in these sad times.",
            "speak;Hayden;Ah, Eirika. It does my heart good to see you safe.",
            "speak;Eirika;Thank you. I was able to escape the castle before Renais fell. |But I'm not sure if my father...",
            "speak;Hayden;Yes. |I...have received word of your father.",
            "speak;Eirika;Your Highness? Please tell me. Is my father well?",
            "speak;Hayden;...My friend King Fado...did not survive the fall of Renais Castle.",
            "speak;Eirika;...No, it cannot be...",
            "remove_portrait;Tana",
            "add_portrait;Seth;FarRight",
            "speak;Seth;......",
            "speak;Hayden;Rest assured, Grado will be punished for its cowardly act. This is Frelia's promise. |Eirika, please stay here and rest. I cannot imagine how exhaused you must be.",
            "speak;Eirika;......",
            "speak;Seth;King Hayden. |You know of Prince Ephraim's disappearance, do you not?",
            "speak;Hayden;Yes, we hear the prince and his men hound Grado at every turn. |It's said that he's led his forces into the empire itself. |Reports suggest he's crossed the border and now fights in Renvall.",
            "speak;Eirika;My brother...{br}He fights on? Even now?",
            "speak;Hayden;Yes. My pegasus knights brought his information at a great price. |Even though Renais has fallen, he still charges into the enemy's heart. |He is truly Fado's son...what a valiant youth. |I wish that I knew whether he remains unharmed, but I do not.",
            "speak;Eirika;King Hayden, I thank you for your offer, but I cannot stay. |I intend to ride to my brother's side with reinforcements.",
            "speak;Hayden;I cannot allow it. I know how you feel, but this plan is suicide. |I would be betraying Fado's memory if I allowed any harm to befall you. |Stay here. Rest and mourn. Leave this war to the warriors.",
            "speak;Eirika;I know you mean well, Your Majesty. |However, I have lost my father, and my twin brother is in peril. |My brother, he is a part of me... |I cannot rest here in peace while he risks his life.",
            "speak;Hayden;No. Renais has no more army. Grado's forces decimated it. |I wish that Frelia could provide you with support, with soldiers, but... |My son, Innes, is on his way to meet the empire's forces. |We cannot spare a single brigade. |Your own retinue of knights cannot possibly face Grado alone. |Are you so determined to go?",
            "speak;Eirika;Yes. |...With apologies.",
            "speak;Hayden;...As resolute as your father, eh? |What am I to do in the face of such foolhardy determination? |Vanessa.",
            "remove_portrait;Seth",
            "add_portrait;Vanessa;FarRight",
            "speak;Vanessa;Here, Your Highness!",
            "speak;Hayden;Moulder.",
            "remove_portrait;Vanessa",
            "add_portrait;Moulder;FarRight",
            "speak;Moulder;You called, my king?",
            "speak;Hayden;Gilliam.",
            "remove_portrait;Moulder",
            "add_portrait;Gilliam;FarRight",
            "speak;Gilliam;Yes, sire?",
            "remove_portrait;Gilliam",
            "speak;Hayden;You are to accompany Princess Eirika of Renais into Grado territory. |I expect each of you to provide aid and support for her brother.",
            "add_portrait;Moulder;FarRight",
            "speak;Moulder;Hm. Quite a grave responsibility you have given us.",
            "remove_portrait;Moulder",
            "add_portrait;Vanessa;FarRight",
            "speak;Vanessa;No matter the obstacles, we will perform our duty.",
            "remove_portrait;Vanessa",
            "add_portrait;Gilliam;FarRight",
            "speak;Gilliam;Our lives are yours.",
            "remove_portrait;Gilliam",
            "speak;Hayden;These are some of my most trusted and stalwart vassals. |They will, no doubt, prove themselves quite valuable on your journey. |Remember, you are venturing behind enemy lines. You will need supplies. |I will have a supply convoy readied to carry your weapons and provisions. |It will remain at your side, no matter how far afield you venture.",
            "speak;Eirika;King Hayden, I...{br}Thank you.",
            "speak;Hayden;No, save thanks for your return... with your brother, Prince Ephraim.",
            "speak;Eirika;Yes, Your Highness!",
            "remove_portrait;Eirika",
            "remove_portrait;Hayden",
            "give_money;5000",
            "transition;close;3000",
            "change_background;InsideCastle",
            "transition;open",
            "add_portrait;Eirika;Right",
            "add_portrait;Tana;Left",
            "speak;Tana;Eirika, you don't really intend to go through with this, do you? |I can't guess how you feel, but it's just too dangerous. |What would happen if you were captured by Grado's men?",
            "speak;Eirika;Thank you for your concern, Tana. |But I have no choice. Don't you see, Tana? I have to go.",
            "speak;Tana;Eirika...{br} Oh, why is this happening? What's gone wrong with the world?",
            "speak;Eirika;Tana...",
            "speak;Tana;Why would Grado invade? |Emperor Vigarde is a man of peace. His people adore him. |And you and Ephraim are friends with Prince Lyon, are you not? |What could be behind this madness? Why is this happening...",
            "speak;Eirika;I have no answers for you, Tana. |I don't want to believe it, but the reality is that we are at war. |If I do nothing, I may lose my brother as well as my father. |This is why I have to fight. It's the only answer I have."
        ],
        "nid": "1 Outro"
    },
    {
        "name": "EnemyRein",
        "trigger": "turn_change",
        "level_nid": "1",
        "condition": "game.level.regions.get('EnemyRein').contains(game.get_unit('Eirika').position)",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "spawn_group;EnemyRein;East;EnemyRein",
            "move_cursor;107",
            "disp_cursor;1",
            "wait;1000",
            "disp_cursor;0",
            "add_portrait;SoldierRed;Left",
            "speak;SoldierRed;I've found them! Stragglers from Renais! Don't let them get away.",
            "remove_portrait;SoldierRed"
        ],
        "nid": "1 EnemyRein"
    },
    {
        "name": "SethFranzTalk",
        "trigger": "on_talk",
        "level_nid": "1",
        "condition": "unit.nid == 'Seth' and unit2.nid == 'Franz'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Franz;Left;no_block",
            "add_portrait;Seth;Right",
            "speak;Seth;Is that you, Franz? I'm relieved to see you're still in one piece!",
            "speak;Franz;Y-yes...and you as well, General.|As long as you lead us, sir, the Knights of Renais cannot lose!",
            "speak;Seth;Franz, you and I must work together to protect Princess Eirika.|I want you to ride with us.",
            "speak;Franz;Sir! With honor, sir!",
            "remove_portrait;Franz;no_block",
            "remove_portrait;Seth",
            "remove_talk;Seth;Franz"
        ],
        "nid": "1 SethFranzTalk"
    },
    {
        "name": "EirikaFranzTalk",
        "trigger": "on_talk",
        "level_nid": "1",
        "condition": "unit.nid == 'Eirika' and unit2.nid == 'Franz'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Franz;Left;no_block",
            "add_portrait;Eirika;Right",
            "speak;Franz;Princess Eirika, it is good to see you're well.",
            "speak;Eirika;Franz, you made it through unscathed...",
            "speak;Franz;Y-yes, Your Highness!|I met up with Sir Gilliam of Frelia and explained the situation in Renais.|He told me that Princess Tana was in danger as well, here at Mulan.|We rode as swiftly as we could.",
            "speak;Eirika;Tana is here?|Franz, we must hurry!",
            "speak;Franz;Understood!",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Franz",
            "remove_talk;Eirika;Franz"
        ],
        "nid": "1 EirikaFranzTalk"
    },
    {
        "name": "EnemyTurn1",
        "trigger": "enemy_turn_change",
        "level_nid": "1",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Breguet;Left",
            "speak;Breguet;Hm? Is that the princess of Renais?|Ha ha! It really is my lucky day! Fame and fortune ride to meet me!|Move on, you slugs!{br}Bring that girl to me!",
            "remove_portrait;Breguet"
        ],
        "nid": "1 EnemyTurn1"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Setup",
            "game_var;_convoy;True",
            "add_talk;Eirika;Ross",
            "add_talk;Ross;Garcia",
            "show_layer;PrevVillage;immediate",
            "remove_group;Bandits1;immediate",
            "remove_unit;Vanessa;immediate",
            "remove_group;BlueTeam;immediate",
            "remove_group;RossGarcia;immediate",
            "remove_group;BanditReinforcements;immediate",
            "# Money making",
            "change_background;Bedroom",
            "transition;Open",
            "give_money;5000",
            "transition;Close",
            "# Show chapter title",
            "chapter_title",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Eirika;Left;no_block",
            "add_portrait;Vanessa;FarRight;no_block",
            "add_portrait;Moulder;MidRight",
            "speak;Eirika;Seth has mapped out a route for us.|We'll travel south of Renais and pass through Serafew into Grado territory.",
            "speak;Moulder;Hmm...{br}That would seem a sensible plan.|Assuming, of course, that we can avoid any run-ins with Grado soldiers...",
            "speak;Vanessa;Princess Eirika, may I have your leave to scout ahead?|From the sky, I'll have a better chance of spotting any nearby troops.",
            "speak;Moulder;We're yours to command, Your Higness. Will you give your permission?",
            "speak;Eirika;Yes, of course.|Keep an eye out for enemy bowmen though, Vanessa.",
            "speak;Vanessa;Yes, Your Higness, I shall.|I shall prove myself worthy of the honor of your trust.",
            "remove_portrait;Vanessa",
            "speak;Eirika;She seems very...sincere.",
            "speak;Moulder;Sincere... Yes, quite.",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Moulder",
            "transition;Close",
            "end_skip",
            "change_background",
            "# Transition to Bandit conversation",
            "transition;Open",
            "add_unit;Vanessa;1,0;immediate",
            "move_unit;Vanessa;7,4",
            "add_group;Bandits1;14,8;immediate;stack",
            "move_group;Bandits1;Bandits1;no_follow",
            "flicker_cursor;Bone",
            "add_portrait;Bone;MidRight",
            "speak;Bone;Hey, boss! We've found more villages ripe for the picking.",
            "add_portrait;Bazba;FarLeft",
            "speak;Bazba;One, two, three...{br}Ha ha ha! I love a good war!|With all those soldiers preoccupied, we're free to pillage as we please!|Right, Bone--you're in charge.|Grab everything that's not nailed down and bring it to the hideout.",
            "speak;Bone;I'm on it.",
            "multi_remove_portrait;Bazba;Bone",
            "move_unit;BoneBuddy;14,10;no_follow",
            "remove_unit;BoneBuddy;immediate",
            "# Transition to Ross and Garcia conversation",
            "flicker_cursor;12,3",
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Garcia;Right;no_block",
            "add_portrait;Ross;FarLeft",
            "move_portrait;Ross;Left",
            "speak;Ross;Dad!{br}Bandits approaching!",
            "speak;Garcia;Hmmm...|I'm getting you out of here, Ross. You stay close to me!",
            "transition;Close",
            "# Transition to Bone leaving and TopBandit destroying the village",
            "change_background",
            "transition;Open",
            "flicker_cursor;Bone",
            "add_portrait;Bone;Right",
            "speak;Bone;Let's start with that village there! Go to it, boys! It's all yours.|Cut down anyone fool enough to get in your way.|I'm heading west around the mountains to the other villages.",
            "remove_portrait;Bone",
            "end_skip",
            "move_unit;Bone;9,10;no_follow",
            "remove_unit;Bone;immediate",
            "move_unit;TopBandit;12,3",
            "hide_layer;PrevVillage",
            "sound;ItemBreak",
            "alert;The village was destroyed.",
            "add_group;RossGarcia;12,3;immediate;stack",
            "move_group;RossGarcia;Starting",
            "flicker_cursor;Ross",
            "transition;Close",
            "change_background;Forest",
            "transition;Open",
            "add_portrait;Ross;Left;no_block",
            "add_portrait;Garcia;Right",
            "bop_portrait;Ross",
            "speak;Ross;Unnnng!",
            "speak;Garcia;Ross? What is it? What's wrong?",
            "expression;Ross;Smile",
            "speak;Ross;It's nothing! It's just a scratch!|You're a warrior, Dad, and I am your son. I won't be beaten so easily.",
            "expression;Ross;NoSmile",
            "speak;Garcia;Don't risk yourself so foolishly...{br}We need to get you some help.|Please! Someone help my son!",
            "transition;Close",
            "change_background",
            "transition;Open",
            "add_group;BlueTeam;0,0;immediate;stack",
            "move_group;BlueTeam;Starting",
            "end_skip",
            "flicker_cursor;Vanessa",
            "add_portrait;Vanessa;FarLeft",
            "speak;Vanessa;Ah! This looks serious.|I must report back to Priness Eirika at once.",
            "remove_portrait;Vanessa",
            "move_unit;Vanessa;2,3",
            "flicker_cursor;Vanessa",
            "add_portrait;Vanessa;OffscreenRight;immediate",
            "add_portrait;Eirika;Left",
            "move_portrait;Vanessa;MidRight",
            "speak;Vanessa;I have bad news.|The village to the east is under attack by bandits.",
            "speak;Eirika;Bandits?!",
            "add_portrait;Moulder;FarRight",
            "speak;Moulder;We have arrived at our first dilemma.|We must move quickly and attract as little attention as possible, but...",
            "speak;Eirika;But I cannot stand by and watch innocents be harmed.|Vanessa, how fare the villagers?",
            "speak;Vanessa;I spotted one injured person.{br}He appeared to be just a child.",
            "speak;Eirika;Father Moulder, can your staff help him?",
            "speak;Moulder;Well, yes, I can heal his injuries with my staff, but...|I cannot do it from here. He's too far away. I must be near him.",
            "speak;Vanessa;Princess, please leave this to me.|I shall bring the boy here.",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Moulder;no_block",
            "remove_portrait;Vanessa",
            "flicker_cursor;Moulder",
            "add_portrait;Moulder;Right;no_block",
            "add_portrait;Vanessa;Left",
            "speak;Moulder;All right, Vanessa. It's up to you.",
            "speak;Vanessa;Very well. I'm off.",
            "remove_portrait;Vanessa",
            "remove_portrait;Moulder",
            "move_unit;Vanessa",
            "# Add the two enemy units back",
            "add_unit;Bone;;immediate",
            "add_unit;BoneBuddy;;immediate",
            "set_current_hp;Ross;5"
        ],
        "nid": "2 Intro"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Iron Lance,Slim Lance,Iron Axe",
            "transition;Open"
        ],
        "nid": "2 Armory"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Steel Sword,Iron Lance,Slim Lance,Steel Lance,Iron Axe,Steel Axe,Iron Bow,Steel Bow",
            "transition;Open"
        ],
        "nid": "5 Armory"
    },
    {
        "name": "Vendor",
        "trigger": "Vendor",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Heal,Vulnerary,Fire,Shine;Vendor",
            "transition;Open"
        ],
        "nid": "5 Vendor"
    },
    {
        "name": "Village1Eirika",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village1' and unit.nid == 'Eirika'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Woman1;Left;no_block",
            "add_portrait;Selena;Right",
            "speak;Woman1;This is terrible... What are we going to do? Those bandits are so close.|If we can't find some way to protect ourselves, the village is doomed.",
            "speak;Selena;Perhaps...",
            "remove_portrait;Woman1",
            "add_portrait;Eirika;Left",
            "speak;Eirika;People, listen to me! You must close the village gates immediately.|Hurry, before the bandits arrive!",
            "speak;Selena;Who are you? You aren't from one of the neighboring towns, are you.|And your weapons give you away... You're no peasant.",
            "speak;Eirika;I am Er...|My name is Erina.{br}I'm a mercenary.",
            "speak;Selena;A mercenary named Erina, is it?|There's more to you than that, I feel. But don't worry--it's none of my affair.|I haven't told you who I am yet, have I?{br}I am Selena, a general in Grado's army.",
            "speak;Eirika;Ah!",
            "speak;Selena;Is something wrong?",
            "speak;Eirika;No...uh, nothing.",
            "speak;Selena;It looks like these villagers have some bandit troubles.|I would like to help, but I have orders...|I'm to leave for the capital immediately, and I cannot stay.|You're armed, and you claim to be a mercenary. Will you help them?",
            "speak;Eirika;Um...",
            "speak;Selena;Is there a problem?",
            "speak;Eirika;No! Of course I'll help them!|It's just... You're one of Grado's generals... Why...",
            "speak;Selena;These aren't soldiers.{br}They're people.|Should they suffer because their leaders fight?|I've petitioned your aid. Take this as payment.",
            "remove_portrait;Selena",
            "speak;Eirika;......",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "transition;Open",
            "give_item;Eirika;Red Gem",
            "has_traded;{unit}"
        ],
        "nid": "2 Village1Eirika"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village1' and unit.nid != 'Eirika'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;{unit};Left;no_block",
            "add_portrait;Selena;Right",
            "speak;Selena;And who are you? You don't look like one of the local peasantry.{w}{clear}As you can see, these villagers have some bandit troubles.|I would like to help, but I have orders to follow...|I am required to quit this area at once.|I would ask you to aid them in this fight.|I will pay for your trouble, of course.",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "transition;Open",
            "give_item;{unit};Red Gem",
            "has_traded;{unit}"
        ],
        "nid": "2 Village1"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Tethys;Left",
            "speak;Tethys;Oh, hello.{br}Did you come to see me dance?|I'm sorry, but I just finished a few moments ago.{w}{clear}Oh, by the way...Would you be interested in one of these items?|A wealthy patron left me a small ransom in gifts after watching my performance.|You can sell one for gold if you'd like or use them to improve your skills.|I simply cannot carry all of this by myself, so please, take this one.|Wealth is useless if you can't use it to bring happiness to others, right?| Thanks for dropping by. Perhaps we'll meet again someday.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Dragonshield",
            "show_layer;Village1",
            "has_traded;{unit}"
        ],
        "nid": "5 Village1"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Man2;Left",
            "speak;Man2;Life in Serafew's been harder since the Grado occupation force took over here.|Serafew's got Renais citizens as well as Grado, but it's been hardest on us.|They've singled out families from Renais for the most awful atrocities.{w}{clear}Please, traveler, take this sword.|It's an armorslayer. It'll cut through even the strongest armor.|Take it and strike down that blackheart, Saar.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Armorslayer",
            "show_layer;Village2",
            "has_traded;{unit}"
        ],
        "nid": "5 Village2"
    },
    {
        "name": "Village3",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;OldMan1;Left",
            "speak;OldMan1;In my youth, I was a knight of some renown, I'll have you know.|I've even crossed blades with one of Grado's most famous generals, I have.|Ah, but I'm an old man now...|I'm starting to worry... What if I die without passing on my techniques?|So I decided to write down what I've learned in a book. I have it here.|You seem like a strong warrior. I'd be honored if you would accept it.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Secret Book",
            "show_layer;Village3",
            "has_traded;{unit}"
        ],
        "nid": "5 Village3"
    },
    {
        "name": "Village4",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village4'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;Amelia;Left",
            "speak;Amelia;Hope everyone's well back home in Silva. Just a bit more, and I'll be in the empire.|Let's see, I've got vulneraries, antitoxins...|Oh! And I can't let myself forget torches for when it gets dark.|Yep! I'm all set!{br}Now I just need to get to the capital.|I'll be the finest soldier the Grado army's ever seen! I swear it!",
            "remove_portrait;Amelia",
            "add_portrait;{unit};Right",
            "speak;{unit};Hm... What's this?",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Torch",
            "show_layer;Village4",
            "has_traded;{unit}"
        ],
        "nid": "5 Village4"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "4",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;{unit};Left;no_block",
            "add_portrait;Man1;Right",
            "speak;Man1;Do you see that old snag to the south of here?|Bet it would make a handy bridge if you could knock it over.|Take a weapon to it and give it a few good whacks. That should do it.|Here, take this and give it a try.{br}It ought to do the trick.",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "transition;Open",
            "give_item;{unit};Iron Axe",
            "has_traded;{unit}"
        ],
        "nid": "4 Village1"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "4",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Lute;Left",
            "# Artur Convo",
            "if;unit.nid == 'Artur'",
            "speak;{unit};Lute, help has arrived.",
            "speak;Lute;......",
            "speak;{unit};Lute?",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.",
            "speak;{unit};Well, I should hope not! I wanted you to know help has arrived.|Please be patient a bit longer...",
            "speak;Lute;No, no. I insist on joining you in combat.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "# Eirika Convo",
            "elif;unit.nid == 'Eirika'",
            "speak;{unit};Who are you?",
            "speak;Lute;......",
            "speak;{unit};Um...",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.",
            "speak;{unit};No, I'm not{br}Are you from around here?|There are still monsters about, so you should stay in--",
            "speak;Lute;No, no. I insist on joining you in combat.|My name is Lute. I'm a mage of superior wisdom and rare ability.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "speak;{unit};What an odd girl...",
            "# Other Convo",
            "else",
            "speak;Lute;......",
            "speak;{unit};Hm?",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.|I've decided to join you in battle now.|My name is Lute. I'm a mage of superior wisdom and rare ability.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "end",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "# Recruit Lute",
            "change_team;Lute;player",
            "add_unit;Lute;1,12;immediate;closest",
            "transition;Open",
            "has_traded;{unit}"
        ],
        "nid": "4 Village2"
    },
    {
        "name": "EirikaRossTalk",
        "trigger": "on_talk",
        "level_nid": "2",
        "condition": "unit.nid == 'Eirika' and unit2.nid == 'Ross'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Eirika;Left;no_block",
            "add_portrait;Ross;Right",
            "speak;Ross;Hey, listen! My village is being attacked by bandits.|My name's Ross.|Come on! You have to help me wipe those thugs out!",
            "speak;Eirika;All right, just... Just take a deep breath and calm down, Ross.|Leave the villages to use.{br}We'll drive off the bandits.|Seth, take the boy somewhere safe.",
            "bop_portrait;Ross",
            "speak;Ross;No! Wait! I'm going to fight, too!",
            "speak;Eirika;But...",
            "speak;Ross;My father is out there all alone, fighting those bandits.|I've got to get back to him as quickly as possible!|I'm the son of the great Garcia!|As long as I have my axe, no bandit will ever defeat me!",
            "speak;Eirika;All right, I can see you're not going to be swayed...|But you must promise you will stay close to us.",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Ross",
            "change_team;Ross;player"
        ],
        "nid": "2 EirikaRossTalk"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Woman2;Right;no_block",
            "add_portrait;{unit};Left",
            "speak;Woman2;The most wonderful man rescued me.|He was dressed like a mercenary, but he had an air of elegance about him...|He gave me this elixir. I'm sure it will help you on the battlefield.",
            "transition;Close",
            "show_layer;Village2",
            "change_background",
            "transition;Open",
            "give_item;{unit};Elixir",
            "has_traded;{unit}"
        ],
        "nid": "2 Village2"
    },
    {
        "name": "Village3",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Man3;Right;no_block",
            "add_portrait;{unit};Left",
            "speak;Man3;Hm? What is it? What's all the ruckus?|What? B-bandits?!|Spread the word, everyone!{br}Close the village gates!|Thank you for your warning.{br}Please, accept this small token.",
            "transition;Close",
            "show_layer;Village3",
            "change_background",
            "transition;Open",
            "give_item;{unit};Pure Water",
            "has_traded;{unit}"
        ],
        "nid": "2 Village3"
    },
    {
        "name": "RossGarciaTalk",
        "trigger": "on_talk",
        "level_nid": "2",
        "condition": "unit.nid == 'Ross' and unit2.nid == 'Garcia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Ross;Left;no_block",
            "add_portrait;Garcia;Right",
            "bop_portrait;Ross",
            "speak;Ross;Dad!",
            "speak;Garcia;Ross?! Boy, what did I tell you!? What are you doing here?|Don't worry about me. Hurry up and get yourself to safety!",
            "speak;Ross;Did you really think I could just run away while you fight, Dad?|You taught me that fighters fight for what's important to them!|There's no way I'm leaving!{br}I'm fighting just like you!",
            "speak;Garcia;Ross...|All right, listen to me. We'll cut our way out of here together!",
            "remove_portrait;Ross;no_block",
            "remove_portrait;Garcia",
            "change_team;Garcia;player"
        ],
        "nid": "2 RossGarciaTalk"
    },
    {
        "name": "NatashaJoshuaTalk",
        "trigger": "on_talk",
        "level_nid": "5",
        "condition": "unit.nid == 'Natasha' and unit2.nid == 'Joshua'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Natasha;Left;no_block",
            "add_portrait;Joshua;Right",
            "speak;Natasha;You...You're that man I met...|Are you here to capture me? You've been hired to silence me, haven't you...",
            "speak;Joshua;Yeah, Grado's paying the bill.{br}They want you dead, you know?|But don't feel bad. It's not personal.",
            "speak;Natasha;Wait, please...|It doesn't matter what happens to me, but you must hear my words.|The emperor of Grado is changed.{br}He is not the man he once was.|The other nations must be warned before he extinguishes all light from out lands.",
            "speak;Joshua;Hey, no offense, but I'm just a mercenary. I don't care about Grado or its emperor.|Everything you say may be true, or it may be lies. I don't care either way.",
            "speak;Natasha;But that's...",
            "speak;Joshua;Even so...Killing a beautiful lady like you would leave a bad taste in my mouth.{w}{clear}Tell me, do you like to gamble?",
            "speak;Natasha;What?!",
            "speak;Joshua;Gambling's what I live for. Even when I lose, I never want to stop.|Let's have us a little wager.{br}If you win, I'll believe you.|Heads or tails, you call it.",
            "speak;Natasha;You can't...{br}This is no time for games...",
            "speak;Joshua;Would you rather I get on with the job I was hired for?",
            "speak;Natasha;......{br}Um, heads...|No! Tails!",
            "speak;Joshua;All right. So I'm heads, and you're tails.|Here we go.|... ... ...",
            "speak;Natasha;......{br}Which...Which is it?",
            "speak;Joshua;What do you know?!{w}{clear}It's tails. You win. Figures. I haven't won anything all day.|Well, Lady Luck has spoken.{br}Guess I'm on your side now.",
            "speak;Natasha;Are you serious?",
            "speak;Joshua;Yeah. Sure, I might cheat, but I never worm out of a bet. It's a rule of mine.",
            "speak;Natasha;Oh, thank heaven! Thank you, blessed light, for your protection!",
            "speak;Joshua;I got nothing against heaven, but I'm right here if you want someone to thank...|No? Well, get behind me then. I've got to take care of these fools.",
            "remove_portrait;Natasha;no_block",
            "remove_portrait;Joshua",
            "change_team;Joshua;player"
        ],
        "nid": "5 NatashaJoshuaTalk"
    },
    {
        "name": "Turn3",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;1,9",
            "spawn_group;BanditReinforcements;West;BanditReinforcements"
        ],
        "nid": "2 Turn3"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# On enemy's second turn, they start moving",
            "change_ai;104;PursueVillage",
            "change_ai;105;Pursue",
            "change_ai;BoneBuddy;PursueVillage",
            "change_ai;TopBandit;PursueVillage"
        ],
        "nid": "2 Turn2"
    },
    {
        "name": "FightBone",
        "trigger": "combat_start",
        "level_nid": "2",
        "condition": "(unit.nid == \"Bone\" and unit2.team == 'player') or (unit2.nid == \"Bone\" and unit.team == 'player')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bone;Left",
            "speak;Bone;Wait a minute!{br}Wh-who are you?",
            "remove_portrait;Bone"
        ],
        "nid": "2 FightBone"
    },
    {
        "name": "DeathBone",
        "trigger": "unit_death",
        "level_nid": "2",
        "condition": "unit.nid == \"Bone\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bone;Left",
            "speak;Bone;Urgh... Blast...",
            "remove_portrait;Bone"
        ],
        "nid": "2 DeathBone"
    },
    {
        "name": "DeathBazba",
        "trigger": "unit_death",
        "level_nid": "3",
        "condition": "unit.nid == \"Bazba\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bazba;Left",
            "speak;Bazba;I'm the...mighty...Bazba...{br}This...ain't--",
            "remove_portrait;Bazba"
        ],
        "nid": "3 DeathBazba"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.check_alive(\"Garcia\") and game.check_alive(\"Ross\")",
            "transition;Close",
            "# Just in case Garcia hasn't been recruited yet",
            "change_team;Garcia;player",
            "change_team;Ross;player",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Seth;MidLeft;no_block",
            "add_portrait;Eirika;FarLeft;no_block",
            "add_portrait;Garcia;Right",
            "speak;Garcia;You saved my son.{br}I owe you my thanks.",
            "speak;Eirika;It's not necessary...",
            "speak;Seth;...Hold on a moment...|Aren't you...the great Garcia?{br}You fought for Renais, didn't you?;low_priority",
            "speak;Garcia;......",
            "speak;Eirika;Seth, do you know this man?",
            "speak;Seth;He was a troop commander for Renais until around ten years ago.|When I was a recruit, the soldiers used to tell so many tales about him.|They called him a daring and fearless fighter for Renais.{w}{clear}Master Garcia, you must know the peril our homeland faces right now...|Can we impose upon you to lend your strength to Renais once again?;low_priority",
            "speak;Garcia;...I'm sorry. I'm retired now.|I'm not a soldier anymore. It's... a decision I made long ago.",
            "speak;Seth;Master Garcia...;low_priority",
            "speak;Garcia;...When I was a soldier, I lived my life fighting for my country's honor.|I left no time for my family.|I spent my life fighting for faceless, uncaring nobles.{w}{clear}When my wife fell ill and died, I met the child she had left behind...|At that moment, I finally     realized what my duty had cost me.",
            "speak;Eirika;......",
            "speak;Garcia;I stood at my wife's grave and promised her I would be a father to our son.|I'm done with armies. I'm done with fighting, except to protect my son.|I've no regrets. I'm the boy's father.",
            "speak;Seth;......;low_priority",
            "speak;Seth;Princess, are you injured?",
            "remove_portrait;Eirika",
            "remove_portrait;Seth",
            "add_portrait;Ross;OffscreenLeft;immediate",
            "move_portrait;Ross;Left",
            "speak;Ross;You...you blasted fool!|Father, what's all this nonsense I'm hearing?",
            "speak;Garcia;Ross!",
            "speak;Ross;If you're not going, then I will!|I'm a fighter!{br}I know I can do this!",
            "move_portrait;Garcia;MidRight",
            "speak;Garcia;Ross, what are you saying?{br}I...",
            "speak;Ross;Dad, please! Listen to me!|I respect you more than any other man in the world.|I know you gave up being a soldier for me. I know that!|But how can you throw away such a big part of yourself?|You're a warrior at heart! You can't give that up and be happy!",
            "speak;Garcia;......",
            "speak;Ross;Look at me, Dad!{br}Have you seen me fight?|I'm not a child anymore.{br}I'm a warrior, like you.|You're free to worry, but I can survive on my own.",
            "speak;Garcia;...Ross.",
            "bop_portrait;Ross",
            "speak;Ross;You want to challenge me, Father?|I'm a fighter! The best in all of Ide!|I'm not going to lose to you!{br}I'm not going to lose to anyone!",
            "expression;Ross;Smile",
            "expression;Garcia;Smile",
            "speak;Garcia;...You're right.|You're a good soldier, Ross.",
            "remove_portrait;Ross",
            "add_portrait;Eirika;MidLeft;no_block",
            "add_portrait;Seth;FarLeft",
            "speak;Garcia;Sir Seth...|If these old bones of mine can still serve, I'd like to join you.",
            "add_portrait;Ross;FarRight",
            "speak;Ross;Dad...",
            "speak;Garcia;Looks like my boy grew up while I wasn't looking...|He's tougher than I thought. He doesn't need my help.|I've raised him as best I could, but he's right.|I've nothing to fear. I should fight. I will fight.",
            "speak;Ross;Dad!",
            "remove_portrait;Ross;no_block",
            "remove_portrait;Garcia;no_block",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "# If either die, they don't join your party",
            "else",
            "change_team;Garcia;other",
            "change_team;Ross;other",
            "end",
            "transition;Close",
            "change_background;TownSunset",
            "transition;Open",
            "add_portrait;Eirika;Left;no_block",
            "add_portrait;Man2;Right",
            "speak;Man2;Thank you so much for your help. Please stay the night and rest...",
            "speak;Eirika;We would if we could, but we have much to do and far to travel.|Your safety is reward enough.",
            "speak;Man2;Ah, well...|My, that is a splendid bracelet you're wearing.",
            "speak;Eirika;Thank you. My father gave this to me.",
            "speak;Man2;It's a wonderful gift.|But you should be careful, wearing such a valuable item so openly.|Since Renais was invaded, things have become so dangerous around here.|There are gold-hungry thieves and bandits everywhere.{w}{clear}The most wicked ae Bazba's Bandits. They are...cruel beyond words.|If you have something they want, your life is worth less than nothing.|Just the other day they assaulted some travelers and... Oh, it was awful.",
            "speak;Eirika;I...I can't believe such things...",
            "speak;Man2;Oh, Renais is finished, mark my words.{br}The Grado Empire's stolen our future.|Our only hope against them was that Prince Ephraim would prevail, but...|Rumor has it that he's on the verge of being crushed by Grado's vast numbers.|These are dark days. Travel with care.",
            "speak;Eirika;......",
            "# Fade to night",
            "transition;Close;750",
            "change_background;ForestDark",
            "transition;Open;750",
            "add_portrait;Eirika;MidLeft",
            "speak;Eirika;Ephraim...",
            "transition;Close;2000;248,248,248",
            "change_background;CastleSepia",
            "transition;Open;2000;248,248,248",
            "location_card;3 years ago",
            "wait;2000",
            "add_portrait;EphraimSepia;Left;no_block",
            "add_portrait;EirikaSepia;Right",
            "speak;EphraimSepia;It's time to start.{br}Are you ready, Eirika?",
            "speak;EirikaSepia;Yes, Ephraim.{br}Let's begin.",
            "speak;EphraimSepia;Tell me, though: why do you want me to teach you to fight?|I thought you didn't care for violence...",
            "speak;EirikaSepia;I do not like uncivilized behaviour.|I think one can solve one's problems without fighting.|And yet...",
            "speak;EphraimSepia;And yet what?",
            "speak;EirikaSepia;I've always relied on you to protect me, Brother.|I would rather not be such a burden to you in the future.|So, I thought maybe I should learn to protect myself...",
            "speak;EphraimSepia;I'm your brother. Brothers are supposed to protect their sisters.|It's nothing for you to worry about. It's no cause for concern.",
            "speak;EirikaSepia;Yes, but...|I am your sister. Sisters are supposed to worry about their brothers.{w}{clear}So I would like to learn something of swordplay, if only a little.|And maybe, someday, I can protect you in your time of need...|So please, Ephraim.",
            "speak;EphraimSepia;All right, all right. How could I say no?|Honestly, once you get an idea into your head, that's it. I might as well give in.{w}{clear}It's agreed. I'll teach you, but I won't hold back because you're my sister.|And I want no complaining once we've starting, Eirika.",
            "speak;EirikaSepia;Complain? Me? Never!",
            "transition;Close;2000;248,248,248",
            "change_background;ForestDark",
            "transition;Open;2000;248,248,248",
            "add_portrait;Eirika;MidLeft",
            "speak;Eirika;......",
            "# Colm arrives",
            "add_portrait;Colm;OffscreenLeft;immediate",
            "move_portrait;Colm;FarLeft",
            "speak;Colm;Oops! Beg your pardon.",
            "bop_portrait;Eirika",
            "speak;Eirika;Hey!",
            "move_portrait;Colm;OffscreenRight",
            "remove_portrait;Colm;immediate",
            "wait;500",
            "add_portrait;Seth;Right",
            "speak;Seth;Princess, are you all right?",
            "speak;Eirika;Y-yes... Someone bumped into me is all. I was jarred.",
            "speak;Seth;Hm?{br}Your Higness, where is your bracelet?",
            "speak;Eirika;My bracelet?{br}It's...gone.|Where could it be?{br}Did that man--",
            "speak;Seth;I'll find him!",
            "speak;Eirika;Don't worry about it, Seth.|That bracelet was a gift from my father, but Ephraim needs our help.|I can't let sentimentality get in the way of my duty.",
            "speak;Seth;No, Princess... We must retrieve your bracelet regardless of cost.|You cannot lose it. Let's go.{br}We must hurry.",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "transition;Close;250;0,0,0"
        ],
        "nid": "2 Outro"
    },
    {
        "name": "Test",
        "trigger": "level_start",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#level_var;_fog_of_war;1",
            "#level_var;_fog_of_war_radius;3",
            "#level_var;_ai_fog_of_war_radius;5",
            "add_lore;Simon",
            "add_base_convo;Dreams of Home",
            "add_weather;night",
            "game_var;_supports;True",
            "enable_turnwheel;1",
            "set_current_mana;Simon;10",
            "give_item;Simon;Heroic_Imitation;no_banner",
            "give_skill;Safado;Chameleon_stance;;persistent",
            "give_skill;Simonyoung;Guaranteed_Crit;;no_banner",
            "give_item;Simonyoung;Iron_Sword;;no_banner",
            "give_skill;Aka;Poisoned_Blade;;no_banner",
            "set_current_hp;Simon;2",
            "promote;Altina;Sage;silent",
            "promote;Hilstara;General;silent",
            "set_current_hp;Hilstara;1",
            "give_item;Monica;Restore;;no_banner",
            "give_wexp;Monica;Staff;100;no_banner",
            "give_skill;Aka;Revive_effect;;no_banner",
            "give_skill;Orcent;Careful_Positioning;;no_banner",
            "give_skill;Simon;Incubus_Assault;;no_banner",
            "give_skill;Simon;Support_Allies;;no_banner",
            "give_skill;Simon;Commanding_Presence;;no_banner",
            "#trigger_script;Trigger",
            "base;Clearing",
            "#music;Attack;2000",
            "#wait;5000",
            "#music;Armory;2000",
            "#wait;5000",
            "#music;Attack;2000",
            "#wait;5000",
            "#music;None;2000",
            "#wait;5000",
            "#music;Attack;2000",
            "#wait;5000"
        ],
        "nid": "DEBUG Test"
    },
    {
        "name": "DestroyVillage1",
        "trigger": "Destructible",
        "level_nid": "2",
        "condition": "region.nid == 'DestroyVillage1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;4,2",
            "show_layer;Ruin1",
            "wait;500"
        ],
        "nid": "2 DestroyVillage1"
    },
    {
        "name": "DestroyVillage1",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin1",
            "wait;500"
        ],
        "nid": "5 DestroyVillage1"
    },
    {
        "name": "DestroyVillage2",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin2",
            "wait;500"
        ],
        "nid": "5 DestroyVillage2"
    },
    {
        "name": "DestroyVillage3",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin3",
            "wait;500"
        ],
        "nid": "5 DestroyVillage3"
    },
    {
        "name": "DestroyVillage4",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village4'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin4",
            "wait;500"
        ],
        "nid": "5 DestroyVillage4"
    },
    {
        "name": "DestroyVillage2",
        "trigger": "Destructible",
        "level_nid": "2",
        "condition": "region.nid == 'DestroyVillage2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;7,2",
            "show_layer;Ruin2",
            "wait;500"
        ],
        "nid": "2 DestroyVillage2"
    },
    {
        "name": "DestroyVillage3",
        "trigger": "Destructible",
        "level_nid": "2",
        "condition": "region.nid == 'DestroyVillage3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;1,12",
            "show_layer;Ruin3",
            "wait;500"
        ],
        "nid": "2 DestroyVillage3"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "DEBUG",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_team;Bone;player",
            "game_var;EirikaSupport;True"
        ],
        "nid": "DEBUG Turn2"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Iron Lance,Slim Lance,Iron Axe;armory",
            "transition;Open"
        ],
        "nid": "DEBUG Armory"
    },
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "2 Rout"
    },
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "4",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "4 Rout"
    },
    {
        "name": "Rout (1)",
        "trigger": "combat_end",
        "level_nid": "DEBUG",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "DEBUG Rout (1)"
    },
    {
        "name": "Door1",
        "trigger": "Door",
        "level_nid": "DEBUG",
        "condition": "region.nid == 'Door1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "give_item;{unit};Iron_Sword"
        ],
        "nid": "DEBUG Door1"
    },
    {
        "name": "Chest1",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Javelin"
        ],
        "nid": "3 Chest1"
    },
    {
        "name": "Chest4",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest4'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest4",
            "give_item;{unit};Iron Sword"
        ],
        "nid": "3 Chest4"
    },
    {
        "name": "Chest3",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest3",
            "give_item;{unit};Hand Axe"
        ],
        "nid": "3 Chest3"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest2",
            "give_item;{unit};Iron Lance"
        ],
        "nid": "3 Chest2"
    },
    {
        "name": "Door1",
        "trigger": "Door",
        "level_nid": "3",
        "condition": "region.nid == 'Door1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door1"
        ],
        "nid": "3 Door1"
    },
    {
        "name": "Door2",
        "trigger": "Door",
        "level_nid": "3",
        "condition": "region.nid == 'Door2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door2"
        ],
        "nid": "3 Door2"
    },
    {
        "name": "Door3",
        "trigger": "Door",
        "level_nid": "3",
        "condition": "region.nid == 'Door3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door3"
        ],
        "nid": "3 Door3"
    },
    {
        "name": "Breakable1",
        "trigger": "unit_death",
        "level_nid": "3",
        "condition": "unit.nid == 'Wall1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Breakable1"
        ],
        "nid": "3 Breakable1"
    },
    {
        "name": "Snag",
        "trigger": "unit_death",
        "level_nid": "4",
        "condition": "unit.nid == 'Snag'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Snag"
        ],
        "nid": "4 Snag"
    },
    {
        "name": "Breakable2",
        "trigger": "unit_death",
        "level_nid": "3",
        "condition": "unit.nid == 'Wall2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Breakable2"
        ],
        "nid": "3 Breakable2"
    },
    {
        "name": "Breakable3",
        "trigger": "unit_death",
        "level_nid": "3",
        "condition": "unit.nid == 'Wall3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Breakable3"
        ],
        "nid": "3 Breakable3"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_talk;Neimi;Colm",
            "remove_group;PlayerTeam;immediate",
            "# Actual dialogue content",
            "chapter_title",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Seth;Left;no_block",
            "add_portrait;Eirika;Right",
            "speak;Seth;The local villagers tell me that Bazba's Bandits keep their lair nearby.|A few of them saw a lad matching the description of our bracelet thief.|It seems a fair guess that the youth is one of these bandits.",
            "speak;Eirika;Bandits... Here in Renais, our homeland. I had no idea...|Burning our villages... Stealing from our people with no fear of reprisal?",
            "speak;Seth;It wasn't always like this. The knights used to protect the citizenry...|However, with Renais in ruins and her army tattered, law and order are hard to find.|It doesn't look like the Grado army is interested in maintaining order here.|If nothing changes, Renais will continue this sad plunge into savagery.",
            "speak;Eirika;......",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Eirika",
            "transition;Close",
            "# New background",
            "change_background;Forest",
            "transition;Open",
            "add_portrait;Seth;FarRight;no_block",
            "add_portrait;Eirika;MidRight",
            "add_portrait;Neimi;OffscreenLeft;immediate",
            "speak;Neimi;Uh....Hello?",
            "move_portrait;Neimi;FarLeft",
            "speak;Neimi;Pardon me for asking...|but are you all some sort of...mercenary troop?",
            "move_portrait;Neimi;Left",
            "speak;Eirika;Why do you ask?",
            "move_portrait;Neimi;MidLeft",
            "speak;Neimi;P-p-please, you have to help Colm. You have to!|I told him it was too dangerous, but he wouldn't listen to me!",
            "speak;Eirika;Please, you must calm yourself. Start at the beginning, and speak slowly.",
            "speak;Neimi;All right...Sniff.|I'm Neimi.|I'm from... I used to be from a village named Lark...|Except the village is gone.",
            "speak;Eirika;Gone? What do you mean?",
            "speak;Neimi;Bazba's Bandits burned it down.{br}Only Colm and I escaped.|The other villagers...{br}The bandits attacked them and...",
            "speak;Eirika;......",
            "speak;Seth;Neimi, what are you doing here?",
            "speak;Neimi;Bazba's Bandits... They have a hideout here in these mountains.|That's where Colm...|Um, Colm's my...uh...We've known each other since we were kids.|He went to steal back something the bandits took from me...",
            "speak;Eirika;He went alone? That's a very dangerous thing...",
            "speak;Neimi;Yes, I know. Th-that's what I told him, but he wouldn't listen to me.|If I lose Colm, too, I don't know... I...I'll... sniff...",
            "speak;Eirika;Wait, please don't cry.|Don't worry. We'll find your friend and see that he's not harmed.",
            "speak;Neimi;Really? Really and truly?{br}Oh, thank you! Thank you!!!|I... I don't have much money, but.. I'll do anything to help.",
            "speak;Seth;Your Highness? What will it be?",
            "speak;Eirika;If the thief we're after has gone to the bandits' lair as well...|Well, it seems as though we share a common cause with Neimi.|She is a citizen of Renais, after all.|And isn't it our duty to defend our countrymen?|I'm only sad that we weren't here to protect her friends and neighbors...|So, yes, I feel we must help her.",
            "speak;Seth;Very well. Neimi, I trust you can lead the way?",
            "speak;Neimi;Er, yes...{br}It's this way.",
            "remove_portrait;Neimi;no_block",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Eirika",
            "transition;Close",
            "change_background",
            "end_skip",
            "transition;Open",
            "# Move player team onto map",
            "move_cursor;0,11",
            "add_group;PlayerTeam;0,11;immediate;stack",
            "move_group;PlayerTeam;Starting",
            "flicker_cursor;Neimi",
            "add_portrait;Neimi;Left;no_block",
            "add_portrait;Seth;Right",
            "speak;Neimi;Um... Is there anything I can do to help? I feel so...|When I was little I used to go hunting with my grandfather.|What I mean is I can--{br}I'm not bad with a bow.",
            "speak;Seth;Really?",
            "speak;Neimi;Uh-huh.",
            "speak;Seth;I see.|You should remain behind and protect Princess Eirika.",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Neimi",
            "transition;Close",
            "move_cursor;Bazba;immediate",
            "transition;Open",
            "flicker_cursor;Bazba",
            "add_portrait;Bazba;Right",
            "speak;Bazba;Hm. Not sure who's out there, but it looks like we've got guests.|Let's give 'em a warm welcome, lads.{br}You see a stranger, stick an axe in him!",
            "remove_portrait;Bazba"
        ],
        "nid": "3 Intro"
    },
    {
        "name": "Turn2",
        "trigger": "other_turn_change",
        "level_nid": "3",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_unit;Placeholder;immediate",
            "move_cursor;0,5",
            "add_unit;Colm;0,5",
            "flicker_cursor;Colm",
            "add_portrait;Colm;Left",
            "speak;Colm;And here we go!|Ha! And not a soul saw me. These bandits are easy picking.|I guess I might as well start with these chests here.",
            "move_unit;Colm;2,4"
        ],
        "nid": "3 Turn2"
    },
    {
        "name": "NeimiColmTalk",
        "trigger": "on_talk",
        "level_nid": "3",
        "condition": "unit1.nid == 'Neimi' and unit2.nid == 'Colm'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Neimi;Left;no_block",
            "add_portrait;Colm;Right",
            "speak;Neimi;C-Colm...",
            "bop_portrait;Colm",
            "speak;Colm;Neimi?!{br}What are you doing here?|I told you to wait for me, didnt I?",
            "speak;Neimi;I couldnt... Its too dangerous.|Cmon, lets go home.",
            "expression;Colm;Smile",
            "speak;Colm;We dont have a home! Dont you get it? Look, just leave everything to me.|I can take care of it in a flash, but I dont need a clumsy oaf like you tagging along.",
            "expression;Colm;NoSmile",
            "speak;Neimi;But...but...",
            "speak;Colm;Oh, this is ridiculous.|Well talk later. Dont leave my side, Neimi.",
            "speak;Neimi;I-- All right.",
            "remove_portrait;Neimi;no_block",
            "remove_portrait;Colm",
            "change_team;Colm;player"
        ],
        "nid": "3 NeimiColmTalk"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.check_alive('Neimi') and game.check_alive('Colm')",
            "# Just in case",
            "change_team;Colm;player",
            "transition;Close",
            "change_background;Ruins",
            "transition;Open",
            "add_portrait;Neimi;Left",
            "speak;Neimi;C-Colm....",
            "add_portrait;Colm;Right",
            "speak;Colm;What now? I told you not to worry.|I could've robbed these bandits blind on my own, thank you very much.",
            "speak;Neimi;I was...{br}worried...",
            "speak;Colm;H-Hold on! I'm sorry!{br}C'mon! Don't start bawling!",
            "speak;Neimi;Aaah...sniff...|No more...dangerous stuff... by yourself...",
            "speak;Colm;Fine, fine. I promise.|But you have to stop crying all the time. All right?",
            "speak;Neimi;Uh-huh...",
            "speak;Colm;Oh, yeah. Take a look at this.",
            "move_portrait;Colm;MidRight",
            "speak;Neimi;Hm?",
            "move_portrait;Neimi;MidLeft",
            "speak;Colm;I got your mirror back.|Remember how you cried when we left Lark? You thought you'd lost this.|I knew it was your mother's, and I knew those thugs had taken it.|So I went and got it back!|See what happens when you give me a job? Guaranteed results!",
            "expression;Neimi;CloseEyes",
            "speak;Neimi;Colm...|Aa...Waaah...{br}Colm...",
            "speak;Colm;Hey wh-why are you crying this time?|C'mon! Stop! Knock it off! Please, Neimi...",
            "# Seth appears",
            "add_portrait;Seth;FarLeft",
            "speak;Seth;...This is quite touching, but...|I think you'd best return Princess Eirika's bracelet to her now.",
            "remove_portrait;Neimi",
            "add_portrait;Neimi;FarRight",
            "move_portrait;Colm;MidLeft",
            "speak;Colm;Wh-what are you talking about?{br}Are you trying to say that I--",
            "move_portrait;Seth;Left",
            "bop_portrait;Colm",
            "speak;Colm;Whoa! Whoa there! Hold it! It's right here! Take it!",
            "move_portrait;Colm;MidRight",
            "speak;Seth;......|Tell me, boy, is this the path you've chosen for your life?|If this girl matters to you, you must quit this dark road.",
            "speak;Colm;Uh, yeah...Right.",
            "speak;Seth;We're leaving. Do not expect to be rescued again.|Farewell.",
            "speak;Colm;...Hey, wait!|Let us go with you. You can't just leave us here.",
            "speak;Seth;Pardon?",
            "speak;Colm;Neimi and I... We've got no home to return to.|No matter where we go, there's just gonna be more fighting.|You're mercenaries, right?{br}Well, then take us with you.|I'm a handy guy to have around. I know I can help you out.",
            "speak;Seth;I would prefer not, but I'll agree with Eirika's decision.|Our duty is a grave one however. We've no time to waste shepherding you.",
            "speak;Colm;That's fine with us.|You just wait--I promise you won't regret your decision.",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Colm;no_block",
            "remove_portrait;Neimi",
            "end_skip",
            "end",
            "transition;Close",
            "# Eirika and Seth talk",
            "change_background;CastleRuins",
            "transition;Open",
            "add_portrait;Eirika;Left;no_block",
            "add_portrait;Seth;Right",
            "speak;Seth;I retrieved your bracelet from the bandit's stronghold.|Here you are, Princess.",
            "speak;Eirika;Thank you, Seth.|You know...Father gave me this bracelet when I was a child.|It has only one match in the world, and my brother wears it.",
            "speak;Seth;Lady Eirika, you must take care never to lose that bracelet.|It is the proof that King Fado entrusted the future of Renais to you, his children.",
            "speak;Eirika;Seth...What is it you're not telling me?",
            "speak;Seth;...I apologize, Your Highness.|When the time comes, I will tell you what I know. Until then, I...",
            "speak;Eirika;I see.|If you tell me it must wait, then it can wait. I trust you.",
            "speak;Seth;Then we should get moving again.|We're safe from bandits for now, but I can't guarantee for how long.",
            "speak;Eirika;This... This is just the beginning, isn't it?|If we hope to free our homeland, it will take battle after battle...",
            "speak;Seth;I'm afraid so, Your Highness.|The day you and Prince Ephraim win back the freedom and honor of Renais will come.|But I fear it lies at the end of a long and treacherous road.",
            "speak;Eirika;I know. I must fight for that day.|In the names of all those I could not save, I'll lead us home.|Let's go. My brother awaits!",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "transition;Close;1000",
            "# Load submap",
            "end_skip",
            "change_tilemap;Grado Keep",
            "change_background",
            "transition;Open;1000",
            "location_card;Grado Keep",
            "flicker_cursor;10,4",
            "transition;Close;250",
            "change_background;GradoCastle",
            "transition;Open",
            "add_portrait;Glen;MidLeft;no_block",
            "add_portrait;Duessel;FarLeft;no_block",
            "add_portrait;Selena;Right",
            "speak;Selena;General Duessel.",
            "speak;Duessel;Selena. Have you been back long?|Tell me, how fares the campaign in Renais?",
            "speak;Selena;Signs of chaos abound.|Brigands ride without fear, and the peasant's cries fill the air.",
            "speak;Duessel;Hmm...|If Grado's troops do not enforce public order, the situation will only worsen.|And still, His Majesty has given us no orders.|Perhaps, just this once, I should take the lead...",
            "speak;Glen;What could His Majesty be thinking?|Breaking our long-held alliance with Renais--invading without warning...|He's never been this way before. He abhors violence.;low_priority",
            "speak;Selena;......",
            "speak;Glen;And have you noticed the recent promotions? Who are they are going to?|Certainly not to the soldiers who have Grado's best interests at heart.|I feel this invasion is the prelude to a much larger war.|I feel as though His Majesty is no longer the man we knew him to be.",
            "speak;Selena;Glen, it doesn't matter what any of us might think of our orders.|We are his servants, and we will not question His Majesty's intentions.",
            "speak;Glen;I know that, Selena. And yet...",
            "speak;Duessel;That's enough. Both of you. His Majesty summons us.|Let's hope we can learn a little during our audience.",
            "multi_remove_portrait;Duessel;Glen;Selena",
            "transition;Close",
            "end_skip",
            "# Load submap again",
            "change_tilemap;Chapter 14B",
            "# Load the units that are necessary to display for cutscene",
            "load_unit;Vigarde;enemy",
            "load_unit;Valter;enemy",
            "load_unit;Riev;enemy",
            "load_unit;Caellach;enemy",
            "make_generic;Glen;Wyvern Lord;1;enemy",
            "load_unit;Duessel;enemy",
            "load_unit;Selena;enemy",
            "load_unit;Lyon;enemy",
            "add_unit;Vigarde;14,2;immediate",
            "add_unit;Glen;13,5;immediate",
            "add_unit;Duessel;14,5;immediate",
            "add_unit;Selena;15,5;immediate",
            "add_unit;Lyon;15,3;immediate",
            "center_cursor;Vigarde;immediate",
            "change_background",
            "transition;Open",
            "flicker_cursor;Vigarde",
            "add_portrait;Vigarde;Left",
            "speak;Vigarde;...I appreciate your work in fulfilling your previous orders.|You are the hammers that drive the nails of the empire's will...|You will continue to operate{br}...without hesitation...|wherever I send you.",
            "add_portrait;Duessel;Right",
            "speak;Duessel;By your command.",
            "remove_portrait;Duessel",
            "add_portrait;Selena;Right",
            "speak;Selena;In Your Majesty's name.",
            "remove_portrait;Selena",
            "add_portrait;Glen;Right",
            "speak;Glen;Yes, sire...",
            "remove_portrait;Glen",
            "speak;Vigarde;...However, I know this...|You, my Imperial Three, lack the strength to conquer the remaining nations alone.|In the invasion of Renais, certain soldiers performed beyond expectation.|I have chosen them to join you as new generals in the empire's service.|...Come.",
            "remove_portrait;Vigarde",
            "end_skip",
            "# Do map stuff",
            "show_layer;TopDoor",
            "move_unit;Glen;12,5;no_block;no_follow",
            "move_unit;Selena;16,5;no_block;no_follow",
            "move_unit;Duessel;12,4;no_follow",
            "add_unit;Valter;13,11;immediate",
            "add_unit;Riev;14,11;immediate",
            "add_unit;Caellach;15,11;immediate",
            "move_unit;Valter;13,5;no_block;no_follow",
            "move_unit;Riev;14,5;no_block;no_follow",
            "move_unit;Caellach;15,5;no_follow",
            "flicker_cursor;Vigarde",
            "# Back to dialogue",
            "add_portrait;Vigarde;Left",
            "speak;Vigarde;...The performance of these men surpassed even your own.|With the addition of these three...|The empire will have six generals strong enough to conquer this land.|Do you understand?",
            "remove_portrait;Vigarde",
            "add_portrait;Riev;Right",
            "speak;Riev;Heh heh heh...|I am Riev, given the name Blood Beryl by His Majesty.|I know I am a newcomer, but I pray for your favor.",
            "add_portrait;Duessel;Left",
            "speak;Duessel;...Understood.",
            "remove_portrait;Duessel",
            "remove_portrait;Riev",
            "add_portrait;Caellach;Right",
            "speak;Caellach;I'm Caellach. I was a mercenary, fighting in the desert.|Seems I'm to be called Tiger Eye...|You're a fine lookin' lass, aren't you? Yeah, I'm gonna love working with you.",
            "add_portrait;Selena;Left",
            "speak;Selena;......",
            "remove_portrait;Selena",
            "remove_portrait;Caellach",
            "add_portrait;Valter;Right",
            "speak;Valter;So we meet again. You know me as General Valter, but you will call me the Moonstone.|I'll save you worthless dogs from your own incompetence. You'll thank me later.",
            "add_portrait;Glen;OffscreenLeft;immediate",
            "move_portrait;Glen;FarLeft",
            "speak;Glen;Valter... You scum!",
            "add_portrait;Duessel;MidLeft",
            "speak;Duessel;Peace, Glen.",
            "remove_portrait;Duessel",
            "remove_portrait;Glen",
            "remove_portrait;Valter",
            "add_portrait;Vigarde;Left",
            "speak;Vigarde;Selena. Caellach. You will bring me Frelia.",
            "add_portrait;Caellach;FarRight;no_block",
            "add_portrait;Selena;MidRight",
            "speak;Selena;Yes, sire.",
            "speak;Caellach;Sure. Good as done.",
            "remove_portrait;Selena",
            "remove_portrait;Caellach",
            "speak;Vigarde;Riev. Duessel. You are charged with the defense of the empire.|...I will speak to you individually with more details later.",
            "add_portrait;Duessel;FarRight;no_block",
            "add_portrait;Riev;MidRight",
            "speak;Riev;Heh heh heh...{br}Understood, Your Majesty.",
            "speak;Duessel;By your command, sire.",
            "remove_portrait;Duessel",
            "remove_portrait;Riev",
            "add_portrait;Valter;MidRight",
            "speak;Valter;And me?",
            "speak;Vigarde;Valter, Glen...{br}I have other duties for you...",
            "add_portrait;Glen;FarRight",
            "speak;Glen;Yes, Your Majesty?",
            "speak;Vigarde;Renais has fallen, but Princess Eirika still eludes us...|Her brother, Prince Ephraim, leads a resistance within our borders.|Bring the siblings to me.",
            "speak;Valter;Ha ha.. Of course.",
            "remove_portrait;Vigarde",
            "speak;Glen;......",
            "remove_portrait;Glen;no_block",
            "remove_portrait;Valter",
            "transition;Close"
        ],
        "nid": "3 Outro"
    },
    {
        "name": "FightBazba",
        "trigger": "combat_start",
        "level_nid": "3",
        "condition": "check_default('Bazba',['Eirika'])",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bazba;Left",
            "speak;Bazba;I'm the head of this bandit pack, the mighty Bazba!{w}{clear}Hope you've enjoyed your life, 'cuz it's about to end!",
            "remove_portrait;Bazba"
        ],
        "nid": "3 FightBazba"
    },
    {
        "name": "Eirika/Bazba",
        "trigger": "combat_start",
        "level_nid": "3",
        "condition": "check_pair('Bazba','Eirika')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bazba;Left;no_block",
            "add_portrait;Eirika;Right",
            "speak;Bazba;Hah... You look like a pampered noble, not a soldier.|Who the heck are you supposed to be?",
            "speak;Eirika;I am Princess Eirika.|Your crimes against the people of Renais end today!",
            "speak;Bazba;You'll regret taking that tone with me.|I'm the mighty Bazba, after all!|The likes of you can hardly even scratch me.",
            "remove_portrait;Bazba;no_block",
            "remove_portrait;Eirika"
        ],
        "nid": "3 Eirika/Bazba"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Initial setup",
            "set_stats;Boss;HP,39,STR,5,SKL,1,SPD,2,LCK,2,DEF,1,RES,0;immediate",
            "add_tag;Boss;Boss",
            "remove_group;PlayerTeam;immediate",
            "remove_group;EnemyArmy;immediate",
            "remove_unit;Artur;immediate",
            "remove_unit;L'arachel;immediate",
            "remove_unit;Dozla;immediate",
            "remove_unit;Rennac;immediate",
            "# Start chapter",
            "chapter_title",
            "move_cursor;0,0;immediate",
            "transition;Open",
            "spawn_group;PlayerTeam;North;Starting",
            "flicker_cursor;Eirika",
            "# Main Script",
            "transition;Close",
            "change_background;DeepForest",
            "transition;Open",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "speak;Seth;We're approaching Serafew, at the border of Renais and Grado.|Once we cross, we'll be in Grado...{br}Renvall won't be much farther.",
            "speak;Eirika;That is, assuming we can cross the border without mishap...|Oh!{br}Look! Over there!",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "transition;Close",
            "change_background",
            "# Add the enemy army back to the map",
            "add_group;EnemyArmy;Starting;immediate",
            "# (Screen goes to the map, with monsters spreading everywhere)",
            "transition;Open",
            "flicker_cursor;Eirika",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "speak;Eirika;Those strange figures...{br}What...What are they?|Are they...human?",
            "speak;Seth;I've never seen anything like it. What could they be?",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "# (Screen goes to a southern village with Artur and Lute)",
            "transition;Close",
            "center_cursor;1,11;immediate",
            "transition;Open",
            "flicker_cursor;1,11",
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Lute;Left;no_block",
            "add_portrait;Artur;Right",
            "speak;Artur;What have we done to deserve the trials before us? What is happening to us?|How could such abominations walk our lands while the Sacred Stones protect us?",
            "speak;Lute;......",
            "speak;Artur;Lute, please, it's dangerous outside the walls. Stay here in the village.",
            "speak;Lute;Those are revenants, aren't they?|They were the vanguard of the Demon King in the days of darkness.|The Tome of Nazania describes them in chapter 2, section 7, paragraph 8.",
            "speak;Artur;You know of them?",
            "speak;Lute;Duh! I'm a prodigy. I can recall almost everything I see or hear.|According to the book, revenants attack using razor-sharp claws.|Sounds painful, wouldn't you say?",
            "speak;Artur;Yes, er, well... Be that as it may, I must go aid those travelers outside.|You should stay here within the safety of the village.",
            "speak;Lute;Very well. I don't mind staying here. In fact, it seems the smarter choice.",
            "# (Artur leaves)",
            "remove_portrait;Artur",
            "speak;Lute;Magic is far more powerful than any monster's claws.|The thickest hide and the strongest armor are useless against magic's power.|Yes, I suppose I could have studied swords, but only magic is worthy of me.|Even if this village were to be assaulted by monsters, I could defend it perfectly.",
            "remove_portrait;Lute",
            "transition;Close",
            "change_background",
            "center_cursor;Eirika;immediate",
            "add_unit;Artur;8,10;immediate",
            "transition;Open",
            "# Artur runs up to Eirika's group",
            "move_unit;Artur;no_follow",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Right;no_block",
            "add_portrait;Eirika;MidLeft",
            "speak;Artur;Travelers, you must listen to me! The ancient forest of Za'ha is dangerous.|Head south and pass through this place before the fiends surround you!",
            "speak;Eirika;Who are you?",
            "speak;Artur;My name is Artur.|The temple has assigned me the task of cleansing the forest of these...things.|There are so many of the fiends, though.{br}I wonder if I stand much chance alone.|So if you would, please flee now while you have the chance.",
            "speak;Eirika;Fiends?|You're not talking about the same fiends that served the ancient Demon King?|That can't be right... They're nothing but legends and fairy tales...",
            "speak;Artur;Yes, I felt the same way when I heard.|And yet here they are. This place is filled with them.|I wonder how far they've spread...{br}Surely they're not in Renais alone.",
            "speak;Eirika;But...why are they here? How?",
            "add_portrait;Seth;FarLeft",
            "speak;Seth;Beware, Your Highness!{br}Something approaches!",
            "multi_remove_portrait;Eirika;Seth;Artur",
            "# (A Mogall fly towards Artur)",
            "move_unit;Mogall;9,3",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Left",
            "speak;Artur;Please allow me to deal with this.",
            "speak;Artur;Evil shade! May the blessed light drive you from this land!",
            "remove_portrait;Artur",
            "# (Artur slays the Mogall)",
            "interact_unit;Artur;Mogall;hit1,crit1,end",
            "flicker_cursor;Eirika",
            "add_portrait;Seth;Left",
            "speak;Seth;We ought to help. He can't fight them all alone. Do you have orders?",
            "remove_portrait;Seth",
            "# Show prep screen last",
            "end_skip",
            "prep;1",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Right",
            "speak;Artur;One of my companions is in that village to the south.|If you can get there swiftly, I implore you to watch over her safety.",
            "remove_portrait;Artur"
        ],
        "nid": "4 Intro"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;14,8",
            "spawn_group;Turn2Rein;East;Turn2Rein"
        ],
        "nid": "4 Turn2"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,16",
            "add_group;Brigand1;Brigand1",
            "flicker_cursor;14,16",
            "add_portrait;Bandit1;FarRight",
            "speak;Bandit1;Look at this. Now's our chance!|C'mon, lads!|Let's join the fights and steal our way through this pathetic town!",
            "remove_portrait;Bandit1"
        ],
        "nid": "5 Turn2"
    },
    {
        "name": "Turn4",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,7",
            "add_group;Brigand2;Brigand2"
        ],
        "nid": "5 Turn4"
    },
    {
        "name": "Turn8",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,0",
            "add_group;Brigand3;Brigand3"
        ],
        "nid": "5 Turn8"
    },
    {
        "name": "Turn3",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;14,0",
            "add_unit;L'arachel;13,0;immediate;stack",
            "add_unit;Dozla;12,0;immediate;stack",
            "add_unit;Rennac;14,0;immediate;stack",
            "move_unit;L'arachel;;;closest;no_block",
            "move_unit;Dozla;;;closest;no_block",
            "move_unit;Rennac;;;closest",
            "wait;50",
            "flicker_cursor;L'arachel",
            "add_portrait;L'arachel;Right",
            "speak;L'arachel;Oh, my!|Those travelers are being besieged by the agents of evil!",
            "add_portrait;Dozla;MidLeft",
            "speak;Dozla;Ha ha ha! Right you are, Lady L'Arachel!",
            "speak;L'Arachel;I cannot allow this to happen!{br}Come!|We must charge down these cliffs and rush to their aid!",
            "add_portrait;Rennac;FarLeft",
            "speak;Rennac;We charge down these cliffs, and the only thing we'll be rushing to is death.|How about we find us a nice, gentle path down, hm?",
            "speak;L'arachel;Ah...Yes, well...Let us hurry nonetheless.|I simply cannot abide those wicked beasts running amok!",
            "remove_portrait;L'arachel;no_block",
            "remove_portrait;Dozla;no_block",
            "remove_portrait;Rennac",
            "remove_unit;Rennac",
            "move_unit;L'arachel;14,2;;closest;no_block",
            "move_unit;Dozla;14,1;;closest;no_block",
            "remove_unit;L'arachel",
            "remove_unit;Dozla"
        ],
        "nid": "4 Turn3"
    },
    {
        "name": "Trigger",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "any(game.level.regions.get('Trigger').contains(unit.position) for unit in game.get_units_in_party())",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;0,0",
            "add_group;RevenantRein;0,0;immediate;stack",
            "move_group;RevenantRein;RevenantRein"
        ],
        "nid": "4 Trigger"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Forest",
            "transition;Open",
            "if;game.check_alive('Artur') or game.check_alive('Lute')",
            "add_portrait;Seth;MidLeft;no_block",
            "add_portrait;Eirika;FarLeft;no_block",
            "if;game.check_dead('Artur')",
            "add_portrait;Lute;Right",
            "elif;game.check_dead('Lute')",
            "add_portrait;Artur;Right",
            "else",
            "add_portrait;Artur;MidRight;no_block",
            "add_portrait;Lute;FarRight",
            "end",
            "else",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "end",
            "speak;Seth;We've killed all the monsters.|Still, we'd best burn the bones to ash to be sure they don't return.;low_priority",
            "speak;Eirika;I still can't believe what we've been fighting here...|I'd thought those fiends nothing more than myth and legend.",
            "speak;Seth;Those revenants are said to be the least of the dark creatures.|And yet, the weakest of them could outmatch any normal man.|We cannot take this enemy lightly.;low_priority",
            "if;game.check_alive('Lute')",
            "speak;Lute;Oh, yes. There are much worse then those revenants and the entombed...|Let's see, there's the bonewalkers, mauthe doogs, gargoyles, baels... |Why, I'll bet you just about any creature of lore could be walking again.|Yes, we're in for some trouble. Even my fabulous power may not be enough.",
            "end",
            "if;game.check_alive('Artur')",
            "speak;Artur;O divine light, show me... Is this a sign of dark days to come?;low_priority",
            "end",
            "remove_portrait;Lute",
            "remove_portrait;Artur",
            "if;game.check_alive('Artur') or game.check_alive('Lute')",
            "remove_portrait;Seth",
            "move_portrait;Eirika;Left",
            "speak;Eirika;By all that's holy, what is happening?",
            "add_portrait;Seth;Right",
            "else",
            "speak;Eirika;By all that's holy, what is happening?",
            "end",
            "speak;Seth;Princess Eirika, perhaps it would be wise to return to Frelia and regroup.|Pressing forward seems foolish in light of recent events.|We cannot face both Grado's forces and more of those terrible things.",
            "speak;Eirika;Seth, I follow your point, and nothing would please me more then running for safety.|But what of my brother? He and his men are still trapped in the same situation we are.|I know full well that I may be leading us into even greater danger, but...|Please try to understand.",
            "speak;Seth;I do, my princess, and I vow to see you through this safely.",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Eirika",
            "transition;Close",
            "change_background",
            "add_unit;Eirika;8,5;immediate",
            "add_unit;Seth;8,4;immediate",
            "transition;Open",
            "# (L'arachel and her gang rides up)",
            "# remove all units",
            "add_group;LGang;14,5;;stack",
            "move_group;LGang;LGang",
            "flicker_cursor;L'arachel",
            "transition;close",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Eirika;Left",
            "add_portrait;L'arachel;OffscreenRight;immediate",
            "move_portrait;L'arachel;MidRight",
            "speak;L'arachel;Aha! Foul creatures, beware!|I, L'arachel, bestow upon you the honor at banishment at my blessed hands!",
            "speak;Eirika;......",
            "speak;L'arachel;Oh...Where are the monsters?",
            "speak;Eirika;Well, we just finished...",
            "speak;L'arachel;Ah, glad tidings indeed!{br}The heavens must be rejoicing!|I am...a tad disappointed however.|After all, I did rush all the way here to show you the splendor of my might.",
            "add_portrait;Dozla;FarRight",
            "speak;Dozla;Gwah ha ha! It's a real shame, innit, Lady L'Arachel?!",
            "remove_portrait;Dozla",
            "add_portrait;Rennac;FarRight",
            "speak;Rennac;What's shameful is the way you drag us around the countryside.",
            "remove_portrait;Rennac",
            "speak;Eirika;Pardon me, but...who are you?",
            "speak;L'arachel;Me?|Since you ask, please allow me to introduce myself.|It is I, the true light and glory of the sacred realm of Rausten...",
            "add_portrait;Dozla;FarRight",
            "speak;Dozla;Stop! Lady L'arachel, you mustn't continue!|You cannot reveal your true identity here!",
            "speak;L'arachel;Oh, yes, you're right. Oh, I get so careless sometimes!|Now, I must ride off in anonymity. Oh, how beautifully romantic!",
            "speak;Eirika;Uh... Right.",
            "speak;L'arachel;Fare thee well, strangers.{br}Perhaps our paths will cross again.|Come, Dozla! Rennac!{br}We ride!",
            "remove_portrait;L'arachel",
            "speak;Dozla;Gwah ha ha!{br}Let's go, Rennac!",
            "remove_portrait;Dozla",
            "add_portrait;Rennac;FarRight",
            "speak;Rennac;All right, all right.",
            "remove_portrait;Rennac",
            "# (They leave)",
            "speak;Eirika;...What was that about?"
        ],
        "nid": "4 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "change_background;Village",
            "remove_all_units",
            "add_unit;Joshua;9,6;immediate",
            "transition;Open",
            "add_portrait;Joshua;Left",
            "speak;Joshua;Well, well. There's an arena in this town.|Perfect. My pocket's feeling a bit light.",
            "speak;Joshua;Say, is that a cleric? It is!{br}And a gorgeous one at that.",
            "remove_portrait;Joshua",
            "transition;Close",
            "change_background",
            "center_cursor;9,9;immediate",
            "transition;Open",
            "# (Natasha runs past Joshua)",
            "add_unit;Natasha;9,16;immediate",
            "move_unit;Natasha;9,8",
            "move_unit;Joshua;9,7",
            "flicker_cursor;Joshua",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Natasha;Left",
            "move_portrait;Natasha;MidRight",
            "add_portrait;Joshua;Left",
            "speak;Joshua;Something amiss, Sister?{br}You look flustered.",
            "bop_portrait;Natasha",
            "speak;Natasha;Ahhh!",
            "remove_portrait;Natasha",
            "add_portrait;Natasha;Right",
            "speak;Natasha;P-pardon me.",
            "speak;Joshua;No, pardon me! I never meant to startle you.|May I offer my apologies....",
            "speak;Natasha;No, it's not necessary...{br}It was my fault.|Excuse me, I must be going...{br}Good day to you.",
            "# (Natasha leaves)",
            "remove_portrait;Natasha",
            "speak;Joshua;...And there she goes.|Not my lucky day...{br}She was quite the beauty, too.|Ah, such is life. I think I've time still to visit the arena, though.",
            "remove_portrait;Joshua",
            "transition;Close",
            "end_skip",
            "change_background",
            "remove_all_units",
            "# (View moves north, Glen is talking to Saar)",
            "add_unit;Saar;9,7;immediate",
            "load_unit;Cormag;enemy",
            "add_unit;Cormag;8,10;immediate",
            "make_generic;Glen;Wyvern Lord;1;enemy",
            "add_unit;Glen;9,9;immediate",
            "transition;Open",
            "flicker_cursor;Glen",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Saar;Left;no_block",
            "add_portrait;Glen;Right",
            "speak;Glen;Captain Saar of the Serafew Border Guard. How fare you?|I bring orders from His Majesty.|Rumor has it that Princess Eirika of Renais is making her way to Grado.|You are to find her and to place her in custody immediately.",
            "speak;Saar;Yes, sir!",
            "speak;Glen;One more thing...|A traitor to the empire has fled Castle Grado.|We've received reports she is hiding somewhere here in Serafew.|I don't care if you have to tear this town apart. Find the turncoat.",
            "speak;Saar;Yes, sir, General Glen!|If she resists, do we have permission to execute her?",
            "speak;Glen;...Yes. Permission granted.",
            "speak;Saar;Understood! Grado's will be done.|The Grado Empire will repay the debt of betrayal with blood!",
            "speak;Glen;...His Majesty relies upon you, Captain. Be sure his trust is not misplaced.|That is all.",
            "speak;Saar;Yes, sir!",
            "remove_portrait;Saar;no_block",
            "remove_portrait;Glen",
            "transition;Close",
            "change_background",
            "transition;Open",
            "# (Saar leaves, Cormag comes)",
            "move_unit;Saar;9,2;no_follow",
            "remove_unit;Saar;immediate",
            "move_unit;Cormag;8,9",
            "flicker_cursor;Glen",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Cormag;Left;no_block",
            "add_portrait;Glen;Right",
            "speak;Glen;Such loyalty to the crown.|If only I could hold such conviction in the righteousness of our emperor.",
            "speak;Cormag;Something troubling you, Brother?",
            "speak;Glen;No...Pay no mind to me.|Come, Cormag. Let's go.|From here, we ride northeast, back to the fort.",
            "speak;Cormag;Very well.",
            "multi_remove_portrait;Cormag;Glen",
            "transition;Close",
            "change_background",
            "transition;Open",
            "# (They fly off, replaces by Seth and Eirika, outside the town)",
            "move_unit;Glen;14,5;no_block;no_follow",
            "move_unit;Cormag;14,4;no_follow",
            "remove_unit;Glen",
            "remove_unit;Cormag",
            "transition;Close",
            "change_background;VillageGate",
            "transition;Open",
            "multi_add_portrait;Eirika;Left;Seth;Right",
            "speak;Eirika;It's been so long since I last visited Serafew.|My brother and I used to pass through here en route to Grado.|I remember the harmony in which the people of both countries lived.|No walls divided our borders. No soldiers stood guard in high towers.|The border town... It was to me a symbol of the trust between Grado and Renais.",
            "speak;Seth;...And now, it is firmly under the thumb of Grado's emperor.",
            "speak;Eirika;The peace I remember in this city...|It seems like something from another time. It seems lost now... Forever.",
            "speak;Seth;...The city doesn't seem to be very heavily patrolled.|They must feel it's not worth guarding with Castle Renais under their control.|We must try to not draw attention to ourselves. The west gate is undermanned....",
            "add_portrait;Saleh;OffscreenRight;immediate",
            "speak;Saleh;Pardon me, may I ask you a question?",
            "# (Saleh appears)",
            "remove_portrait;Seth",
            "move_portrait;Eirika;FarLeft",
            "add_portrait;Seth;MidLeft",
            "move_portrait;Saleh;Right",
            "speak;Eirika;What is it?",
            "speak;Saleh;I'm looking for someone.|Have you seen a young girl with indigo hair?",
            "speak;Eirika;Indigo hair?|No...Sorry.",
            "speak;Saleh;Hmmm...|Thank you. Sorry to intrude.",
            "# (Saleh leaves)",
            "multi_remove_portrait;Saleh;Eirika;Seth",
            "multi_add_portrait;Seth;FarLeft;Eirika;MidLeft",
            "speak;Eirika;There was something very odd about that man, wouldn't you say?",
            "speak;Seth;He did seem unusual. He didn't strike me as a Grado spy, but...",
            "add_portrait;SoldierRed;OffscreenRight;immediate",
            "speak;SoldierRed;Catch her! Don't let her escape!",
            "speak;SoldierRed;That way! She went that way!",
            "speak;Eirika;What's that?",
            "speak;Seth;It's coming from over there.",
            "speak;Eirika;Let's see what the commotion is.",
            "multi_remove_portrait;Seth;Eirika",
            "transition;Close",
            "end_skip",
            "change_background",
            "remove_all_units",
            "transition;Open",
            "add_unit;Natasha;10,3;immediate",
            "move_unit;Natasha;9,12",
            "center_cursor;9,10",
            "add_group;ThreeEnemies;ThreeEnemies;immediate",
            "move_group;ThreeEnemies;Starting;no_follow",
            "multi_add_portrait;Natasha;Left;SoldierRed;Right",
            "# (Screen goes to town, there are some soldiers surrounding Natasha)",
            "speak;SoldierRed;Traitor Natasha!{br}Surrender peacefully.|Come quietly, and you may have the chance to explain yourself before His Majesty.",
            "speak;Natasha;Wait, please.{br}You must listen to me!",
            "speak;SoldierRed;Take her.",
            "speak;Natasha;No, you must believe me!|The emperor is not himself. You MUST be able to see that!",
            "speak;SoldierRed;Impugn the emperor at your peril!|We've been ordered to execute you if you offer any resistance.|But your words condemn you!",
            "multi_remove_portrait;Natasha;SoldierRed",
            "end_skip",
            "spawn_group;EnemyTeam;North;Starting;;stack",
            "center_cursor;7,14",
            "add_unit;Eirika;0,16;immediate",
            "add_unit;Seth;0,15;immediate",
            "move_unit;Seth;5,15;no_block",
            "move_unit;Eirika;6,16",
            "flicker_cursor;Seth",
            "multi_add_portrait;Seth;FarLeft;Eirika;MidLeft",
            "speak;Eirika;That cleric is a traitor to the throne of Grado?|What madness is this?",
            "multi_remove_portrait;Seth;Eirika",
            "# (Natasha runs up to Eirika)",
            "move_unit;Natasha;6,15",
            "flicker_cursor;Eirika",
            "multi_add_portrait;Natasha;Left;Eirika;Right",
            "speak;Natasha;Ah...",
            "speak;Eirika;Are you all right?",
            "speak;Natasha;Who are you?",
            "speak;Eirika;I'm from Renais. Why are these Grado men after you?",
            "speak;Natasha;You're from Renais... Oh!|I have something I must tell you. It's about Grado--",
            "speak;Eirika;Wait--Grado soldiers are coming this way.|We'll have to talk later.{br}Now we must fight!",
            "multi_remove_portrait;Natasha;Eirika",
            "transition;Close",
            "move_unit;Eirika;;immediate",
            "move_unit;Natasha;;immediate",
            "remove_unit;Seth;immediate",
            "center_cursor;Eirika;immediate",
            "transition;Open",
            "end_skip",
            "prep;1",
            "# After prep, have Joshua appear",
            "center_cursor;12,6",
            "flicker_cursor;12,6",
            "add_unit;Joshua;12,6",
            "move_unit;Joshua",
            "flicker_cursor;Joshua",
            "add_portrait;Joshua;Right",
            "speak;Joshua;So much for my dreams of making my fortune here...|First the girl, now the gold.{br}It really isn't my lucky day.",
            "add_portrait;SoldierRed;Left",
            "speak;SoldierRed;You there! Mercenary! What are you doing here at the arena?|Get back to the staging area now!",
            "speak;Joshua;C'mon, why don't we both hit the arena?{br}It'll be good training.|If you're going to risk your life anyway, you may as well try to earn some gold.",
            "speak;SoldierRed;I'm reporting you to the captain! You'll be lucky if he just docks your pay!|Don't forget--You can be replaced in an eyeblink, you filthy sellsword!",
            "remove_portrait;SoldierRed",
            "speak;Joshua;Don't worry, little man.{br}I won't forget.|Work's work, but I don't like fighting women...|Now then, what's the rest of the day got in store for me?{w}{clear}...Tails huh? That's nothing but bad luck and more bad luck...",
            "remove_portrait;Joshua",
            "flicker_cursor;Natasha",
            "add_portrait;Natasha;Left",
            "speak;Natasha;They may not want to hear what I have to say, but...|I must speak with one of the Grado soldiers.|Oh, if only one of them will listen to my words...|Please! Grant me strength.",
            "remove_portrait;Natasha",
            "# Now actually start!",
            "add_talk;Natasha;Joshua"
        ],
        "nid": "5 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "5 Outro"
    },
    {
        "name": "AddPlaceholder",
        "trigger": "enemy_turn_change",
        "level_nid": "3",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_unit;Placeholder;16,15;immediate"
        ],
        "nid": "3 AddPlaceholder"
    },
    {
        "name": "Debug Setup",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "cf.SETTINGS['debug']",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Give access to the convoy",
            "change_background;BlackBackground",
            "game_var;_convoy;True"
        ],
        "nid": "Global Debug Setup"
    },
    {
        "name": "Dreams of Home",
        "trigger": "on_base_convo",
        "level_nid": "DEBUG",
        "condition": "unit == 'Dreams of Home'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Eirika;Left;Seth;Right",
            "speak;Eirika;I miss home",
            "multi_remove_portrait;Eirika;Seth"
        ],
        "nid": "DEBUG Dreams of Home"
    },
    {
        "name": "Trigger sup C",
        "trigger": "level_start",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "increment_support_points;Yarra;Uyae;40",
            "set_current_mana;Yarra;0",
            "end"
        ],
        "nid": "DEBUG Trigger sup C"
    },
    {
        "name": "Summon Phantom",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_unit('Phantom')",
            "    resurrect;Phantom",
            "    remove_unit;Phantom;warp",
            "    autolevel_to;Phantom;{e:unit.level}",
            "else",
            "    make_generic;Phantom;Fighter;{e:unit.level};player;;Monster;;Iron Axe",
            "end",
            "add_unit;phantom;{eval:target_pos};warp",
            "wait;200",
            ""
        ],
        "nid": "Global Summon Phantom"
    },
    {
        "name": "Summon Soldiers",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "wait;200"
        ],
        "nid": "Global Summon Soldiers"
    },
    {
        "name": "Support Gain",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;item == 'C'",
            "alert;Reached rank C!",
            "elif;item == 'B'",
            "alert;Reached rank B!",
            "elif;item == 'A'",
            "alert;Reached rank A!",
            "else",
            "alert;Support increased!",
            "end"
        ],
        "nid": "Global Support Gain"
    },
    {
        "name": "OnOverworldEnter",
        "trigger": "overworld_start",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "sound;RefreshDance",
            "map_anim;AOE_Mend;5",
            "reveal_overworld_node;5",
            "wait;500",
            "sound;Mend",
            "reveal_overworld_road;2;5"
        ],
        "nid": "2 OnOverworldEnter"
    },
    {
        "name": "OnLevelSelect",
        "trigger": "level_select",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "move_cursor;5;2000",
            "toggle_narration_mode;open;1500",
            "wait;500",
            "#add_portrait;Hayden;MidLeft;;;Middle",
            "narrate;Narrator;King Hayden apologizes for being unable to spare soldiers.",
            "remove_portrait;Hayden",
            "toggle_narration_mode;close;1500",
            "overworld_move_unit;Eirika;5;3;no_block",
            "wait;1500",
            "transition;close;1500",
            "wait;500"
        ],
        "nid": "2 OnLevelSelect"
    },
    {
        "name": "ChoiceMenuTest",
        "trigger": "on_talk",
        "level_nid": "DEBUG",
        "condition": "unit.nid == 'Simon' and unit2.nid == 'Aka'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_background;map1",
            "wait;600",
            "add_portrait;Simon;Right,Bottom;Normal;CloseEyes",
            "speak;Simon;saaaay whaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa;;;;;;;;;;;50"
        ],
        "nid": "DEBUG ChoiceMenuTest"
    },
    {
        "name": "Addtalk",
        "trigger": "level_start",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_talk;Simon;Aka"
        ],
        "nid": "DEBUG Addtalk"
    },
    {
        "name": "Supports true",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "game_var;_supports;True"
        ],
        "nid": "Global Supports true"
    },
    {
        "name": "Support Yarra Uyae",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "check_pair('Yarra','Uyae')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "transition;close;500",
            "change_background;Forest",
            "transition;open;500",
            "multi_add_portrait;Yarra;Right;Uyae;Left",
            "speak;Yarra;This is a test of speaking!",
            "speak;Uyae;SO truee",
            "multi_remove_portrait;Yarra;Uyae",
            "transition;close;500",
            "change_background",
            "transition;open;500",
            "sound;Item",
            "alert;Reached rank C!",
            "give_skill;Yarra;Wild_Lashing",
            "######",
            "elif;support_rank_nid == 'B'",
            "transition;close;500",
            "change_background;Tavern",
            "transition;open;500",
            "multi_add_portrait;Ephraim;Right;Eirika;Left",
            "#music;39 Reunion;300",
            "music;39- Reunion Orchestral Cover;500",
            "speak;Eirika;Yaa...|Yaa!",
            "move_portrait;Eirika;MidLeft",
            "speak;Ephraim;Eirika, try taking a deeper step forward when you lunge.|Otherwise, you might find it hard to dodge the counterthrust of a foe.|That's why you always want to end a duel with a single blow.|Don't give your opponent the chance to return the attack.",
            "move_portrait;Eirika;Left",
            "speak;Eirika;Ah, Brother!|Thank you for the instruction!|I suppose I still have a lot to learn.",
            "speak;Ephraim;No, not at all!|Rather, I am surprised at your rapid progress after such a short time!|I think you would give me an excellent match were we to spar.",
            "speak;Eirika;You really think so?|And yet, I feel...|Sigh...|If only we lived in a world where such skills were not even necessary.",
            "speak;Ephraim;I see...|You're a peaceful soul.|All of this fighting...|It must be hard on you.",
            "speak;Eirika;It is...|I just pray that this fighting will end as swiftly as possible.|No one desires this war.|So why must it continue?",
            "speak;Ephraim;...Indeed.|And yet there is fighting in every generation.|In ancient times, our ancestors fought all manner of evil beast.|But once the beasts were subdued, man then fought against fellow man...|So we learned from Lyon.",
            "speak;Eirika;I know...|But if men understand the futility of fighting, why do they do it?|We could gain so much more by cooperation than by conquest.",
            "speak;Ephraim;You may be right...|...But I think...|I understand why.",
            "speak;Eirika;Why, Brother...?",
            "speak;Ephraim;I pray for peace to return to our fair Renais.|I know that war brings only sorrow.|And yet, somewhere in my heart...|There is a lust for battle that cannot be stilled.|It screams within me when I clutch this spear...",
            "speak;Eirika;Brother...",
            "speak;Ephraim;Perhaps it is because I am a man.|Perhaps it is because I was raised to fight.|I enjoy the practice of my art.|I find pleasure in the battle victorious.|And the stronger I become...|The more strongly the call to arms sounds within my ears.|I want to see how great is the skill that I have acquired.|It may be crass and low, but I cannot deny it.",
            "speak;Eirika;Brother...",
            "speak;Ephraim;You would disdain me for this?",
            "speak;Eirika;No, I could never...|But, Brother, listen.|No matter why you fight...|Please ensure that this fighting brings good to our people and to our kingdom.",
            "speak;Ephraim;Of course.|I am not so far gone as that.|And I could not bear to see you cry for our people.|Besides, I would fear the judgment of your mighty sword!",
            "speak;Eirika;Brother, I-!",
            "speak;Ephraim;Ha ha!|I'm joking, of course!",
            "multi_remove_portrait;Eirika;Ephraim",
            "music_fade_back",
            "transition;close;500",
            "change_background",
            "transition;open;500",
            "sound;Item",
            "alert;Reached rank B!",
            "elif;support_rank_nid == 'A'",
            "transition;close;500",
            "change_background;Tavern",
            "transition;open;500",
            "multi_add_portrait;Ephraim;Right;Eirika;Left",
            "#music;39 Reunion;300",
            "music;39- Reunion Orchestral Cover;500",
            "speak;Eirika;Just...a bit longer.",
            "speak;Ephraim;Yes, you may be right.|There may be an end to this fighting soon.|We may yet defeat the evil in this land and return it to the hands of men.|Then, Renais may enjoy its former glory.",
            "speak;Eirika;Yes...|You will be crowned king of Renais, and I will help you rebuild our land.|We will make it a happy and prosperous country, free of conflict.|Just as we three used to dream about...",
            "speak;Ephraim;We...three.|Lyon was here with us, wasn't he?|We three had so many grand ideas for the futures of our lands.",
            "speak;Eirika;Yes...|We talked about a lot.|But Lyon...",
            "speak;Ephraim;......;no_talk",
            "speak;Eirika;Brother...|Brother...please promise that you won't ever leave me alone.|Please...promise...",
            "speak;Ephraim;Of course.|I would never leave you.|Why would you ever think I could do something like that?",
            "speak;Eirika;Brother...",
            "speak;Ephraim;I know better than anyone how you feel, dear sister.|Ever since we were born...|No, even before...|We two have always been together.|And together... we will always stay.",
            "speak;Eirika; Yes, dear brother...",
            "multi_remove_portrait;Eirika;Ephraim",
            "game_var;EirikaAndEphraim;True",
            "music_fade_back",
            "transition;close;500",
            "change_background",
            "transition;open;500",
            "sound;Item",
            "alert;Reached rank A!",
            "else",
            "end"
        ],
        "nid": "Global Support Yarra Uyae"
    },
    {
        "name": "Explosive place",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_region;{eval:target_pos};{eval:target_pos};1,1;status;Exploded;interrupt_move;only_once",
            "map_anim;RedDot;{eval:target_pos};permanent"
        ],
        "nid": "Global Explosive place"
    },
    {
        "name": "Explosive trigger",
        "trigger": "unit_wait",
        "level_nid": null,
        "condition": "any([skill.nid == 'Exploded' for skill in unit.skills])",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;200",
            "sound;Wall Attack",
            "screen_shake;300;default",
            "map_anim;AOE_Wyrmsfire;{unit}",
            "remove_map_anim;RedDot;{unit}",
            "screen_shake_end",
            "if;unit.team == 'player' and unit.nid != 'Varia'",
            "    add_portrait;Varia;Left",
            "    speak;Varia;Come on... Sorry!",
            "    remove_portrait;Varia",
            "elif;unit.nid == 'Varia'",
            "    add_portrait;Varia;Left",
            "    speak;Varia;Ouch... what was I thinking?!",
            "    remove_portrait;Varia",
            "end",
            "#set_current_hp;{unit};{e:unit.get_hp() - 30}",
            "set_current_hp;{unit};{e: unit.get_hp() - int(unit.get_max_hp() * 0.30)}",
            "give_skill;{unit};Burned;;no_banner",
            "if;unit.get_hp() <= 0",
            "    set_current_hp;{unit};1",
            "    #kill_unit;{unit}",
            "end",
            "wait;500"
        ],
        "nid": "Global Explosive trigger"
    },
    {
        "name": "Intro variables",
        "trigger": "level_start",
        "level_nid": "Base1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;talk;[u for u in game.get_player_units()]",
            "    add_talk;Simon;{talk}",
            "endf",
            "add_talk;Simon;Janine",
            "remove_talk;Simon;Simon",
            "",
            "game_var;pron;1000",
            "",
            "give_money;1500;Simon;no_banner",
            "",
            "for;team;[u for u in game.get_all_units()]",
            "    change_team;{team};player",
            "endf",
            "change_team;Janine;other",
            ""
        ],
        "nid": "Base1 Intro variables"
    },
    {
        "name": "Wagontosupplier",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Megail;Wagon_mode;;no_banner",
            "remove_tag;Megail;Convoy;no_warn",
            "remove_tag;Megail;AdjConvoy;no_warn"
        ],
        "nid": "Global Wagontosupplier"
    },
    {
        "name": "Suppliertowagon",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Megail;Supply_mode;;no_banner",
            "add_tag;Megail;Convoy;no_warn",
            "add_tag;Megail;AdjConvoy;no_warn"
        ],
        "nid": "Global Suppliertowagon"
    },
    {
        "name": "UyaeSpiritStance",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;claw_item;[item.nid for item in u('Uyae').items if item.nid.startswith('Claw_')]",
            "    remove_item;Uyae;{claw_item};no_banner",
            "endf",
            "for;aura_skill;[skill.nid for skill in u('Uyae').skills if skill.nid.startswith('Aura_of')]",
            "    remove_skill;Uyae;{aura_skill};no_banner",
            "endf",
            "give_skill;Uyae;Aura_of_Spirit",
            "give_item;Uyae;Claw_Spirit;;no_banner"
        ],
        "nid": "Global UyaeSpiritStance"
    },
    {
        "name": "UyaeMightStance",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;claw_item;[item.nid for item in u('Uyae').items if item.nid.startswith('Claw_')]",
            "    remove_item;Uyae;{claw_item};no_banner",
            "endf",
            "for;aura_skill;[skill.nid for skill in u('Uyae').skills if skill.nid.startswith('Aura_of')]",
            "    remove_skill;Uyae;{aura_skill};no_banner",
            "endf",
            "give_skill;Uyae;Aura_of_Might",
            "give_item;Uyae;Claw_Might;;no_banner"
        ],
        "nid": "Global UyaeMightStance"
    },
    {
        "name": "VillageDestroy",
        "trigger": "Destructible",
        "level_nid": "P1",
        "condition": "region.nid == 'Villagedestroy'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music_clear",
            "flicker_cursor;Villagedestroy",
            "show_layer;Village destroyed",
            "sound;VillageDestroyed",
            "wait;2000",
            "lose_game"
        ],
        "nid": "P1 VillageDestroy"
    },
    {
        "name": "Snagbridge cima",
        "trigger": "unit_death",
        "level_nid": "P1",
        "condition": "unit.nid == 'Snagcima'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "map_anim;Snag;7,2",
            "sound;VillageDestroyed",
            "show_layer;snagcima",
            "level_var;snagbridgecima;1",
            "remove_region;Snagcima"
        ],
        "nid": "P1 Snagbridge cima"
    },
    {
        "name": "Villagevisit",
        "trigger": "Visit",
        "level_nid": "P1",
        "condition": "region.nid == 'Villagevisit'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Man1;MidLeft;no_block",
            "add_portrait;Mira;FarLeft;no_block",
            "add_portrait;Chosen;Right",
            "speak;Man1;Thank you for your warning...|Those monsters are being a pain lately.|You can have this item as a token of gratitude.|Never figured out how to use it anyway...",
            "s;Chosen;Awesome!",
            "speak;Mira;{tgm}...;;;thought_bubble",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;Chosen;Dragonshield",
            "has_traded;{unit}",
            "show_layer;Village visited",
            "level_var;spiderboss;1",
            "remove_region;Villagevisit",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;You have gained a consumable <red>Item</>!|You can use the check button to learn more details about items.|Using items count as an action, so be mindful of when to use them.;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "end"
        ],
        "nid": "P1 Villagevisit"
    },
    {
        "name": "Boss e Mira chegam e tutorial: enemy range",
        "trigger": "phase_change",
        "level_nid": "P1",
        "condition": "game.level_vars['spiderboss'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "flicker_cursor;4,9",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "change_music;enemy_battle;Halfway change loop",
            "change_music;player_battle;Halfway change loop",
            "music;Halfway change loop",
            "add_unit;SpiderQueen;4,9;fade;closest;south",
            "add_unit;103;5,9;fade;closest;south",
            "add_unit;104;1,9;fade;closest;south",
            "add_unit;108;9,9;fade;closest;south",
            "add_unit;109;10,0;fade;closest;north",
            "move_unit;SpiderQueen;4,8;normal;closest",
            "move_unit;103;5,8;normal;closest",
            "move_unit;104;1,8;normal;closest",
            "move_unit;108;9,7;normal;closest",
            "move_unit;109;10,2;normal;closest",
            "wait;500",
            "level_var;simonappears;1",
            "wait;1000",
            "add_portrait;Chosen;Left",
            "wait;300",
            "s;Chosen;This...{c:wait;300} is nothing!|I'll wipe the floor with any monster you throw at me!",
            "remove_portrait;Chosen",
            "wait;500",
            "add_unit;Mira;1,2;fade;stack;north",
            "move_unit;Mira;2,2;normal;closest",
            "wait;1000",
            "multi_add_portrait;Mira;Right;Chosen;Left",
            "wait;300",
            "s;Mira;I... I also want to fight!",
            "s;Chosen;Aren't you a little young to be thinking about that?|Stay here and leave this to me, the future savior of the world!",
            "s;Mira;I'm an adult! And... I want to be near you!",
            "s;Chosen;Ohh, smitten already, are you?|Don't worry babe, I'll protect you tightly!",
            "bop_portrait;Mira",
            "expression;Mira;CloseEyes",
            "s;Mira;I... don't want you!|I mean... I need to get stronger first...|I need to fulfill my mission.|{c:expression;Mira;OpenEyes}Only then I can think about... other stuff.",
            "s;Chosen;I'm not sure I follow, but ok.|Let's do it together!",
            "wait;300",
            "multi_remove_portrait;Chosen;Mira",
            "wait;300",
            "change_team;Mira;player",
            "sound;Level Up",
            "alert;Mira has joined your party!",
            "level_var;tutopair;1",
            "wait;1000",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    flicker_cursor;SpiderQueen",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;Bosses are stronger enemy units. Often, defeating them is the way to clear a chapter.|They have a special symbol on their sprite and are frequently stationary.|Rushing in without carefully studying what a boss can do is risky!|This enemy uses <red>Magic</>, which can be a <red>ranged weapon</>.|To help visualize the enemy attack and movement ranges, you can <red>select</> (default: X key) them.|This will show a \"danger zone\" for the enemy unit.|Alternatively, you can press the \"check\" button (default: C key) on an empty tile.|This will display the dangerous area for everyone!;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "    flicker_cursor;SpiderQueen",
            "    wait;500",
            "end",
            "change_objective_simple;Defeat the boss!"
        ],
        "nid": "P1 Boss e Mira chegam e tutorial: enemy range"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;SpiderQueen;BossMiracle_1;;no_banner",
            "end",
            "",
            "change_background;BlackBackground",
            "transition;close",
            "change_background;pre-IK-intro",
            "wait;2000",
            "transition;open;2000",
            "s;;The nations of Arclent lived in a fragile peace.|That all changed with the arrival of a monster from far away.;;;narration",
            "music;Tension2",
            "change_background;0-intro",
            "wait;300",
            "s;;He called himself...;;;narration",
            "change_background;1-intro",
            "wait;300",
            "s;;...the <red>Incubus King</>.;;;narration",
            "change_background;2-intro",
            "wait;300",
            "s;;With his army of <red>succubi</> and <red>orcs</> he threw the world into chaos.;;;narration",
            "change_background;3-intro",
            "wait;300",
            "s;;Many were killed or driven to a mindless lust.;;;narration",
            "change_background;4-intro",
            "wait;300",
            "s;;Who could stop his evil and horny kingdom?;;;narration",
            "transition;close;3000",
            "change_background;StarSky",
            "transition;open;1000",
            "wait;500",
            "add_portrait;Chosen;CenterLeft,Middle",
            "wait;1000",
            "s;;You are the <red>Chosen</> one, rumored to be selected by the goddess Ivala herself.|You represent our hopes in this dire moment.|You ought to be successful... If only you control your urges...;;;narration",
            "remove_portrait;Chosen",
            "transition;close;2000",
            "music_clear",
            "chapter_title",
            "create_achievement;firstofmany;First of Many!;Defeated your first enemy.",
            "# variaveis 0:",
            "level_var;snagbridge;0",
            "level_var;spiderboss;0",
            "level_var;simonappears;0",
            "level_var;snagbridgecima;0",
            "# fim das variaveis",
            "change_background;GradoCastle",
            "add_portrait;Chosen;Left,Bottom;no_block",
            "add_portrait;Simonyoung;Right,Bottom;no_block",
            "music;Happy1",
            "transition;open;2000",
            "speak;Simonyoung;...and without proper cleaning and maintenance, your equipment is more prone to breaking.|Needless to say, this can be the difference between life and death in a combat.|Furthermore, a magically reinforced armor grants us another layer of security.",
            "speak;Chosen;Boring.",
            "speak;Simonyoung;{tgm}...",
            "speak;Chosen;There are hot ladies out there, the fate of the world is at stake, and you want me to stand around?!|Besides, my sword is already glowing, that's enough magic for me!",
            "speak;Simonyoung;You must understand, there are several reaso-{no_wait}",
            "music_clear",
            "sound;Wall Attack",
            "wait;500",
            "sound;Wall Attack",
            "wait;500",
            "sound;CombatDeath",
            "wait;1500",
            "speak;Chosen;What's going on?!",
            "remove_portrait;Chosen",
            "sound;Foot Step",
            "wait;500",
            "expression;Simonyoung;CloseEyes",
            "wait;900",
            "transition;close",
            "end_skip",
            "wait;600",
            "change_background",
            "transition;open",
            "wait;1500",
            "flicker_cursor;13,2",
            "wait;500",
            "add_unit;Chosen;13,2;fade;giveup;north",
            "wait;500",
            "flicker_cursor;12,9",
            "wait;2000",
            "music;Tension",
            "add_unit;102;14,9;fade;giveup;east",
            "wait;500",
            "move_unit;102;12,9;normal;giveup",
            "wait;500",
            "sound;VillageDestroyed",
            "show_layer;Village intro destroyed",
            "wait;1000",
            "add_unit;112;1,9;fade;giveup;south",
            "wait;500",
            "move_unit;112;1,8;normal;giveup",
            "wait;300",
            "flicker_cursor;1,8",
            "wait;700",
            "flicker_cursor;1,2",
            "wait;1000",
            "add_portrait;Chosen;Left,Bottom;no_block",
            "speak;Chosen;Ah, fuck! I gotta save the villages from those spiders!|Hmm, reaching the nearest bridge would take too long...|I gotta make do with what I have.{br}Through the forest!",
            "wait;300",
            "set_name;Chosen;{var:chosenname}",
            "if;{v:ivala} == 1",
            "    add_portrait;Ivala;Right,Top",
            "    speak;Ivala;Fulfill your destiny, my child.;top_left;;;;blue;;;;;None",
            "    speak;Chosen;Ivala! Grant me your blessing to overcome my first trial!;bottom_right",
            "    speak;Ivala;Follow my directions and you shall head towards greatness.;top_left;;;;blue;;;;;None",
            "    speak;Chosen;With your guidance nothing will stop me!;bottom_right",
            "    wait;100",
            "    multi_remove_portrait;Chosen;Ivala",
            "end"
        ],
        "nid": "P1 Intro"
    },
    {
        "name": "Tutorial: navigation e C",
        "trigger": "turn_change",
        "level_nid": "P1",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;{v:ivala} == 1",
            "wait;500",
            "add_portrait;Ivala;Right,Top",
            "wait;200",
            "speak;Ivala;It all functions on turns. Use your arrow keys, or your mouse, to navigate.|Use the confirm button (default: [X] key) to select the character you want to give commands to.|If you select an empty tile, you will be able to access extra menus, such as the <red>Options</> settings.|The check button (default: [C] key) lets you access the status menu.|On the same note, you can also use this button to read the descriptions of just about everything.|When in doubt, remember the Check button!;bottom;;;;blue;;;;;None",
            "add_portrait;Chosen;Left,Bottom",
            "speak;Chosen;Huh? I have no idea what you're talking about!;bottom_right",
            "speak;Ivala;Fear not, for what I speak{br}is not meant to reach your ears, but your Soul.;top_left;;;;blue;;;;;None",
            "speak;Chosen;Oh, uh, okay. I'll carry on!;bottom_right",
            "multi_remove_portrait;Chosen;Ivala",
            "end"
        ],
        "nid": "P1 Tutorial: navigation e C"
    },
    {
        "name": "Tutorial: movement",
        "trigger": "unit_select",
        "level_nid": "P1",
        "condition": "unit.nid == 'Chosen'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;{v:ivala} == 1",
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;You can frequently use the cancel button (default: Z key) to revert a selection.|After selecing a unit, your range of available movement will be displayed through blue tiles.|The red tiles show the maximum range of your attacks.|If you want to stay in place, select the same tile you are already on.|After moving, your options appear in a window.|The options you have available depend on a plethora of factors, such as your current position or available targets.|For now, feel free to move anywhere, then select <red>Wait</> to end your turn.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200",
            "end"
        ],
        "nid": "P1 Tutorial: movement"
    },
    {
        "name": "Tutorial: fort",
        "trigger": "phase_change",
        "level_nid": "P1",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;{v:ivala} == 1",
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;If you position yourself in a <red>Fort</> tile, you will be better equipped to handle a battle.|Forts grant units extra defense, and heal them at the beginning of your phase.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;500",
            "move_cursor;10,7",
            "disp_cursor;t",
            "wait;1000",
            "move_cursor;6,7",
            "disp_cursor;t",
            "wait;1000",
            "disp_cursor;n",
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Other tiles might give you positive or negative bonuses.|To check their effects, place the cursor on them and check the bottom part of your screen.|<red>\"DEF\"</> means how much defense a unit will gain by standing on it.|Likewise, <red>\"AVO\"</> means how much more likely the unit will dodge attacks.;bottom;;;;blue;;;;;None",
            "end"
        ],
        "nid": "P1 Tutorial: fort"
    },
    {
        "name": "Tutorial: cliff",
        "trigger": "phase_change",
        "level_nid": "P1",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;{v:ivala} == 1 and game.get_unit('Chosen').position == (13,5)",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    speak;Ivala;The map is divided into tiles, and you may find that each tile can help or hinder your journey.|Those cliffs are restricting your movement, you will have to choose another route.;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "end"
        ],
        "nid": "P1 Tutorial: cliff"
    },
    {
        "name": "Tutorial: move_and_action",
        "trigger": "enemy_turn_change",
        "level_nid": "P1",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;{v:ivala} == 1",
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Each unit needs to move (or stay in place) first, then perform an action.|You cannot move after actions.|When your units have run out of available actions, they turn gray.|In the enemy phase, your foes follow the same rules.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200",
            "end"
        ],
        "nid": "P1 Tutorial: move_and_action"
    },
    {
        "name": "Tutorial: trade",
        "trigger": "phase_change",
        "level_nid": "P1",
        "condition": "game.game_vars['ivala'] == 1 and game.get_unit('Chosen').get_hp() < game.get_unit('Chosen').get_max_hp() and game.level_vars['simonappears'] == 1 and has_item('Health_Potion', nid=\"Simonyoung\") == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Oh, dear Chosen, you are in need of healing.|Thankfully, Simon has brought a <red>Health Potion</>.|By placing your units adjacent to each other, they can <red>Trade</>.|Trade will switch items between their inventories.|Inventories can hold up to 4 items and 1 accessory.|You can trade as many times as you want before performing an action.|However, you cannot cancel your movement or move again after trading!;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200",
            "end"
        ],
        "nid": "P1 Tutorial: trade"
    },
    {
        "name": "Simon Chega e Tutorial: Supply",
        "trigger": "phase_change",
        "level_nid": "P1",
        "condition": "game.level_vars['simonappears'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "move_cursor;13,2",
            "disp_cursor;t",
            "wait;500",
            "music;Reinforcements",
            "add_unit;Simonyoung;13,2;fade;closest;north",
            "move_unit;Simonyoung;13,3;normal;closest",
            "wait;200",
            "add_unit;105;13,2;fade;stack;north",
            "add_unit;106;13,2;fade;stack;north",
            "add_unit;107;13,2;fade;stack;north",
            "add_unit;110;13,2;fade;stack;north",
            "add_unit;111;13,2;fade;stack;north",
            "move_unit;105;14,2;normal;closest",
            "move_unit;106;13,4;normal;closest",
            "move_unit;107;12,3;normal;closest",
            "move_unit;110;14,3;normal;closest",
            "move_unit;111;13,4;normal;closest",
            "wait;1000",
            "sound;Level Up",
            "alert;Simon joined your party!",
            "wait;500",
            "add_portrait;Simonyoung;Left,Bottom;normal",
            "s;Simonyoung;Rose group, prioritize the evacuation of nearby villages!|Maintain the communication link to our mages and we should be able to pinpoint the attack's origin.|Golem group, you're with me. Attack the spiders!",
            "remove_portrait;Simonyoung",
            "wait;400",
            "move_unit;105;14,4;normal;stack;no_block",
            "move_unit;106;14,4;normal;stack;no_block",
            "move_unit;107;14,4;normal;stack;no_block",
            "move_unit;110;109;normal;closest",
            "move_unit;111;108;normal;closest",
            "remove_group;Soldiers;fade",
            "wait;500",
            "set_stats;111;SKL,17;no_warn;immediate",
            "interact_unit;111;108;hit1, hit2, crit1",
            "interact_unit;110;109;miss1, crit2",
            "set_stats;111;SKL,5;no_warn;immediate",
            "wait;1000",
            "level_var;tutoskill;1",
            "level_var;tutocav;1",
            "if;{v:ivala} == 1",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;Now you have a powerful and useful unit at your disposal!|Simon is responsible for the party's <red>Supply</>, where you can store and retrieve items.|Units adjacent to Simon can also access the Supply as well!;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;500",
            "end",
            "music_fade_back"
        ],
        "nid": "P1 Simon Chega e Tutorial: Supply"
    },
    {
        "name": "Firstspiderdeath and Tutorial: snag",
        "trigger": "combat_end",
        "level_nid": "P1",
        "condition": "game.check_dead(\"102\") == True or game.check_dead(\"112\") == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "complete_achievement;firstofmany;t;banner",
            "if;{v:ivala} == 1 and {v:spiderboss} == 0 and {v:snagbridge} == 0",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;Good job defeating your first foe!|Now you must find a way to reach the other one.|Some maps contain breakable tiles, such as broken <red>Walls</> or <red>Snags</>.|Those can be attacked by any unit, friend or foe.|Always be on the lookout for them, as their destruction can change your available movement.;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;1000",
            "    flicker_cursor;8,7",
            "    wait;1000",
            "end"
        ],
        "nid": "P1 Firstspiderdeath and Tutorial: snag"
    },
    {
        "name": "Spiderboss death VICTORY",
        "trigger": "combat_end",
        "level_nid": "P1",
        "condition": "game.check_dead(\"SpiderQueen\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P1 Spiderboss death VICTORY"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "P1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "music_clear",
            "wait;1000",
            "change_background;VillageGate",
            "transition;open",
            "music;Happy1",
            "add_portrait;Chosen;Left,Bottom",
            "add_portrait;Simonyoung;Right,Bottom",
            "s;Chosen;Ahh... nothing beats the feeling of victory!|I saved the day, despite your grumpy ass holding me back!",
            "s;Simonyoung;As the Chosen, your life holds more responsibilities than only your own.|By rushing in without a plan, you're jeopardizing our whole continent's hope.",
            "s;Chosen;Nah, shut up.|I did most of the work while your lazy ass was sitting cowardly at the castle!",
            "s;Simonyoung;Joining a battlefield you know nothing about is not going to get you very far.",
            "s;Chosen;I already know everything I need:|I'm gonna save the world.|You keep worrying about the details, I'll be busy getting all the bitches.",
            "s;Simonyoung;...;;;;;;;;;;;;;no_sound;no_talk",
            "move_portrait;Chosen;CenterLeft",
            "add_portrait;SoldierBlue;FarLeft;left",
            "s;SoldierBlue;Captain, we've located the source of the attacks. It's the Jito Cave.",
            "s;Simonyoung;Good work. I'm heading there now.|Form search parties to investigate other caves nearby.",
            "s;Chosen;Sweet, our next step is already clear!",
            "transition;close",
            "wait;3000"
        ],
        "nid": "P1 Outro"
    },
    {
        "name": "Chosen Quote Spiderboss",
        "trigger": "combat_start",
        "level_nid": "P1",
        "condition": "(unit.nid == \"Chosen\" and unit2.nid == 'SpiderQueen') or (unit.nid == 'SpiderQueen' and unit2.nid == \"Chosen\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Chosen;Right,Bottom;;Smile",
            "s;Chosen;You're... You're freaking hot!{br}That's a spider succubus!|Dang, I'm gonna get a taste after defeating you!",
            "add_portrait;SpiderQueen;Left,Bottom",
            "s;SpiderQueen;You'd love that, wouldn't you, pretty boy?|I'm gonna have lots of fun once I tie you up.|I'm gonna make YOU shoot white sticky stuff out of your ass!",
            "s;Chosen;Hell ye-{c:expression;Chosen;NoSmile}{c:wait;700} wait...",
            "multi_remove_portrait;Chosen;SpiderQueen"
        ],
        "nid": "P1 Chosen Quote Spiderboss"
    },
    {
        "name": "PROL Death Chosen",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Chosen'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Chosen;FarRight",
            "speak;Chosen;Whaaat?{c:wait;500} I...{c:wait;500} I was THE one to...",
            "expression;Chosen;CloseEyes",
            "remove_portrait;Chosen",
            "if;{v:chosendeath} == 0",
            "    if;game.current_mode.nid != 'Ironman'",
            "        activate_turnwheel",
            "    else",
            "        remove_unit;Chosen;fade;fade",
            "    lose_game",
            "    end",
            "else",
            "    remove_unit;Chosen;fade;fade",
            "end"
        ],
        "nid": "Global PROL Death Chosen"
    },
    {
        "name": "Tutorial: green",
        "trigger": "other_turn_change",
        "level_nid": "P1",
        "condition": "game.game_vars['ivala'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Green units are <green>allies</> of your party.|They will move independently of your commands.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200",
            "end"
        ],
        "nid": "P1 Tutorial: green"
    },
    {
        "name": "Tutorial: skill",
        "trigger": "unit_select",
        "level_nid": "P1",
        "condition": "unit.nid == 'Simonyoung' and game.level_vars['tutoskill'] == 1 and game.game_vars['ivala'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Units have different <red>abilities</>, each with their own conditions and effects.|Generally, abilities cost <red>Mana</> to use. Mana is refilled at the start of each chapter.|You can consult the current mana of each character by accessing the status screen (C key).|As units level up or form connections to other units, they can gain more abilities.|Simon already has some of them, in the form of strikes that cause <red>status effects</>.|Since the boss uses Magic to attack, it's worth using <red>Silencing Strike</>!;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P1 Tutorial: skill"
    },
    {
        "name": "Tutorial: pair-up",
        "trigger": "unit_select",
        "level_nid": "P1",
        "condition": "game.level_vars['tutopair'] == 1 and game.game_vars['ivala'] == 1 and unit.nid == 'Chosen'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Let's talk about the <red>Pair-up</> system.|First, we have the <red>Attack Stance</>:|it triggers whenever one of 2 adjacent units enter a combat.|In that battle, the adjacent unit will join and deal half damage.|<red>This is true for friend (two blue units) or foe (two red units)!</>|On the other hand, we have the <red>Defense Stance</>:|Adjacent units can select the <red>Pair-up</> option to join another unit.|The joined unit will not participate in dealing damage.|Instead, they will accumulate 2 <red>charges</> from each battle.|When it reaches 10 charges, it will negate all damage once, and the gauge is reset.|After pairing-up, you can switch who is the \"main unit\" or separate.|Just remember, paired-up units will not participate in Attack Stances!;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P1 Tutorial: pair-up"
    },
    {
        "name": "Tutorial: attack speed",
        "trigger": "combat_start",
        "level_nid": "P1",
        "condition": "game.game_vars['ivala'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;The combat happens automatically, and many factors come into play.|<red>HIT</> refers to the percentage of an attack landing.|<red>DMG</> is, well, the damage.|<red>CRT</> is the chance of a critical strike, which deals thrice the damage!|Units sometimes can <red>double attack</>. This depends on a series of calculations.|In short, it's an interaction between the <red>SPD (speed)</> stat of the units,|the <red>WT (weight)</> of the weapons,|and the <red>CON (constitution)</> of each combatant.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P1 Tutorial: attack speed"
    },
    {
        "name": "PROL Death Simon",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Simonyoung'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Simonyoung;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    speak;Simonyoung;Wendis...{c:wait;500} We'll finally...",
            "    if;game.current_mode.nid != 'Ironman'",
            "        activate_turnwheel",
            "    else",
            "        remove_unit;Simonyoung;fade;fade",
            "        lose_game",
            "    end",
            "else",
            "    s;Simonyoung;I...{c:wait;500} was not good enough.{br}{c:wait;500}Forgive me, I must heal my injuries.",
            "end",
            "remove_portrait;Simonyoung",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Simon"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "#variaveis",
            "if;game.current_mode != 'Easy'",
            "    give_skill;Crusher;BossMiracle_1;;no_banner",
            "end",
            "level_var;alertplank;0",
            "level_var;plankgone;0",
            "level_var;mid;0",
            "level_var;midsetup;0",
            "level_var;alert;0",
            "## REMOVER ISSO AQUI DPS \\/",
            "#game_var;ivala;1",
            "#####",
            "add_talk;Chosen;Monica",
            "add_talk;Antarion;Monica",
            "remove_group;PlayerTeam;immediate",
            "show_layer;simplificando",
            "chapter_title",
            "change_background;Clearing",
            "transition;Open",
            "music;Happy1",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "s;Chosen;...and a redhead to complete my Harem.{c:wait;500}{br}Man, it's gonna be awesome being worldwide famous!",
            "s;Simonyoung;You have an obscenely high amount of other things you should rather be worrying about.",
            "expression;Chosen;NoSmile",
            "s;Chosen;Hmm... you're right...{c:expression;Chosen;CloseEyes}{c:wait;1500}{br}{c:expression;Chosen;OpenEyes}I will need to buy a mansion to fit so many people.",
            "s;Simonyoung;That's precisely not w-{c:wait;500} hold.",
            "s;Simonyoung;There, I can see it.",
            "remove_portrait;Simonyoung;;left",
            "wait;500",
            "transition;close",
            "remove_portrait;Chosen",
            "change_background;VillageGate",
            "add_portrait;Simonyoung;Left",
            "transition;open",
            "wait;700",
            "add_portrait;Chosen;Right;right",
            "wait;700",
            "s;Chosen;That's our next stop? Alright, let's go!",
            "wait;500",
            "remove_portrait;Simonyoung;;normal",
            "remove_portrait;Chosen;;normal",
            "wait;500",
            "transition;close",
            "change_background",
            "move_cursor;9,16",
            "add_group;PlayerTeam;starting;immediate;giveup",
            "add_group;Others;starting;immediate;giveup",
            "add_group;Bandits;starting;immediate;giveup",
            "center_cursor;10,11",
            "transition;open",
            "wait;1500",
            "center_cursor;Chosen",
            "wait;1000",
            "add_portrait;Chosen;Left;normal;Smile",
            "s;Chosen;Ohh, I see a pretty lady there!",
            "wait;300",
            "move_unit;Chosen;10,12;normal;giveup;no_block",
            "move_unit;Simonyoung;9,12;normal;giveup",
            "move_unit;Simonyoung;9,11;normal;giveup",
            "move_unit;Simonyoung;10,11;normal;giveup",
            "wait;500",
            "add_portrait;Simonyoung;Right;normal;NoSmile",
            "expression;Chosen;NoSmile",
            "music_clear",
            "s;Simonyoung;Wait. There's something wrong here.",
            "wait;400",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;1000",
            "center_cursor;9,7",
            "music;Tension",
            "wait;1500",
            "flicker_cursor;Crusher",
            "wait;300",
            "add_portrait;Crusher;Right;normal;Smile",
            "s;Crusher;Come on, I have other stuff to do.|Hand over the nun already and you guys will live!",
            "add_portrait;Monica;FarLeft;normal;NoSmile",
            "s;Monica;{tgm}...",
            "add_portrait;Cassian;Left;left;NoSmile",
            "s;Cassian;Who do you think you are, jackass?|Do you really think we'll just bend our knees to your ugly ass?",
            "expression;Crusher;NoSmile",
            "add_portrait;Lucia;MidLeft;left;Smile",
            "s;Lucia;You mean to say that you would consider it if he were handsome?",
            "s;Cassian;It's useless to come up with impossible scenarios.|The hot ones don't form brigand bands.",
            "s;Lucia;But sometimes they are amongst their underlings.|You know, last summer, that thief...",
            "bop_portrait;Crusher",
            "s;Crusher;Enough!{c:wait;400} What the hell are you two talking about?!|Men, crush them and I'll resume our operation!",
            "s;Cassian;Well, we tried the diplomacy!",
            "s;Lucia;No, we fucking didn't.",
            "multi_remove_portrait;Monica;Cassian;Lucia;Crusher",
            "# END SKIP AQUI",
            "end_skip",
            "wait;500",
            "center_cursor;19,5;no_block",
            "move_unit;Crusher;21,5;normal;stack",
            "add_portrait;Crusher;Right",
            "s;Crusher;Allllright you blockheads, set up a perimeter! <red>If they get close, stop them!</>",
            "remove_portrait;Crusher",
            "wait;1000",
            "center_cursor;Monica",
            "wait;400",
            "center_cursor;3,8",
            "move_unit;113;6,7;normal;giveup;no_block;no_follow",
            "move_unit;110;7,8;normal;giveup;no_block;no_follow",
            "move_unit;109;6,9;normal;giveup;no_block;no_follow",
            "move_unit;Monica;1,8;normal;giveup;no_block;no_follow",
            "move_unit;Cassian;2,8;normal;giveup;no_follow;no_block",
            "move_unit;Lucia;1,9;normal;giveup;no_follow",
            "wait;3000",
            "move_cursor;Chosen",
            "wait;1000",
            "multi_add_portrait;Simonyoung;Left;Chosen;Right",
            "wait;200",
            "s;Chosen;Alright, I've decided.|The next step in my journey is to save those guys!|I'll be recognized as the hero who saved this village, and gain a hot nun to start my collection!",
            "s;Simonyoung;{tgm}...",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;400",
            "music_clear",
            "add_unit;Antarion;8,17;fade;giveup;south",
            "move_cursor;Antarion",
            "flicker_cursor;Antarion",
            "wait;300",
            "move_unit;Antarion;9,12;normal;giveup",
            "wait;200",
            "add_portrait;Antarion;Left;normal;Smile",
            "music;Funny",
            "s;Antarion;Mere bandits dare to attack this precious flower?|Ha! Not in the presence of the mighty Antarion!|You shall taste defeat from the mightiest of the land!",
            "wait;200",
            "add_portrait;Chosen;Right;normal;NoSmile",
            "s;Chosen;Bro, what the hell?! You're seriously trying to steal my spotlight?",
            "s;Antarion;Who even are you, kid? Go play with your toys somewhere else, this is between adults.",
            "s;Chosen;You... you...!",
            "s;Antarion;In awe? I know, it isn't every day you meet a famous blademaster such as myself.|If you wish to join my party, then just say so.|I'll protect you from the threat.{br}Try not to soil your diaper.",
            "remove_portrait;Antarion",
            "wait;200",
            "move_unit;Antarion;9,11",
            "wait;1000",
            "s;Chosen;By Ivala, this prick is gonna pay!{br}I'm gonna defeat way more bandits than him!",
            "remove_portrait;Chosen",
            "wait;500",
            "move_unit;Simonyoung;11,11;normal;giveup",
            "move_unit;Chosen;10,11;normal;giveup",
            "wait;1000",
            "change_team;Antarion;player",
            "wait;200",
            "sound;Level Up",
            "alert;You joined \"Antarion's Party\"!",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;You are about to enter the <red>Preparation screen</>. You will be able to view many options.|Most importantly, you will be able to <red>select which units participate in the next battle</>.|You can deploy those units in specific tiles.|Be sure to look out for strategies concerning their initial positions!;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "end",
            "music_clear",
            "transition;close;1500",
            "prep;t;Preparation"
        ],
        "nid": "P4 Intro"
    },
    {
        "name": "Wall destroyed",
        "trigger": "unit_death",
        "level_nid": "P4",
        "condition": "unit.nid == 'Wall_dir'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "remove_region;alert",
            "wait;500",
            "map_anim;Snag;21,4",
            "sound;VillageDestroyed",
            "show_layer;wall_dir",
            "remove_region;Wall_dir",
            "wait;1000",
            "center_cursor;Crusher",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "wait;300",
            "s;Crusher;Yes... yes! HAHAHAHA!",
            "s;Plank;So what's the big idea?",
            "s;Crusher;Shut up and GO GRAB IT!",
            "s;Plank;A good leader should be communicative... but okay, okay.",
            "multi_remove_portrait;Crusher;Plank",
            "wait;400",
            "move_unit;Plank;22,1;normal;stack;no_follow",
            "wait;400",
            "show_layer;chest",
            "unlock;Plank",
            "wait;400",
            "move_unit;Plank;22,5;normal;closest",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "wait;300",
            "s;Plank;What... is this an insignia or something?{br}It's in another fucking language.|What the hell...",
            "s;Crusher;This is worth more than your sorry life.|Deliver it to that creepy aramite, and we should be set for life!",
            "s;Plank;Now that's good news.",
            "multi_remove_portrait;Crusher;Plank",
            "wait;500",
            "move_unit;Plank;24,5;normal;closest",
            "wait;400",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "wait;300",
            "s;Plank;You, uh, coming?",
            "s;Crusher;I... can't.",
            "s;Plank;Huh? What?",
            "expression;Crusher;NoSmile",
            "bop_portrait;Crusher",
            "s;Crusher;I fucking CAN'T!|I'm too tired, my legs just  ain't moving anytime soon.|I defeated this wall, those chumps should be easy.",
            "s;Plank;...If you say so.",
            "multi_remove_portrait;Crusher;Plank",
            "wait;300",
            "remove_unit;Plank;fade;east"
        ],
        "nid": "P4 Wall destroyed"
    },
    {
        "name": "Tutorial: weapon triangle",
        "trigger": "unit_select",
        "level_nid": "P4",
        "condition": "game.game_vars['ivala'] == 1 and (unit.nid == 'Chosen' or unit.nid == 'Antarion' or unit.nid =='Simonyoung')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;There is something important you should be aware of: the enemies' <red>weapons</>.;bottom;;;;blue;;;;;None",
            "center_cursor;113",
            "flicker_cursor;113",
            "wait;300",
            "speak;Ivala;This enemy uses an <icon>Axe</><red>Axe</>.;bottom;;;;blue;;;;;None",
            "wait;300",
            "center_cursor;110",
            "flicker_cursor;110",
            "wait;300",
            "speak;Ivala;This one uses a <icon>Sword</><red>Sword</>.;bottom;;;;blue;;;;;None",
            "wait;200",
            "move_cursor;109",
            "flicker_cursor;109",
            "wait;300",
            "speak;Ivala;And this one uses a <icon>Lance</><red>Lance</>.;bottom;;;;blue;;;;;None",
            "speak;Ivala;Those three types make what is called the <red>Weapon Triangle</>.|Think of it as Rock-Paper-Scissors:|<red>Sword beats Axe.|Axe beats Lance.|Lance beats Sword.</>|This relation will affect the damage and accuracy in combat.|Try not to get countered!;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P4 Tutorial: weapon triangle"
    },
    {
        "name": "Chosen Recruits Monica and Cavs",
        "trigger": "on_talk",
        "level_nid": "P4",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Monica'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Reinforcements",
            "multi_add_portrait;Chosen;Left;Monica;Right",
            "s;Chosen;Alright, let me rescue you, baby!|I'm {var:chosenname}, the one and only Chosen of Ivala!",
            "bop_portrait;Monica",
            "s;Monica;{tgm}!",
            "s;Chosen;I'm sure someone as devout as you know the significance of this.|I'm simply awesome, right?",
            "s;Monica;{tgm}...",
            "s;Chosen;Don't worry, no one's gonna hurt you.|Unless you ask me to, if you know what I mean!",
            "expression;Monica;HalfCloseEyes",
            "wait;300",
            "s;Chosen;Anyway, stick with me and we're good!",
            "expression;Monica;Smile",
            "wait;300",
            "multi_remove_portrait;Monica;Chosen",
            "wait;500",
            "change_team;Monica;player",
            "sound;Level Up",
            "alert;Monica has joined your party!",
            "remove_talk;Chosen;Monica",
            "remove_talk;Antarion;Monica",
            "if;game.check_alive('Cassian') == True",
            "    flicker_cursor;Cassian",
            "    wait;300",
            "    add_portrait;Cassian;Left;normal;Smile",
            "    wait;200",
            "    s;Cassian;Seems like Sister Monica trusts these guys.|The more the merrier!",
            "    remove_portrait;Cassian",
            "    change_team;Cassian;player",
            "    sound;Level Up",
            "    alert;Cassian has joined your party!",
            "end",
            "if;game.check_alive('Lucia') == True",
            "    flicker_cursor;Lucia",
            "    wait;300",
            "    add_portrait;Lucia;Left;normal;Smile",
            "    wait;200",
            "    s;Lucia;Hoh... She's opening up her guard.|Must've seen something in them.",
            "    remove_portrait;Lucia",
            "    change_team;Lucia;player",
            "    sound;Level Up",
            "    alert;Lucia has joined your party!",
            "end",
            "music_fade_back"
        ],
        "nid": "P4 Chosen Recruits Monica and Cavs"
    },
    {
        "name": "Antarion Recruits Monica and Cavs",
        "trigger": "on_talk",
        "level_nid": "P4",
        "condition": "unit.nid == 'Antarion' and unit2.nid == 'Monica'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Reinforcements",
            "multi_add_portrait;Antarion;Left;Monica;Right",
            "s;Antarion;Oh, do forgive me, my fair maiden.{c:wait;400} I cannot help but protect a precious flower in need.",
            "s;Monica;{tgm}...",
            "s;Antarion;If you are still bound by celibacy, do not fear.|I can make you a very happy lay priestess!",
            "expression;Monica;HalfCloseEyes",
            "s;Monica;{tgm}...",
            "s;Antarion;Oh, are you perhaps on your Vow of Silence?",
            "expression;Monica;Smile",
            "bop_portrait;Monica",
            "wait;300",
            "s;Antarion;I see. I will wait whatever it takes to hear your sweet moans! ",
            "expression;Monica;NoSmile",
            "expression;Monica;CloseEyes",
            "wait;100",
            "remove_portrait;Monica;;right",
            "wait;300",
            "s;Antarion;I love it when they play hard to get.",
            "wait;500",
            "remove_portrait;Antarion",
            "wait;500",
            "change_team;Monica;player",
            "sound;Level Up",
            "alert;Monica has joined your party!",
            "wait;2000",
            "remove_talk;Chosen;Monica",
            "remove_talk;Antarion;Monica",
            "if;game.check_alive('Cassian') == True",
            "    flicker_cursor;Cassian",
            "    wait;300",
            "    add_portrait;Cassian;Left;normal;Smile",
            "    wait;200",
            "    s;Cassian;Seems like Sister Monica trusts these guys.|The more the merrier!",
            "    remove_portrait;Cassian",
            "    change_team;Cassian;player",
            "    sound;Level Up",
            "    alert;Cassian has joined your party!",
            "    wait;2000",
            "end",
            "if;game.check_alive('Lucia') == True",
            "    flicker_cursor;Lucia",
            "    wait;300",
            "    add_portrait;Lucia;Left;normal;Smile",
            "    wait;200",
            "    s;Lucia;Hoh... She's opening up her guard.|Must've seen something in them.",
            "    remove_portrait;Lucia",
            "    change_team;Lucia;player",
            "    sound;Level Up",
            "    alert;Lucia has joined your party!",
            "    wait;2000",
            "end",
            "music_fade_back"
        ],
        "nid": "P4 Antarion Recruits Monica and Cavs"
    },
    {
        "name": "Snagbridge baixo",
        "trigger": "unit_death",
        "level_nid": "P1",
        "condition": "unit.nid == 'Snagbaixo'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;500",
            "map_anim;Snag;8,7",
            "sound;VillageDestroyed",
            "show_layer;snagbaixo",
            "level_var;snagbridge;1",
            "remove_region;Snagbaixo"
        ],
        "nid": "P1 Snagbridge baixo"
    },
    {
        "name": "Second spider death and Tutorial: Visit",
        "trigger": "combat_end",
        "level_nid": "P1",
        "condition": "game.check_dead(\"102\") == True and game.check_dead(\"112\") == True and game.level_vars['spiderboss'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music_clear",
            "wait;300",
            "sound;Level Up",
            "music;Happy1",
            "add_portrait;Chosen;Left;normal;Smile",
            "s;Chosen;Ohh yeah, I did it!|I've gotta let the villagers know.|Maybe a cute farmer will even fall for me, hehehe...",
            "wait;500",
            "remove_portrait;Chosen",
            "wait;400",
            "change_objective_simple;Visit the Village.",
            "change_music;player_phase;Happy1",
            "if;{v:ivala} == 1",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;By positioning a unit in certain tiles, you can interact with them.|You should <red>Visit</> Shops, Houses and Villages.|Villages are often at risk of being attacked, but you can prevent attacks by visiting them.;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;500",
            "    flicker_cursor;1,2",
            "    wait;500",
            "end"
        ],
        "nid": "P1 Second spider death and Tutorial: Visit"
    },
    {
        "name": "Tutorial: cav mov",
        "trigger": "phase_change",
        "level_nid": "P1",
        "condition": "game.level_vars['tutocav'] == 1 and game.game_vars['ivala'] == 1 and game.level_vars['snagbridgecima'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;As a Paladin, Simon is a <red>Mounted</> unit.|Mounted units typically have greater movement range in general!|However, some classes can move better or worse depending on the terrain.|Because the path below is a forest, Simon would take a long time to cross it.|Why don't you open up a new bridge for him in the north side?;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;700",
            "flicker_cursor;7,2",
            "wait;1000"
        ],
        "nid": "P1 Tutorial: cav mov"
    },
    {
        "name": "Tutorial: level up",
        "trigger": "unit_level_up",
        "level_nid": "P1",
        "condition": "unit.nid == 'Chosen' and game.game_vars['ivala'] == 1 and game.check_alive('101') == False and game.check_alive('112') == False",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Congratulations on leveling up!|As you can see, some of your stats have increased.|The chance of each stat leveling up is random, with varied percentages.|The chance of a stat to increase on level up is called <red>Growth</>.|Each unit has different growths!|You can view them by accessing the status menu and pressing the A key.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P1 Tutorial: level up"
    },
    {
        "name": "Overworld",
        "trigger": "overworld_start",
        "level_nid": "P1",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_road;26;28",
            "reveal_overworld_node;28"
        ],
        "nid": "P1 Overworld"
    },
    {
        "name": "Enemy reinforcements middle and Tutorial: moving boss + archer",
        "trigger": "turn_change",
        "level_nid": "P4",
        "condition": "game.turncount == 6 or game.level_vars['midsetup'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;mid;1",
            "wait;1000",
            "center_cursor;10,1",
            "music;Halfway change loop",
            "wait;300",
            "add_unit;Bruce;8,0;fade;closest;north",
            "move_unit;Bruce;8,1;normal;closest",
            "add_unit;115;7,0;fade;closest;north",
            "add_unit;116;9,0;fade;closest;north",
            "wait;600",
            "add_portrait;Bruce;Right",
            "wait;300",
            "s;Bruce;Tsc. These guys will fight back.|Alright, you fellas with me.{br}Coordinate our movements.",
            "wait;300",
            "remove_portrait;Bruce",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "change_music;enemy_battle;Halfway change loop",
            "change_music;player_battle;Halfway change loop",
            "wait;1000",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;Another <red>Boss</> unit has appeared!|Be careful, though, as this is a <red>moving Boss</>!|Remember to check his range by selecting him.|He has also brought archers, who use <red>ranged</> attacks.|Getting close to them will be your best bet!;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "end"
        ],
        "nid": "P4 Enemy reinforcements middle and Tutorial: moving boss + archer"
    },
    {
        "name": "CrushWall2",
        "trigger": "enemy_turn_change",
        "level_nid": "P4",
        "condition": "game.turncount == 2 and game.level_vars['alert'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "center_cursor;Crusher",
            "flicker_cursor;Crusher",
            "wait;500",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "s;Plank;I'm telling you, it's the force. You're just a brute, you have no idea how this works.|If you attack the specific spots, this will break in no sweat.|In all honesty, this is your limit. It's OK to give up.",
            "s;Crusher;Oh my fucking god, just please go bother someone else if you're not helping!",
            "s;Plank;See, losing your calm isn't the quality of a leader.|This wall is more composed than you are.",
            "s;Crusher;How about you stand right between me and the wall?|This will motivate me to CRUSH YOU BOTH!",
            "s;Plank;Just move over and let me do my trick.",
            "multi_remove_portrait;Crusher;Plank",
            "wait;400",
            "move_unit;Crusher;20,5;normal;push",
            "move_unit;Plank;21,5;normal;push",
            "interact_unit;Plank;Wall_dir;hit1;;force_no_animation",
            "music_clear",
            "wait;2000",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "wait;1000",
            "music_fade_back",
            "s;Plank;Why is this broken sword not helping? I swear, yesterday it was fine.|That is Albert's fault. Yeah, he just HAD to clean our weapons.|Welp, can't trust no one, no. You're on your own.",
            "expression;Crusher;CloseEyes",
            "s;Crusher;If only I hadn't promised your father... You'd be in hell already.",
            "wait;500",
            "multi_remove_portrait;Crusher;Plank",
            "wait;1000",
            "move_unit;Plank;22,5;normal;stack",
            "move_unit;Crusher;21,5;normal;stack"
        ],
        "nid": "P4 CrushWall2"
    },
    {
        "name": "CrushWall1",
        "trigger": "enemy_turn_change",
        "level_nid": "P4",
        "condition": "game.turncount == 1 and game.level_vars['alert'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "center_cursor;Crusher",
            "flicker_cursor;Crusher",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "s;Crusher;Alright, time to break this thing.",
            "s;Plank;Frankly, boss, you're too stupid to lead.|Why not just go around and use the door?",
            "s;Crusher;You think I'm an idiot like you? Ha!|The door has some fancy magic or shit. They prepared for it.|But this... they didn't expect!",
            "multi_remove_portrait;Crusher;Plank",
            "wait;400",
            "interact_unit;Crusher;Wall_dir;hit1;;force_no_animation",
            "music_clear",
            "wait;1500",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "wait;1000",
            "s;Crusher;Okay, you don't need to fucking say it, this wall is tougher than it looks.",
            "s;Plank;I'd rather not stay here all night, boss.",
            "expression;Crusher;CloseEyes",
            "wait;500",
            "multi_remove_portrait;Crusher;Plank",
            "wait;1000",
            "music;Prologue enemy phase"
        ],
        "nid": "P4 CrushWall1"
    },
    {
        "name": "CrushWall3",
        "trigger": "enemy_turn_change",
        "level_nid": "P4",
        "condition": "game.turncount == 3 and game.level_vars['alert'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "center_cursor;Crusher",
            "flicker_cursor;Crusher",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "s;Plank;...and then the whole meat fell into the fire!|Why the fuck wouldn't he have listened to me?",
            "s;Crusher;Hmm-hm.",
            "s;Plank;That's what I told Keny. But Keny is a two-faced bitch.|I fucking knew he wouldn't have agreed with me in public.|But after the raid, who comes searching for me?",
            "s;Crusher;{tgm}...",
            "s;Plank;That's right, the same ol' Keny! I swear, those guys are...",
            "multi_remove_portrait;Crusher;Plank",
            "wait;400",
            "interact_unit;Crusher;Wall_dir;hit1;;force_no_animation",
            "wait;3000",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "wait;1000",
            "s;Plank;...just incorrigible. That's why this band needs a better leader.|Someone who can put those guys in their place. Someone capable of...",
            "s;Crusher;I really wish you were a wall right now.",
            "wait;500",
            "multi_remove_portrait;Crusher;Plank",
            "wait;1000"
        ],
        "nid": "P4 CrushWall3"
    },
    {
        "name": "CrushWall4",
        "trigger": "enemy_turn_change",
        "level_nid": "P4",
        "condition": "game.turncount == 4 and game.level_vars['alert'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "center_cursor;Crusher",
            "flicker_cursor;Crusher",
            "multi_add_portrait;Crusher;Left;Plank;Right",
            "s;Crusher;If this nightmare of a wall don't fall right now, I swear...",
            "s;Plank;I have an idea, what if you just...",
            "s;Crusher;I have another one. Stop driving me insane for once and go fetch Bruce and the others.",
            "s;Plank;Are you kidding me? And just let the villagers free?|Stuff like this wouldn't fly with my command.|It would all be neat and quick.|Just imagine, I go all boss-like, I say \"round them up\", and then they...",
            "bop_portrait;Crusher",
            "s;Crusher;GO ALREADY!",
            "s;Plank;Alright, alright...",
            "remove_portrait;Plank;;right",
            "remove_unit;Plank;swoosh;east",
            "s;Crusher;{tgm}...",
            "remove_portrait;Crusher",
            "wait;400",
            "interact_unit;Crusher;Wall_dir;hit1;;force_no_animation",
            "wait;1000",
            "level_var;plankgone;1"
        ],
        "nid": "P4 CrushWall4"
    },
    {
        "name": "CrushWall5",
        "trigger": "enemy_turn_change",
        "level_nid": "P4",
        "condition": "game.turncount == 5 and game.level_vars['alert'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;{v:alertplank} == 0",
            "    center_cursor;Crusher",
            "    flicker_cursor;Crusher",
            "    add_unit;Plank;24,5;swoosh;closest;east",
            "    wait;500",
            "    move_unit;Plank;22,5;normal;closest",
            "    wait;500",
            "    multi_add_portrait;Crusher;Left;Plank;Right",
            "    s;Plank;Did ya miss me?",
            "    s;Crusher;Was it really worth tasting silence, only to part with it so quickly...?",
            "    s;Plank;What are you speaking so philosophically for?|That's why this wall is still there.|You don't see the wall complaining.",
            "    multi_remove_portrait;Crusher;Plank",
            "    wait;400",
            "    interact_unit;Crusher;Wall_dir;hit1;;force_no_animation",
            "    wait;1000",
            "    multi_add_portrait;Crusher;Left;Plank;Right",
            "    wait;500",
            "    s;Crusher;So, are they coming or not?",
            "    s;Plank;Yeah, soon.",
            "    wait;500",
            "    multi_remove_portrait;Crusher;Plank",
            "    wait;1000",
            "    level_var;plankgone;0",
            "elif;{v:alertplank} == 1",
            "    center_cursor;Crusher",
            "    add_unit;Plank;24,5;swoosh;closest;east",
            "    wait;1000",
            "    add_portrait;Plank;Left;normal;NoSmile",
            "    s;Plank;...Ah.|Welp, good luck, boss!",
            "    wait;300",
            "    remove_portrait;Plank",
            "    wait;300",
            "    remove_unit;Plank;swoosh;east",
            "end",
            ""
        ],
        "nid": "P4 CrushWall5"
    },
    {
        "name": "Alert, enemy near Crusher",
        "trigger": "Alert",
        "level_nid": "P4",
        "condition": "any(game.level.regions.get('alert').contains(unit.position) for unit in game.get_units_in_party()) == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;alert;1",
            "remove_region;alert",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "change_music;enemy_battle;Halfway change loop",
            "change_music;player_battle;Halfway change loop",
            "change_ai;107;Pursue",
            "change_ai;114;Pursue",
            "if;{v:plankgone} == 0",
            "    wait;1000",
            "    center_cursor;Crusher",
            "    wait;500",
            "    multi_add_portrait;Crusher;Left;Plank;Right",
            "    wait;300",
            "    s;Crusher;Ah fuck...",
            "    s;Plank;They're here, boss! Leave this wall-boyfriend of yours!",
            "    expression;Crusher;CloseEyes",
            "    s;Crusher;I... can't.",
            "    s;Plank;Huh? What?",
            "    expression;Crusher;NoSmile",
            "    bop_portrait;Crusher",
            "    s;Crusher;I fucking CAN'T!|I'm too tired, my legs just  ain't moving anytime soon.|Either I complete my mission or I'll die right here.",
            "    s;Plank;{tgm}...",
            "    s;Crusher;So go. Save your pathetic ass at least.",
            "    s;Plank;Boss... I'll always remember ya.|Sometimes as an example of what not to do. Or most of the time. Or alw-",
            "    interact_unit;Crusher;Plank;miss1",
            "    wait;500",
            "    s;Plank;Ok. Bye.",
            "    multi_remove_portrait;Crusher;Plank",
            "    wait;500",
            "    remove_unit;Plank;swoosh;east",
            "    change_ai;Crusher;Guard",
            "elif;{v:plankgone} == 1",
            "    wait;1000",
            "    center_cursor;Crusher",
            "    wait;500",
            "    add_portrait;Crusher;Right",
            "    wait;300",
            "    s;Crusher;So this is my final stand, huh...?|Alright, bring it on, little maggots!|I'll show why I'm called the Crusher!",
            "    change_ai;Crusher;Guard",
            "    level_var;alertplank;1",
            "end",
            "if;{v:mid} == 0",
            "    level_var;midsetup;1",
            "end"
        ],
        "nid": "P4 Alert, enemy near Crusher"
    },
    {
        "name": "Crusher dies VICTORY",
        "trigger": "combat_end",
        "level_nid": "P4",
        "condition": "game.check_dead(\"Crusher\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P4 Crusher dies VICTORY"
    },
    {
        "name": "CrushWall6",
        "trigger": null,
        "level_nid": "P4",
        "condition": "game.turncount == 6 and game.level_vars['alert'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "center_cursor;Crusher",
            "flicker_cursor;Crusher",
            "wait;1000",
            "interact_unit;Crusher;Wall_dir;hit1;;force_no_animation"
        ],
        "nid": "P4 CrushWall6"
    },
    {
        "name": "Tutorial: Trainee e Ranged",
        "trigger": "unit_select",
        "level_nid": "P1",
        "condition": "game.level_vars['tutopair'] == 1 and game.game_vars['ivala'] == 1 and unit.nid == 'Chosen'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Mira is a <red>Trainee</> character.|Trainees are classes that start out weak, but have high future potential!|Trainees automatically promote to a superior class when they reach level 10.|Be careful of sending Mira to the frontlines while she's still inexperienced.|Thankfully, she is wielding a <red>ranged</> axe!{br}This weapon can hit from 2 tiles away.|This lets you safely attack against melee opponents.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P1 Tutorial: Trainee e Ranged"
    },
    {
        "name": "PROL Death Mira",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Mira'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Mira;FarRight;normal;CloseEyes",
            "if;game.current_mode.permadeath",
            "    speak;Mira;No...{c:wait;300} not until he is...",
            "else",
            "    s;Mira;I...{c:wait;300}{c:expression;Mira;OpenEyes}{c:bop_portrait;Mira} will come back stronger!",
            "end",
            "remove_portrait;Mira",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Mira"
    },
    {
        "name": "Seize cave entrance VICTORY",
        "trigger": "Enter",
        "level_nid": "P2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P2 Seize cave entrance VICTORY"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Batgal;BossMiracle_1;;no_banner",
            "end",
            "",
            "change_background;BlackBackground",
            "chapter_title",
            "transition;close",
            "add_weather;night",
            "change_background;ForestDark",
            "multi_add_portrait;Simonyoung;Right;Chosen;Left",
            "transition;open",
            "s;Simonyoung;We're almost there.",
            "move_portrait;Chosen;MidLeft;no_block",
            "add_portrait;SoldierBlue;FarLeft;left",
            "music;Tension",
            "s;SoldierBlue;S-sir! The... Captain Duro has...",
            "s;Simonyoung;Calm down. What happened?",
            "s;SoldierBlue;Sorry, sir. We were wounded... Captain Duro has sacrificed himself to let us retreat!|He's alone holding the monsters at the entrance of Jito!",
            "s;Simonyoung;Understood. Leave it to us, we'll pick up our pace.",
            "s;SoldierBlue;Yes, sir!",
            "remove_portrait;SoldierBlue;;left",
            "move_portrait;Chosen;Left",
            "s;Chosen;What a cool guy this Duro must be!",
            "s;Simonyoung;This could be a trap.",
            "s;Chosen;Huh?",
            "s;Simonyoung;Enemy succubi could be attempting to deceive us.",
            "s;Chosen;Oh... Fuck! So, do we still go there?",
            "expression;Simonyoung;CloseEyes",
            "s;Simonyoung;...;no_talk",
            "expression;Simonyoung;OpenEyes",
            "s;Simonyoung;We don't have a choice. This could still be true. Come on.",
            "s;Chosen;Yeah!",
            "transition;close",
            "change_background",
            "wait;1000",
            "move_cursor;6,9",
            "transition;open",
            "end_skip",
            "wait;1500",
            "flicker_cursor;Duro",
            "wait;500",
            "add_portrait;Duro;Left",
            "wait;300",
            "s;Duro;HA! You monsters don't stand a chance!|My lance might not be in its peak, but it still can thrust well enough!|Who wants to be next?!",
            "remove_portrait;Duro",
            "wait;500",
            "give_skill;Duro;Like_a_champ_cutscene;;no_banner;persistent",
            "interact_unit;108;Duro;hit1,hit2,hit1,hit2,end",
            "remove_skill;Duro;Like_a_champ_cutscene;no_banner",
            "add_portrait;Duro;Left",
            "wait;300",
            "s;Duro;HAHA! I'll sleep here at this rate!",
            "remove_portrait;Duro",
            "wait;500",
            "move_unit;113;6,7;normal",
            "wait;500",
            "interact_unit;113;Duro;hit1,end",
            "wait;500",
            "add_portrait;Duro;Left;;NoSmile",
            "wait;300",
            "s;Duro;Aw shit, those magic assholes piss me off!",
            "remove_portrait;Duro",
            "wait;1000",
            "move_cursor;6,11",
            "music;Reinforcements",
            "#SPAWN GROUP",
            "add_group;Player;Player;fade;stack",
            "move_group;Player;Player;normal;stack",
            "wait;1500",
            "multi_add_portrait;Duro;Left;Chosen;Right",
            "s;Chosen;You're in luck, your savior is here!|You don't have to sacrifice yourself anymore!",
            "s;Duro;Sacrifice? Gah, who told you that, shithair?|I'm just enjoying my time here alone, is all! HAHAHAHA!",
            "s;Chosen;Wha-... I think we should leave this guy behind.",
            "s;Duro;Haha! Ease up, will you?|Simon, your new boyfriend is funny!",
            "remove_portrait;Chosen",
            "add_portrait;Simonyoung;Right",
            "s;Simonyoung;If you don't have anything useful to say, I take it the situation is controlled.",
            "s;Duro;Oh, it's just the opposite! I just wanna die smiling!|See, there's this succubus who have put us into a lot of trouble...",
            "wait;300",
            "flicker_cursor;Batgal",
            "wait;1000",
            "move_cursor;Duro",
            "wait;300",
            "s;Duro;So let's take down this girl and we enter the cave.|If we don't succeed, she'll enter OUR cave! HAHAHA!",
            "s;Simonyoung;...;no_talk",
            "multi_remove_portrait;Duro;Simonyoung",
            "wait;1000",
            "change_team;Duro;player",
            "sound;Level Up",
            "alert;Duro has joined your party!",
            "wait;1000"
        ],
        "nid": "P2 Intro"
    },
    {
        "name": "Tutorial: support and synergy skills",
        "trigger": "phase_change",
        "level_nid": "P2",
        "condition": "game.game_vars['ivala'] == 1 and game.turncount == 2",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Aside from more muscles, allies also bring advantages in the form of <red>Support</>.|When your units enter combat or stay nearby (2 tiles range), they gain <red>Support points</>.|By increasing those points, they unlock <red>Support Conversations</> when adjacent.|Any time this happens, their <red>Support Rank</> increases.|Increasing those ranks grant bonuses to the stats of the respective units, when nearby.|You can also gain <red>Synergy Abilities</> by achieving certain ranks!|In short, bonds are power!;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P2 Tutorial: support and synergy skills"
    },
    {
        "name": "Boss quote",
        "trigger": "combat_start",
        "level_nid": "P2",
        "condition": "(unit.nid == \"Duro\" and unit2.nid == 'Batgal') or (unit.nid == 'Batgal' and unit2.nid == \"Duro\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Duro;Right,Bottom;;Smile",
            "s;Duro;Hey, sorry you couldn't have your fun with my boys!|I'm the protector of their chastity, HAHA!",
            "add_portrait;SpiderQueen;Left,Bottom",
            "s;SpiderQueen;That's quite alright. With your size, I'm betting you can make up for it nicely...",
            "s;Duro;You see, this would not fly well with my wife.|No offense, darling, but she is way scarier than you! HAHAHA!",
            "multi_remove_portrait;Duro;SpiderQueen"
        ],
        "nid": "P2 Boss quote"
    },
    {
        "name": "Tutorial: magic vs armor",
        "trigger": "unit_select",
        "level_nid": "P2",
        "condition": "game.game_vars['ivala'] == 1 and unit.nid == 'Duro'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;As a <red>armored</> unit, Duro has good defense and is suitable for the frontlines.|However, armored units have poor resistance and are vulnerable to magic attacks!;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P2 Tutorial: magic vs armor"
    },
    {
        "name": "Outro e IK cutscene",
        "trigger": "level_end",
        "level_nid": "P2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;ForestDark",
            "multi_add_portrait;SpiderQueen;Left;Chosen;MidRight",
            "transition;open",
            "if;game.check_alive('Duro') == True",
            "    add_portrait;Duro;FarRight",
            "end",
            "s;Chosen;You're just a stepping stone in my journey! Now go away, back to your precious Incubus King!",
            "s;SpiderQueen;...;no_talk",
            "s;SpiderQueen;Who would ever want to...",
            "remove_portrait;SpiderQueen;;left",
            "s;Chosen;...;;;thought_bubble",
            "#IK CUTSCENE START",
            "transition;close;1000",
            "change_background",
            "change_tilemap;ik throne;reload",
            "remove_all_units",
            "load_unit;Incubus_King;enemy",
            "add_unit;Incubus_King;10,7;immediate",
            "load_unit;Iris;enemy;None",
            "add_unit;Iris;10,10;immediate",
            "make_generic;suc1;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc1;6,12;immediate",
            "make_generic;suc2;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc2;14,13;immediate",
            "make_generic;suc3;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc3;15,13;immediate",
            "make_generic;elite1;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite1;9,13;immediate",
            "make_generic;elite2;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite2;11,13;immediate",
            "center_cursor;10,18",
            "wait;3000",
            "music;Tension2",
            "transition;open;1000",
            "wait;1000",
            "center_cursor;10,10;1000",
            "wait;1000",
            "flicker_cursor;Incubus_King",
            "wait;2000",
            "multi_add_portrait;Incubus King;Left;Iris;Right",
            "s;Iris;Master, the construction of the dildo tower you ordered has finally been completed.|On the course of its 17 months construction we used 52% of our nation's budget.|We will have to cut our spending on-",
            "expression;Incubus King;CloseEyes",
            "s;Incubus King;Don't care.",
            "s;Iris;... I understand.{c:wait;500} I will handle the treasury matters separately.",
            "expression;Incubus King;OpenEyes",
            "s;Incubus King;No. I don't care about the dildo tower anymore.",
            "expression;Iris;NoSmile",
            "s;Iris;But{c:wait;300}.{c:wait;300}.{c:wait;300}.{c:wait;300} We just{c:wait;300}.{c:wait;300}.{c:wait;300}.",
            "bop_portrait;Incubus King",
            "s;Incubus King;I know! It's devastating!|I really thought giantesses existed!!",
            "s;Iris;Was it all based on the assumption that you would find one...?",
            "expression;Incubus King;NoSmile",
            "s;Incubus King;Of course!|There are lots of succubi types, so it was clear to me I would find a giant one!|But the world really disappointed me. My dream is SHATTERED.|I will never get to experience being inside a dildo inside a woman...",
            "s;Iris;I'm sorry, master.|Luckily, I can think of other uses to this place.|We can use this opportunity to adress our housing crysis.|By my calculations we could accomodate up to 358 succubus families if we-",
            "s;Incubus King;Oh, yes! Fill it up!",
            "bop_portrait;Iris",
            "s;Iris;I'm glad you-",
            "s;Incubus King;Fill it up with cum!",
            "s;Iris;I'm sorry?",
            "bop_portrait;Incubus King",
            "s;Incubus King;I want to see it filled it up to the brim with cum.{c:wait;600} Then make it explode!",
            "s;Iris;Respectfully, master, don't you think instead we should-",
            "s;Incubus King;EXPLODE IT{c:bop_portrait;Incubus King} EXPLODE IT{c:bop_portrait;Incubus King} EXPLODE IT{c:bop_portrait;Incubus King} EXPLODE IT{c:bop_portrait;Incubus King}",
            "expression;Iris;CloseEyes",
            "s;Iris;... I understand.",
            "transition;close;1000"
        ],
        "nid": "P2 Outro e IK cutscene"
    },
    {
        "name": "Intro e Tutorial: negative effects",
        "trigger": "level_start",
        "level_nid": "P3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;SpiderEmpress;BossMiracle_1;;no_banner",
            "end",
            "",
            "change_background;BlackBackground",
            "chapter_title",
            "transition;close",
            "show_layer;floor;immediate",
            "show_layer;dark;immediate",
            "equip_item;SpiderEmpress;DarkWeb",
            "music;Tension",
            "move_cursor;7,15",
            "change_background",
            "transition;open",
            "# S\u00d3 UM TESTE IVALA",
            "#game_var;ivala;1",
            "# mudar aqui dps em",
            "move_cursor;7,16",
            "transition;open",
            "wait;1000",
            "add_unit;Chosen;7,16;fade;giveup;south",
            "wait;300",
            "move_unit;Chosen;7,14;normal;giveup",
            "wait;500",
            "add_portrait;Chosen;Left;normal;Smile",
            "s;Chosen;Hellooo! The Chosen one has arrived!|I'm here and ready to fuck hot evil bitches!",
            "s;Chosen;You can bet that my dick is-{no_wait}",
            "remove_portrait;Chosen",
            "move_cursor;SpiderEmpress",
            "move_unit;SpiderEmpress;7,2;normal;giveup",
            "wait;500",
            "music;Boss1",
            "if;game.check_alive('Simonyoung') == True",
            "    #SIMON VIVO",
            "    wait;300",
            "    move_cursor;7,16",
            "    add_unit;Simonyoung;7,16;fade;giveup;south",
            "    move_unit;Simonyoung;6,15;normal;giveup",
            "    move_unit;Simonyoung;6,14;normal;giveup",
            "    multi_add_portrait;Simonyoung;FarLeft;Chosen;Right",
            "    s;Simonyoung;LOOK OUT!{no_wait}",
            "    move_portrait;Simonyoung;Right;no_block",
            "    move_portrait;Chosen;FarRight",
            "    remove_portrait;Chosen",
            "    remove_portrait;Simonyoung",
            "    sound;Attack Hit 1",
            "    set_current_hp;Chosen;19",
            "    move_unit;Chosen;8,14;normal;giveup;no_block",
            "    move_unit;Simonyoung;7,14;normal;giveup",
            "    wait;300",
            "    move_cursor;SpiderEmpress",
            "    interact_unit;SpiderEmpress;Simonyoung;hit1;DarkWeb",
            "    wait;800",
            "    add_portrait;Simonyoung;Left;normal;CloseEyes;no_block",
            "    add_portrait;Chosen;Right;normal;NoSmile",
            "    s;Chosen;Ouch... what was that for?!|Huh...? What happened to you?",
            "    expression;Simonyoung;OpenEyes,NoSmile",
            "    s;Simonyoung;The enemy is deploying long range attacks, even in this dark cave!|If you get hit you will get your movement hindered by this sticky web.|Take cover!",
            "    s;Chosen;A-alright! But where, goddamnit?!",
            "    s;Simonyoung;Our eyes should get used to the dark eventually. Hurry!",
            "    remove_portrait;Chosen;;right",
            "    expression;Simonyoung;CloseEyes",
            "    wait;500",
            "    remove_portrait;Simonyoung",
            "    wait;500",
            "    #fim da rota com simon",
            "elif;ame.check_alive('Simonyoung') == False",
            "    interact_unit;SpiderEmpress;Chosen;hit1;DarkWeb",
            "    add_portrait;Chosen;Right;normal;NoSmile",
            "    s;Chosen;Ouch... What happened?!|Those motherfuckers gonna pay...!|As soon as I see a goddamn thing in here, anyway!",
            "    remove_portrait;Chosen;;normal",
            "    wait;500",
            "end",
            "move_cursor;7,16",
            "spawn_group;Player;south;Player;normal;giveup",
            "wait;600",
            "move_cursor;7,16",
            "spawn_group;Monster;north;Monster;normal;giveup",
            "wait;1000",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    s;Ivala;Oh, you have been hit by a <red>negative effect</>.|You can always consult their penalties by checking the status page.;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "end"
        ],
        "nid": "P3 Intro e Tutorial: negative effects"
    },
    {
        "name": "Boss death VICTORY",
        "trigger": "combat_end",
        "level_nid": "P3",
        "condition": "game.check_dead(\"SpiderEmpress\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P3 Boss death VICTORY"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "P3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;ForestDark",
            "music;Happy1",
            "add_portrait;Chosen;Left;;Smile",
            "s;Chosen;One more threat secured by the hero!|The Incubus shithead army has nothing on me!",
            "add_portrait;Simonyoung;Right",
            "s;Simonyoung;Hmm... Those succubi were aligning with local monsters.|Not any orc or succubi foot troops from the army.|Were they really here on a mission, or...",
            "s;Chosen;Who fucking cares? Either way they're gone.|And I'm about to head to the source of this!",
            "if;game.check_alive('Duro') == True",
            "    add_portrait;Duro;FarRight;;Smile",
            "    s;Duro;HA! You, pipsqueak, feel like tackling on the Incubus King?",
            "    s;Chosen;There is no one more capable than me, you senile punching bag!",
            "    expression;Simonyoung;CloseEyes",
            "    s;Duro;HAHAHAHA! You're not just a treat, boy, you're a full meal!|Now I really want to see how this goes.{br}I'll join you on your little quest!",
            "    expression;Simonyoung;OpenEyes",
            "    s;Simonyoung;Are you sure? Your position...",
            "    s;Duro;I'll send a message. With how much I've done for them, they can't stop me.|Hell, I'll get a promotion for being the man who beats the Incubus King! HAHAHAHAH!",
            "    s;Chosen;Heh, keep daydreaming and you'll slow us down!",
            "    s;Duro;HAHAHA, one day you'll learn that being too quick will not make you popular!",
            "    expression;Simonyoung;CloseEyes",
            "    wait;1000",
            "    multi_remove_portrait;Chosen;Simonyoung;Duro",
            "    transition;close;1000",
            "else",
            "    s;Simonyoung;It is definitely too early. You must gain more experience first. I propose we...",
            "    remove_portrait;Chosen;;left",
            "    wait;1000",
            "    s;Simonyoung;{tgm}...",
            "    multi_remove_portrait;Chosen;Simonyoung",
            "    transition;close;1000",
            "end",
            "",
            "    "
        ],
        "nid": "P3 Outro"
    },
    {
        "name": "Tutorial: boss siege",
        "trigger": "unit_select",
        "level_nid": "P3",
        "condition": "game.game_vars['ivala'] == 1 and unit.nid == 'Chosen'",
        "commands": [],
        "only_once": true,
        "priority": 13,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Be careful, O Chosen one. This is a dangerous battle.;bottom;;;;blue;;;;;None",
            "move_cursor;SpiderEmpress",
            "s;Ivala;This boss uses a <red>Siege Weapon</>. Those are special weapons with longer range.|You might want to use the walls to your advantage.|<red>Remember that you can select (default: X key) an enemy to display its attack range!</>;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200"
        ],
        "nid": "P3 Tutorial: boss siege"
    },
    {
        "name": "Eyes get used to the dark",
        "trigger": "phase_change",
        "level_nid": "P3",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "move_cursor;Chosen",
            "add_portrait;Chosen;Left;normal;Smile",
            "s;Chosen;Wait...{c:wait;700} I can see now!",
            "hide_layer;dark;fade",
            "s;Chosen;Now it makes sense!",
            "remove_portrait;Chosen"
        ],
        "nid": "P3 Eyes get used to the dark"
    },
    {
        "name": "Visit condominio",
        "trigger": "Visit",
        "level_nid": "P4",
        "condition": "region.nid == 'Casacondominio'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;Man1;Left;{unit};Right",
            "speak;Man1;Are we allowed to leave yet? Those rascals are on up to it again...|Please, deal with the Crusher's gang for us.|Take this gold, just make them gone...",
            "transition;Close",
            "change_background",
            "transition;Open",
            "has_traded;{unit}",
            "show_layer;casachiquevisit",
            "remove_region;Casacondominio",
            "give_item;{unit};Heirloom_Pin"
        ],
        "nid": "P4 Visit condominio"
    },
    {
        "name": "Visit casa amarela",
        "trigger": "Visit",
        "level_nid": "P4",
        "condition": "region.nid == 'Casaamarela'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;Man1;Left;{unit};Right",
            "speak;Man1;Sigh... I always knew that those shady people would bring us trouble.|They offered some money to erect that magical tower or something.|I feel bad vibes every time I think about it.|I don't know what's the deal but it ain't worth it, I tell you!",
            "transition;Close",
            "change_background",
            "transition;Open",
            "has_traded;{unit}",
            "show_layer;casaesqvisit",
            "remove_region;Casaamarela"
        ],
        "nid": "P4 Visit casa amarela"
    },
    {
        "name": "Visit casa cima",
        "trigger": "Visit",
        "level_nid": "P4",
        "condition": "region.nid == 'Casacima'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;Man1;Left;{unit};Right;Woman1;FarLeft",
            "wait;300",
            "remove_portrait;Woman1;;left",
            "speak;Man1;Huh?{c:wait;500} Ah, yes, the bandit attack. That's right.|Yeah, bad attack, huh?{br}Wow... crazy.|Yeah, just take this item and pretend you saw nothing here, will you?",
            "transition;Close",
            "change_background",
            "transition;Open",
            "has_traded;{unit}",
            "show_layer;casacimavisit",
            "remove_region;Casacima",
            "give_item;{unit};Fetish_Cat_Ears"
        ],
        "nid": "P4 Visit casa cima"
    },
    {
        "name": "Firewall place",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_region;Firewall;{eval:target_pos};1,1;status;BurnedFW;3",
            "map_anim;MapFire;{eval:target_pos};permanent;overlay",
            "level_var;firewall;1",
            "level_var;firewallposition;{eval:target_pos}"
        ],
        "nid": "Global Firewall place"
    },
    {
        "name": "Firewall countdown",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.level_vars['firewall'] >= 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_level_var;firewall;1"
        ],
        "nid": "Global Firewall countdown"
    },
    {
        "name": "Firewall remove",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.level_vars['firewall'] == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;({v:firewallposition})",
            "wait;500",
            "sound;Burning",
            "wait;300",
            "remove_map_anim;MapFire;({v:firewallposition});overlay",
            "level_var;firewall;0"
        ],
        "nid": "Global Firewall remove"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "show_layer;remake",
            "chapter_title",
            "change_background",
            "transition;open;1000",
            "wait;1000",
            "add_unit;Plank;0,10;fade;giveup;east",
            "center_cursor;3,7;immediate",
            "wait;1000",
            "music;Tension",
            "move_unit;Plank;3,4;normal;giveup;no_follow",
            "move_unit;Plank;3,1;normal;giveup;",
            "wait;1000",
            "add_portrait;Plank;Left;normal;Smile",
            "wait;300",
            "s;Plank;I'm here... finally at the place where I belong!|HAHAHAHAHAHAHAHAHAHAHA!|HAHAHAHAHAHAHA!",
            "move_unit;101;4,1;normal;giveup",
            "add_portrait;Bandit1;Right;right",
            "music;Funny",
            "s;Bandit1;Get out of there, Plank. Shoo.|Crusher is gonna get mad again and start pointing out all the dust.",
            "s;Plank;No, Bob. You don't understand.|This time...{c:wait;300} I'm the boss. Crusher is dead!",
            "s;Bandit1;Yeah, yeah. Also, take your damn shoes off in the throne room!",
            "s;Plank;Who the hell cares about that?!|I make the rules now! Crusher is gone!",
            "s;Bandit1;It's like the third time you've said it this week alone.|Is that your fetish or something?",
            "s;Plank;No, bro, this time this is no game.|We were attacked. Well, due to his poor leadership, it was supposed to happen one day or another.|You see, things will be different from here on out.|For starters, how about...",
            "s;Bandit1;Where is his body?",
            "s;Plank;Huh?",
            "s;Bandit1;His body or anything that would prove your bullshit. Come on.",
            "s;Plank;Well, I...{c:wait;400} We had to leave in a hurry, so...",
            "s;Bandit1;Hmm-hmm.|Anyway, when the Crusher gets back, he's gonna pester us again about that open wall.|Did you fix it yet?",
            "s;Plank;I already told you th-... Wait, was that really assigned to me?",
            "s;Bandit1;Yeah, man.",
            "s;Plank;No no, that was Alex's duty, man.|I was supposed to clean the basement.",
            "s;Bandit1;I'm pretty sure Alex already cleaned the basement.|If there was a mixup or not, either way, now it's on you.|Stop roleplaying and get your ass out there.",
            "s;Plank;This is not befitting of a leader!|I will stay here as it is my right!|We will all move in a new direction!",
            "s;Bandit1;Also, who the fuck said you'd inherit the gang?|The next in line is <red>Wrecker</>.|And he's visiting us today.|If something really happened to Crusher, you're fucked.",
            "s;Plank;Maybe I should change my nickname... Let's see, a destructive verb...;;;thought_bubble",
            "remove_portrait;Plank;no_block",
            "remove_portrait;Bandit1",
            "wait;800",
            "center_cursor;1,10",
            "add_unit;Chosen;0,10;fade;giveup;west",
            "center_cursor;3,7;immediate",
            "wait;500",
            "move_unit;Chosen;3,9;normal;giveup;no_follow",
            "wait;600",
            "add_portrait;Chosen;Left;;Smile",
            "s;Chosen;So this is where you've all been hidden, huh?|Come on out, I'll wipe the floor off of you!",
            "add_portrait;Simonyoung;Right",
            "s;Simonyoung;Just why would you actively choose to blow our cover ...",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;300",
            "center_cursor;Plank",
            "wait;200",
            "multi_add_portrait;Plank;Left;Bandit1;Right",
            "s;Bandit1;Oh, so that is the new cleaner? Thank god.",
            "bop_portrait;Plank",
            "s;Plank;No! That's the group who attacked us!|Quick, let me activate <wave>that</>!",
            "multi_remove_portrait;Plank;Bandit1",
            "wait;300",
            "move_unit;Plank;1,1",
            "wait;300",
            "sound;Weapon Click",
            "wait;500",
            "center_cursor;10,2",
            "wait;200",
            "screen_shake;300;default",
            "wait;500",
            "music_clear",
            "show_layer;trap1",
            "wait;2000",
            "center_cursor;Plank",
            "wait;1000",
            "music;Funny",
            "multi_add_portrait;Plank;Left;Bandit1;Right",
            "s;Plank;This thing is malfunctioning, man! I tell you!|I pressed the right button. You can't trust these ruins.|That's why they're all ancient. They perished for a reason, y'know?|With me in charge, everything here will be preserved for one thousand...",
            "s;Bandit1;*Sigh* Gotta do everything around here...|Maybe -I- should be the boss...",
            "multi_remove_portrait;Plank;Bandit1",
            "wait;300",
            "move_unit;101;1,2",
            "wait;500",
            "sound;Weapon Click",
            "wait;500",
            "center_cursor;3,7",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "s;Simonyoung;...that still does not make a viable strategy.",
            "s;Chosen;Maybe for your small ambitions!|If no one knows I'm the Chosen, how I'm gonna get famous?!|There are things more important than-",
            "screen_shake;1000;kill;no_block",
            "sound;Burning",
            "wait;500",
            "multi_remove_portrait;Chosen;Simonyoung",
            "show_layer;closed",
            "sound;VillageDestroyed",
            "wait;5000",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "s;Chosen;...Ah. Well.|Look, don't sweat it.|I'll... hmm...",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;400",
            "move_unit;Chosen;6,8;normal;giveup;no_follow",
            "wait;500",
            "move_unit;Chosen;6,10;normal;giveup;no_follow",
            "wait;500",
            "move_unit;Chosen;3,12;normal;giveup",
            "map_anim;MapSurprise;Chosen",
            "wait;600",
            "move_unit;Chosen;4,15;normal;giveup",
            "wait;700",
            "add_portrait;Chosen;Left;;Smile",
            "s;Chosen;As Ivala wills it, it'll always work out in the end!",
            "flicker_cursor;3,1",
            "wait;500",
            "s;Chosen;Now I just gotta <red>seize</> that throne and those bandits should scatter!",
            "remove_portrait;Chosen",
            "center_cursor;Chosen",
            "wait;1000",
            "transition;close;2000",
            "move_unit;2,4;7,3;immediate;closest;no_follow;no_block",
            "move_unit;4,4;7,4;immediate;giveup;no_block;no_block",
            "move_unit;Plank;3,1;immediate;giveup;no_block;no_follow",
            "move_unit;101;5,2;immediate;giveup;no_block;no_follow",
            "center_cursor;Chosen",
            "add_tag;Plank;ZeroMove",
            "add_tag;Plank;Boss",
            "prep;t;Preparation"
        ],
        "nid": "P5 Intro"
    },
    {
        "name": "Wrecker arrives e Tutorial: Superboss",
        "trigger": "turn_change",
        "level_nid": "P5",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "wait;500",
            "center_cursor;1,10",
            "wait;500",
            "add_unit;Wrecker;0,10;fade;closest;west",
            "music;Halfway change loop",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "change_music;enemy2_phase;Halfway change loop",
            "wait;500",
            "move_unit;Wrecker;3,8",
            "wait;1000",
            "flicker_cursor;Wrecker",
            "wait;200",
            "add_portrait;Wrecker;Right",
            "s;Wrecker;...{c:wait;400} They wall Wrecker out?!|THEY PAY!|{c:screen_shake;300;combat;no_block}AAAAAGHHHHH!",
            "remove_portrait;Wrecker",
            "move_unit;Wrecker;3,11;normal;push",
            "wait;300",
            "screen_shake;300;combat;no_block",
            "sound;Critical Hit 1",
            "show_layer;tree",
            "wait;1000",
            "add_portrait;Wrecker;Right",
            "s;Wrecker;Plank still not fix wall.|WRECKER WRECKS WALL!",
            "remove_portrait;Wrecker",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;Uh oh, a really strong unit has just arrived!|Enemy units like these are called <red>superbosses</>, and they are much harder than their peers!|You can complete your objectives without engaging with them...|...but be very careful, as they might want to pursue you!;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "end"
        ],
        "nid": "P5 Wrecker arrives e Tutorial: Superboss"
    },
    {
        "name": "Victory",
        "trigger": "Seize",
        "level_nid": "P5",
        "condition": "unit.nid == 'Chosen'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P5 Victory"
    },
    {
        "name": "Stairs enemy reinforcement e Safado",
        "trigger": "turn_change",
        "level_nid": "P5",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "music;Tension",
            "center_cursor;12,11",
            "wait;500",
            "add_group;Stairs1;Stairs1;fade;stack",
            "move_unit;Safado;10,10;normal;closest;no_block;no_follow",
            "move_unit;113;10,11;normal;closest;no_block;no_follow",
            "move_unit;114;11,10;normal;closest;no_follow",
            "wait;800",
            "flicker_cursor;Safado",
            "wait;300",
            "add_portrait;Safado;Left;;CloseEyes",
            "s;Safado;Hmm...{c:wait;300} Here comes the opportunity I was waiting for.|I'm scared as fuck, though...|What if they see through me?!|Will they notice I'm going for the chest?|What if I...;;;thought_bubble",
            "expression;Safado;OpenEyes",
            "add_portrait;Bandit2;Right;right;Smile",
            "s;Bandit2;Hey there! We're gonna go to battle soon! Pretty nerve-wracking, right?!",
            "s;Safado;Oh, you poor child. I understand, I was an amateur once.",
            "expression;Bandit2;NoSmile",
            "expression;Safado;CloseEyes",
            "s;Safado;Now it all flows through me naturally.",
            "expression;Safado;OpenEyes",
            "s;Safado;Here's my tip: don't hesitate, just do it.|Only then, one day, you may achieve the same zen as I.",
            "wait;500",
            "multi_remove_portrait;Safado;Bandit2",
            "wait;1000",
            "add_talk;Lucia;Safado",
            "add_talk;Monica;Safado"
        ],
        "nid": "P5 Stairs enemy reinforcement e Safado"
    },
    {
        "name": "Wall1",
        "trigger": "unit_death",
        "level_nid": "P5",
        "condition": "unit.nid == '111'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "map_anim;Snag;9,12",
            "sound;VillageDestroyed",
            "show_layer;wall1",
            "remove_region;Wall1"
        ],
        "nid": "P5 Wall1"
    },
    {
        "name": "Chest",
        "trigger": "Chest",
        "level_nid": "P5",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Master_Seal",
            "remove_region;Chest"
        ],
        "nid": "P5 Chest"
    },
    {
        "name": "Door",
        "trigger": "Door",
        "level_nid": "P5",
        "condition": "region.nid == 'Door'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;door",
            "remove_region;Door"
        ],
        "nid": "P5 Door"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P2",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "set_overworld_position;ChosenParty;P1",
            "wait;1000",
            "reveal_overworld_node;P2",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P1;P2",
            "wait;1000",
            "reveal_overworld_node;P14;immediate",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;This is the <red>Overworld</>, where you and your companions travel to your next destinations!|You can select nodes to enter the next battles.|Additionally, you can select nodes you've already visited for more options.|Those include <red>shops</> and <red>camp</>.|By selecting <red>Base camp</> you can manage your party, read extra lore and conversations!;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "end"
        ],
        "nid": "P2 Overworld start"
    },
    {
        "name": "Overworld: level select intro",
        "trigger": "level_select",
        "level_nid": "P3",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "overworld_cinematic;1",
            "wait;1000",
            "s;;Chosen and his friends set out to investigate Jito Cave and rescue captain Duro.|What could have prompted this Spider attack?|Was this a random monster occurrence, or was the Incubus King behind it...?;;;narration",
            "wait;1000",
            "transition;close;1000",
            "wait;1000"
        ],
        "nid": "P3 Overworld: level select intro"
    },
    {
        "name": "Overworld",
        "trigger": "overworld_start",
        "level_nid": "P4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P4",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P2;P4",
            "wait;1000"
        ],
        "nid": "P4 Overworld"
    },
    {
        "name": "Overworld",
        "trigger": "overworld_start",
        "level_nid": "P5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "set_overworld_position;ChosenParty;P4",
            "wait;1000",
            "reveal_overworld_node;P5",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P4;P5",
            "wait;1000"
        ],
        "nid": "P5 Overworld"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "P4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close;1000",
            "wait;1000",
            "music;Happy1",
            "change_background;Village",
            "transition;open;1000",
            "multi_add_portrait;Woman1;Left;Chosen;Right",
            "s;Woman1;Thank you so much!|Those guys have been giving us trouble ever since they stationed nearby...",
            "s;Chosen;No problem. I'm soon to be savior of the whole world, so I don't mind saving this poor village!",
            "s;Woman1;Well, I wouldn't exactly say we're that poor...",
            "s;Chosen;...this soul-crushingly worn down, terribly painted village...",
            "s;Woman1;We... look, we're trying our best and...",
            "s;Chosen;...that makes me sad every time I look!|No hot girls in sight at all, by Ivala!|Is it even worth living here?!",
            "s;Woman1;{tgm}...",
            "s;Chosen;And that's why I decided, out of pure compassion, to free you guys!|Where are those suckers located?!",
            "s;Woman1;...Hmph.{c:wait;300} We think they're using the ruins on the forest east of here.",
            "s;Chosen;And that's where I'll go.|One last stop before I slay the Incubus King!",
            "remove_portrait;Chosen;;right",
            "wait;400",
            "transition;close;1000"
        ],
        "nid": "P4 Outro"
    },
    {
        "name": "Armory Nodford",
        "trigger": "Armory",
        "level_nid": "P4",
        "condition": "region.nid == 'armory1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron_Sword,Slim_Sword,Steel_Sword,Javelin,Iron_Lance,Slim_Lance,Steel_Lance,Iron_Axe,Steel_Axe,Hand_Axe,Iron_Bow,Steel_Bow,Short_Bow;armory",
            "transition;Open"
        ],
        "nid": "P4 Armory Nodford"
    },
    {
        "name": "Visit casa baixo",
        "trigger": "Visit",
        "level_nid": "P4",
        "condition": "region.nid == 'Casabaixo'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;Woman2;Left;{unit};Right",
            "wait;300",
            "speak;Woman2;Just take it. I know you will need it.|Despite how it looks, we're alright here.",
            "multi_remove_portrait;Woman2;Chosen",
            "transition;Close",
            "change_background",
            "transition;Open",
            "has_traded;{unit}",
            "show_layer;casabaixa",
            "remove_region;Casabaixo",
            "give_item;{unit};Magic_Ring"
        ],
        "nid": "P4 Visit casa baixo"
    },
    {
        "name": "PROL Chosen lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Chosen' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Chosen').klass == 'Chosen'",
            "if;game.get_unit('Chosen').level == 2",
            "    give_skill;Chosen;Heroic_Blow;;persistent",
            "elif;game.get_unit('Chosen').level == 3",
            "    give_skill;Chosen;Heroic_Aura;persistent",
            "elif;game.get_unit('Chosen').level == 4",
            "    give_skill;Chosen;Heroic_Assault;persistent",
            "elif;game.get_unit('Chosen').level == 5",
            "    give_skill;Chosen;Aura_Blighting;persistent",
            "end",
            "end"
        ],
        "nid": "Global PROL Chosen lvlup skills"
    },
    {
        "name": "PROL Duro lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Duro' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Duro').klass == 'Knight'",
            "if;game.get_unit('Duro').level == 5",
            "    give_skill;Duro;Bear_hug;persistent",
            "elif;game.get_unit('Duro').level == 7",
            "    give_skill;Duro;Grand_Entrance;persistent",
            "elif;game.get_unit('Duro').level == 10",
            "    give_skill;Duro;Projectile_Parry;;persistent",
            "end",
            "end"
        ],
        "nid": "Global PROL Duro lvlup skills"
    },
    {
        "name": "PROL SUP Chosen Simon",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Chosen' and unit2.nid == 'Simonyoung') or (unit.nid == 'Simonyoung' and unit2.nid == 'Chosen')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Chosen;Safe_Approach;;persistent",
            "    give_skill;Simonyoung;Heroic_Imitation;;persistent",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Chosen;Safe_Approach_pair;;persistent;no_banner",
            "    give_skill;Simonyoung;Heroic_Imitation_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Chosen Simon"
    },
    {
        "name": "Tutorial: weapon reaver",
        "trigger": "phase_change",
        "level_nid": "P5",
        "condition": "game.turncount == 1 and game.game_vars['ivala'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Do you remember the <red>weapon triangle</>?{br}Sword > Axe > Lance > Sword.|What if I told you that there are possible exceptions?|Those come in the form of <red>reavers</>: weapons that <red>reverse the weapon triangle</>.|So, for example, an axe would beat sword, and be defeated by lance.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;200",
            "flicker_cursor;15,14",
            "wait;300",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;This unit is using such a weapon.|Always be on the lookout for enemies with unexpected weapons or skills!|In the case of (but not limited to) reaver weapons...|an exclamation mark will appear above them, to signal their danger!;bottom;;;;blue;;;;;None",
            "wait;200"
        ],
        "nid": "P5 Tutorial: weapon reaver"
    },
    {
        "name": "Recruit Safado - Lucia",
        "trigger": "on_talk",
        "level_nid": "P5",
        "condition": "unit.nid == 'Lucia' and unit2.nid == 'Safado'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Reinforcements",
            "add_portrait;Lucia;Left",
            "add_portrait;Safado;Right;;CloseEyes",
            "s;Lucia;Well, looks like I was right.{br}It's always the thieves.",
            "s;Safado;Ah fuck ah fuck I got caught!|Wait... she's one of the invaders.|Am I gonna die?!;;;thought_bubble",
            "s;Safado;Pardon me, ma'am. Can I help you?",
            "s;Lucia;Oh, don't mind me. I just found you cute.",
            "s;Safado;Is she serious? No way. It's definitely not one of my good days.|Maybe she is high from the battle. That creeps me the fuck out.;;;thought_bubble",
            "s;Safado;My, staightforward, aren't you?{c:wait;400} I like that. Want to pair up?",
            "s;Lucia;That quick? Hmm...{c:wait;300} what comes easy goes easy, so...",
            "s;Safado;NOOO, did I already lose her?! was I not smooth enough?|Well of course I was not smooth, I chose to be blunt as hell...|What was I even thinking, I did NOT pull that line...;;;thought_bubble",
            "s;Safado;Ah, but allow me to prove you wrong, respectfully.|Think of this as fate. We were meant to join forces.|Give me a chance and you will find I have a place within your group.|Maybe someday in your heart, hm?",
            "if;game.check_alive('Cassian') == True",
            "    s;Lucia;Heh, if anything, I give you props for trying.|Okay, come with me. We can always use some extra swords.|As for my heart, I'm gonna let you in the dark for a bit.|There's a really nosy gatekeeper you gotta deal with first, and that's my brother.",
            "end",
            "else",
            "    s;Lucia;Heh, if anything, I give you props for trying.|Okay, come with me. We can always use some extra swords.|As for my heart... I'm gonna let you in the dark for a bit.",
            "end",
            "s;Safado;Oh thank Ivala. Whew. Ok, I'll see what's the deal with those guys.|Maybe they have some valuables, hehehe...;;;thought_bubble",
            "change_team;Safado;player",
            "sound;Level Up",
            "alert;Safado has joined your party!",
            "music_fade_back",
            "remove_talk;Lucia;Safado",
            "remove_talk;Monica;Safado"
        ],
        "nid": "P5 Recruit Safado - Lucia"
    },
    {
        "name": "Shop Nodford",
        "trigger": "Vendor",
        "level_nid": "P4",
        "condition": "region.nid == 'vendor1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Health_Potion,Scroll_Lightning,Scroll_Physic;vendor",
            "transition;Open"
        ],
        "nid": "P4 Shop Nodford"
    },
    {
        "name": "Tutorial: shops",
        "trigger": "phase_change",
        "level_nid": "P4",
        "condition": "game.turncount == 2 and game.game_vars['ivala'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;In this map you can access <red>shops</>.|There are two types:;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "flicker_cursor;12,3",
            "wait;500",
            "s;Ivala;Vendors, which mostly sell consumables and magic items...;bottom;;;;blue;;;;;None",
            "flicker_cursor;16,13",
            "wait;500",
            "s;Ivala;...and Armories, which sell weapons and equipment.;bottom;;;;blue;;;;;None",
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "speak;Ivala;Purchasing items in the midst of battle could give you advantages.|However, if you can't find the time to access them, there is no problem.|You can later visit those shops through the overworld map.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;500"
        ],
        "nid": "P4 Tutorial: shops"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P6",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "game_var;rosaphoenix;0",
            "add_talk;Chosen;Rosa",
            "show_layer;details",
            "chapter_title",
            "change_background;Forest",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "s;Simonyoung;Against my better judgement, we're near the border.|From here on out, extra caution will not only be required, it will determine our lives.",
            "s;Chosen;Hide if you want, Square. Our enemies will be the ones needing caution!",
            "s;Simonyoung;Shut up.",
            "s;Chosen;Hey, YOU shut up! I-",
            "s;Simonyoung;No, be quiet. There seems to be a commotion near the crossroads.",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;300",
            "change_background;",
            "center_cursor;1,12",
            "wait;1000",
            "center_cursor;9,7",
            "music;Tension",
            "wait;1000",
            "flicker_cursor;Baruba",
            "wait;400",
            "add_portrait;Baruba;MidLeft",
            "s;Baruba;I'm feelin' generous today, fella.|Pack your stuff and get outta my way!",
            "flicker_cursor;Bandit3",
            "wait;400",
            "add_portrait;Bandit3;Right",
            "s;Bandit3;I've seen your type.{c:wait;300} All bark.{c:wait;300} No bite.|You don't scare me at all.;;;;3",
            "s;Baruba;Ain't you a cocky one, eh?|I'll teach ya that I bite real hard!",
            "flicker_cursor;Rosa",
            "wait;400",
            "add_portrait;Rosa;FarLeft",
            "s;Rosa;Mister Baruba, it's okay.|I can take care of him, no problem.",
            "s;Baruba;Then why didja even hire us, silly?{br}I ain't a slacker!",
            "s;Rosa;Very well.|Oh.{c:wait;700} It seems like neither of us might face him.",
            "multi_remove_portrait;Bandit3;Baruba;Rosa",
            "center_cursor;8,1",
            "wait;800",
            "music;Tension2;100",
            "add_group;raid1;raid1;fade;giveup",
            "wait;800",
            "move_unit;101;8,4;no_block",
            "move_unit;111;8,5;normal;giveup;no_follow;no_block",
            "move_unit;112;10,4;normal;giveup;no_follow",
            "wait;600",
            "interact_unit;101;Bandit3;hit1,miss2,crit1",
            "wait;1000",
            "move_unit;108;0,12;normal;stack;no_block;no_follow",
            "move_unit;109;0,12;normal;stack;no_block;no_follow",
            "move_unit;110;0,12;normal;stack;no_block;no_follow",
            "s;Mercenaries;O-ORC RAID!! RUN!!;top",
            "wait;1000",
            "remove_unit;108;fade;west",
            "remove_unit;109;fade;west",
            "remove_unit;110;fade;west",
            "wait;1000",
            "end_skip",
            "multi_add_portrait;Baruba;Left;Rosa;Right",
            "s;Baruba;Eh...{c:wait;300} New swords. Shoulda been more strict in the interview.",
            "s;Rosa;Hihi... I don't blame them. Orcs are pretty scary.",
            "s;Baruba;But you don't seem so, huh...|So, we runnin' or what?",
            "expression;Rosa;CloseEyes,Smile",
            "s;Rosa;Oh, Mister, please pay me no mind.|If you want to retreat, I give you my blessings.|I'm afraid I must remain here for longer.",
            "s;Baruba;Eh... You a weird one alright. I ain't a pussy, y'know? Imma fight!",
            "expression;Rosa;NoSmile,OpenEyes",
            "s;Rosa;Then, as your employer, please obey my directives.|If you would be so kind, please go fetch the rest of your band.|I will happily hold on until your reinforcements.",
            "s;Baruba;What in the...|Ya asked for it, remember that!",
            "remove_portrait;Baruba",
            "expression;Rosa;Smile,CloseEyes",
            "wait;500",
            "move_unit;Baruba;0,12;normal;stack;no_follow",
            "remove_unit;Baruba;fade;west",
            "wait;1000",
            "music_clear",
            "center_cursor;Rosa",
            "expression;Rosa;OpenEyes,Smile",
            "s;Rosa;Now I can blow off some steam.",
            "music;RosaPhoenix",
            "wait;300",
            "remove_portrait;Rosa",
            "wait;1000",
            "sound;Burning",
            "map_anim;CritSpark;9,7;overlay",
            "add_weather;fire",
            "sound;ElfireHit",
            "map_anim;MapFire;9,6;permanent;overlay",
            "wait;100",
            "sound;ElfireHit",
            "map_anim;MapFire;8,7;permanent;overlay",
            "wait;100",
            "sound;ElfireHit",
            "map_anim;MapFire;10,7;permanent;overlay",
            "wait;100",
            "sound;ElfireHit",
            "map_anim;MapFire;9,8;permanent;overlay",
            "wait;1000",
            "add_region;fw1;9,6;1,1;status;BurnedFW;3",
            "add_region;fw2;8,7;1,1;status;BurnedFW;3",
            "add_region;fw3;10,7;1,1;status;BurnedFW;3",
            "add_region;fw4;9,8;1,1;status;BurnedFW;3",
            "wait;2000",
            "flicker_cursor;Chosen",
            "wait;200",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "s;Chosen;Holy shit!|You already know what I'll do, right?",
            "s;Simonyoung;... yes.",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;300",
            "move_unit;Chosen;6,9;no_block",
            "move_unit;Simonyoung;6,10;normal;giveup;no_follow",
            "add_portrait;Rosa;Right",
            "add_portrait;Chosen;MidLeft;left;Smile",
            "s;Chosen;Your savior has arrived!",
            "wait;500",
            "s;Chosen;The Chosen one is here!",
            "wait;700",
            "add_portrait;Simonyoung;FarLeft;left",
            "s;Simonyoung;I do not think she can properly see or hear you with all this fire and smoke.",
            "s;Chosen;Then I need to get closer to recruit her!",
            "s;Simonyoung;I would advise-",
            "remove_portrait;Chosen;;right",
            "expression;Simonyoung;CloseEyes",
            "wait;800",
            "multi_remove_portrait;Simonyoung;Rosa",
            "transition;close;1500",
            "remove_unit;Simonyoung;immediate;fade",
            "wait;500",
            "prep;t;Preparation"
        ],
        "nid": "P6 Intro"
    },
    {
        "name": "Raid 2",
        "trigger": "turn_change",
        "level_nid": "P6",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;1000",
            "add_group;raid2;raid2;fade;closest",
            "wait;500",
            "flicker_cursor;102",
            "wait;300",
            "flicker_cursor;113",
            "wait;300",
            "flicker_cursor;114",
            "wait;300",
            "flicker_cursor;115",
            "wait;1000"
        ],
        "nid": "P6 Raid 2"
    },
    {
        "name": "Raid 3",
        "trigger": "turn_change",
        "level_nid": "P6",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;1000",
            "add_group;raid3;raid3;fade;closest",
            "wait;500",
            "flicker_cursor;116",
            "wait;300",
            "flicker_cursor;117",
            "wait;300",
            "flicker_cursor;118",
            "wait;1000"
        ],
        "nid": "P6 Raid 3"
    },
    {
        "name": "Raid 4",
        "trigger": "turn_change",
        "level_nid": "P6",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;1000",
            "add_group;raid4;raid4;fade;closest",
            "wait;500",
            "flicker_cursor;119",
            "wait;300",
            "flicker_cursor;120",
            "wait;300",
            "flicker_cursor;121",
            "wait;1000"
        ],
        "nid": "P6 Raid 4"
    },
    {
        "name": "Remove firewalls",
        "trigger": "turn_change",
        "level_nid": "P6",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "center_cursor;9,7",
            "wait;1000",
            "remove_map_anim;MapFire;9,6;overlay",
            "wait;100",
            "remove_map_anim;MapFire;8,7;overlay",
            "wait;100",
            "remove_map_anim;MapFire;10,7;overlay",
            "wait;100",
            "remove_map_anim;MapFire;9,8;overlay",
            "wait;100",
            "remove_weather;fire",
            "if;game.get_unit('Rosa')get.team == 'other'",
            "    add_portrait;Rosa;Right",
            "    s;Rosa;Hmm... I wonder what that boy wanted?",
            "    remove_portrait;Rosa",
            "end"
        ],
        "nid": "P6 Remove firewalls"
    },
    {
        "name": "Recruit Rosa",
        "trigger": "on_talk",
        "level_nid": "P6",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Rosa'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Reinforcements",
            "multi_add_portrait;Chosen;Left;Rosa;Right",
            "s;Chosen;Hey! You seem strong!",
            "s;Rosa;Oh, thank you! You're so kind.",
            "s;Chosen;So join us! We're on an epic quest!",
            "s;Rosa;Hmm? Is that so?",
            "s;Chosen;Yeah. And what's up with your face?",
            "s;Rosa;Hihi. Where is your courtesy, young man?",
            "s;Chosen;Oh, I... I'm sorry, you're still hot, though!|I mean, in more than one sense!",
            "s;Rosa;Aw, thank you.",
            "s;Chosen;So, you coming with us to defeat the Incubus King?!",
            "s;Rosa;Oh my, how bold.|I...{c:expression;Rosa;CloseEyes}{c:wait;500} am paying my last tributes to someone who passed away at this crossing.",
            "expression;Rosa;OpenEyes",
            "s;Rosa;If you help me defend this place, I can assist you on your journey.",
            "s;Chosen;Hell yeah!",
            "if;has_skill(\"Chosen\",\"BurnedFW\") == True",
            "    s;Rosa;On another note, I apologize for putting you through this heat. Hihi.",
            "    s;Chosen;What are you... oh shit, you're right, AAAAA I'M ON FIREEE",
            "end",
            "multi_remove_portrait;Chosen;Rosa",
            "change_team;Rosa;player",
            "sound;Level Up",
            "alert;Rosa has joined your party!",
            "music_fade_back",
            "remove_talk;Chosen;Rosa"
        ],
        "nid": "P6 Recruit Rosa"
    },
    {
        "name": "Victory",
        "trigger": "phase_change",
        "level_nid": "P6",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "center_cursor;1,11",
            "wait;1000",
            "music;Reinforcements",
            "add_unit;Baruba;0,12;fade;closest;west",
            "add_unit;108;0,9;fade;closest;west",
            "add_unit;109;0,13;fade;closest;west",
            "add_unit;110;0,11;fade;closest;west",
            "add_unit;125;0,8;;fade;closest;west",
            "add_unit;126;0,14;fade;closest;west",
            "add_unit;127;0,6;fade;closest;west",
            "wait;1000",
            "flicker_cursor;Baruba",
            "add_portrait;Baruba;Left",
            "wait;300",
            "s;Baruba;Hey, asshats!{c:wait;300} Make way for the pros!",
            "if;game.check_alive('Rosa') == True and {v:rosaphoenix} == 0",
            "    flicker_cursor;Rosa",
            "    add_portrait;Rosa;Right",
            "    s;Rosa;Thank you very much for your support.",
            "    remove_portrait;Rosa",
            "    center_cursor;Baruba",
            "elif;game.check_alive('Rosa') == False",
            "    expression;Baruba;NoSmile,CloseEyes",
            "    s;Baruba;So that girlie didn't make it, eh...",
            "    remove_portrait;Baruba",
            "end",
            "remove_portrait;Baruba",
            "wait;2000",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P6 Victory"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P6",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P6",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P4;P6",
            "wait;1000"
        ],
        "nid": "P6 Overworld start"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "P6",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close;1000",
            "music_clear",
            "wait;1000",
            ""
        ],
        "nid": "P6 Outro"
    },
    {
        "name": "Alert test",
        "trigger": "alert",
        "level_nid": "DEBUG",
        "condition": "any(game.level.regions.get('alert').contains(unit.position) for unit in game.get_units_in_party()) == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "DEBUG Alert test"
    },
    {
        "name": "Armory1Overworld",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;shopper;Who will shop?;{eval:[unit.nid for unit in game.get_units_in_party()]};64;v;top_left;menu_bg_base;;type_unit;3,3;;expression;backable",
            "if;game.get_unit('{eval:game.game_vars.get('_last_choice')}').team == 'player'",
            "music;Happy1;500",
            "shop;{eval:game.game_vars.get('_last_choice')};Iron_Sword,Slim_Sword,Steel_Sword,Javelin,Iron_Lance,Slim_Lance,Steel_Lance,Iron_Axe,Steel_Axe,Hand_Axe,Iron_Bow,Steel_Bow,Short_Bow;armory",
            "music_fade_back",
            "game_var;_last_choice;False",
            "else",
            "end"
        ],
        "nid": "Global Armory1Overworld"
    },
    {
        "name": "Variables",
        "trigger": "level_start",
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode.nid != 'Ironman'",
            "    enable_turnwheel;t",
            "    game_var;_max_turnwheel_uses;999",
            "else",
            "end",
            "enable_supports;t",
            "game_var;rosaphoenix;0",
            "game_var;chosendeath;0",
            "enable_convoy;t"
        ],
        "nid": "0 Variables"
    },
    {
        "name": "PROL Cassian lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Cassian' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Cassian').klass == 'Cavalier'",
            "if;game.get_unit('Cassian').level == 6",
            "    give_skill;Cassian;No_Privacy_Cassian;persistent",
            "elif;game.get_unit('Cassian').level == 8",
            "    give_skill;Cassian;Defiant_Strike;;persistent",
            "elif;game.get_unit('Cassian').level == 10",
            "    give_skill;Cassian;Exposing_Crash;;persistent",
            "end",
            "end"
        ],
        "nid": "Global PROL Cassian lvlup skills"
    },
    {
        "name": "PROL Lucia lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Lucia' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Lucia').klass == 'Cavalier'",
            "if;game.get_unit('Lucia').level == 6",
            "    give_skill;Lucia;No_Privacy_Lucia;persistent",
            "elif;game.get_unit('Lucia').level == 8",
            "    give_skill;Lucia;Striking_Defiance;;persistent",
            "elif;game.get_unit('Lucia').level == 10",
            "    give_skill;Lucia;Exposing_Guard;;persistent",
            "end",
            "end"
        ],
        "nid": "Global PROL Lucia lvlup skills"
    },
    {
        "name": "Shelter skill",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "pair_up;{eval:target};{unit}"
        ],
        "nid": "Global Shelter skill"
    },
    {
        "name": "PROL Monica lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Monica' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Monica').klass == 'Priestess'",
            "    if;game.get_unit('Monica').level == 6",
            "        add_item_to_multiitem;Monica;DivineSpells_Monica;Soothing_Presence_effect",
            "    elif;game.get_unit('Monica').level == 7",
            "        add_item_to_multiitem;Monica;DivineSpells_Monica;Penitence",
            "elif;game.get_unit('Monica').level == 8",
            "    give_skill;Monica;Awkward_Silence_proc;;persistent",
            "elif;game.get_unit('Monica').level == 9",
            "        add_item_to_multiitem;Monica;DivineSpells_Monica;Sacred_Field",
            "    end",
            "end"
        ],
        "nid": "Global PROL Monica lvlup skills"
    },
    {
        "name": "Rosa dies",
        "trigger": "combat_end",
        "level_nid": "P6",
        "condition": "game.check_dead(\"Rosa\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "P6 Rosa dies"
    },
    {
        "name": "Raid 5",
        "trigger": "turn_change",
        "level_nid": "P6",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;1000",
            "add_group;raid5;raid5;fade;closest",
            "wait;500",
            "flicker_cursor;122",
            "wait;300",
            "flicker_cursor;123",
            "wait;300",
            "flicker_cursor;124",
            "wait;1000"
        ],
        "nid": "P6 Raid 5"
    },
    {
        "name": "Vendor1Overworld",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;shopper;Who will shop?;{eval:[unit.nid for unit in game.get_units_in_party()]};64;v;top_left;menu_bg_base;;type_unit;3,3;;expression;backable",
            "if;game.get_unit('{eval:game.game_vars.get('_last_choice')}').team == 'player'",
            "music;Happy1;500",
            "shop;{eval:game.game_vars.get('_last_choice')};Health_Potion,Heal,Fire,Thunder,Lightning,Flux,Shine;vendor",
            "music_fade_back",
            "game_var;_last_choice;False",
            "else",
            "end"
        ],
        "nid": "Global Vendor1Overworld"
    },
    {
        "name": "testing backup",
        "trigger": null,
        "level_nid": "DEBUG_2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "autolevel_to;Mira;9;random",
            "give_skill;Minerve;Blinded_Immune;;no_banner",
            "give_item;Chosen;Serum;no_banner",
            "give_skill;Rosa;Blinded;;no_banner",
            "promote;Chosen;;silent",
            "give_skill;Safado;Stalling_Stance_buff;;persistent",
            "give_skill;Duro;Strategic_Strikes;;no_banner;persistent",
            "give_skill;Rosa;Fan_the_Flames;;persistent;no_banner",
            "give_skill;Monica;Rally_Resistance;;persistent;no_banner",
            "give_skill;Milena;Euphoric_Audience;;persistent",
            "give_item;Chosen;Shining_Sword;no_banner",
            "give_skill;Rosa;Cozy_Warmth;;no_banner;persistent",
            "give_skill;Safado;Flashy_Escape",
            "give_skill;Chosen;Safe_Approach;;persistent;no_banner",
            "give_skill;Simonyoung;Heroic_Imitation;persistent;no_banner",
            "give_skill;Mira;Overbearing_Jokes;persistent;no_banner",
            "give_skill;Duro;Remembrance;persistent;no_banner",
            "give_skill;Antarion;Attention_Is_All_You_Need;persistent;no_banner",
            "give_skill;Monica;Inspiring_Ambition;persistent;no_banner",
            "give_skill;Cassian;Burning_Advance;persistent;no_banner",
            "give_skill;Lucia;Make_Way;persistent;no_banner",
            "give_skill;Safado;Flashy_Escape;persistent;no_banner",
            "give_skill;Rosa;Fast_Fire;persistent;no_banner",
            "give_skill;Simonyoung;Heroic_Imitation_pair;;no_banner;persistent",
            "give_skill;Antarion;Flashy_Strike;;persistent;no_banner",
            "give_skill;Antarion;No_Crit_Antarion;;persistent;no_banner",
            "give_skill;Antarion;Critical_Boost;;no_banner;persistent",
            "#test crit",
            "give_skill;Duro;critao;;persistent;no_banner",
            "give_skill;Duro;Critical_Boost;;no_banner;persistent",
            "enable_turnwheel;t",
            "enable_supports;t",
            "give_skill;Monica;Penitence;no_banner",
            "give_skill;Monica;Soothing_Presence;no_banner",
            "add_talk;Duro;Antarion",
            "give_skill;Chosen;Aura_Blighting;no_banner",
            "give_skill;Chosen;Aura_Blighting_buffs;no_banner",
            "give_item;Chosen;Shining_Sword;no_banner",
            "give_skill;Duro;Grand_Entrance;persistent;no_banner",
            "give_skill;Antarion;Clutch_King;;no_banner",
            "give_skill;Antarion;Guaranteed_Crit;;no_banner",
            "give_skill;Safado;Nothing_Personal_skill;no_banner;persistent",
            "give_skill;Safado;Sneaking_Stance;;persistent;no_banner",
            "give_skill;Lucia;Striking_Defiance;;no_banner;persistent",
            "give_skill;Mira;Lust_Death_attack;;persistent;no_banner",
            "give_skill;Milena;Succubus_Mana;;persistent;no_banner",
            "give_skill;Milena;Dance;;no_banner;persistent",
            "give_skill;Milena;Subtle_Slithering;;no_banner;persistent",
            "set_current_hp;101;5",
            "give_skill;101;Blinded_Immune;;no_banner;persistent",
            "give_skill;Duro;Bear_hug;;no_banner",
            "give_item;Rialayoung;Lusting_Gaze;;no_banner",
            "give_item;Rialayoung;Lethal_Lust;no_banner",
            "give_item;Simonyoung;Master_Seal;no_banner",
            "set_current_mana;Monica;1",
            "give_item;Chosen;Sylvan_Draught;no_banner",
            "",
            "give_skill;Milena;Succubus_Mana;;persistent;no_banner",
            "give_item;Chosen;Serum;no_banner",
            "give_skill;Chosen;Blinded;;no_banner"
        ],
        "nid": "DEBUG_2 testing backup"
    },
    {
        "name": "New Event",
        "trigger": "on_talk",
        "level_nid": "DEBUG_2",
        "condition": "unit.nid == 'Duro' and unit2.nid == 'Antarion'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#pyev1",
            "",
            "weapon_types = set(DB.weapons.keys())  # or iterate DB.weapons",
            "",
            "bad_units = []",
            "for unit in DB.units:",
            "    klass = DB.classes.get(unit.klass)",
            "    if klass is None:",
            "        bad_units.append((unit.nid, \"missing class\", unit.klass))",
            "        continue",
            "    if not hasattr(klass, 'wexp_gain') or klass.wexp_gain is None:",
            "        bad_units.append((unit.nid, \"class has no wexp_gain\", klass.nid))",
            "        continue",
            "    # check all WEXP types used by weapons the unit has in DB (or all weapon types)",
            "    for wnid in DB.weapons.keys():",
            "        # if get_weapon_cap uses klass.wexp_gain.get(weapon_type...), we should check that keys exist reasonabley",
            "        # no hard fail but we log none keys",
            "        if klass.wexp_gain.get(wnid) is None:",
            "            # optional: check if any weapon uses this wnid and is present in game",
            "            pass",
            "",
            "print(\"Bad units:\", bad_units)"
        ],
        "nid": "DEBUG_2 New Event"
    },
    {
        "name": "PROL SUP Mira Duro",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Mira' and unit2.nid == 'Duro') or (unit.nid == 'Duro' and unit2.nid == 'Mira')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Mira;Overbearing_Jokes;;persistent",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Mira;Overbearing_Jokes_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Mira Duro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P8",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Ogre1;BossMiracle_1;;no_banner",
            "end",
            "",
            "",
            "change_background;BlackBackground",
            "chapter_title",
            "transition;close",
            "show_layer;remake",
            "add_weather;sunset",
            "add_weather;sunset",
            "change_background;Plains",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "move_cursor;5,20",
            "music;Happy1",
            "transition;open;2000",
            "s;Chosen;Are we really gonna climb this whole thing? Oh man...",
            "expression;Simonyoung;Smile",
            "s;Simonyoung;Finally come to your senses?|We can still turn back and train on a more controlled environment.",
            "s;Chosen;You know just the right thing to bore me to death, don't you?{c:expression;Simonyoung;NoSmile}|You know what, you motivated me.|I'll climb whatever it takes to get away from you!",
            "transition;close;1000",
            "change_background",
            "transition;open;1000",
            "add_unit;Chosen;5,20;fade;giveup;south",
            "add_unit;Simonyoung;4,20;fade;giveup;south",
            "wait;3000",
            "add_portrait;Chosen;MidLeft;;NoSmile;no_block",
            "add_portrait;Simonyoung;FarLeft",
            "s;Chosen;There's an ugly-ass orc out there, but also...|{c:expression;Chosen;Smile}A tasty succubus, just the way I like it, baby!",
            "flicker_cursor;Minerve",
            "wait;300",
            "add_portrait;Minerve;Right;;Smile",
            "bop_portrait;Minerve",
            "s;Minerve;That's amazing!{c:wait;200}{c:bop_portrait;Minerve} Just like she said it!{c:wait;200}{c:bop_portrait;Minerve} Oh gosh!",
            "expression;Simonyoung;NoSmile",
            "s;Chosen;FINALLY I'm being recognized around here!",
            "move_portrait;Minerve;MidRight",
            "s;Minerve;He's arrived...",
            "s;Chosen;Let me warn you.{c:wait;300} As I'm the hero, I'm always surrounded by women.|You can't be jealous, otherwise...",
            "bop_portrait;Minerve",
            "music_clear",
            "s;Minerve;<red>Simon</> is here{c:expression;Simonyoung;OpenEyes}, just as she predicted!{c:expression;Chosen;NoSmile}",
            "s;Chosen;Uh, what?|No, I'm {v:chosenname}.",
            "move_portrait;Chosen;FarLeft;no_block",
            "move_portrait;Simonyoung;MidLeft",
            "music;Preparation",
            "s;Simonyoung;Be careful!|If she's here, then... we've already failed.",
            "s;Minerve;And would you believe me if I told you she isn't?",
            "s;Simonyoung;I have no reason to.",
            "s;Minerve;Ever so cautious... that's so hot!",
            "bop_portrait;Chosen",
            "expression;Simonyoung;CloseEyes",
            "s;Chosen;Stop it, the both of you!|I'm on a serious mission here, and you guys have NO right to flirt!|And who the hell are you talking about?!|I deserve to-",
            "expression;Simonyoung;OpenEyes",
            "s;Simonyoung;She was stalling! Look ahead!",
            "multi_remove_portrait;Chosen;Simonyoung;Minerve",
            "wait;500",
            "end_skip",
            "spawn_group;orc;north;orc;normal;closest",
            "wait;1000",
            "move_cursor;Minerve",
            "wait;500",
            "add_portrait;Minerve;MidRight;;Smile",
            "s;Minerve;I would looove to chat a bit more, but my friend here is thrilled to take the stage!|See ya~",
            "remove_portrait;Minerve",
            "wait;500",
            "remove_unit;Minerve;warp;fade",
            "move_unit;Ogre1;4,7",
            "wait;1000",
            "move_cursor;Chosen",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "expression;Chosen;NoSmile",
            "s;Chosen;Tsc... That bitch!|Let's kill those monsters already and get to the mountain!",
            "expression;Simonyoung;CloseEyes",
            "s;Simonyoung;Hmm ...|This is an unusual orc formation.|I should pay attention to the orcs on the cliffs.;;;thought_bubble",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;1000",
            "transition;close;1000",
            "remove_unit;Simonyoung;immediate",
            "move_unit;Chosen;5,18;immediate;silent",
            "prep;t;Preparation"
        ],
        "nid": "P8 Intro"
    },
    {
        "name": "Antarion Crit",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;200",
            "lvar;critanta;game.get_random_choice([1,2,3,4,5,6,7,8])",
            "add_portrait;Antarion;Left;;Smile",
            "if;{v:critanta} == 1",
            "    s;Antarion;Where would this party be without me?",
            "elif;{v:critanta} == 2",
            "     s;Antarion;Take notes.",
            "elif;{v:critanta} == 3",
            "     s;Antarion;Ladies, please make a line.",
            "elif;{v:critanta} == 4",
            "     s;Antarion;You lost the moment you faced Antarion.",
            "elif;{v:critanta} == 5",
            "     s;Antarion;As expected of the mightiest Blademaster.",
            "elif;{v:critanta} == 6",
            "     s;Antarion;Plenty of skill to match my handsome face.",
            "elif;{v:critanta} == 7",
            "     s;Antarion;Be glad, you faced a legend.",
            "elif;{v:critanta} == 8",
            "     s;Antarion;Ah... if only women were that easy.",
            "elif;{v:critanta} == 9",
            "     s;Antarion;Apologies for going all out. I have fine women waiting for me.",
            "elif;{v:critanta} == 10",
            "     s;Antarion;You are but a stone in my path to become King.",
            "end",
            "remove_portrait;Antarion"
        ],
        "nid": "Global Antarion Crit"
    },
    {
        "name": "Mountain reach VICTORY",
        "trigger": "Mountain",
        "level_nid": "P8",
        "condition": "any(game.level.regions.get('Mountain').contains(unit.position) for unit in game.get_units_in_party()) == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P8 Mountain reach VICTORY"
    },
    {
        "name": "Imp ambush setup",
        "trigger": "turn_change",
        "level_nid": "P8",
        "condition": "any(game.level.regions.get('ambush').contains(unit.position) for unit in game.get_units_in_party())",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;ambushsetup;1",
            "remove_region;ambush",
            "if;u('Simonyoung') in game.get_player_units()",
            "    wait;1000",
            "    add_portrait;Simonyoung;Left",
            "    s;Simonyoung;If this was planned by her...;;;thought_bubble",
            "    s;Simonyoung;We should expect enemy reinforcements soon.|As of now, our position is vulnerable to a pincer attack. Which means...|{c:center_cursor;6,20}They will come from below.",
            "    remove_portrait;Simonyoung",
            "    wait;500",
            "end"
        ],
        "nid": "P8 Imp ambush setup"
    },
    {
        "name": "Imp ambush",
        "trigger": "turn_change",
        "level_nid": "P8",
        "condition": "game.level_vars['ambushsetup'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "center_cursor;6,20",
            "wait;1000",
            "spawn_group;imp;south;imp;normal;closest",
            "wait;1000",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop"
        ],
        "nid": "P8 Imp ambush"
    },
    {
        "name": "New Event_1",
        "trigger": "time_region_complete",
        "level_nid": "DEBUG_2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_map_anim;MapFire;{eval:position};overlay"
        ],
        "nid": "DEBUG_2 New Event_1"
    },
    {
        "name": "Intro e Tutorial: free roam",
        "trigger": "level_start",
        "level_nid": "P9",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "music_clear",
            "chapter_title",
            "level_var;shinysword;0",
            "change_background",
            "transition;close;1000",
            "center_cursor;6,32",
            "add_weather;smoke",
            "add_weather;smoke",
            "show_layer;tunel",
            "show_layer;bridge",
            "show_layer;building",
            "show_layer;trees",
            "show_layer;trees2",
            "show_layer;totem1",
            "show_layer;pedras",
            "show_layer;base_cliff_transp",
            "add_weather;event_tile;12,22",
            "show_layer;raizes",
            "music;Wind",
            "transition;open;2000",
            "add_unit;Chosen;7,32;fade;closest;south",
            "add_unit;Simonyoung;6,32;fade;closest;south",
            "wait;1000",
            "move_unit;Chosen;7,29;normal;stack;no_block",
            "move_unit;Simonyoung;6,29;normal;giveup;no_follow",
            "wait;500",
            "add_portrait;Chosen;Left;normal;Smile",
            "s;Chosen;This is it, the <wave>real</> beginning of my journey!|After this I'm set to defeat the Incuntbus King! for real!",
            "add_portrait;Simonyoung;Right;right",
            "s;Simonyoung;Are you done with your puns?|Although the climb was tough, we still need to secure the perimeter.|You should set camp here while I go around-",
            "bop_portrait;Chosen",
            "s;Chosen;No way in hell you're going exploring while I do the boring shit!|I can feel it, there's something <green>calling</> me here!",
            "s;Simonyoung;Yes. Most likely traps.",
            "s;Chosen;You're so much jealous, bro. It's sad. I'm off!",
            "expression;Simonyoung;CloseEyes",
            "remove_portrait;Chosen;;left",
            "wait;300",
            "s;Simonyoung;Did we surpass her strategy, or are we still in the middle of it...?;;;thought_bubble",
            "wait;300",
            "remove_portrait;Simonyoung",
            "wait;300",
            "transition;close;2000",
            "show_layer;camp",
            "if;game.check_alive('Simonyoung') == True",
            "    move_unit;Simonyoung;8,26;immediate;stack;silent",
            "    add_talk;Chosen;Simonyoung",
            "end",
            "if;game.check_alive('Mira') == True",
            "    add_unit;Mira;5,28;immediate;giveup;fade",
            "    add_talk;Chosen;Mira",
            "end",
            "if;game.check_alive('Duro') == True",
            "    add_unit;Duro;9,28;immediate;giveup;fade",
            "    add_talk;Chosen;Duro",
            "end",
            "if;game.check_alive('Monica') == True",
            "    if;u('Monica').team == 'player'",
            "        add_unit;Monica;6,23;immediate;giveup;fade",
            "        add_talk;Chosen;Monica",
            "    end",
            "end",
            "if;game.check_alive('Antarion') == True",
            "    add_unit;Antarion;11,25;immediate;giveup;fade",
            "    add_talk;Chosen;Antarion",
            "end",
            "if;game.check_alive('Cassian') == True and u'(Cassian').team == 'player'",
            "    add_unit;Cassian;6,22;immediate;giveup;fade",
            "    add_talk;Chosen;Cassian",
            "end",
            "if;game.check_alive('Lucia') == True and u'(Lucia').team == 'player'",
            "    add_unit;Lucia;5,21;immediate;giveup;fade",
            "    add_talk;Chosen;Lucia",
            "end",
            "if;game.check_alive('Safado') == True",
            "    if;u('Safado').team == 'player'",
            "        add_unit;Safado;2,26;immediate;giveup;fade",
            "        add_talk;Chosen;Safado",
            "    end",
            "end",
            "if;game.check_alive('Rosa') == True",
            "    if;u('Rosa').team == 'player'",
            "        add_unit;Rosa;7,25;immediate;giveup;fade",
            "        add_talk;Chosen;Rosa",
            "    end",
            "end",
            "wait;1000",
            "map_anim;MapFire;7,27;permanent",
            "transition;open;2000",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;You are about to enter <red>free roam</>.|Use your arrow keys to move around without worrying about turns.|Press the confirm button to interact with things or people.;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "    wait;200",
            "end"
        ],
        "nid": "P9 Intro e Tutorial: free roam"
    },
    {
        "name": "Totem",
        "trigger": "Interact",
        "level_nid": "P9",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:shinysword} == 0",
            "    wait;300",
            "    center_cursor;12,20",
            "    wait;300",
            "    add_portrait;Chosen;Left",
            "    wait;300",
            "    s;Chosen;Hmm... a wall... a totem...|I see, this is a puzzle!|Nothing more befitting in my journey.{c:wait;300} Now, to find what piece this thing needs...",
            "elif;{v:shinysword} == 1",
            "    wait;300",
            "    center_cursor;12,20",
            "    wait;300",
            "    add_portrait;Chosen;Left",
            "    wait;300",
            "    s;Chosen;So, here's the first task already for my Shining Sword!|Illuminate!",
            "    remove_portrait;Chosen",
            "    wait;500",
            "    screen_shake;500;default;no_block",
            "    wait;200",
            "    map_anim;AOE_Reinforce;12,20",
            "    sound;Weapon Click",
            "    show_layer;totem2",
            "    hide_layer;totem1",
            "    remove_weather;event_tile;12,22",
            "    screen_shake_end",
            "    wait;1000",
            "    center_cursor;14,26",
            "    wait;1000",
            "    add_portrait;Chosen;Left",
            "    wait;300",
            "    s;Chosen;Ohh baby, strong and smart, splendid and sexy!|I'm THE Chosen, ready for anything!",
            "    remove_region;Interact",
            "    remove_portrait;Chosen",
            "end"
        ],
        "nid": "P9 Totem"
    },
    {
        "name": "Simon talk",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Simonyoung'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:shinysword} == 1",
            "    add_portrait;Simonyoung;Right",
            "    s;Simonyoung;So you found your destined <red>Shining Sword</>.|Perhaps we should access the conveniency in which this item has fallen into your hands.|If you let me inspect it, I could check for...",
            "else",
            "    add_portrait;Simonyoung;Right",
            "    s;Simonyoung;What we have at stake here is not merely your entertainment.|The whole continent is depending on...",
            "end",
            "remove_talk;Chosen;Simonyoung"
        ],
        "nid": "P9 Simon talk"
    },
    {
        "name": "Mira talk ",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Mira'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Mira;Right",
            "s;Mira;We're getting closer...{c:wait;400}{c:expression;Mira;Smile} I will... finally...!",
            "remove_talk;Chosen;Mira"
        ],
        "nid": "P9 Mira talk "
    },
    {
        "name": "Duro talk",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Duro'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Duro;Right;;Smile",
            "s;Duro;How you doing, chump? Getting cold feet yet?",
            "expression;Duro;NoSmile,CloseEyes",
            "s;Duro;Let me tell you something.|A place like this...{c:wait;300} is one you might often find in your life.",
            "expression;Duro;Smile,OpenEyes",
            "s;Duro;Because when you're this ugly, your partners will be that fucking dry! HAHAHAHAHA!|Nah, I'm just messing with ya.|You're not gonna make them dry because of your face.|But no promises about everything else, HAHAHA!",
            "remove_talk;Chosen;Duro"
        ],
        "nid": "P9 Duro talk"
    },
    {
        "name": "Antarion Talk",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Antarion'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Antarion;Right;;Smile",
            "s;Antarion;I have to admit, you have come pretty far.|That is to be expected from someone under the protection of a renowed Blademaster.|Try even harder and you might get a footnote in the history books.|\"The clumsiest, but most persistent Antarion's pupil\".|Yes, the chicks will dig that I had the patience to mentor someone such as yourself.",
            "remove_talk;Chosen;Antarion"
        ],
        "nid": "P9 Antarion Talk"
    },
    {
        "name": "Chest",
        "trigger": "chest",
        "level_nid": "P9",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;Chosen",
            "wait;400",
            "add_portrait;Chosen;Left;;CloseEyes",
            "s;Chosen;This is it...|This is what I'm here for.|My fate... and the fate of the whole world...",
            "expression;Chosen;OpenEyes,Smile",
            "s;Chosen;From here on out, my cock will be irresistible!",
            "unlock;Chosen",
            "give_item;Chosen;Shining_Sword;ChosenParty",
            "remove_region;chest",
            "show_layer;chest",
            "level_var;shinysword;1",
            "add_talk;Chosen;Simonyoung"
        ],
        "nid": "P9 Chest"
    },
    {
        "name": "Monica talk",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Monica'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Monica;Right;;CloseEyes",
            "wait;1000",
            "expression;Monica;Smile,CloseEyes",
            "wait;1000",
            "expression;Monica;OpenEyes,Smile",
            "wait;1000",
            "remove_talk;Chosen;Monica"
        ],
        "nid": "P9 Monica talk"
    },
    {
        "name": "Cassian talk",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Cassian'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.check_alive('Lucia') == True",
            "    multi_add_portrait;Cassian;MidRight;Lucia;FarRight",
            "    s;Cassian;Hey, {v:chosenname}!{c:wait;300} Have you already came up with our titles?|I mean, as the famous companions of the hero, we all gotta have cool titles, right?",
            "    s;Lucia;I got one for you: Cassian, the Empty Headed.",
            "    s;Cassian;And I got another one for you: Lucia, the Same Thing, 'Cause we're Twins.",
            "    s;Lucia;That is going to be a handful to talk every time.|You better hope I don't get too relevant, or the historians will get pissed.",
            "    s;Cassian;As long as they don't just group us under the same title, it's all good.",
            "    s;Lucia;Yeah, that would make your future succubus girlfriend pretty jealous.",
            "    s;Cassian;Hey, I'm not here to date!{c:wait;400} Unless...",
            "else",
            "    add_portrait;Cassian;Right;;NoSmile,CloseEyes",
            "    s;Cassian;{tgm}...",
            "    expression;Cassian;NoSmile,OpenEyes",
            "    s;Cassian;Let's go. This has to have a purpose in the end...!",
            "end",
            "remove_talk;Chosen;Cassian"
        ],
        "nid": "P9 Cassian talk"
    },
    {
        "name": "Lucia talk",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Lucia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.check_alive('Cassian') == True",
            "    multi_add_portrait;Cassian;FarRight;Lucia;MidRight",
            "    s;Lucia;Hey, pretty boy.{c:wait;300} Did you see any dandy brush laying around here?",
            "    s;Cassian;You're hopeless. Poor Noodle deserves a better owner!",
            "    s;Lucia;I'll have you know he is happy with me.|I bet you're the one who took it and forgot to return.",
            "    s;Cassian;Whaat? No way. Besides, mine is very worn out, so I would know.",
            "    s;Lucia;And you call me a bad owner. Don't you think Farty deserves a pristine brush?",
            "    s;Cassian;It's in bad shape because I use it too much, unlike you!",
            "    s;Lucia;Hmm-hm.{c:wait;300} I bet you use the brush yourself for other... naughty stuff.",
            "    s;Cassian;I don't know what you meant by that, and frankly, I'm afraid to imagine.",
            "else",
            "    add_portrait;Lucia;Right;;NoSmile,CloseEyes",
            "    wait;600",
            "    s;Lucia;Please leave me be.",
            "end",
            "remove_talk;Chosen;Lucia"
        ],
        "nid": "P9 Lucia talk"
    },
    {
        "name": "Safado talk",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Safado'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Safado;Right;;CloseEyes",
            "s;Safado;He's coming and I didn't prepare my line, shit.|Ok, this is kind of giving off a mysterious vibe.|Like something really bad is going to happen soon.|But I don't want to sound worried and make them worried too.|How do I capitalize on this atmosphere to improve my style without stressing them out?;;;thought_bubble",
            "expression;Safado;OpenEyes",
            "s;Safado;Oh, yo, {v:chosenname}, I didn't see, I mean, I didn't hear you there, because it's pretty uh, windy.",
            "wait;1000",
            "remove_talk;Chosen;Safado"
        ],
        "nid": "P9 Safado talk"
    },
    {
        "name": "Rosa talk",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Chosen' and unit2.nid == 'Rosa'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Rosa;Right;;CloseEyes,NoSmile",
            "wait;1000",
            "expression;Rosa;OpenEyes,NoSmile",
            "wait;500",
            "expression;Rosa;Smile",
            "wait;500",
            "s;Rosa;Do you feel a bit dizzy?{c:wait;300} Hihi. It's a natural reaction to climbing up this high.|My fires get a little weaker too, can you believe it?|However, you don't need to worry. I can still protect you just fine.",
            "remove_talk;Chosen;Rosa"
        ],
        "nid": "P9 Rosa talk"
    },
    {
        "name": "ambush e true level start",
        "trigger": "roaming_interrupt",
        "level_nid": "P9",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "map_anim;MapSurprise;{Chosen}",
            "remove_region;ambush",
            "wait;500",
            "music;Tension",
            "flicker_cursor;Minerve",
            "wait;300",
            "add_portrait;Minerve;MidRight",
            "s;Minerve;They're here, Miss Riala!",
            "wait;400",
            "add_portrait;Rialayoung;FarRight;right",
            "wait;300",
            "s;Rialayoung;Begin the second phase.",
            "s;Minerve;Right away!",
            "remove_portrait;Minerve;;normal",
            "remove_portrait;Rialayoung",
            "wait;300",
            "remove_unit;Minerve;warp;fade",
            "wait;400",
            "center_cursor;15,26",
            "wait;500",
            "sound;Weapon Click",
            "show_layer;totem1",
            "hide_layer;totem2",
            "wait;2000",
            "move_cursor;Chosen",
            "wait;700",
            "add_portrait;Chosen;Left",
            "s;Chosen;That's...{c:wait;300} No problem! Yeah, I didn't plan on relying on anyone else!",
            "remove_portrait;Chosen",
            "move_unit;Rialayoung;9,21;warp;closest",
            "center_cursor;9,25",
            "wait;2000",
            "music;Main Theme_TLS",
            "multi_add_portrait;Simonyoung;Left;Rialayoung;Right",
            "s;Rialayoung;It's a pleasure to meet you again, Simon.",
            "expression;Simonyoung;Smile",
            "s;Simonyoung;Under these circumstances, I'm afraid I cannot say the same.",
            "expression;Simonyoung;NoSmile",
            "s;Rialayoung;Huhu, I understand.|I apologize for putting you through this, but your actions leave me no choice.",
            "s;Simonyoung;Do they really?",
            "expression;Rialayoung;CloseEyes",
            "wait;1000",
            "expression;Rialayoung;OpenEyes",
            "s;Rialayoung;It's impossible for you or anyone else to understand...|...what we need to endure or do here to merely survive.",
            "expression;Simonyoung;CloseEyes",
            "s;Simonyoung;Likewise you will never understand what your side have taken from us.|From me.",
            "expression;Simonyoung;OpenEyes",
            "s;Simonyoung;That is the harsh reality of war.|This time, I will make sure he ends it.",
            "expression;Rialayoung;Smile",
            "s;Rialayoung;Oh, Simon...|You rely on following someone who might not be too different from your ultimate foe.",
            "expression;Rialayoung;NoSmile",
            "s;Rialayoung;Do you truly feel prudent leading this kid to more power?|If he accomplishes this impossible task, will his morals really be better?",
            "expression;Simonyoung;CloseEyes",
            "wait;1000",
            "s;Simonyoung;I will fight fire with fire if it's necessary.|Other institutions have already given up on opposing the Incubus King.|What comes after that...{c:expression;Simonyoung;OpenEyes}{c:wait;500} is not in my power to change.",
            "expression;Rialayoung;CloseEyes",
            "wait;2000",
            "expression;Rialayoung;OpenEyes",
            "s;Rialayoung;And I am tired of leaving this up to others.|{c:expression;Rialayoung;CloseEyes}But this power that I seek...|I'm not ready yet.|{c:expression;Rialayoung;OpenEyes}And until I am, I will supress any interference.",
            "wait;1000",
            "multi_remove_portrait;Simonyoung;Rialayoung",
            "wait;400",
            "center_cursor;30,25",
            "wait;600",
            "add_unit;Minerve;32,25;warp;stack;fade",
            "wait;400",
            "music_clear",
            "add_portrait;Minerve;Right",
            "s;Minerve;We know a lot about you already, {v:chosenname}!|That's why we prepared a special opponent for you~|One that you deeeefinitely wouldn't fuck~",
            "remove_portrait;Minerve",
            "wait;500",
            "center_cursor;22,6",
            "wait;1000",
            "add_unit;Plant;22,0;fade;stack;north",
            "move_unit;Plant;22,6;normal;stack",
            "wait;1000",
            "add_portrait;Plant;Right",
            "wait;400",
            "music_clear",
            "s;Plant;If he tries anything with me, he will have one hell of a HARD time!",
            "wait;400",
            "center_cursor;Chosen",
            "wait;700",
            "add_portrait;Chosen;Left;;CloseEyes,NoSmile",
            "wait;600",
            "s;Chosen;Thank you, Ivala...",
            "expression;Chosen;OpenEyes,Smile",
            "music;Prologue battles",
            "s;Chosen;My dream has finally come true.|I <wave>will</> fuck a plant today.{c:expression;Planta;NoSmile}",
            "wait;700",
            "remove_portrait;Plant",
            "wait;300",
            "s;Chosen;In fact...|I can feel something rising in me!!|And it's not just my erection!!!",
            "wait;200",
            "remove_portrait;Chosen",
            "sound;Shine",
            "map_anim;AOE_Mend;Chosen",
            "wait;1000",
            "promote;Chosen",
            "wait;1000",
            "add_portrait;Chosen;Left;;Smile",
            "s;Chosen;I am a new man!|I am... the <red>Special</> Chosen!",
            "remove_portrait;Chosen",
            "wait;1000",
            "move_unit;Chosen;15,26",
            "wait;1000",
            "add_unit;wall;14,26;immediate;stack;fade",
            "interact_unit;Chosen;wall;crit1;;force_animation",
            "map_anim;Snag;14,26",
            "sound;VillageDestroyed",
            "hide_layer;totem1",
            "show_layer;totem2",
            "wait;1000",
            "center_cursor;Rialayoung",
            "wait;500",
            "remove_unit;Rialayoung;warp;fade",
            "wait;1000",
            "center_cursor;Minerve",
            "wait;1000",
            "add_portrait;Minerve;Right",
            "s;Minerve;Oh. Oops!|Ok so, we ignore that and proceed as usual!",
            "wait;200",
            "remove_portrait;Minerve",
            "move_unit;Minerve;27,27;swoosh;stack",
            "wait;300",
            "spawn_group;enemy;north;enemy;normal;stack;no_follow",
            "wait;1000",
            "center_cursor;Chosen",
            "wait;1000",
            "end_skip",
            "music;Funny",
            "center_cursor;Milena",
            "flicker_cursor;Milena",
            "wait;1000",
            "move_unit;Milena;31,15;;;no_follow",
            "move_unit;Milena;34,15;;;no_follow",
            "move_unit;Milena;32,16;;;no_follow",
            "move_unit;Milena;32,15;;;no_follow",
            "move_unit;Milena;31,16;;;no_follow",
            "move_unit;Milena;33,14;;;no_follow",
            "add_portrait;Milena;Right",
            "s;Milena;Oh no...{c:move_unit;Milena;31,15;;;no_follow} Oh no...{c:move_unit;Milena;32,15;;;no_follow} I'm not prepared to die!! {c:move_unit;Milena;31,16;;;no_follow}{c:move_unit;Milena;33,14;;;no_follow}",
            "expression;Milena;NoSmile,CloseEyes",
            "s;Milena;Uuuugh...{c:move_unit;Milena;34,15;;;no_follow} I really{c:move_unit;Milena;32,15;;;no_follow} don't wanna{c:move_unit;Milena;31,16;;;no_follow} fiiiight!!!{c:move_unit;Milena;33,14;;;no_follow}",
            "remove_portrait;Milena;;left",
            "transition;close;1000",
            "music_clear;1000",
            "center_cursor;Chosen",
            "change_roaming;f",
            "move_unit;Chosen;16,26;immediate",
            "    if;game.check_alive('Simonyoung') == True",
            "        remove_unit;Simonyoung;immediate;fade",
            "    end",
            "    if;game.check_alive('Mira') == True",
            "        remove_unit;Mira;immediate;fade",
            "    end",
            "    if;game.check_alive('Duro') == True",
            "        remove_unit;Duro;immediate;fade",
            "    end",
            "    if;game.check_alive('Monica') == True",
            "        remove_unit;Monica;immediate;fade",
            "    end",
            "    if;game.check_alive('Antarion') == True",
            "        remove_unit;Antarion;immediate;fade",
            "    end",
            "    if;game.check_alive('Cassian') == True",
            "        remove_unit;Cassian;immediate;fade",
            "    end",
            "    if;game.check_alive('Lucia') == True",
            "        remove_unit;Lucia;immediate;fade",
            "    end",
            "    if;game.check_alive('Safado') == True",
            "        remove_unit;Safado;immediate;fade",
            "    end",
            "    if;game.check_alive('Rosa') == True",
            "        remove_unit;Rosa;immediate;fade",
            "    end",
            "    remove_map_anim;MapFire;7,27",
            "    wait;1000",
            "remove_talk;Chosen;Simonyoung",
            "remove_talk;Chosen;Simonyoung",
            "remove_talk;Chosen;Mira",
            "remove_talk;Chosen;Duro",
            "remove_talk;Chosen;Monica",
            "remove_talk;Chosen;Antarion",
            "remove_talk;Chosen;Cassian",
            "remove_talk;Chosen;Lucia",
            "remove_talk;Chosen;Safado",
            "remove_talk;Chosen;Rosa",
            "change_music;player_phase;Prologue battles",
            "change_music;enemy_phase;Withered Mountain",
            "change_objective_win;Defeat the boss.",
            "change_objective_loss;Chosen dies.",
            "change_objective_simple;Defeat the boss.",
            "add_talk;Cassian;Milena",
            "add_talk;Mira;Milena",
            "change_ai;Minerve;Pursue",
            "transition;open;1000",
            "prep;t;Preparation"
        ],
        "nid": "P9 ambush e true level start"
    },
    {
        "name": "New Event_2",
        "trigger": "roaming_interrupt",
        "level_nid": "DEBUG_2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "DEBUG_2 New Event_2"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P8",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P8",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P7;P8",
            "wait;1000"
        ],
        "nid": "P8 Overworld start"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P9",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P9",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P8;P9",
            "wait;1000"
        ],
        "nid": "P9 Overworld start"
    },
    {
        "name": "Wrecker attacks Plank",
        "trigger": "turn_change",
        "level_nid": "P5",
        "condition": "game.level.regions.get('easteregg').contains(game.get_unit('Wrecker').position)",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;300",
            "flicker_cursor;Wrecker",
            "music;Other theme",
            "add_portrait;Wrecker;Right",
            "s;Wrecker;PLANK! WHERE IS CRUSHER?",
            "add_portrait;Plank;Left",
            "s;Plank;Uh...{c:wait;400} he's on vacation, don't worry.|He said I could be in charge while he's away.|Any problem you can take it up to him, I'm just the messenger!|And also... {c:wait;500}I go by <red>Demolisher</> now.",
            "wait;1000",
            "s;Wrecker;TRUTH?",
            "s;Plank;Sure.",
            "s;Wrecker;PLANK SMELLS OF LIES!",
            "s;Plank;No, that is just the soap I stole from...",
            "s;Wrecker;WRECKER WRECKS DEMOLISHER!",
            "s;Plank;Ah fuck it.{c:wait;300} DEMOLISHER DEMOLISHES WRECKER!",
            "multi_remove_portrait;Wrecker;Plank",
            "wait;300",
            "change_team;Wrecker;enemy2",
            "wait;1000"
        ],
        "nid": "P5 Wrecker attacks Plank"
    },
    {
        "name": "Plant root aoe",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_region;root;{eval:target_pos};1,1;normal;root;2",
            "map_anim;RedDot;{eval:target_pos};permanent",
            "#--- Tile Above ---",
            "add_region;rootup;{eval: (target_pos[0], target_pos[1] - 1)};1,1;normal;;2",
            "map_anim;RedDot;{eval: (target_pos[0], target_pos[1] - 1)};permanent",
            "#--- Tile Below ---",
            "add_region;rootdown;{eval: (target_pos[0], target_pos[1] + 1)};1,1;normal;;2",
            "map_anim;RedDot;{eval: (target_pos[0], target_pos[1] + 1)};permanent",
            "#--- Tile to the Left ---",
            "add_region;rootleft;{eval: (target_pos[0] - 1, target_pos[1])};1,1;normal;;2",
            "map_anim;RedDot;{eval: (target_pos[0] - 1, target_pos[1])};permanent",
            "#--- Tile to the Right ---",
            "add_region;rootright;{eval: (target_pos[0] + 1, target_pos[1])};1,1;normal;;2",
            "map_anim;RedDot;{eval: (target_pos[0] + 1, target_pos[1])};permanent"
        ],
        "nid": "Global Plant root aoe"
    },
    {
        "name": "Root event",
        "trigger": "time_region_complete",
        "level_nid": null,
        "condition": "region.nid == 'root'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;200",
            "flicker_cursor;{eval:position}",
            "wait;200",
            "remove_map_anim;RedDot;{eval:position}",
            "remove_map_anim;RedDot;{eval: (position[0], position[1] - 1)}",
            "remove_map_anim;RedDot;{eval: (position[0], position[1] + 1)}",
            "remove_map_anim;RedDot;{eval: (position[0] - 1, position[1])}",
            "remove_map_anim;RedDot;{eval: (position[0] + 1, position[1])}",
            "screen_shake;200;default",
            "make_generic;plant_target;root;1;enemy;None;Neutral",
            "add_unit;plant_target;{eval:position};immediate;stack;fade",
            "interact_unit;Plant;{eval:position};--;Activate_Roots",
            "#sound;Critical Hit 2",
            "#map_anim;Snag;{eval:position}",
            "kill_unit;plant_target;immediate"
        ],
        "nid": "Global Root event"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P12",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Minerve_true;BossMiracle_1;;no_banner",
            "end",
            "",
            "change_background;BlackBackground",
            "level_var;shop;0",
            "level_var;minerveattacked;0",
            "chapter_title",
            "transition;close",
            "wait;1000",
            "music;Wind",
            "change_background;Wasteland",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "expression;Chosen;NoSmile",
            "expression;Simonyoung;CloseEyes",
            "transition;open;1000",
            "s;Chosen;Damn...{c:wait;300} before kicking the Incubus King's ass...{c:wait;300} we have to deal with this shit...|How long...{c:wait;300} till we get there...?",
            "s;Simonyoung;Complaining won't get us any closer.|{c:expression;Simonyoung;OpenEyes}Had we not proceeded hastily, we could have secured a wagon and appropriate supplies.|As of now, we need to locate secluded areas we could recover and fall back to.",
            "s;Chosen;Ugh...{c:wait;300} Shut up...{c:wait;300} Something will show up and that's the whole deal.",
            "expression;Chosen;Smile",
            "s;Chosen;Before all my fiercest battles I always found a safe place to recover!",
            "s;Simonyoung;...;;;;no_talk;no_sound",
            "s;Chosen;And speaking of which...|{c:bop_portrait;Chosen}I see something in the distance!",
            "move_portrait;Chosen;OffscreenRight",
            "mirror_portrait;Simonyoung",
            "expression;Simonyoung;CloseEyes",
            "wait;1000",
            "transition;close",
            "change_background",
            "wait;1000",
            "center_cursor;1,9",
            "transition;open",
            "wait;1000",
            "add_unit;Chosen;0,9;fade;;west",
            "wait;500",
            "map_anim;MapSurprise;Chosen",
            "wait;500",
            "move_unit;Chosen;5,8",
            "add_portrait;Chosen;Left",
            "s;Chosen;Aha! I knew it!|Obviously it couldn't be ALL bad!|It's for places like this that this region is still worth something!|I can already see it... when I defeat that sucker...|This will be my kingdom... yes...",
            "wait;300",
            "move_unit;Chosen;8,8",
            "s;Chosen;And there are some interesting stuff there as well!",
            "center_cursor;16,12",
            "wait;500",
            "center_cursor;20,8",
            "wait;500",
            "center_cursor;17,2",
            "add_unit;Minerve_true;7,8;immediate;stack;fade",
            "wait;500",
            "center_cursor;Chosen",
            "wait;500",
            "music_clear",
            "add_portrait;Minerve;FarLeft",
            "s;Minerve;Done admiring? It's a cozy place~",
            "music;Tension2",
            "bop_portrait;Chosen",
            "move_portrait;Chosen;Right",
            "mirror_portrait;Chosen",
            "move_unit;Chosen;9,8;normal;;no_follow",
            "bop_portrait;Chosen",
            "s;Chosen;Stop sneaking up on me!|My behind is...{c:wait;300} it's sacred, you know?!",
            "bop_portrait;Minerve",
            "s;Minerve;Really?! Ohhh! Now I really wanna try some spells~",
            "s;Chosen;Ugh, never mind that!|I'm gonna make sure to bring you down now!",
            "s;Minerve;Umm...{c:wait;400} I kinda agree!|Let's end this now, good luck to us~",
            "s;Chosen;Huh?",
            "expression;Minerve;CloseEyes,NoSmile",
            "s;Minerve;I don't really like showing my true form... ugh...",
            "expression;Minerve;OpenEyes,Smile",
            "s;Minerve;But a lady gotta do what a lady gotta do! Hehehe~",
            "multi_remove_portrait;Minerve;Chosen",
            "wait;300",
            "interact_unit;Minerve_true;Chosen;hit1;;force_animation",
            "wait;300",
            "add_portrait;Chosen;Right",
            "s;Chosen;Hey! You're breaking the rules here!",
            "add_portrait;Minerve;Left",
            "s;Minerve;It's all fair in love and war~|But I'm sorry to say, my love is reserved for someone else...|For you there's plenty of war~",
            "multi_remove_portrait;Chosen;Minerve",
            "wait;1000",
            "music;Reinforcements",
            "center_cursor;1,8",
            "add_unit;Simonyoung;0,8",
            "wait;500",
            "move_unit;Simonyoung;6,8;normal;stack",
            "move_unit;Minerve_true;2,8;warp;closest",
            "move_unit;Simonyoung;8,8",
            "wait;1000",
            "multi_add_portrait;Minerve;Left;Chosen;MidRight;Simonyoung;FarRight",
            "s;Minerve;My knight in shiny armor is here, yayy!|Too bad I'm not the one to be rescued~",
            "s;Chosen;She's all weird and powerful now, be careful!",
            "expression;Simonyoung;Smile",
            "s;Simonyoung;Coming from you? Heh. This must be an extraordinary case.",
            "s;Chosen;Ah shut up already!",
            "s;Minerve;If this is no longer a private date...",
            "multi_remove_portrait;Minerve;Chosen;Simonyoung",
            "wait;500",
            "spawn_group;enemy;west;enemy;normal;no_follow",
            "spawn_group;enemy2;east;enemy2;normal;closest;no_follow",
            "wait;1000",
            "add_portrait;Minerve;Left",
            "s;Minerve;Let me pull down the curtains for some privacy~",
            "remove_portrait;Minerve",
            "wait;500",
            "flicker_cursor;Minerve_true",
            "sound;GorgonMagic3",
            "map_anim;AOE_Rally;Minerve_true",
            "wait;300",
            "add_weather;purple",
            "enable_fog_of_war;t",
            "set_fog_of_war;thracia;3;3",
            "wait;2000",
            "center_cursor;Chosen",
            "wait;1000",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "s;Chosen;What is happening?! Why I can't see shit?!",
            "s;Simonyoung;This seems to be a powerful illusion magic.|This should be cancelled once we defeat her.",
            "s;Chosen;Fuck... and how am I gonna find her?!",
            "s;Simonyoung;... therein lies the purpose of the spell.",
            "s;Chosen;True form or not, I'm gonna get this slut!!",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;200",
            "move_unit;Chosen;3,8;normal",
            "move_unit;Minerve_true;21,13;warp;closest;no_follow",
            "wait;400",
            "add_portrait;Chosen;Left;mirror",
            "s;Chosen;Damn! And she's gonna keep teleporting?! Not fair!",
            "add_portrait;Minerve_true;FarRight;right",
            "s;Minerve_true;Miss Riala kindly asked me hold you off, so I'm gonna take my time~",
            "wait;200",
            "multi_remove_portrait;Chosen;Minerve_true",
            "transition;close;1000",
            "wait;1000",
            "remove_unit;Simonyoung;immediate;fade",
            "transition;open;1000",
            "prep;t;Preparation"
        ],
        "nid": "P12 Intro"
    },
    {
        "name": "PROL Mira lvlup skills and promote",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Mira' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Mira').klass == 'Journeyman'",
            "if;game.get_unit('Mira').level == 3",
            "    give_skill;Mira;Laser_Focus;;persistent",
            "elif;game.get_unit('Mira').level == 5",
            "    give_skill;Mira;Revenge_Driven;;persistent",
            "elif;game.get_unit('Mira').level == 7",
            "    give_skill;Mira;Premature_Advance;;persistent",
            "elif;game.get_unit('Mira').level == 10",
            "    if;u('Mira').klass == 'Journeyman'",
            "        promote;Mira",
            "    else",
            "    end",
            "end",
            "end"
        ],
        "nid": "Global PROL Mira lvlup skills and promote"
    },
    {
        "name": "PROL Simonyoung lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Simonyoung' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_unit('Simonyoung').level == 8",
            "    give_skill;Simonyoung;Rebuke;;persistent",
            "elif;game.get_unit('Simonyoung').level == 9",
            "    give_skill;Simonyoung;Shelter;;persistent",
            "end"
        ],
        "nid": "Global PROL Simonyoung lvlup skills"
    },
    {
        "name": "PROL Antarion lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Antarion' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Antarion').klass == 'Blademaster'",
            "if;game.get_unit('Antarion').level == 6",
            "    give_skill;Antarion;Drink_Potion;;persistent",
            "elif;game.get_unit('Antarion').level == 8",
            "    give_skill;Antarion;Critical_Boost;;persistent",
            "elif;game.get_unit('Antarion').level == 10",
            "    give_skill;Antarion;Survival_First;;persistent",
            "end",
            "end"
        ],
        "nid": "Global PROL Antarion lvlup skills"
    },
    {
        "name": "PROL Safado lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Safado' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Safado').klass == 'Thief'",
            "if;game.get_unit('Safado').level == 6",
            "    give_skill;Safado;Nothing_Personal_skill;;persistent",
            "elif;game.get_unit('Safado').level == 7",
            "    give_skill;Safado;Stalling_Stance;;persistent",
            "elif;game.get_unit('Safado').level == 8",
            "    give_skill;Safado;Chameleon_Stance;;persistent",
            "elif;game.get_unit('Safado').level == 9",
            "    give_skill;Safado;Social_Distancing_skill;;persistent",
            "end",
            "end"
        ],
        "nid": "Global PROL Safado lvlup skills"
    },
    {
        "name": "Rosa Phoenix Trigger",
        "trigger": "combat_end",
        "level_nid": null,
        "condition": "(unit.nid == 'Rosa' or unit2.nid == 'Rosa') and u('Rosa').get_hp() == 1 and game.current_mode.permadeath == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "center_cursor;Rosa",
            "flicker_cursor;Rosa",
            "music;RosaPhoenix;1000",
            "wait;500",
            "add_portrait;Rosa;Left;;Smile,CloseEyes",
            "wait;2000",
            "s;Rosa;It has... finally come.;;;;3",
            "wait;1000",
            "s;Rosa;I will join you soon...|But first...;;;;3",
            "s;Rosa;...this world that has taken you from me...;;;;3",
            "remove_portrait;Rosa;no_block",
            "add_portrait;RosaPhoenix;Left",
            "s;RosaPhoenix;<wave><red>LET IT BURN TO ASHES!</></>",
            "remove_portrait;RosaPhoenix",
            "remove_skill;Rosa;Tarrying_Pyre;no_banner;",
            "give_skill;Rosa;Tarrying_Pyre_buff;;no_banner;persistent",
            "set_current_hp;Rosa;{eval: u('Rosa').get_max_hp()}",
            "add_weather;fire",
            "change_team;Rosa;enemy2",
            "wait;1000",
            "change_portrait;Rosa;RosaPhoenix",
            "game_var;rosaphoenix;1",
            "if;u('Rosa').lead_unit",
            "    level_var;rosatraveler;u('Rosa').traveler",
            "    separate;Rosa",
            "    add_unit;{v:rosatraveler};Rosa;fade;closest",
            "    wait;500",
            "else",
            "end"
        ],
        "nid": "Global Rosa Phoenix Trigger"
    },
    {
        "name": "PROL Death Rosa casual",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Rosa' and game.current_mode.permadeath == False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Rosa;FarRight",
            "speak;Rosa;Oops. Hihi. I overextended, my apologies.",
            "expression;Rosa;CloseEyes",
            "remove_portrait;Rosa",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Rosa casual"
    },
    {
        "name": "PROL Death Rosa Phoenix end",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Rosa' and game.current_mode.permadeath == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear;1000",
            "wait;1000",
            "remove_weather;fire",
            "wait;1000",
            "change_music;enemy2_phase;Boss2",
            "music_fade_back;1000"
        ],
        "nid": "Global PROL Death Rosa Phoenix end"
    },
    {
        "name": "PROL Rosa lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Rosa' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Rosa').klass == 'Mage'",
            "if;game.get_unit('Rosa').level == 8",
            "    give_skill;Rosa;Hot_Business;;persistent",
            "elif;game.get_unit('Rosa').level == 9",
            "    give_skill;Rosa;Cozy_Warmth;;persistent",
            "elif;game.get_unit('Rosa').level == 10",
            "    give_skill;Rosa;Fan_the_Flames;;persistent",
            "end",
            "end"
        ],
        "nid": "Global PROL Rosa lvlup skills"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P7",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "show_layer;details",
            "chapter_title",
            "change_background;BlackBackground",
            "transition;close",
            "center_cursor;9,7",
            "#if;game.mode == 'Hard' or game.mode == 'Ironman'",
            "#    add_group;ogre;ogre;immediate;closest",
            "#else",
            "#end",
            "change_background",
            "transition;open",
            "multi_add_portrait;Geoff;Left;Minerve;Right",
            "music;Tension",
            "s;Geoff;Don't take me for a fool!",
            "s;Minerve;Oh, come on~|Just some orgies here and there won't hurt anyone!|Unless some of your soldiers were willing to participate, of course~",
            "s;Geoff;I wasn't born yesterday!|You have plenty of other spaces to do whatever the fuck you want.|Your excuses are appalling, frankly insulting to me!",
            "s;Minerve;You don't get ittt!|Some of us have an exhibition fetish, we <wave>need</> to be near the border~",
            "s;Geoff;Over my dead body. Try your dirty tactics and we will open fire.",
            "wait;400",
            "s;Minerve;I will take you up on that offer.",
            "s;Geoff;...?;;;thought_bubble",
            "s;Minerve;This will happen over your dead body. You asked for it~",
            "multi_remove_portrait;Minerve;Geoff",
            "wait;500",
            "remove_unit;Minerve;warp;fade",
            "center_cursor;8,1",
            "wait;500",
            "center_cursor;Geoff",
            "wait;400",
            "move_unit;Geoff;8,16;normal;closest",
            "wait;400",
            "add_unit;Chosen;9,17;fade;closest;south",
            "wait;300",
            "move_unit;Chosen;9,16;normal;closest",
            "wait;500",
            "multi_add_portrait;Geoff;Left;Chosen;MidRight;Simonyoung;FarRight",
            "s;Chosen;What's happening here?!",
            "s;Geoff;Leave! We're about to enter a battle here!",
            "s;Chosen;Then this is just the place for us to be!",
            "s;Geoff;Hmm? Oh. Simon is here.",
            "s;Simonyoung;Geoff.",
            "expression;Simonyoung;CloseEyes",
            "s;Geoff;So you are on your little quest again, huh?",
            "expression;Simonyoung;OpenEyes",
            "s;Simonyoung;We are doing our utmost to end the war.",
            "s;Geoff;Just try not to end my formation along the way.",
            "s;Chosen;Look man, we're just-{no_wait}",
            "s;Geoff;Just a moment!",
            "multi_remove_portrait;Chosen;Geoff;Simonyoung",
            "wait;1000",
            "center_cursor;127",
            "wait;300",
            "move_unit;127;8,10",
            "wait;100",
            "center_cursor;Geoff",
            "wait;200",
            "interact_unit;Geoff;127;hit1,end;Long_Ballista;force_animation",
            "wait;1000",
            "center_cursor;Geoff",
            "wait;1000",
            "multi_add_portrait;Geoff;Left;Chosen;MidRight;Simonyoung;FarRight",
            "s;Chosen;Cool...",
            "s;Geoff;We'll talk later!",
            "transition;close;1000",
            "add_tag;Geoff;ZeroMove",
            "prep;t;Preparation"
        ],
        "nid": "P7 Intro"
    },
    {
        "name": "Wall1 break",
        "trigger": "unit_death",
        "level_nid": "P7",
        "condition": "unit.nid == 'wall1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "center_cursor;1,12",
            "wait;300",
            "map_anim;Snag;1,12",
            "sound;VillageDestroyed",
            "show_layer;wall1",
            "remove_region;wall1"
        ],
        "nid": "P7 Wall1 break"
    },
    {
        "name": "Wall2 break",
        "trigger": "unit_death",
        "level_nid": "P7",
        "condition": "unit.nid == 'wall2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "center_cursor;13,12",
            "wait;300",
            "map_anim;Snag;13,12",
            "sound;VillageDestroyed",
            "show_layer;wall2",
            "remove_region;wall2"
        ],
        "nid": "P7 Wall2 break"
    },
    {
        "name": "Wall3 break",
        "trigger": "unit_death",
        "level_nid": "P7",
        "condition": "unit.nid == 'wall3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "center_cursor;16,12",
            "wait;300",
            "map_anim;Snag;16,12",
            "sound;VillageDestroyed",
            "show_layer;wall3",
            "remove_region;wall3"
        ],
        "nid": "P7 Wall3 break"
    },
    {
        "name": "wave2",
        "trigger": "turn_change",
        "level_nid": "P7",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_ai;108;AttackGeoff",
            "change_ai;114;Pursue",
            "change_ai;115;Pursue"
        ],
        "nid": "P7 wave2"
    },
    {
        "name": "wave3",
        "trigger": "turn_change",
        "level_nid": "P7",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_ai;109;AttackGeoff",
            "change_ai;116;Pursue",
            "change_ai;117;Pursue"
        ],
        "nid": "P7 wave3"
    },
    {
        "name": "wave4",
        "trigger": "turn_change",
        "level_nid": "P7",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_ai;113;AttackGeoff",
            "change_ai;118;Pursue",
            "change_ai;119;Pursue"
        ],
        "nid": "P7 wave4"
    },
    {
        "name": "Enemies dead VICTORY",
        "trigger": "combat_end",
        "level_nid": "P7",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P7 Enemies dead VICTORY"
    },
    {
        "name": "Outro e IK cutscene",
        "trigger": "level_end",
        "level_nid": "P7",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "remove_tag;Geoff;ZeroMove",
            "music_clear",
            "wait;500",
            "music;Happy1",
            "change_background;CastleSepia",
            "transition;open",
            "multi_add_portrait;Chosen;Left;Geoff;Right",
            "wait;200",
            "s;Chosen;You're a real fighter, and we're in need of an acher!",
            "s;Geoff;So? I have nothing to do with it.",
            "s;Chosen;You're dense, huh? Join us!",
            "s;Geoff;I understood you perfectly. You are the one out of your mind.|You are free to do your expedition, but don't disrupt the work of those in your path.",
            "s;Chosen;That's...{c:wait;300} you're not gonna need to watch the borders anymore.|Soon there will be no Incubus King territory anymore!",
            "s;Geoff;You are not the only one who dreamt this.|While you and everyone else daydreams, the people need someone to protect them.",
            "s;Chosen;Ok man, I get it already!|Keep up holed up in here while I save your ass!",
            "remove_portrait;Chosen;;left",
            "wait;1000",
            "transition;close;1000",
            "#IK CUTSCENE START",
            "change_background",
            "change_tilemap;ik throne;reload",
            "remove_all_units",
            "",
            "load_unit;Incubus_King;enemy",
            "add_unit;Incubus_King;10,7;immediate",
            "load_unit;Iris;enemy;None",
            "add_unit;Iris;10,10;immediate",
            "make_generic;suc1;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc1;6,12;immediate",
            "make_generic;suc2;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc2;14,13;immediate",
            "make_generic;suc3;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc3;15,13;immediate",
            "make_generic;elite1;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite1;9,13;immediate",
            "make_generic;elite2;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite2;11,13;immediate",
            "center_cursor;10,18",
            "wait;3000",
            "music;Tension2",
            "transition;open;1000",
            "wait;1000",
            "center_cursor;10,10;1000",
            "wait;1000",
            "flicker_cursor;Incubus_King",
            "wait;2000",
            "multi_add_portrait;Incubus King;Left;Iris;Right",
            "bop_portrait;Incubus King",
            "s;Incubus King;WHY HAVEN'T YOU DONE IT YET?!",
            "s;Iris;Master, it is extremely difficult to eradicate all mosquitoes.",
            "bop_portrait;Incubus King",
            "s;Incubus King;I DON'T CARE WHAT IT TAKES! NO ONE SHOULD BE SUCKED OTHER THAN ME!",
            "s;Iris;Those are mere insects, master.{c:wait;300} Not worthy of your attention.",
            "s;Incubus King;{c:bop_portrait;Incubus King}NO {c:bop_portrait;Incubus King}NO {c:bop_portrait;Incubus King}NO {c:bop_portrait;Incubus King}NO!{c:wait;500} MY KINGDOM MY RULES!",
            "s;Iris;Master, your great kingdom is too vast, while they are too small, agile and numerous...",
            "expression;Incubus King;CloseEyes",
            "wait;2000",
            "expression;Incubus King;OpenEyes",
            "s;Incubus King;So we should lure them all to one place.",
            "s;Iris;...?;no_talk",
            "s;Incubus King;Since they like blood so much, then we just make a giant pool of blood!",
            "move_portrait;Iris;FarRight",
            "s;Iris;...;no_talk",
            "expression;Incubus King;CloseEyes",
            "s;Incubus King;Let's see...|{c:expression;Incubus King;OpenEyes}<red>Kill one thousand succubi and extract their blood.</>{c:wait;500} That should do it!",
            "move_portrait;Iris;MidRight",
            "s;Iris;Master...!{c:wait;400} This is...",
            "bop_portrait;Incubus King",
            "s;Incubus King;Great plan, I know!{c:wait;300} My genius is unmatched!",
            "expression;Iris;CloseEyes",
            "wait;1000",
            "expression;Iris;OpenEyes",
            "s;Iris;Master, what if you just use your cum instead?",
            "s;Incubus King;Huh?",
            "bop_portrait;Iris",
            "s;Iris;We could make a giant pool with your cum!{c:wait;400} Nevermind the mosquitoes!|Make it a community pool with your cum, and your own statue in the middle of it!",
            "bop_portrait;Incubus King",
            "s;Incubus King;Iris!{c:wait;300} You're a genius too!{c:wait;300} What a wonderful idea.|And then, my statue should have me grabbing my dick and spilling cum!{c:wait;300} And also...",
            "expression;Iris;CloseEyes",
            "s;Iris;...whew.;no_talk",
            "transition;close;1000"
        ],
        "nid": "P7 Outro e IK cutscene"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P7",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P7",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P6;P7",
            "wait;1000"
        ],
        "nid": "P7 Overworld start"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "P8",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "P8 Outro"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P10",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P10",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P9;P10",
            "wait;1000"
        ],
        "nid": "P10 Overworld start"
    },
    {
        "name": "PROL Death Safado",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Safado'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Safado;FarRight;normal;CloseEyes",
            "if;game.current_mode.permadeath",
            "    speak;Safado;I have to... at least... say something memorable... before I...;;;thought_bubble",
            "else",
            "    s;Safado;Ahh goddamnit...{c:wait;400} This is tougher than I can handle, someone get me out of here!!|I should just pretend I'm dead. Yeah, that works.|Should I fall on my back? But then my breathing will make it obvious.|If I fall faceplant on the ground then I can seriously injure myself.|Maybe I actually do it and get a cool scar? No, that's a stupid thought!|Ok, what if I lie on the side and...;;;thought_bubble",
            "end",
            "remove_portrait;Safado",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Safado"
    },
    {
        "name": "Minerve rout",
        "trigger": "unit_death",
        "level_nid": "P9",
        "condition": "unit.nid == 'Minerve'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Minerve;FarRight;normal;CloseEyes",
            "speak;Minerve;Ouchie~",
            "remove_portrait;Minerve",
            "remove_unit;Minerve;warp;fade",
            "wait;1000",
            "music_fade_back"
        ],
        "nid": "P9 Minerve rout"
    },
    {
        "name": "Geoff dies game over",
        "trigger": "unit_death",
        "level_nid": "P7",
        "condition": "unit.nid == 'Geoff'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "if;game.current_mode.nid == 'Casual'",
            "    activate_turnwheel",
            "else",
            "    lose_game",
            "end",
            "lose_game"
        ],
        "nid": "P7 Geoff dies game over"
    },
    {
        "name": "Milena recruit - Cassian",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Cassian' and unit2.nid == 'Milena'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Reinforcements",
            "multi_add_portrait;Cassian;Left;Milena;Right",
            "s;Milena;Ah... So we have to fight at last...",
            "s;Cassian;Huh? Well, we do...|Actually, we don't! Who decided that anyway?",
            "s;Milena;Our bosses...?",
            "s;Cassian;Ah. You have a point there! That kinda sucks, right?",
            "s;Milena;Tell me about it!|Say, before we kill each other... are you a traveler?",
            "s;Cassian;Hmmm I think so!|I visited some countries with my sister before.|Well, not the whole continent.|Some places are not receptive at all, hahaha!|Well, not to make this an indirect offense...|Wait, you ARE trying to kill us, so it is the worse one yet!",
            "bop_portrait;Milena",
            "s;Milena;Aaaah how I wish I could partake in those journeys as well!|If you feel persecuted here, imagine how it must be for me anywhere else!",
            "expression;Cassian;CloseEyes,NoSmile",
            "s;Cassian;That's...",
            "expression;Cassian;OpenEyes",
            "s;Milena;I heard so many wonderful stories!|The great dunes of Aram, swallowing the sun itself!|The ancient trees of Gheldaron, as old as time itself!|The complex ruins of Zirantia, guarding many secrets for explorers to discover!",
            "s;Cassian;Wow, you actually know more about this than me!",
            "s;Milena;Don't you feel the sense of wonder? There's a magnificent world out there!|But... I'm trapped here, on this ruined wasteland.|As long as he is waging war with everyone...",
            "s;Cassian;So we just have to get rid of the bad guy, right?",
            "s;Milena;If only...",
            "s;Cassian;That's no problem! We're on a mission to solve this right now!",
            "s;Milena;Truly? I hope you succeed!",
            "s;Cassian;Why don't you join us? You are fun and our goals align!",
            "s;Milena;Umm... do you really mean it?",
            "s;Cassian;Of course!",
            "s;Milena;And have you talked to your teammates about it?",
            "s;Cassian;Uhh... Nah, but we figure this out together later!",
            "bop_portrait;Milena",
            "s;Milena;Oh, okay! This is the best day ever!!",
            "multi_remove_portrait;Cassian;Milena",
            "change_team;Milena;player",
            "sound;Level Up",
            "alert;Milena has joined your party!",
            "wait;2000",
            "remove_talk;Mira;Milena",
            "remove_talk;Cassian;Milena"
        ],
        "nid": "P9 Milena recruit - Cassian"
    },
    {
        "name": "Minerve dance",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "reset;{target}"
        ],
        "nid": "Global Minerve dance"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P10",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Minerve_2;BossMiracle_1;;no_banner",
            "end",
            "",
            "change_background;BlackBackground",
            "chapter_title",
            "transition;close",
            "center_cursor;11,18",
            "change_background",
            "transition;open;1000",
            "add_unit;Chosen;12,18",
            "move_unit;Chosen;12,17",
            "add_portrait;Chosen;Left",
            "wait;1000",
            "s;Chosen;So this is the Incubus King's realm, huh?",
            "center_cursor;8,5",
            "wait;1000",
            "add_unit;Minerve_2;7,17;immediate;closest;fade",
            "center_cursor;Chosen",
            "wait;300",
            "s;Chosen;It's a pile of shit!",
            "s;???;It wasn't... always like this, y'know!?",
            "move_portrait;Chosen;Right",
            "mirror_portrait;Chosen",
            "center_cursor;Minerve_2",
            "music;Tension",
            "add_portrait;Minerve;Left",
            "s;Chosen;You again! You piss me off, go find someone else to screw!",
            "s;Minerve;I'd love to~|But right now I'm at work~|Speaking of which...",
            "multi_remove_portrait;Chosen;Minerve",
            "wait;300",
            "move_unit;Minerve_2;6,3;warp;closest",
            "wait;500",
            "center_cursor;Minerve_2",
            "wait;500",
            "add_portrait;Minerve;Left",
            "s;Minerve;Come on out, girls~|Show them how tough we are for surviving here!",
            "remove_portrait;Minerve",
            "wait;300",
            "spawn_group;enemy;north;enemy;normal;closest",
            "wait;1000",
            "center_cursor;Chosen",
            "transition;close;1000",
            "transition;open;1000",
            "prep;t;Preparation"
        ],
        "nid": "P10 Intro"
    },
    {
        "name": "Minerve rout",
        "trigger": "unit_death",
        "level_nid": "P10",
        "condition": "unit.nid == 'Minerve_2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Minerve;FarRight;normal;CloseEyes",
            "speak;Minerve;Not againn~",
            "remove_portrait;Minerve",
            "remove_unit;Minerve_2;warp;fade",
            "wait;1000",
            "music_fade_back"
        ],
        "nid": "P10 Minerve rout"
    },
    {
        "name": "Enemy reinforcements orc throwers 1",
        "trigger": "turn_change",
        "level_nid": "P10",
        "condition": "game.turncount == 3 and game.check_alive('Minerve_2') == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;500",
            "flicker_cursor;Minerve_2",
            "wait;1000",
            "add_portrait;Minerve;Left",
            "s;Minerve;Humm...{c:wait;400} in hindsight, this is boriing~|I'll call some friends!",
            "wait;200",
            "remove_unit;Minerve_2;warp",
            "wait;1000"
        ],
        "nid": "P10 Enemy reinforcements orc throwers 1"
    },
    {
        "name": "Enemy reinforcements orc throwers 2",
        "trigger": "turn_change",
        "level_nid": "P10",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;500",
            "center_cursor;6,3",
            "wait;300",
            "add_unit;Minerve_2;6,3;warp;closest;fade",
            "wait;500",
            "add_portrait;Minerve;Left",
            "s;Minerve;Heeey, I'm baaack~|And here are my boys!",
            "wait;200",
            "add_group;orc;orc;warp;push",
            "wait;1000",
            "change_ai;Minerve;Pursue"
        ],
        "nid": "P10 Enemy reinforcements orc throwers 2"
    },
    {
        "name": "Turnwheel enable e Tutorial: Turnwheel",
        "trigger": "turn_change",
        "level_nid": "P1",
        "condition": "game.turncount == 3 and game.current_mode.nid != 'Ironman'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;As you progress on your battles, you may find yourself regretful of past choices.|To deal with this, I have bestowed upon you the gift of the <red><wave amplitude=1.5>Turnwheel</></>.|To use it, select a tile without any units, such as you do to bring up extra options.|By selecting Turnwheel, <red>you can revert the state of the battle to a previous point</>.|Be sure to use this to experiment and optimize your strategies!;bottom;;;;blue;;;;;None",
            "wait;200",
            "end"
        ],
        "nid": "P1 Turnwheel enable e Tutorial: Turnwheel"
    },
    {
        "name": "PROL Death Duro",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Duro'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Duro;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    speak;Duro;That won't...{c:wait;300} fare well...{c:wait;300} with my wife...{c:wait;300} at all...{c:wait;300} ha...{c:wait;500}ha...",
            "else",
            "    s;Duro;Is someone...{c:wait;300} here...?{c:wait;300} I...{c:wait;1000}{c:expression;Duro;OpenEyes,Smile} I'm about to let out a huge fart!{c:bop_portrait;Duro} HAHAHAHA!",
            "end",
            "remove_portrait;Duro",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Duro"
    },
    {
        "name": "PROL Death Monica",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Monica'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Monica;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    speak;Monica;{tgm}.{c:wait;2000}.{c:wait;2000}.{c:wait;2000} {c:expression;Monica;OpenEyes} {tgm}FUCK!",
            "else",
            "    s;Monica;.{c:wait;300}.{c:wait;300}.{c:wait;300};;;;no_sound;no_talk",
            "end",
            "remove_portrait;Monica",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Monica"
    },
    {
        "name": "PROL Death Antarion",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Antarion'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Antarion;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    speak;Antarion;This...{c:wait;400} {c:expression;Antarion;OpenEyes}You know what?{c:wait;300} I'm out of here!{c:wait;300} This stupid quest is not worth more than my life!",
            "remove_unit;Antarion;swoosh;fade",
            "else",
            "    s;Antarion;This...{c:wait;400} {c:expression;Antarion;OpenEyes}is unacceptable. The mighty Antarion will have his glorious comeback!",
            "end",
            "remove_portrait;Antarion",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Antarion"
    },
    {
        "name": "Test difficulty",
        "trigger": "level_start",
        "level_nid": "DEBUG",
        "condition": "game.current_mode.nid != 'Ironman'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "DEBUG Test difficulty"
    },
    {
        "name": "PROL Death Cassian",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Cassian'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Cassian;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    if;game.check_alive('Lucia') == True",
            "        speak;Cassian;Sis...{c:wait;400} sis...{c:wait;400} HELP ME...!",
            "    else",
            "        s;Cassian;I'm...{c:wait;300} joining you...{c:wait;300} soon...",
            "    end",
            "else",
            "    expression;Cassian;Smile,OpenEyes",
            "    s;Cassian;Ahhh, you got me there! Congrats!",
            "end",
            "remove_portrait;Cassian",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Cassian"
    },
    {
        "name": "PROL Death Lucia",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Lucia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Lucia;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    if;game.check_alive('Cassian') == True",
            "        speak;Lucia;No...{c:wait;300} No!!{c:wait;300} What will he...",
            "    else",
            "        s;Lucia;It's better...{c:wait;300} this way...",
            "    end",
            "else",
            "    expression;Lucia;Smile,OpenEyes",
            "    s;Lucia;So you bested me.{c:wait;300} That's alright.{c:wait;300} I'm prepared for next time!",
            "end",
            "remove_portrait;Lucia",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Lucia"
    },
    {
        "name": "PROL Death Milena",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Milena'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Milena;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    s;Milena;But...{c:wait;300} I never...{c:wait;300} got to...",
            "else",
            "    expression;Milena;Smile,OpenEyes",
            "    s;Milena;You rascal!{c:wait;300}{c:bop_portrait;Milena} I have much yet to do, so I'll not fall so soon!",
            "end",
            "remove_portrait;Milena",
            "music_fade_back"
        ],
        "nid": "Global PROL Death Milena"
    },
    {
        "name": "Casa visit",
        "trigger": "Visit",
        "level_nid": "P12",
        "condition": "region.nid == 'casa'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;Woman1;Left;{unit};Right",
            "speak;Woman1;Please... don't tell anyone about this...|But I hope you succeed.|Have this to help you on your journey...",
            "transition;Close",
            "change_background",
            "transition;Open",
            "has_traded;{unit}",
            "give_item;{unit};Sylvan_Draught"
        ],
        "nid": "P12 Casa visit"
    },
    {
        "name": "Chest N",
        "trigger": "Chest",
        "level_nid": "P12",
        "condition": "region.nid == 'ChestN'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chestN",
            "give_item;{unit};Master_Seal",
            "remove_region;chestN"
        ],
        "nid": "P12 Chest N"
    },
    {
        "name": "Chest L",
        "trigger": "Chest",
        "level_nid": "P12",
        "condition": "region.nid == 'ChestL'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chestL",
            "give_item;{unit};Master_Seal",
            "remove_region;chestL"
        ],
        "nid": "P12 Chest L"
    },
    {
        "name": "Chest O",
        "trigger": "Chest",
        "level_nid": "P12",
        "condition": "region.nid == 'ChestO'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chestO",
            "give_item;{unit};Master_Seal",
            "remove_region;chestO"
        ],
        "nid": "P12 Chest O"
    },
    {
        "name": "Chest S",
        "trigger": "Chest",
        "level_nid": "P12",
        "condition": "region.nid == 'ChestS'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chestS",
            "give_item;{unit};Master_Seal",
            "remove_region;chestS"
        ],
        "nid": "P12 Chest S"
    },
    {
        "name": "Minerve \"dead\"",
        "trigger": "unit_death",
        "level_nid": "P12",
        "condition": "unit.nid == 'Minerve_true'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "enable_fog_of_war;f",
            "remove_weather;purple",
            "wait;1000",
            "center_cursor;Minerve_true",
            "add_portrait;Minerve_true;FarRight;;NoSmile,CloseEyes",
            "s;Minerve_true;I{tgm}{c:wait;400}.{c:wait;400}.{c:wait;400}.",
            "add_unit;Rialayoung;Minerve_true;warp;closest;fade",
            "map_anim;MapSurprise;Minerve_true",
            "add_portrait;Rialayoung;FarLeft",
            "move_portrait;Rialayoung;FarRight",
            "multi_remove_portrait;Rialayoung;Minerve",
            "remove_unit;Rialayoung;warp;fade",
            "remove_unit;Minerve_true;warp;fade",
            "wait;2000",
            "win_game"
        ],
        "nid": "P12 Minerve \"dead\""
    },
    {
        "name": "Succubus Mana",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 6,
        "_source": [
            "#pyev1",
            "for unit in game.get_all_units():",
            "    if 'Succubus' in unit.tags and not has_skill (unit, 'Suc_BP'):",
            "        $set_current_mana unit.nid 0",
            ""
        ],
        "nid": "Global Succubus Mana"
    },
    {
        "name": "Outro e IK cutscene",
        "trigger": "level_end",
        "level_nid": "P5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close;1000",
            "music_clear",
            "wait;1000",
            "change_background;CastleSepia",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "music;Happy1",
            "transition;open;1000",
            "s;Chosen;See? Everything worked out in the end!",
            "s;Simonyoung;... I suppose you are gaining the much needed experience.",
            "s;Chosen;No sidequest is wasted! It's all for the sake of my journey!",
            "transition;close;1000",
            "#IK CUTSCENE START",
            "change_background",
            "change_tilemap;ik throne;reload",
            "remove_all_units",
            "load_unit;Incubus_King;enemy",
            "add_unit;Incubus_King;10,7;immediate",
            "load_unit;Iris;enemy;None",
            "add_unit;Iris;10,10;immediate",
            "make_generic;suc1;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc1;6,12;immediate",
            "make_generic;suc2;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc2;14,13;immediate",
            "make_generic;suc3;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc3;15,13;immediate",
            "make_generic;elite1;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite1;9,13;immediate",
            "make_generic;elite2;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite2;11,13;immediate",
            "center_cursor;10,18",
            "wait;3000",
            "music;Tension2",
            "transition;open;1000",
            "wait;1000",
            "center_cursor;10,10;1000",
            "wait;1000",
            "flicker_cursor;Incubus_King",
            "wait;2000",
            "multi_add_portrait;Incubus King;Left;Iris;Right",
            "bop_portrait;Incubus King",
            "s;Incubus King;IRIS! HELP ME!",
            "s;Iris;What is the matter, master?!",
            "s;Incubus King;I CAN'T CHOOSE!",
            "s;Iris;Hm?",
            "s;Incubus King;What is a better theme for my jerkversary? Unicorns or lowered wagons?",
            "s;Iris;I believe... whatever makes you happier, master.",
            "s;Incubus King;Ugh... you're so incompetent! If I could choose then I wouldn't have called you!",
            "s;Iris;...my apologies.{c:wait;500} Then, I guess my pick wou-",
            "bop_portrait;Incubus King",
            "s;Incubus King;Aha!{c:wait;200} I realize it now!{c:wait;200} The theme should be \"all my past hairstyles\"!",
            "s;Iris;I'm sorry, master.{c:wait;200} Can you explain to me what this entails?",
            "s;Incubus King;Oh my god, that's obvious!|Participants are only allowed wearing a wig with any of my previous hairstyles.",
            "s;Iris;I have never seen you use another hairstyle, master.",
            "s;Incubus King;Of course not! Why would I?",
            "s;Iris;I...{c:wait;200} see.",
            "s;Incubus King;And the cake will also be made of hair!",
            "expression;Iris;CloseEyes",
            "s;Iris;With all due respect, master, there are some limits that shouldn't be crossed...",
            "transition;close;1000"
        ],
        "nid": "P5 Outro e IK cutscene"
    },
    {
        "name": "Gain Sx",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;500",
            "level_var;sxpurse;{eval: game.get_random(100, 500)}",
            "wait;300",
            "give_money;{v:sxpurse}",
            "wait;300"
        ],
        "nid": "Global Gain Sx"
    },
    {
        "name": "Rosa Phoenix alive check end chapter",
        "trigger": "level_end",
        "level_nid": null,
        "condition": "game.game_vars['rosaphoenix'] == 1 and game.check_alive('Rosa') == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "kill_unit;Rosa;immediate"
        ],
        "nid": "Global Rosa Phoenix alive check end chapter"
    },
    {
        "name": "Gain loot",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#pyev1",
            "item_pool=['Angelic_Robe','Energy_Ring','Secret_Book','Speedwing','Goddess_Icon','Dragonshield','Talisman'] #Fill in with whatever item NIDs you want",
            "r=random.randint(0,len(item_pool)-1) ",
            "$give_item unit.nid item_pool[r]"
        ],
        "nid": "Global Gain loot"
    },
    {
        "name": "Rout Victory beta",
        "trigger": null,
        "level_nid": "P12",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P12 Rout Victory beta"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "P12",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close;1000",
            "wait;1000"
        ],
        "nid": "P12 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P13",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Rialayoung;BossMiracle_1;;no_banner",
            "end",
            "",
            "change_background;BlackBackground",
            "show_layer;base_1",
            "show_layer;lake_1",
            "#add_weather;event_tile;11,16",
            "level_var;barrier;0",
            "level_var;true;0",
            "remove_skill;Rialayoung;Dance;no_banner",
            "chapter_title",
            "transition;close",
            "center_cursor;10,7",
            "wait;1000",
            "change_background;Hill",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "music;Prologue battles",
            "transition;open;1000",
            "s;Chosen;We're FINALLY here!",
            "s;Simonyoung;Our last stop before facing the Incubus King.",
            "s;Chosen;So what are we waiting for?!",
            "expression;Simonyoung;CloseEyes",
            "s;Simonyoung;We are sure to encounter heavy enemy resistance.|Most likely, Riala will not face us empty handed.",
            "expression;Simonyoung;OpenEyes",
            "s;Chosen;I don't care what they bring!|I'm {v:chosenname}, THE Chosen of Ivala!|{c:expression;Simonyoung;CloseEyes}And as soon as we kill that sucker, all his helpless bitches will be mine!",
            "expression;Simonyoung;OpenEyes",
            "s;Simonyoung;If you don't focus, we will be the helpless ones.",
            "    if;len(game.get_units_in_party()) > 1",
            "        s;Simonyoung;Is everyone ready?",
            "        remove_portrait;Chosen",
            "        if;game.check_alive('Mira')",
            "            add_portrait;Mira;Left",
            "            bop_portrait;Mira",
            "            s;Mira;I'm as ready as I could ever be!|The Incubus King...|Leave him to me!!",
            "            remove_portrait;Mira",
            "        else",
            "        end",
            "        if;game.check_alive('Duro')",
            "            add_portrait;Duro;Left",
            "            s;Duro;Oh no!{c:wait;300} I forgot my underwear at home.|Let's go back to grab it! HAHAHAHA!|I'm just kidding, son. Everyone, relax and kick those butts.",
            "            remove_portrait;Duro",
            "        else",
            "        end",
            "        if;game.check_alive('Monica') == True and u('Monica').team == 'player'",
            "            add_portrait;Monica;Left;;CloseEyes",
            "            wait;1000",
            "            expression;Monica;OpenEyes",
            "            wait;1000",
            "            expression;Monica;Smile",
            "            bop_portrait;Monica",
            "            wait;1000",
            "            remove_portrait;Monica",
            "        else",
            "        end",
            "        if;game.check_alive('Antarion')",
            "            add_portrait;Antarion;Left",
            "            s;Antarion;There is no state of \"ready\" or \"unready\" for the Mighty Antarion.|No, it is simply unconceivable that I should be varying in skill.|All those who have ever doubted me have perished by the tip of my blade.|In fact, I have many tales of...",
            "            remove_portrait;Antarion",
            "        else",
            "        end",
            "        if;game.check_alive('Cassian') == True and u('Cassian').team == 'player'",
            "            if;game.check_alive('Lucia')",
            "            add_portrait;Cassian;Left",
            "            s;Cassian;The battle? For sure!|Let's just go and hit them, man.|I wonder if we're gonna find other rare succubi races!",
            "            remove_portrait;Cassian",
            "            else",
            "            add_portrait;Cassian;Left;;NoSmile,CloseEyes",
            "            s;Cassian;I'm ready.",
            "            remove_portrait;Cassian",
            "            end",
            "        else",
            "        end",
            "        if;game.check_alive('Lucia') == True and u('Lucia').team == 'player'",
            "            if;game.check_alive('Cassian')",
            "            add_portrait;Lucia;Left",
            "            s;Lucia;Us? That's not who you should be worried about.|Have you seen how {v:chosenname} looks at all those bouncing tits?|I'm afraid he won't see the Incubus King coming.",
            "            remove_portrait;Lucia",
            "            else",
            "            add_portrait;Lucia;Left;;NoSmile,CloseEyes",
            "            s;Lucia;...;;;;no_talk;no_sound",
            "            remove_portrait;Lucia",
            "            end",
            "        else",
            "        end",
            "        if;game.check_alive('Safado') == True and u('Safado').team == 'player'",
            "            add_portrait;Safado;Left;;CloseEyes",
            "            s;Safado;Deep breaths.{c:wait;400} Deep breaths.{c:wait;500} Deep...{c:wait;1000} breaths...{c:wait;1000}|AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA I'M GONNA FUCKING DIE!!!!!;;;thought_bubble",
            "            expression;Safado;OpenEyes",
            "            s;Safado;Yes.{c:wait;500} I am ready.{c:wait;500} Are you?",
            "            remove_portrait;Safado",
            "        else",
            "        end",
            "        if;game.check_alive('Rosa') == True and u('Rosa').team == 'player'",
            "            add_portrait;Rosa;Left;;CloseEyes",
            "            wait;1000",
            "            expression;Rosa;OpenEyes",
            "            bop_portrait;Rosa",
            "            s;Rosa;Oh!{c:wait;300} Do forgive me, please.|I was taking in the scenery...{c:wait;300} the smell...|Don't you think it's gonna rain soon, sir Simon?|Oh, my apologies for thrailling off again, hihi.|Yes, I am absolutely ready.",
            "            remove_portrait;Rosa",
            "        else",
            "        end",
            "        if;game.check_alive('Milena') == True and u('Milena').team == 'player'",
            "            add_portrait;Milena;FarLeft",
            "            move_portrait;Milena;MidLeft",
            "            mirror_portrait;Milena",
            "            move_portrait;Milena;FarLeft",
            "            mirror_portrait;Milena",
            "            move_portrait;Milena;MidLeft",
            "            mirror_portrait;Milena",
            "            move_portrait;Milena;Left",
            "            bop_portrait;Milena",
            "            mirror_portrait;Milena",
            "            s;Milena;Ah?!{br}Yes, y-yes! I'm ready...!|Okay, freaking out a little...|But it's gonna be okay!{c:wait;1000} Right...?",
            "        else",
            "        end",
            "    end",
            "wait;1000",
            "transition;close;2000",
            "multi_remove_portrait;Chosen;Simonyoung",
            "wait;1000",
            "music_clear;1000",
            "change_background",
            "center_cursor;10,26",
            "transition;open;2000",
            "wait;2000",
            "music;Wind",
            "flicker_cursor;Rialayoung",
            "wait;500",
            "add_portrait;Rialayoung;Right",
            "s;Rialayoung;If I let you any closer... he will punish everyone.|{c:expression;Rialayoung;CloseEyes}Entire families...{c:wait;300} cities...{c:wait;300} species...|{c:expression;Rialayoung;OpenEyes}You need much more than this stupid kid!",
            "add_portrait;Chosen;Left",
            "s;Chosen;Hey! YOU're stupid!",
            "expression;Rialayoung;CloseEyes,Smile",
            "s;Rialayoung;Maybe I am.{c:wait;400} I might be the most foolish here.|{c:expression;Rialayoung;OpenEyes}{c:music;Boss1}But I will not give up on my own ambitions!",
            "multi_remove_portrait;Chosen;Rialayoung",
            "wait;300",
            "end_skip",
            "sound;DemonKingRoar",
            "screen_shake;1000;default",
            "sound;Barrier",
            "map_anim;AOE_Reinforce;Rialayoung",
            "wait;2000",
            "center_cursor;4,15",
            "wait;500",
            "sound;Aura1",
            "map_anim;BlueDot;4,15;permanent",
            "map_anim;AOE_Rally;4,15;permanent;overlay",
            "wait;1000",
            "center_cursor;18,20",
            "wait;500",
            "sound;Aura1",
            "map_anim;BlueDot;18,20;permanent",
            "map_anim;AOE_Rally;18,20;permanent;overlay",
            "wait;1000",
            "center_cursor;19,2",
            "wait;500",
            "sound;Aura1",
            "map_anim;BlueDot;19,2;permanent",
            "map_anim;AOE_Rally;19,2;permanent;overlay",
            "wait;500",
            "end_skip",
            "center_cursor;Rialayoung",
            "wait;200",
            "sound;Barrier",
            "map_anim;AOE_Reinforce;10,6;permanent;overlay",
            "show_layer;magic",
            "give_skill;Rialayoung;Riala_aura;;no_banner",
            "wait;2500",
            "center_cursor;Chosen",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "s;Chosen;What the hell was that all about?!",
            "s;Simonyoung;That is one of her ultimate spells.|It seems like we won't have the chance to approach the castle now.",
            "s;Chosen;Then what do we do, smartass?!",
            "s;Simonyoung;Powerful spells like those usually require a stream of mana to function.|We might find the supplies of mana in the nearby buildings.|Destroying them should nullify her barrier.",
            "s;Chosen;So that's all we need to penetrate a barrier? Now you're speaking my language!",
            "expression;Simonyoung;CloseEyes",
            "s;Chosen;Come on, it's time to show what I can do!",
            "multi_remove_portrait;Chosen;Simonyoung",
            "transition;close;2000",
            "wait;1000",
            "prep;t;Boss1"
        ],
        "nid": "P13 Intro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "8",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "show_layer;cliff",
            "show_layer;details",
            "center_cursor;19,0",
            "transition;open;",
            "center_cursor;2,0;",
            "add_unit;Simonyoung;2,0;fade;giveup;north",
            "music;FuckEmblem",
            "move_unit;Simonyoung;2,99;normal;giveup;800;silent;no_block;no_follow",
            "center_cursor;2,99;70000;no_block",
            "wait;2000",
            "credits;;The Last Emblem,Prologue;wait",
            "credits;;Made by,Decarabia;wait",
            "credits;;Additional help,Kujibiki;wait",
            "credits;;Based on,The Last Sovereign;wait",
            "credits;;Original game by,Sierra Lee;wait",
            "credits;;game engine,lex talionis;wait",
            "credits;;engine by,rainlash;wait",
            "credits;;Fire Emblem by,intelligent systems;wait",
            "wait;2000",
            "remove_unit;Simonyoung;fade;south",
            "wait;5000",
            "transition;close;5000",
            "music_clear;2000",
            "wait;2000",
            "set_next_chapter;DEBUG",
            "win_game"
        ],
        "nid": "8 Intro"
    },
    {
        "name": "Lethal_Lust heal AoE",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "interact_unit;Rialayoung;{v:rialatarget};hit1;Lethal_Lust_2"
        ],
        "nid": "Global Lethal_Lust heal AoE"
    },
    {
        "name": "Lusting_Gaze get target",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;rialatarget;{eval: unit2}"
        ],
        "nid": "Global Lusting_Gaze get target"
    },
    {
        "name": "Magic barriers destroyed",
        "trigger": "unit_death",
        "level_nid": "P13",
        "condition": "unit.nid == 'magic1' or unit.nid == 'magic2' or unit.nid == 'magic3_true'",
        "commands": [],
        "only_once": false,
        "priority": 25,
        "_source": [
            "remove_map_anim;BlueDot;{unit}",
            "remove_map_anim;AOE_Rally;{unit};overlay",
            "inc_level_var;barrier;1",
            "wait;1500",
            "if;{unit} == 'magic3_true'",
            "    remove_weather;event_tile;{unit}",
            "else",
            "end",
            "center_cursor;Rialayoung;1500",
            "if;{v:barrier} == 1",
            "    wait;500",
            "    sound;Final Hit",
            "    screen_shake;100",
            "    wait;500",
            "    add_portrait;Rialayoung;Right;;NoSmile,CloseEyes",
            "    s;Rialayoung;...;;no_talk;no_sound",
            "    remove_portrait;Rialayoung",
            "    end_skip",
            "    remove_region;ManaSip",
            "    sound;StageClear",
            "    alert;Debuff <red>[MANA SIP]</> was removed!",
            "elif;{v:barrier} == 2",
            "    wait;500",
            "    sound;Final Hit",
            "    screen_shake;100",
            "    wait;500",
            "    give_skill;Rialayoung;Silence",
            "    add_portrait;Rialayoung;Right;;NoSmile",
            "    s;Rialayoung;Tsc.",
            "    remove_portrait;Rialayoung",
            "    if;{v:true} == 0",
            "        add_weather;event_tile;11,16",
            "    else",
            "    end",
            "elif;{v:barrier} == 3",
            "    wait;500",
            "    sound;Final Hit",
            "    screen_shake;100",
            "    music;Halfway change loop",
            "    change_music;player_phase;Halfway change loop",
            "    change_music;enemy_phase;Halfway change loop",
            "    center_cursor;10,5",
            "    wait;1000",
            "    sound;DemonKingRoar",
            "    screen_shake;1000;default",
            "    sound;Critical Kill",
            "    end_skip",
            "    remove_map_anim;AOE_Reinforce;10,6;overlay",
            "    remove_skill;Rialayoung;Rialay_aura;no_banner",
            "    wait;2000",
            "    remove_item;Rialayoung;Lusting_Gaze",
            "    remove_item;Rialayoung;Lethal_Lust",
            "    hide_layer;magic",
            "    add_portrait;Rialayoung;Right;;NoSmile,CloseEyes",
            "    wait;1000",
            "    expression;Rialayoung;OpenEyes",
            "    s;Rialayoung;I hope you're able to carry this burden.",
            "    add_portrait;Chosen;Left;;Smile",
            "    s;Chosen;Ha! Come and face us now, coward!",
            "    s;Rialayoung;I'm not done just yet.",
            "    s;Chosen;Bluffs won't work on me.{c:wait;400} Onward!",
            "    multi_remove_portrait;Rialayoung;Chosen",
            "    wait;1000",
            "end"
        ],
        "nid": "P13 Magic barriers destroyed"
    },
    {
        "name": "Passing time",
        "trigger": "turn_change",
        "level_nid": "P13",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount == 3",
            "    add_weather;sunset",
            "elif;game.turncount == 5",
            "    add_weather;sunset",
            "elif;game.turncount == 6",
            "    add_weather;rain",
            "elif;game.turncount == 8",
            "    add_weather;night",
            "elif;game.turncount == 9",
            "    add_weather;night",
            "    remove_weather;rain",
            "elif;game.turncount == 10",
            "    add_weather;night",
            "elif;game.turncount == 12",
            "    remove_weather;night",
            "elif;game.turncount == 14",
            "    remove_weather;night",
            "    remove_weather;sunset",
            "elif;game.turncount == 16",
            "    remove_weather;night",
            "    remove_weather;sunset",
            "end"
        ],
        "nid": "P13 Passing time"
    },
    {
        "name": "Seize VICTORY",
        "trigger": "Seize",
        "level_nid": "P13",
        "condition": "region.nid == 'castle'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory2",
            "wait;1000",
            "win_game"
        ],
        "nid": "P13 Seize VICTORY"
    },
    {
        "name": "Basecamp unlocks",
        "trigger": "level_end",
        "level_nid": "P1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_lore;Incubus_King",
            "add_lore;Chosen",
            "add_lore;Simonyoung",
            "add_lore;Mira",
            "#game_var;_base_music;\"First Choice\"",
            "game_var;_base_bg_name;\"SeaofClouds\""
        ],
        "nid": "P1 Basecamp unlocks"
    },
    {
        "name": "PROL SUP Mira Monica",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Mira' and unit2.nid == 'Monica') or (unit.nid == 'Monica' and unit2.nid == 'Mira')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Monica;Inspiring_Ambition;;persistent",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Monica;Inspiring_Ambition_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Mira Monica"
    },
    {
        "name": "PROL SUP Lucia Duro",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Lucia' and unit2.nid == 'Duro') or (unit.nid == 'Duro' and unit2.nid == 'Lucia')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Duro;Remembrance;;persistent",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Duro;Remembrance_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Lucia Duro"
    },
    {
        "name": "PROL SUP Lucia Safado",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Lucia' and unit2.nid == 'Safado') or (unit.nid == 'Safado' and unit2.nid == 'Lucia')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Lucia;Make_Way;;persistent",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Lucia;Make_Way_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Lucia Safado"
    },
    {
        "name": "PROL SUP Cassian Rosa",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Cassian' and unit2.nid == 'Rosa') or (unit.nid == 'Rosa' and unit2.nid == 'Cassian')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Cassian;Burning_Advance;;persistent",
            "    give_skill;Rosa;Fast_Fire;;persistent",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Cassian;Burning_Advance_pair;;persistent;no_banner",
            "    give_skill;Rosa;Fast_Fire_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Cassian Rosa"
    },
    {
        "name": "PROL SUP Milena Monica",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Milena' and unit2.nid == 'Monica') or (unit.nid == 'Monica' and unit2.nid == 'Milena')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Milena;Post_Nut_Prayer;;persistent",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Milena;Post_Nut_Prayer_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Milena Monica"
    },
    {
        "name": "PROL SUP Milena Antarion",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Milena' and unit2.nid == 'Antarion') or (unit.nid == 'Antarion' and unit2.nid == 'Milena')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Antarion;Attention_Is_All_You_Need;;persistent",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Antarion;Attention_Is_All_You_Need_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Milena Antarion"
    },
    {
        "name": "PROL SUP Safado Antarion",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "(unit.nid == 'Safado' and unit2.nid == 'Antarion') or (unit.nid == 'Antarion' and unit2.nid == 'Safado')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Safado;Flashy_Escape;;persistent",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    give_skill;Safado;Flashy_Escape_pair;;persistent;no_banner",
            "else",
            "end"
        ],
        "nid": "Global PROL SUP Safado Antarion"
    },
    {
        "name": "PROL Base Convos",
        "trigger": "on_base_convo",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "Global PROL Base Convos"
    },
    {
        "name": "Riala defeated",
        "trigger": "unit_death",
        "level_nid": "P13",
        "condition": "unit.nid == 'Rialayoung'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear;1000",
            "wait;1000",
            "center_cursor;Rialayoung",
            "add_portrait;Rialayoung;Right;;NoSmile,CloseEyes",
            "s;Rialayoung;I...{c:wait;300} hope you have...{c:wait;300} enough this time...",
            "remove_portrait;Rialayoung",
            "wait;100",
            "remove_unit;Rialayoung;warp;fade",
            "music_fade_back;1000",
            "wait;500"
        ],
        "nid": "P13 Riala defeated"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P11",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;SucBoss;BossMiracle_1;;no_banner",
            "end",
            "",
            "change_background;BlackBackground",
            "show_layer;details",
            "show_layer;raiz",
            "show_layer;galhos",
            "chapter_title",
            "transition;close",
            "music;Succubus City;1000",
            "center_cursor;10,7",
            "change_background",
            "transition;open;1000",
            "wait;1000",
            "center_cursor;11,16",
            "wait;500",
            "add_unit;Chosen;11,17;fade;giveup;south",
            "wait;300",
            "add_portrait;Chosen;Left",
            "s;Chosen;Wow, what a shitty village!",
            "move_unit;Chosen;11,11",
            "wait;400",
            "s;Chosen;Wait, humans?!",
            "bop_portrait;Chosen",
            "s;Chosen;And... getting all intimate with succubi?! I want to join in too!|No! I mean... they're our enemies!",
            "flicker_cursor;10,9",
            "s;Villager;They have never done us any harm... We are alive because of them...",
            "flicker_cursor;11,9",
            "s;Succubus;That's right! They're so cute... we're protecting them from the others!",
            "expression;Chosen;CloseEyes",
            "s;Chosen;Hmm...;no_talk",
            "remove_portrait;Chosen",
            "center_cursor;10,17",
            "wait;300",
            "music;Tension2",
            "spawn_group;intro;south;intro;normal",
            "add_unit;SucBoss;10,15;warp;closest;fade",
            "wait;1000",
            "add_portrait;SucBoss;Right;;Smile",
            "s;SucBoss;Looks like I hit the jackpot.|The Chosen one... some remaining filth...{c:expression;SucBoss;CloseEyes,NoSmile} and a bunch of traitors.",
            "expression;SucBoss;OpenEyes,Smile",
            "s;SucBoss;You guys hold on, I'll bring the rest.|Make sure to kill the humans.",
            "remove_portrait;SucBoss",
            "wait;200",
            "remove_unit;SucBoss;warp;fade",
            "wait;1000",
            "center_cursor;Chosen",
            "add_portrait;Chosen;Left",
            "s;Chosen;Kill the humans?! No!|We need people alive to tell the story of how I saved them!|I don't know if you're legit... but you girls stay out of my way and I'll do the same!",
            "remove_portrait;Chosen",
            "transition;close;1000",
            "music_clear;1000",
            "transition;open;1000",
            "prep;t;Preparation"
        ],
        "nid": "P11 Intro"
    },
    {
        "name": "wave1",
        "trigger": "turn_change",
        "level_nid": "P11",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;300",
            "center_cursor;19,1",
            "wait;1000",
            "add_unit;SucBoss;19,1;warp;closest;north",
            "spawn_group;wave1;east;wave1;normal;closest",
            "wait;1000",
            "remove_unit;SucBoss;warp;fade",
            "wait;1000",
            "music_fade_back"
        ],
        "nid": "P11 wave1"
    },
    {
        "name": "wave2",
        "trigger": "turn_change",
        "level_nid": "P11",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;300",
            "center_cursor;1,13",
            "wait;1000",
            "add_unit;SucBoss;2,14;warp;closest;fade",
            "spawn_group;wave2;west;wave2;normal;closest",
            "wait;1000",
            "remove_unit;SucBoss;warp;fade",
            "wait;1000",
            "music_fade_back"
        ],
        "nid": "P11 wave2"
    },
    {
        "name": "wave3",
        "trigger": "turn_change",
        "level_nid": "P11",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;300",
            "center_cursor;19,13",
            "wait;1000",
            "add_unit;SucBoss;20,13;warp;closest;fade",
            "spawn_group;wave3;east;wave3;normal;closest",
            "wait;1000",
            "remove_unit;SucBoss;warp;fade",
            "wait;1000",
            "music_fade_back"
        ],
        "nid": "P11 wave3"
    },
    {
        "name": "wave4",
        "trigger": "turn_change",
        "level_nid": "P11",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;300",
            "center_cursor;0,5",
            "wait;1000",
            "add_unit;SucBoss;0,5;warp;closest;fade",
            "spawn_group;wave4;west;wave4;normal;closest",
            "wait;1000",
            "remove_unit;SucBoss;warp;fade",
            "wait;1000",
            "music_fade_back"
        ],
        "nid": "P11 wave4"
    },
    {
        "name": "wave5 boss arrives",
        "trigger": "turn_change",
        "level_nid": "P11",
        "condition": "game.turncount == 7",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music;Halfway change loop",
            "center_cursor;11,15",
            "wait;500",
            "add_unit;SucBoss;10,16;warp;closest;fade",
            "wait;1000",
            "add_portrait;SucBoss;Right",
            "s;SucBoss;I'll do it myself!",
            "remove_portrait;SucBoss",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "wait;1000",
            "move_unit;SucBoss;Chosen;warp;closest",
            "wait;200",
            "interact_unit;SucBoss;Chosen;miss1,end",
            "wait;300",
            "move_unit;SucBoss;10,16;warp;closest",
            "center_cursor;10,15",
            "wait;1000"
        ],
        "nid": "P11 wave5 boss arrives"
    },
    {
        "name": "SucBoss defeated VICTORY",
        "trigger": "combat_end",
        "level_nid": "P11",
        "condition": "game.check_dead(\"SucBoss\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P11 SucBoss defeated VICTORY"
    },
    {
        "name": "Citizen defeated LOSS",
        "trigger": "unit_death",
        "level_nid": "P11",
        "condition": "unit.nid == 'cit1' or unit.nid == 'cit2' or unit.nid == 'cit3' or unit.nid == 'cit4'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "if;game.current_mode.nid != 'Ironman'",
            "    activate_turnwheel",
            "else",
            "    lose_game",
            "end"
        ],
        "nid": "P11 Citizen defeated LOSS"
    },
    {
        "name": "chest1",
        "trigger": "Chest",
        "level_nid": "P11",
        "condition": "region.nid == 'Chest1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest1",
            "give_item;{unit};Master_Seal",
            "remove_region;chest1"
        ],
        "nid": "P11 chest1"
    },
    {
        "name": "chest2",
        "trigger": "Chest",
        "level_nid": "P11",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest2",
            "give_item;{unit};Thief_Pin",
            "remove_region;chest2"
        ],
        "nid": "P11 chest2"
    },
    {
        "name": "chest3",
        "trigger": "Chest",
        "level_nid": "P11",
        "condition": "region.nid == 'Chest3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest3",
            "give_item;{unit};Duelist_Pin",
            "remove_region;chest3"
        ],
        "nid": "P11 chest3"
    },
    {
        "name": "vendor",
        "trigger": "Visit",
        "level_nid": "P11",
        "condition": "region.nid == 'vendor'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "shop;{unit};Health_Potion,Large_Health_Potion,Huge_Health_Potion,Mana_Potion,Large_Mana_Potion,Huge_Mana_Potion,Scroll_Shine,Elixir,Sexy_Librarian_Glasses;vendor",
            "transition;open"
        ],
        "nid": "P11 vendor"
    },
    {
        "name": "armory",
        "trigger": "Visit",
        "level_nid": "P11",
        "condition": "region.nid == 'armory'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "shop;{unit};Silver_Axe,Silver_Lance,Silver_Sword,Tomahawk,Spear,Killing_Edge,Devil_Axe,Brave_Lance;armory",
            "transition;open"
        ],
        "nid": "P11 armory"
    },
    {
        "name": "Restora mana party",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;UNIT;[unit.nid for unit in game.get_units_in_party()]",
            "    set_current_mana;{UNIT};20",
            "endf"
        ],
        "nid": "Global Restora mana party"
    },
    {
        "name": "Mana sip event",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "set_current_mana;{unit};{e:unit.get_mana() - 1}"
        ],
        "nid": "Global Mana sip event"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P11",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P11",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P10;P11",
            "wait;1000"
        ],
        "nid": "P11 Overworld start"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P12",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P12",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P11;P12",
            "wait;1000"
        ],
        "nid": "P12 Overworld start"
    },
    {
        "name": "Overworld start",
        "trigger": "overworld_start",
        "level_nid": "P13",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "reveal_overworld_node;P13",
            "sound;MapHeal",
            "wait;1000",
            "reveal_overworld_road;P12;P13",
            "wait;1000"
        ],
        "nid": "P13 Overworld start"
    },
    {
        "name": "backup pre-rework ambush",
        "trigger": null,
        "level_nid": "P9",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# RETIRADA DAS UNITS ",
            "   transition;close;1000",
            "    if;game.check_alive('Simonyoung') == True",
            "        remove_unit;Simonyoung;immediate;fade",
            "    end",
            "    if;game.check_alive('Mira') == True",
            "        remove_unit;Mira;immediate;fade",
            "    end",
            "    if;game.check_alive('Duro') == True",
            "        remove_unit;Duro;immediate;fade",
            "    end",
            "    if;game.check_alive('Monica') == True",
            "        remove_unit;Monica;immediate;fade",
            "    end",
            "    if;game.check_alive('Antarion') == True",
            "        remove_unit;Antarion;immediate;fade",
            "    end",
            "    if;game.check_alive('Cassian') == True",
            "        remove_unit;Cassian;immediate;fade",
            "    end",
            "    if;game.check_alive('Lucia') == True",
            "        remove_unit;Lucia;immediate;fade",
            "    end",
            "    if;game.check_alive('Safado') == True",
            "        remove_unit;Safado;immediate;fade",
            "    end",
            "    if;game.check_alive('Rosa') == True",
            "        remove_unit;Rosa;immediate;fade",
            "    end",
            "    remove_map_anim;MapFire;7,27",
            "    wait;1000",
            "",
            "",
            "# AMBUSH",
            "map_anim;MapSurprise;{Chosen}",
            "remove_region;ambush",
            "wait;500",
            "music;Tension",
            "flicker_cursor;Minerve",
            "wait;300",
            "add_portrait;Minerve;MidRight",
            "s;Minerve;They're here, Miss Riala!",
            "wait;400",
            "add_portrait;Rialayoung;FarRight;right",
            "wait;300",
            "s;Rialayoung;Begin the second phase.",
            "s;Minerve;Right away!",
            "remove_portrait;Minerve;;normal",
            "remove_portrait;Rialayoung",
            "wait;300",
            "remove_unit;Minerve;warp;fade",
            "wait;400",
            "center_cursor;14,26",
            "add_portrait;Simonyoung;Left",
            "s;Simonyoung;Move out, something's coming!",
            "if;game.check_alive('Duro') == True",
            "    add_portrait;Duro;Right",
            "    s;Duro;Yeah, I'M coming seeing those babes! AHAHAHA!",
            "    remove_portrait;Duro",
            "end",
            "remove_portrait;Simonyoung",
            "wait;200",
            "move_unit;Chosen;15,26;normal;giveup",
            "sound;Weapon Click",
            "show_layer;totem1",
            "hide_layer;totem2",
            "wait;2000",
            "move_cursor;Chosen",
            "wait;700",
            "add_portrait;Chosen;Left",
            "s;Chosen;That's...{c:wait;300} No problem! Yeah, I didn't plan on retreating!",
            "remove_portrait;Chosen",
            "move_unit;Chosen;21,26;normal;giveup;no_block",
            "move_unit;Rialayoung;23,22;normal;stack;no_follow",
            "wait;2000",
            "music;Main Theme_TLS",
            "multi_add_portrait;Simonyoung;Left;Rialayoung;Right",
            "s;Rialayoung;It's a pleasure to meet you again, Simon.",
            "s;Simonyoung;Under these circumstances, I'm afraid I cannot say the same.",
            "s;Rialayoung;Huhu, I understand.|I apologize for putting you through this, but your actions leave me no choice.",
            "s;Simonyoung;Do they really?",
            "expression;Rialayoung;CloseEyes",
            "wait;1000",
            "expression;Rialayoung;OpenEyes",
            "s;Rialayoung;It's impossible for you or anyone else to understand...|...what we need to endure or do here to merely survive.",
            "expression;Simonyoung;CloseEyes",
            "s;Simonyoung;And you will never understand what your side have taken from us.",
            "expression;Simonyoung;OpenEyes",
            "s;Simonyoung;That is the harsh reality of war.|This time, I will make sure he ends it.",
            "expression;Rialayoung;Smile",
            "s;Rialayoung;Oh, Simon...|You rely on following someone who might not be too different from your ultimate foe.",
            "expression;Rialayoung;NoSmile",
            "s;Rialayoung;Do you truly feel prudent leading this kid to more power?|If he accomplishes this impossible task, will his morals really be better?",
            "expression;Simonyoung;CloseEyes",
            "wait;1000",
            "s;Simonyoung;I will fight fire with fire if it's necessary.",
            "expression;Rialayoung;CloseEyes",
            "wait;2000",
            "expression;Simonyoung;OpenEyes",
            "expression;Rialayoung;OpenEyes",
            "s;Rialayoung;And so we play our parts in scorching the earth.",
            "expression;Rialayoung;CloseEyes",
            "s;Rialayoung;Minerve.{c:wait;400} Take care here.",
            "wait;200",
            "multi_remove_portrait;Simonyoung;Rialayoung",
            "wait;400",
            "remove_unit;Rialayoung;warp;fade",
            "wait;400",
            "center_cursor;30,25",
            "wait;600",
            "add_unit;Minerve;32,25;warp;stack;fade",
            "wait;400",
            "music_clear",
            "add_portrait;Minerve;Right",
            "s;Minerve;We know a lot about you already, {v:chosenname}!|That's why we prepared a special opponent for you~|One that you deeeefinitely wouldn't fuck~",
            "remove_portrait;Minerve",
            "wait;500",
            "center_cursor;22,6",
            "wait;1000",
            "add_unit;Plant;22,0;fade;stack;north",
            "move_unit;Plant;22,6;normal;stack",
            "wait;1000",
            "add_portrait;Plant;Right",
            "wait;400",
            "music_clear",
            "s;Plant;If he tries anything with me, he will have one hell of a HARD time!",
            "wait;400",
            "center_cursor;Chosen",
            "wait;700",
            "add_portrait;Chosen;Left;;CloseEyes,NoSmile",
            "wait;600",
            "s;Chosen;Thank you, Ivala...",
            "expression;Chosen;OpenEyes,Smile",
            "music;Prologue battles",
            "s;Chosen;My dream has finally come true.|I <wave>will</> fuck a plant today.{c:expression;Planta;NoSmile}",
            "wait;700",
            "remove_portrait;Plant",
            "wait;300",
            "s;Chosen;In fact...|I can feel something rising in me!!|And it's not just my erection!!!",
            "wait;200",
            "remove_portrait;Chosen",
            "sound;GleipnirHit",
            "map_anim;AOE_Mend;Chosen",
            "wait;1000",
            "promote;Chosen",
            "wait;1000",
            "add_portrait;Chosen;Left;;Smile",
            "s;Chosen;I am a new man!|I am... the <red>Special</> Chosen!",
            "remove_portrait;Chosen",
            "wait;1000",
            "center_cursor;Minerve",
            "wait;300",
            "add_portrait;Minerve;Right",
            "s;Minerve;Oh. Oops!|Ok so, we ignore that and proceed as usual!",
            "wait;200",
            "remove_portrait;Minerve",
            "move_unit;Minerve;27,27;swoosh;stack",
            "wait;300",
            "spawn_group;enemy;north;enemy;normal;stack;no_follow",
            "wait;1000",
            "center_cursor;Chosen",
            "wait;1000",
            "transition;close;1000",
            "change_roaming;f",
            "wait;500",
            "remove_talk;Chosen;Simonyoung",
            "remove_talk;Chosen;Simonyoung",
            "remove_talk;Chosen;Mira",
            "remove_talk;Chosen;Duro",
            "remove_talk;Chosen;Monica",
            "remove_talk;Chosen;Antarion",
            "remove_talk;Chosen;Cassian",
            "remove_talk;Chosen;Lucia",
            "remove_talk;Chosen;Safado",
            "remove_talk;Chosen;Rosa",
            "change_music;player_phase;Withered Mountain",
            "change_music;enemy_phase;Withered Mountain",
            "change_objective_win;Defeat the boss.",
            "change_objective_loss;Chosen dies.",
            "change_objective_simple;Defeat the boss.",
            "add_talk;Cassian;Milena",
            "transition;open;1000",
            "prep;t;Preparation"
        ],
        "nid": "P9 backup pre-rework ambush"
    },
    {
        "name": "Raid 6",
        "trigger": "turn_change",
        "level_nid": "P6",
        "condition": "game.turncount == 6",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Tension2",
            "wait;1000",
            "add_group;raid6;raid6;fade;closest",
            "wait;500",
            "flicker_cursor;128",
            "wait;300",
            "flicker_cursor;129",
            "wait;300",
            "flicker_cursor;130",
            "wait;1000"
        ],
        "nid": "P6 Raid 6"
    },
    {
        "name": "Firewall place test",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "lvar;targets;{eval: ([target_pos] if type(target_pos[0]) == int else target_pos)}",
            "for;pos;in;{v:targets}",
            "    add_region;Firewall;{eval: pos};1,1;status;BurnedFW;3",
            "    map_anim;MapFire;{eval: pos};permanent;overlay",
            "endf"
        ],
        "nid": "Global Firewall place test"
    },
    {
        "name": "Firewall v2 place",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Increment the firewall counter so each placement gets a unique nid.",
            "inc_level_var;firewall_count;1",
            "# Construct a unique region nid by concatenating \"Firewall\" with the current firewall_count.",
            "lvar;firewall_nid;{eval: '\"Firewall\" + str(game.level_vars.get(\"firewall_count\", 1))'}",
            "# Place the timed region with the unique nid at the target position. Duration: 3 turns.",
            "add_region;{v:firewall_nid};{eval: target_pos};1,1;status;BurnedFW;3",
            "# Place the map animation on the same tile.",
            "map_anim;MapFire;{eval: target_pos};permanent;overlay"
        ],
        "nid": "Global Firewall v2 place"
    },
    {
        "name": "Firewall v2 level start",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;firewall_count;0"
        ],
        "nid": "Global Firewall v2 level start"
    },
    {
        "name": "Firewall v2 remove",
        "trigger": "time_region_complete",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Only process regions with nids starting with \"Firewall\"",
            "if;{eval: region.nid.startswith(\"Firewall\")}",
            "    center_cursor;{eval: position}",
            "    wait;500",
            "    sound;Burning",
            "    wait;300",
            "    remove_map_anim;MapFire;{eval: position};overlay",
            "end"
        ],
        "nid": "Global Firewall v2 remove"
    },
    {
        "name": "Ogre reinforcement",
        "trigger": "turn_change",
        "level_nid": "P9",
        "condition": "any(game.level.regions.get('ogre').contains(unit.position) for unit in game.get_units_in_party()) == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music;Halfway change loop",
            "center_cursor;5,30",
            "wait;1000",
            "add_unit;Rialayoung;2,30;warp;closest;fade",
            "wait;500",
            "add_portrait;Rialayoung;Right",
            "wait;200",
            "expression;Rialayoung;CloseEyes",
            "wait;1000",
            "expression;Rialayoung;OpenEyes",
            "s;Rialayoung;Advance!",
            "remove_portrait;Rialayoung",
            "wait;300",
            "spawn_group;ogre;south;ogre;normal;closest",
            "wait;1000",
            "remove_unit;Rialayoung;warp;fade",
            "wait;1000",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "music_fade_back"
        ],
        "nid": "P9 Ogre reinforcement"
    },
    {
        "name": "Plant dead VICTORY",
        "trigger": "combat_end",
        "level_nid": "P9",
        "condition": "game.check_dead(\"Plant\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P9 Plant dead VICTORY"
    },
    {
        "name": "Rout VICTORY",
        "trigger": "combat_end",
        "level_nid": "P10",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "P10 Rout VICTORY"
    },
    {
        "name": "PROL Milena lvlup skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Milena' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_unit('Milena').level == 10",
            "    give_skill;Milena;Euphoric_Audience;;persistent",
            "elif;game.get_unit('Milena').level == 11",
            "    give_skill;Milena;Mesmerizing_Tune;;persistent",
            "elif;game.get_unit('Milena').level == 12",
            "    add_item_to_multiitem;Milena;LustSpells_Milena;Constricting_Love_ability",
            "elif;game.get_unit('Milena').level == 13",
            "    give_skill;Milena;Dancing_Line;;persistent",
            "    add_item_to_multiitem;Milena;LustSpells_Milena;Dancing_Line",
            "end"
        ],
        "nid": "Global PROL Milena lvlup skills"
    },
    {
        "name": "Seed -> Dragon",
        "trigger": "turn_change",
        "level_nid": "P14",
        "condition": "(game.current_mode == 'Hard' or game.current_mode == 'Ironman') == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount == 7",
            "    if;game.check_alive('egg1')",
            "    center_cursor;egg1",
            "    flicker_cursor;egg1",
            "    wait;300",
            "    screen_shake;0",
            "    sound;DemonKingRoar",
            "    add_unit;drag1;egg1;fade;stack;fade",
            "    kill_unit;egg1",
            "    screen_shake_end",
            "    else",
            "    end",
            "else",
            "end",
            "",
            "if;game.turncount == 9",
            "    if;game.check_alive('egg2')",
            "    center_cursor;egg2",
            "    flicker_cursor;egg2",
            "    wait;300",
            "    screen_shake;0",
            "    sound;DemonKingRoar",
            "    add_unit;drag2;egg2;fade;stack;fade",
            "    kill_unit;egg2",
            "    screen_shake_end",
            "    else",
            "    end",
            "else",
            "end",
            "",
            "if;game.turncount == 11",
            "    if;game.check_alive('egg3')",
            "    center_cursor;egg3",
            "    flicker_cursor;egg3",
            "    wait;300",
            "    screen_shake;0",
            "    sound;DemonKingRoar",
            "    add_unit;drag3;egg3;fade;stack;fade",
            "    kill_unit;egg3",
            "    screen_shake_end",
            "    else",
            "    end",
            "else",
            "end",
            "",
            "if;game.turncount == 13",
            "    if;game.check_alive('egg4')",
            "    center_cursor;egg4",
            "    flicker_cursor;egg4",
            "    wait;300",
            "    screen_shake;0",
            "    sound;DemonKingRoar",
            "    add_unit;drag4;egg4;fade;stack;fade",
            "    kill_unit;egg4",
            "    screen_shake_end",
            "    else",
            "    end",
            "else",
            "end",
            "",
            "if;game.turncount == 15",
            "    if;game.check_alive('egg5')",
            "    center_cursor;egg5",
            "    flicker_cursor;egg5",
            "    wait;300",
            "    screen_shake;0",
            "    sound;DemonKingRoar",
            "    add_unit;drag5;egg5;fade;stack;fade",
            "    kill_unit;egg5",
            "    screen_shake_end",
            "    else",
            "    end",
            "else",
            "end"
        ],
        "nid": "P14 Seed -> Dragon"
    },
    {
        "name": "Iris spawns seeds",
        "trigger": "turn_change",
        "level_nid": "P14",
        "condition": "game.level_vars['midleft'] == 0 and (game.current_mode == 'Hard' or game.current_mode == 'Ironman') == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount == 2",
            "    wait;500",
            "    center_cursor;Iris",
            "    wait;500",
            "    sound;Apocalypse1",
            "    map_anim;AOE_Rally;Iris",
            "    wait;500",
            "    center_cursor;37,13",
            "    wait;500",
            "    sound;Attack Hit 5",
            "    screen_shake;0",
            "    add_unit;egg1;37,13;swoosh;closest;fade",
            "    add_region;egg1;egg1;1,1;normal;;5",
            "    screen_shake_end",
            "    wait;1000",
            "else",
            "end",
            "if;game.turncount == 4",
            "    wait;500",
            "    center_cursor;Iris",
            "    wait;500",
            "    sound;Apocalypse1",
            "    map_anim;AOE_Rally;Iris",
            "    wait;500",
            "    center_cursor;17,11",
            "    wait;500",
            "    sound;Attack Hit 5",
            "    screen_shake;0",
            "    add_unit;egg2;17,11;swoosh;closest;fade",
            "    add_region;egg2;egg2;1,1;normal;;5",
            "    screen_shake_end",
            "    wait;1000",
            "else",
            "end",
            "if;game.turncount == 6",
            "    wait;500",
            "    center_cursor;Iris",
            "    wait;500",
            "    sound;Apocalypse1",
            "    map_anim;AOE_Rally;Iris",
            "    wait;500",
            "    center_cursor;11,19",
            "    wait;500",
            "    sound;Attack Hit 5",
            "    screen_shake;0",
            "    add_unit;egg3;11,19;swoosh;closest;fade",
            "    add_region;egg3;egg3;1,1;normal;;5",
            "    screen_shake_end",
            "    wait;1000",
            "else",
            "end",
            "if;game.turncount == 8",
            "    wait;500",
            "    center_cursor;Iris",
            "    wait;500",
            "    sound;Apocalypse1",
            "    map_anim;AOE_Rally;Iris",
            "    wait;500",
            "    center_cursor;27,3",
            "    wait;500",
            "    sound;Attack Hit 5",
            "    screen_shake;0",
            "    add_unit;egg4;27,3;swoosh;closest;fade",
            "    add_region;egg4;egg4;1,1;normal;;5",
            "    screen_shake_end",
            "    wait;1000",
            "else",
            "end",
            "if;game.turncount == 10",
            "    wait;500",
            "    center_cursor;Iris",
            "    wait;500",
            "    sound;Apocalypse1",
            "    map_anim;AOE_Rally;Iris",
            "    wait;500",
            "    center_cursor;40,3",
            "    wait;500",
            "    sound;Attack Hit 5",
            "    screen_shake;0",
            "    add_unit;egg5;40,3;swoosh;closest;fade",
            "    add_region;egg5;egg5;1,1;normal;;5",
            "    screen_shake_end",
            "    wait;1000",
            "else",
            "end"
        ],
        "nid": "P14 Iris spawns seeds"
    },
    {
        "name": "Outro: IK cutscene",
        "trigger": "level_end",
        "level_nid": "DEBUG_2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close;1000",
            "change_tilemap;ik throne;reload",
            "remove_all_units",
            "load_unit;Incubus_King;enemy",
            "add_unit;Incubus_King;10,7;immediate",
            "load_unit;Iris;enemy;None",
            "add_unit;Iris;10,10;immediate",
            "make_generic;suc1;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc1;6,12;immediate",
            "make_generic;suc2;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc2;14,13;immediate",
            "make_generic;suc3;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc3;15,13;immediate",
            "make_generic;elite1;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite1;9,13;immediate",
            "make_generic;elite2;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite2;11,13;immediate",
            "center_cursor;10,18",
            "music;Tension",
            "wait;1000",
            "transition;open;1000",
            "wait;1000",
            "center_cursor;10,10;1000",
            "wait;1000",
            "flicker_cursor;Incubus_King",
            "add_portrait;Incubus King;Left",
            "s;Incubus King;IRIS!",
            "add_portrait;Iris;Right",
            "s;Iris;...Yes, master.",
            ""
        ],
        "nid": "DEBUG_2 Outro: IK cutscene"
    },
    {
        "name": "Outro e IK CUTSCENE",
        "trigger": "level_end",
        "level_nid": "P9",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "transition;close;1000",
            "change_background;Ruins",
            "multi_add_portrait;Chosen;FarLeft;Simonyoung;Right",
            "mirror_portrait;Chosen",
            "mirror_portrait;Simonyoung",
            "add_portrait;Planta;LeftCorner",
            "mirror_portrait;Planta",
            "music;Wind",
            "expression;Simonyoung;CloseEyes",
            "transition;open;1000",
            "wait;1000",
            "s;Simonyoung;...are you done?",
            "mirror_portrait;Chosen",
            "move_portrait;Chosen;Left",
            "s;Chosen;I am!|I am as revigorated as I could ever be!",
            "expression;Simonyoung;OpenEyes",
            "mirror_portrait;Simonyoung",
            "s;Simonyoung;Then let's move on and put your new abilities to good use.|Instead of...{c:wait;400} this.",
            "transition;close;1000",
            "music_clear;1000",
            "multi_remove_portrait;Chosen;Planta;Simonyoung",
            "#IK CUTSCENE START",
            "change_background",
            "change_tilemap;ik throne;reload",
            "remove_all_units",
            "load_unit;Incubus_King;enemy",
            "add_unit;Incubus_King;10,7;immediate",
            "load_unit;Iris;enemy;None",
            "add_unit;Iris;10,10;immediate",
            "make_generic;suc1;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc1;6,12;immediate",
            "make_generic;suc2;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc2;14,13;immediate",
            "make_generic;suc3;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc3;15,13;immediate",
            "make_generic;elite1;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite1;9,13;immediate",
            "make_generic;elite2;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite2;11,13;immediate",
            "center_cursor;10,18",
            "wait;3000",
            "music;Tension2",
            "transition;open;1000",
            "wait;1000",
            "center_cursor;10,10;1000",
            "wait;1000",
            "flicker_cursor;Incubus_King",
            "wait;2000",
            "multi_add_portrait;Incubus King;Left;Iris;Right",
            "s;Incubus King;Ugh.{c:wait;400} Nothing happens in this boring place.",
            "s;Iris;Were you not satisfied with the private circus exhibition you demanded, master?",
            "expression;Incubus King;CloseEyes",
            "s;Incubus King;I want something... different.|What I really want...",
            "expression;Incubus King;OpenEyes",
            "bop_portrait;Incubus King",
            "s;Incubus King;I want my whole army to play hide and seek!|Whoever gets found gets fucked in the ass!|And I want to watch it on my throne!|With live commentary!|By two people who secretly hate each other!|And the second commentator keeps interrupting the first!",
            "s;Iris;Master... our army is occupied...",
            "s;Incubus King;What could be more important than my wants and needs?!",
            "s;Iris;We...{c:wait;500} we are at war with the rest of the continent...",
            "s;Incubus King;Is that so?",
            "s;Iris;Yes, that is so, master.",
            "s;Incubus King;Of course.{c:wait;400} That explains a lot of things.",
            "s;Iris;... yes.{c:wait;300} And we should allocate our resources accordingly.|We should push for peace or for total conquest.|As it stands, our people are in danger of-",
            "expression;Incubus King;CloseEyes",
            "s;Incubus King;I know.",
            "wait;1000",
            "expression;Incubus King;OpenEyes",
            "s;Incubus King;I know the use we have for our army!|We should capture enemy soldiers and force them to participate in dick battles!|Whoever gets to balance the heaviest cactus with their dick wins!",
            "s;Iris;... what about female humans?|They don't have dicks, and unlike succubi, they can't grow one.",
            "bop_portrait;Incubus King",
            "s;Incubus King;You idiot!|Obviously they will be the ones holding the balls so they don't get hurt!",
            "s;Iris;I{tgm}{c:wait;300}.{c:wait;300}.{c:wait;300}.{c:wait;300} {tgm}but{tgm}{c:wait;300}.{c:wait;300}.{c:wait;300}. {c:wait;300}.{c:wait;300}.{c:wait;300}.{tgm}I see, master.",
            "transition;close;1000"
        ],
        "nid": "P9 Outro e IK CUTSCENE"
    },
    {
        "name": "Outro e IK cutscene",
        "trigger": "level_end",
        "level_nid": "P11",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close;1000",
            "music_clear",
            "#IK CUTSCENE START",
            "change_background",
            "change_tilemap;ik throne;reload",
            "remove_all_units",
            "load_unit;Incubus_King;enemy",
            "add_unit;Incubus_King;10,7;immediate",
            "load_unit;Iris;enemy;None",
            "add_unit;Iris;10,10;immediate",
            "make_generic;suc1;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc1;6,12;immediate",
            "make_generic;suc2;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc2;14,13;immediate",
            "make_generic;suc3;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc3;15,13;immediate",
            "make_generic;elite1;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite1;9,13;immediate",
            "make_generic;elite2;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite2;11,13;immediate",
            "center_cursor;10,18",
            "wait;3000",
            "music;Tension2",
            "transition;open;1000",
            "wait;1000",
            "center_cursor;10,10;1000",
            "wait;1000",
            "flicker_cursor;Incubus_King",
            "wait;2000",
            "multi_add_portrait;Incubus King;Left;Iris;Right",
            "s;Incubus King;{c:bop_portrait;Incubus King}Where.|{c:bop_portrait;Incubus King} Are.{c:bop_portrait;Incubus King} The.|{c:bop_portrait;Incubus King} Teleporters.",
            "s;Iris;I am sorry, master.|They are currently patrolling and supplying our troops.|Our current infrastrucutre is built on them, so-",
            "bop_portrait;Incubus King",
            "s;Incubus King;I WANT THEM NOW!!",
            "s;Iris;May I ask what do you need them for, master?",
            "s;Incubus King;I want to make a real life animation!|Each succubus will ride my dick with a slightly different pose and expression!|Then when I see them teleporting in and out...|...it will seem like it's one single succubus moving!",
            "s;Iris;It's{tgm}{c:wait;300}.{c:wait;300}.{c:wait;300}.{tgm} certainly a creative idea, master.|However, they are exceedingly rare and valuable to our transp-",
            "bop_portrait;Incubus King",
            "move_portrait;Iris;FarRight",
            "s;Incubus King;{c:screen_shake;0}<red>THEY WILL COME HERE NOW OR THEY WON'T HAVE THEIR HEADS!!</>{c:screen_shake_end}",
            "expression;Iris;CloseEyes",
            "s;Iris;... I understand.{c:wait;300} I will contact them.",
            "s;Incubus King;And tell them to prepare 60 different poses, which will happen in the span of one second!|Anything slower than that is unacceptable!",
            "s;Iris;{tgm}{c:wait;300}.{c:wait;300}.{c:wait;300}.{c:wait;300} {c:expression;Iris;OpenEyes}{tgm}Of course, master.",
            "transition;close;1000"
        ],
        "nid": "P11 Outro e IK cutscene"
    },
    {
        "name": "Chest",
        "trigger": "Chest",
        "level_nid": "P10",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Master_Seal",
            "remove_region;chest"
        ],
        "nid": "P10 Chest"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "P9",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest2",
            "give_item;{unit};Unperson_Charm",
            "remove_region;chest2"
        ],
        "nid": "P9 Chest2"
    },
    {
        "name": "Chest3",
        "trigger": "Chest",
        "level_nid": "P9",
        "condition": "region.nid == 'Chest3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest3",
            "give_item;{unit};Master_Seal",
            "remove_region;chest3"
        ],
        "nid": "P9 Chest3"
    },
    {
        "name": "Chest",
        "trigger": "Chest",
        "level_nid": "P7",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Master_Seal",
            "remove_region;chest"
        ],
        "nid": "P7 Chest"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "P7",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest2",
            "give_item;{unit};Elven_Ring",
            "remove_region;chest2"
        ],
        "nid": "P7 Chest2"
    },
    {
        "name": "Chest",
        "trigger": "Chest",
        "level_nid": "P3",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Crusader_Charm",
            "remove_region;chest"
        ],
        "nid": "P3 Chest"
    },
    {
        "name": "Chest",
        "trigger": "Chest",
        "level_nid": "P6",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Healer_Pin",
            "remove_region;chest"
        ],
        "nid": "P6 Chest"
    },
    {
        "name": "Unit dies, leaves traveler",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "Global Unit dies, leaves traveler"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P14",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "",
            "#regions activate",
            "level_var;midright;0",
            "level_var;midcenter;0",
            "level_var;midleft;0",
            "level_var;lowcenter;0",
            "level_var;lowleftcliff;0",
            "level_var;lowleftchest;0",
            "level_var;lowleftcurve;0",
            "level_var;highcenterchest;0",
            "level_var;highleft;0",
            "",
            "level_var;spoltrap;0",
            "level_var;mermaids;0",
            "level_var;irisbuff;0",
            "",
            "#spawn groups",
            "add_group;Puki;Puki;immediate",
            "add_group;Faighin;Faighin;immediate",
            "add_group;Spol;Spol;immediate",
            "add_group;Kyn;Kyn;immediate",
            "add_group;Farji;Farji;immediate",
            "add_group;Ffagin;Ffagin;immediate",
            "",
            "show_layer;pillar1A",
            "show_layer;pillar2A",
            "show_layer;pillar3A",
            "show_layer;pillarsfixed",
            "show_layer;base_1",
            "add_weather;fire",
            "chapter_title",
            "transition;close",
            "wait;1000",
            "center_cursor;40,28",
            "change_background;LavaCave",
            "add_portrait;Iris;Left",
            "music;Tension",
            "transition;open;1000",
            "wait;1000",
            "s;Iris;Group B, I need you to stay further back.|We don't want to throw everything at them.|Rather, we should invite and entrap.",
            "move_portrait;Iris;MidLeft",
            "s;Iris;YES, PLACE THE CHEST RIGHT THERE! GOOD JOB!",
            "mirror_portrait;Iris",
            "move_portrait;Iris;FarLeft",
            "s;Iris;Hmm? They couldn't come?{c:wait;300} Ok, then split your team and cover their region.",
            "mirror_portrait;Iris",
            "move_portrait;Iris;Left",
            "wait;500",
            "expression;Iris;CloseEyes",
            "wait;2000",
            "expression;Iris;OpenEyes",
            "s;Iris;Everyone, be on the lookout for the <red>Corruption seeds</>, just as we planned!|They may affect you negatively, but protect their growth!",
            "expression;Iris;CloseEyes",
            "transition;close;2000",
            "move_cursor;40,28",
            "music;Prologue battles;1000",
            "remove_portrait;Iris",
            "change_background",
            "transition;open;1000",
            "add_unit;Chosen;41,29;fade;;east",
            "add_unit;Simonyoung;41,28;fade;;east",
            "wait;200",
            "move_unit;Chosen;39,28;normal",
            "move_unit;Simonyoung;39,28;normal;closest",
            "wait;400",
            "multi_add_portrait;Chosen;Left;Simonyoung;Right",
            "expression;Simonyoung;CloseEyes",
            "s;Chosen;Damn, these bitches so hot they're living in lava!",
            "expression;Simonyoung;OpenEyes",
            "s;Simonyoung;Do be careful for once in your life.|They're cornered, which means we might confront desperation moves.",
            "s;Chosen;You're gonna get even uglier worrying that much.|It's just a smooth trip until the final boss. It's over already, let's march!",
            "expression;Simonyoung;CloseEyes",
            "mirror_portrait;Chosen",
            "remove_portrait;Chosen;;left",
            "wait;500",
            "transition;close;1000",
            "remove_unit;Simonyoung;immediate",
            "prep;t"
        ],
        "nid": "P14 Intro"
    },
    {
        "name": "easy: Green reinforcement avengers like xd",
        "trigger": null,
        "level_nid": "P14",
        "condition": "game.current_mode == 'Easy' and game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear;1000",
            "wait;1000",
            "center_cursor;37,3;1500",
            "wait;1000",
            "music;Reinforcements",
            "spawn_group;reinforce;east;reinforce;normal;closest",
            "wait;2000",
            "remove_item;Geoff;Long_Ballista;no_banner",
            "add_portrait;Baruba;Left;mirror",
            "add_portrait;Geoff;Right",
            "wait;1000",
            "expression;Geoff;CloseEyes",
            "s;Geoff;Simon. Finally managed to catchu up with you.|I was worried about the fate of this group under your leadership.",
            "expression;Geoff;OpenEyes",
            "s;Geoff;I've come to help keep them alive.",
            "s;Baruba;And I ain't just gonna stay outta this mess!|Fuckin' up that idiot king, count me in!",
            "wait;500"
        ],
        "nid": "P14 easy: Green reinforcement avengers like xd"
    },
    {
        "name": "Chest1",
        "trigger": "Chest",
        "level_nid": "P14",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Sylvan_Draught",
            "remove_region;chest"
        ],
        "nid": "P14 Chest1"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "P14",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest2",
            "give_item;{unit};Swiftsole",
            "remove_region;chest2"
        ],
        "nid": "P14 Chest2"
    },
    {
        "name": "Chest3",
        "trigger": "Chest",
        "level_nid": "P14",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest3",
            "give_item;{unit};Sylvan_Draught",
            "remove_region;chest3"
        ],
        "nid": "P14 Chest3"
    },
    {
        "name": "intro",
        "trigger": "level_start",
        "level_nid": "DEBUG_2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#give_skill;Cassian;synergy_adj;;no_banner",
            "#give_skill;Cassian;synergy_pair;;no_banner",
            "give_item;Milena;Dancing_Line;;no_banner",
            "give_skill;Cassian;synergy_both;;no_banner",
            "enable_supports;t",
            "give_skill;Antarion;Guaranteed_Crit;;no_banner",
            "give_skill;Antarion;Clutch_King;;no_banner",
            "add_talk;Chosen;Simonyoung",
            "",
            "add_talk;Cassian;Lucia",
            "set_current_mana;Duro;1",
            "give_item;Chosen;Sylvan_Draught;;no_banner",
            "set_current_mana;Rosa;1",
            "set_current_hp;Chosen;1",
            "give_skill;Minerve;Blinded_Immune;;persistent;no_banner",
            "give_item;Rosa;Mage_Pin;;no_banner",
            "give_item;Chosen;Gauntlets;no_banner",
            "set_current_hp;Minerve;1",
            "give_item;Chosen;Chest_Key;no_banner",
            "give_item;Simonyoung;Chest_Key;no_banner",
            "enable_turnwheel;t",
            "give_skill;Simonyoung;Shelter;;persistent;no_banner",
            "give_skill;Safado;Stalling_Stance;;no_banner;persistent",
            "give_skill;Rosa;Guaranteed_Crit;;no_banner;persistent",
            "promote;Rosa;Sage;silent",
            "give_item;Rosa;Lightning;;no_banner",
            "add_talk;Duro;Antarion",
            "give_skill;Duro;Grand_Entrance;;no_banner",
            "give_skill;Duro;Bear_hug;;no_banner",
            "give_skill;Safado;Chameleon_Stance;;no_banner",
            "#give_skill;Chosen;Safe_Approach;",
            "#give_skill;Chosen;Safe_Approach_pair",
            "give_skill;Chosen;Safe_Approach_merged;;no_banner",
            "give_skill;Chosen;Duelists_Revenge;;no_banner",
            "give_skill;Safado;Stalling_Stance_buff;;no_banner",
            "give_skill;Chosen;Certain_Revenge;;no_banner"
        ],
        "nid": "DEBUG_2 intro"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "P4",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest2",
            "give_item;{unit};Boots",
            "remove_region;Chest2"
        ],
        "nid": "P4 Chest2"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "P15",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "level_var;ik2;0",
            "show_layer;mountains",
            "show_layer;mountains2",
            "show_layer;pilares",
            "add_weather;sunset",
            "add_weather;smoke",
            "transition;close",
            "center_cursor;1,1",
            "music;Wind;10000",
            "change_background",
            "transition;open;5000",
            "center_cursor;Incubus_King;8000",
            "music_clear;3000",
            "wait;3000",
            "center_cursor;11,19;3000",
            "wait;1000",
            "center_cursor;10,35;6000",
            "wait;2000",
            "music_clear;10000",
            "sound;Foot Step",
            "add_group;player;player;fade;stack",
            "move_unit;Chosen;10,33;no_follow",
            "move_unit;Simonyoung;9,34;no_follow",
            "add_tag;Simonyoung;Required",
            "move_unit;Duro;11,34;no_follow",
            "add_tag;Duro;Required",
            "move_unit;Mira;12,35;no_follow",
            "add_tag;Mira;Required",
            "move_unit;Antarion;8,35;no_follow",
            "add_tag;Antarion;Required",
            "move_unit;Cassian;11,35;no_follow",
            "add_tag;Cassian;Required",
            "move_unit;Lucia;9,35;no_follow",
            "add_tag;Lucia;Required",
            "move_unit;Safado;9,36;no_follow",
            "add_tag;Safado;Required",
            "move_unit;Monica;11,36;no_follow",
            "add_tag;Monica;Required",
            "move_unit;Rosa;8,36;no_follow",
            "add_tag;Rosa;Required",
            "move_unit;Milena;12,36;no_follow",
            "add_tag;Milena;Required",
            "wait;3000",
            "prep;t;Wind"
        ],
        "nid": "P15 Intro"
    },
    {
        "name": "Start true level trigger",
        "trigger": "enemy_turn_change",
        "level_nid": "P15",
        "condition": "all(game.level.regions.get('start').contains(unit.position) for unit in game.get_player_units(only_on_field=True))",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "center_cursor;Incubus_King",
            "wait;1000",
            "flicker_cursor;Incubus_King",
            "wait;1000",
            "add_portrait;Incubus King;Left;;NoSmile,CloseEyes",
            "s;Incubus King;Praise it.",
            "remove_portrait;Incubus King",
            "level_var;ik;1",
            "#Trying to isolate Chosen. There was an if lead here, but it needs to apply on paired as well.",
            "center_cursor;Chosen",
            "flicker_cursor;Chosen",
            "if;u('Chosen').lead_unit",
            "    level_var;chosentraveler;u('Chosen').traveler",
            "    separate;Chosen",
            "    add_unit;{v:chosentraveler};Chosen;fade;closest;fade",
            "else",
            "    level_var;chosenrescuer;'{eval:game.get_rescuer(u('Chosen'))}'",
            "    separate;{v:chosenrescuer}",
            "    add_unit;Chosen;{v:chosenrescuer};fade;closest;fade",
            "end",
            "wait;500",
            "move_unit;Chosen;11,20;normal;push",
            "wait;500",
            "game_var;chosendeath;1",
            "center_cursor;Incubus_King;2000",
            "wait;1000",
            "move_unit;Incubus_King;11,19;warp;push",
            "wait;300",
            "interact_unit;Incubus_King;Chosen;hit2,crit1,end",
            "wait;1000",
            "add_portrait;Incubus King;Left",
            "s;Incubus King;That was it?|I've had more satisfying battles against my bowel movements!",
            "remove_portrait;Incubus King",
            "wait;1000",
            "music;IK attack",
            "if;game.check_alive('Antarion')",
            "    center_cursor;Antarion",
            "    wait;1000",
            "    add_portrait;Antarion;Left",
            "    s;Antarion;A-are you kidding me?! I'm out of here, I'm too young to die!",
            "    if;u('Antarion').lead_unit",
            "        level_var;antariontraveler;u('Antarion').traveler",
            "        separate;Antarion",
            "        add_unit;{v:antariontraveler};Antarion;fade;closest;fade",
            "    else",
            "        level_var;antarionrescuer;'{eval:game.get_rescuer(u('Antarion'))}'",
            "        separate;{v:antarionrescuer}",
            "        add_unit;Antarion;{v:antarionrescuer};fade;closest;fade",
            "    end",
            "    wait;1000",
            "    remove_unit;Antarion;swoosh;fade",
            "    remove_portrait;Antarion;;left",
            "    wait;1000",
            "end",
            "center_cursor;Simonyoung",
            "wait;1000",
            "add_portrait;Simonyoung;Left;;CloseEyes",
            "wait;1000",
            "expression;Simonyoung;OpenEyes",
            "s;Simonyoung;Fall back, everyone!|Our plan has failed, prioritize your safety!|<red>Do not engage with the Incubus King!</>",
            "remove_portrait;Simonyoung",
            "center_cursor;10,36",
            "wait;1000",
            "flicker_cursor;10,36",
            "wait;1000",
            "change_objective_win;Escape!",
            "change_objective_simple;Escape!",
            "change_objective_loss;Simon dies.",
            "change_music;player_phase;IK attack",
            "change_music;enemy_phase;IK attack"
        ],
        "nid": "P15 Start true level trigger"
    },
    {
        "name": "Chest",
        "trigger": "Chest",
        "level_nid": "DEBUG_2",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "#add_tag;{unit};Convoy",
            "give_item;{unit};Thief_Pin",
            "#if;{eval: unit.nid != 'Simonyoung'}",
            "#remove_tag;{unit};Convoy",
            "end"
        ],
        "nid": "DEBUG_2 Chest"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "P5",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest2",
            "give_item;{unit};Barrier_Pin",
            "remove_region;Chest2"
        ],
        "nid": "P5 Chest2"
    },
    {
        "name": "Chest",
        "trigger": "Chest",
        "level_nid": "P8",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Gauntlets",
            "remove_region;chest"
        ],
        "nid": "P8 Chest"
    },
    {
        "name": "Chest e Tutorial: Accessory",
        "trigger": "Chest",
        "level_nid": "P1",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Cloak",
            "remove_region;chest",
            "if;{v:ivala} == 1",
            "    wait;500",
            "    add_portrait;Ivala;(120,32)",
            "    wait;200",
            "    speak;Ivala;You have found an <red>Accessory</>!|Each accessory has a different effect, they're sure to be useful sometime!|By the way, <red>a unit can only hold one accessory</>.|So if you already have an accessory, and you open a chest...|...you will be forced to send one of them to your <red>supply</>!|But don't worry, they can be retrieved later.;bottom;;;;blue;;;;;None",
            "    remove_portrait;Ivala",
            "end"
        ],
        "nid": "P1 Chest e Tutorial: Accessory"
    },
    {
        "name": "Chest key drop e Tutorial: Chest",
        "trigger": "combat_end",
        "level_nid": "P1",
        "condition": "game.check_dead(\"112\") == True and game.game_vars['ivala'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Ivala;(120,32)",
            "wait;200",
            "speak;Ivala;Aha, I see you have acquired a Chest Key.|With this item you can... open <red>Chests</>, of course.|You have to place your character on top of a Chest tile to open it.|This will consume your key.;bottom;;;;blue;;;;;None",
            "remove_portrait;Ivala",
            "wait;500",
            "flicker_cursor;5,1",
            "wait;1000"
        ],
        "nid": "P1 Chest key drop e Tutorial: Chest"
    },
    {
        "name": "Chest",
        "trigger": "Chest",
        "level_nid": "P2",
        "condition": "region.nid == 'Chest'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest",
            "give_item;{unit};Warrior_Pin",
            "remove_region;chest"
        ],
        "nid": "P2 Chest"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "P8",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;chest2",
            "give_item;{unit};Headband",
            "remove_region;chest"
        ],
        "nid": "P8 Chest2"
    },
    {
        "name": "Armory2Overworld",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;shopper;Who will shop?;{eval:[unit.nid for unit in game.get_units_in_party()]};64;v;top_left;menu_bg_base;;type_unit;3,3;;expression;backable",
            "if;game.get_unit('{eval:game.game_vars.get('_last_choice')}').team == 'player'",
            "music;Happy1;500",
            "shop;{unit};Silver_Axe,Silver_Lance,Silver_Sword,Tomahawk,Spear,Killing_Edge,Devil_Axe,Brave_Lance;armory",
            "music_fade_back",
            "game_var;_last_choice;False",
            "else",
            "end"
        ],
        "nid": "Global Armory2Overworld"
    },
    {
        "name": "Vendor2Overworld",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;shopper;Who will shop?;{eval:[unit.nid for unit in game.get_units_in_party()]};64;v;top_left;menu_bg_base;;type_unit;3,3;;expression;backable",
            "if;game.get_unit('{eval:game.game_vars.get('_last_choice')}').team == 'player'",
            "music;Happy1;500",
            "shop;{unit};Health_Potion,Large_Health_Potion,Huge_Health_Potion,Mana_Potion,Large_Mana_Potion,Huge_Mana_Potion,Shine,Elfire,Luna,Elixir,Sexy_Librarian_Glasses;vendor",
            "music_fade_back",
            "game_var;_last_choice;False",
            "else",
            "end"
        ],
        "nid": "Global Vendor2Overworld"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "P13",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close;1000",
            "wait;2000",
            "change_background",
            "change_tilemap;ik throne;reload",
            "remove_all_units",
            "load_unit;Incubus_King;enemy",
            "add_unit;Incubus_King;10,7;immediate",
            "load_unit;Iris;enemy;None",
            "add_unit;Iris;10,10;immediate",
            "make_generic;suc1;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc1;6,12;immediate",
            "make_generic;suc2;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc2;14,13;immediate",
            "make_generic;suc3;Suc_foe_1;1;enemy;None;Soldier",
            "add_unit;suc3;15,13;immediate",
            "make_generic;elite1;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite1;9,13;immediate",
            "make_generic;elite2;Suc_foe_2;1;enemy;None;Soldier",
            "add_unit;elite2;11,13;immediate",
            "center_cursor;10,18",
            "wait;3000",
            "music;Tension2",
            "transition;open;1000",
            "wait;1000",
            "center_cursor;10,10;1000",
            "wait;1000",
            "flicker_cursor;Incubus_King",
            "wait;2000",
            "multi_add_portrait;Incubus King;Left;Iris;Right",
            "expression;Iris;CloseEyes",
            "s;Iris;Master, we regret to inform you that we are being attacked.",
            "s;Incubus King;Just deal with it quickly.|I don't want anyone disturbing my Praise the Penis day.",
            "expression;Iris;OpenEyes",
            "s;Iris;I... was not informed of this matter.",
            "s;Incubus King;I just came up with it!|It's a special holiday in which I go to the top of the mountain...|...with a full erection, and then people show deference to it!",
            "s;Iris;I see.{c:wait;300} Regarding the intruders, we-",
            "expression;Incubus King;CloseEyes",
            "s;Incubus King;Psst.",
            "s;Iris;?;no_talk",
            "expression;Incubus King;OpenEyes",
            "s;Incubus King;I don't want to get <wave>pissed off</> at my special day.",
            "s;Iris;Apologies, master.|I will halt their raid on my own.",
            "wait;300",
            "multi_remove_portrait;Incubus King;Iris",
            "wait;300",
            "flicker_cursor;Iris",
            "wait;200",
            "move_unit;Iris;10,21",
            "wait;500",
            "add_portrait;Iris;Left;;CloseEyes,NoSmile",
            "wait;1000",
            "expression;Iris;OpenEyes",
            "s;Iris;Everyone, with me.|I'll activate my <red> prototype.</>",
            "transition;close;2000"
        ],
        "nid": "P13 Outro"
    },
    {
        "name": "Player in place Iris retreats VICTORY",
        "trigger": "unit_wait",
        "level_nid": "P14",
        "condition": "any(game.level.regions.get('end').contains(unit.position) for unit in game.get_player_units())",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music_clear",
            "wait;500",
            "center_cursor;Iris",
            "flicker_cursor;Iris",
            "wait;1000",
            "add_portrait;Iris;FarRight;;NoSmile,CloseEyes",
            "s;Iris;... you have come too far for me to stop you.|I only ask that you spare my people.",
            "wait;1000",
            "expression;Iris;OpenEyes",
            "s;Iris;He's upstairs.",
            "wait;1000",
            "remove_portrait;Iris",
            "wait;2000",
            "music_clear",
            "victory_screen;Victory2",
            "wait;1000",
            "win_game"
        ],
        "nid": "P14 Player in place Iris retreats VICTORY"
    },
    {
        "name": "Eggs dying removes region",
        "trigger": "unit_death",
        "level_nid": "P14",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.nid == 'egg1'",
            "remove_region;egg1",
            "elif;unit.nid == 'egg2'",
            "remove_region;egg2",
            "elif;unit.nid == 'egg3'",
            "remove_region;egg3",
            "elif;unit.nid == 'egg4'",
            "remove_region;egg4",
            "elif;unit.nid == 'egg5'",
            "remove_region;egg5",
            "else",
            "end"
        ],
        "nid": "P14 Eggs dying removes region"
    },
    {
        "name": "IK attack beta",
        "trigger": null,
        "level_nid": "P15",
        "condition": "game.level_vars['ik'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;IK attack",
            "wait;500",
            "center_cursor;Incubus_King",
            "wait;300",
            "if;game.check_alive('Mira')",
            "    move_unit;Incubus_King;Mira;warp;closest",
            "    center_cursor;Incubus_King",
            "    wait;1000",
            "    interact_unit;Incubus_King;Mira;hit1,end",
            "elif;game.check_alive('Duro')",
            "    move_unit;Incubus_King;Mira;warp;closest",
            "    wait;1000",
            "    interact_unit;Incubus_King;Duro;hit1,end",
            "end",
            "elif;game.check_alive('Monica')",
            "    move_unit;Incubus_King;Monica;warp;closest",
            "    wait;1000",
            "    interact_unit;Incubus_King;Monica;hit1,end",
            "end",
            "elif;game.check_alive('Antarion')",
            "    move_unit;Incubus_King;Antarion;warp;closest",
            "    wait;1000",
            "    interact_unit;Incubus_King;Antarion;hit1,end",
            "end",
            "elif;game.check_alive('Cassian')",
            "    move_unit;Incubus_King;Cassian;warp;closest",
            "    wait;1000",
            "    interact_unit;Incubus_King;Cassian;hit1,end",
            "end",
            "elif;game.check_alive('Lucia')",
            "    move_unit;Incubus_King;Lucia;warp;closest",
            "    wait;1000",
            "    interact_unit;Incubus_King;Lucia;hit1,end",
            "end",
            "elif;game.check_alive('Rosa')",
            "    move_unit;Incubus_King;Rosa;warp;closest",
            "    wait;1000",
            "    interact_unit;Incubus_King;Rosa;hit1,end",
            "end",
            "elif;game.check_alive('Milena')",
            "    move_unit;Incubus_King;Milena;warp;closest",
            "    wait;1000",
            "    interact_unit;Incubus_King;Milena;hit1,end",
            "end",
            "elif;game.check_alive('Simonyoung')",
            "    move_unit;Incubus_King;Simonyoung;warp;closest",
            "    wait;1000",
            "    interact_unit;Incubus_King;Simonyoung;hit1,end",
            "    if;game.current_mode.nid != 'Ironman'",
            "        activate_turnwheel",
            "    else",
            "        lose_game",
            "    end",
            "else",
            "end",
            "music_fade_back"
        ],
        "nid": "P15 IK attack beta"
    },
    {
        "name": "Chosen dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Chosen\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Chosen\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Chosen;Right;Incubus_King;Left",
            "music;Funny",
            "s;Chosen;Step aside! You're my last nuisance before my glory!",
            "s;Incubus_King;Lalalala I can't hear you over my big dick.",
            "s;Chosen;My dick is BIGGER!",
            "s;Incubus_King;No, MINE is!",
            "s;Chosen;No it's not!",
            "s;Incubus_King;Yes it IS! And it's thicker!",
            "s;Chosen;Mine GLOWS!",
            "s;Incubus_King;Amateur! My dick can vibrate at the speed of light!",
            "s;Chosen;Damnit... shut up!!",
            "multi_remove_portrait;Chosen;Incubus_King"
        ],
        "nid": "P15 Chosen dialog"
    },
    {
        "name": "Duro dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Duro\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Duro\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Duro;Right;Incubus_King;Left",
            "s;Duro;So you're the son of a bitch.|You know, my wife has really bad nightmares about you.|I'm gonna end this problem by the source!",
            "s;Incubus_King;I'll kill you and fuck your wife!",
            "s;Duro;Nice try, champ, but she doesn't have that bad of a taste in men, HAHAHAHA!|Well, she did marry me...|Anyway, you're not passing through!",
            "multi_remove_portrait;Duro;Incubus_King"
        ],
        "nid": "P15 Duro dialog"
    },
    {
        "name": "Mira dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Mira\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Mira\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Mira;Right;Incubus_King;Left",
            "s;Mira;All this time...|All this time I've been thinking about killing you!!",
            "s;Incubus_King;Damn girlie, you're on one of those days?",
            "s;Mira;Shut up!!|My parents... I was told they died fighting you...!",
            "expression;Incubus_King;CloseEyes,NoSmile",
            "s;Mira;And now it's finally my time for revenge!!",
            "s;Incubus_King;I see the semblance now.|Your father... an honorable warrior.|Your mother... a fearsome mage.",
            "s;Mira;So you...",
            "expression;Incubus_King;Smile,OpenEyes",
            "s;Incubus_King;Nah, I'm just making shit up!|Do you really think I'd remember anyone?!|I see more pussies than faces on a daily basis!",
            "s;Mira;You...",
            "multi_remove_portrait;Mira;Incubus_King"
        ],
        "nid": "P15 Mira dialog"
    },
    {
        "name": "Monica dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Monica\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Monica\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Monica;Right;Incubus_King;Left",
            "s;Monica;...;no_talk",
            "s;Incubus_King;...;no_talk",
            "s;Incubus_King;Why are you looking at me like that?!|Are you judging me?!|I'm not doing anything wrong!!|I'm the VICTIM here!|All that cheese in their asses was necessary for my plan.|It was... right? It was!|Don't make me reflect, damn you!",
            "multi_remove_portrait;Monica;Incubus_King"
        ],
        "nid": "P15 Monica dialog"
    },
    {
        "name": "Cassian dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Cassian\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Cassian\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Cassian;Right;Incubus_King;Left",
            "s;Cassian;The big bad. You'll regret messing with us!",
            "s;Incubus_King;What the fuck are you on about?|I was here minding my own business!",
            "s;Cassian;Didn't you invade and destroy a couple of countries?",
            "s;Incubus_King;Ah yeah, I did do that.",
            "s;Cassian;Yeah.",
            "s;Incubus_King;Yeah...",
            "multi_remove_portrait;Cassian;Incubus_King"
        ],
        "nid": "P15 Cassian dialog"
    },
    {
        "name": "Lucia dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Lucia\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Lucia\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Lucia;Right;Incubus_King;Left",
            "s;Lucia;You're desperate.",
            "s;Incubus_King;What?",
            "s;Lucia;Your empire is falling.|We managed to reach this far.|Who knows where the next party will stop?",
            "s;Incubus_King;I'm chill. I'll defeat the whole continent soon.",
            "s;Lucia;I don't think you can do that.|If you could, you would have done it already.",
            "s;Incubus_King;OF COURSE I CAN!|I just haven't gotten around to it...",
            "s;Lucia;Sure.",
            "multi_remove_portrait;Lucia;Incubus_King"
        ],
        "nid": "P15 Lucia dialog"
    },
    {
        "name": "Safado dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Safado\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Safado\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Safado;Right;Incubus_King;Left",
            "s;Safado;Holy FUCK he's here OH SHIT OH SHIT;;;thought_bubble",
            "s;Incubus_King;Disappear from my sight!",
            "expression;Safado;CloseEyes",
            "s;Safado;Hmph. I guess you'll never know the legendary sex position.",
            "s;Incubus_King;What?! I demand to know before I kill you!",
            "s;Safado;Ok, I got time to breath a little more.|Ugh... What do I even say now?!;;;thought_bubble",
            "expression;Safado;OpenEyes",
            "s;Safado;There is a certain... prophecy.|It speaks of a special man who will perform the legendary sex position.|Maybe you are the one, destined to unlock new positions.|I suppose you can only know how to attempt it if you leave me alive.|Yes, that is your best course of action.|I was the only one who read the... scroll about it. From my lost village.|Which means I am too valuable to die.",
            "s;Incubus_King;Are you done? I stopped listening some time ago.",
            "s;Safado;Ahh godDAMNIT I OVERCOOKED THE DELIVERYY WHY DID I COMMIT THAT MUCH IT SHOULD HAVE BEEN MORE NATURAL LIKE I WAS BEING PRESSURED TO TELL SOMETHING NOT JUST HANDLING TOO MUCH EXPOSITION AT ONCE NOW HE MUST HAVE REALIZED THE TRUTH AND I'M GONNA FUCKING DIE FOR IT AAAA;;;thought_bubble",
            "multi_remove_portrait;Safado;Incubus_King"
        ],
        "nid": "P15 Safado dialog"
    },
    {
        "name": "Escape",
        "trigger": "Escape",
        "level_nid": "P15",
        "condition": "game.level_vars['ik'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;'{unit}' == 'Simonyoung'",
            "    if;len(game.get_player_units()) > 1",
            "        add_portrait;Simonyoung;Left",
            "        s;Simonyoung;This is my responsibility. I need to assure everyone else escapes first.;;;thought_bubble",
            "        remove_portrait;Simonyoung",
            "        reset;Simonyoung",
            "    else",
            "        music_clear;1000",
            "        add_portrait;Simonyoung;Left;;NoSmile,CloseEyes",
            "        s;Simonyoung;This attempt was promising.",
            "        expression;Simonyoung;OpenEyes",
            "        s;Simonyoung;Time to prepare for the <red>next Chosen</>.",
            "        remove_portrait;Simonyoung",
            "        remove_unit;{unit};fade;fade",
            "        wait;1000",
            "        transition;close;3000",
            "        wait;1000",
            "        win_game",
            "    end",
            "else",
            "wait;1000",
            "    if;u('{unit}').lead_unit",
            "        level_var;unittraveler;u('{unit}').traveler",
            "        separate;{unit}",
            "        add_unit;{v:unittraveler};{unit};fade;closest;fade",
            "    end",
            "wait;1000",
            "    if;'{unit}' == 'Mira'",
            "        add_portrait;Mira;Left;;NoSmile,CloseEyes",
            "        s;Mira;Is there... any hope... left...",
            "        remove_portrait;Mira",
            "    elif;'{unit}' == 'Duro'",
            "        add_portrait;Duro;Left",
            "        s;Duro;Guess I'll leave this to my children, HAHAHAHA!",
            "        remove_portrait;Duro",
            "    end",
            "remove_unit;{unit};fade;fade",
            "sound;Foot Step",
            "wait;1000",
            "end"
        ],
        "nid": "P15 Escape"
    },
    {
        "name": "More enemies",
        "trigger": "phase_change",
        "level_nid": "P15",
        "condition": "game.level_vars['ik'] == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "center_cursor;Incubus_King",
            "add_portrait;Incubus_King;Right",
            "s;Incubus_King;Ultra Sluts! Make yourselves useful, for once!",
            "remove_portrait;Incubus_King",
            "center_cursor;10,35",
            "wait;1000",
            "spawn_group;elite;south;elite;normal;closest",
            "wait;1000",
            "#ik will attack next turn",
            "level_var;ik2;1",
            ""
        ],
        "nid": "P15 More enemies"
    },
    {
        "name": "IK starts attacking",
        "trigger": "phase_change",
        "level_nid": "P15",
        "condition": "game.level_vars['ik2'] == 3",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music_clear",
            "wait;1000",
            "center_cursor;Incubus_King;2000",
            "wait;1000",
            "add_portrait;Incubus_King;Right",
            "s;Incubus_King;Yaaaawn.",
            "music;IK attack",
            "s;Incubus_King;Okay, I'm ready to have some fun!",
            "change_ai;Incubus_King;IKattack"
        ],
        "nid": "P15 IK starts attacking"
    },
    {
        "name": "Rosa dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Rosa\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Rosa\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Rosa;Right;Incubus_King;Left",
            "s;Rosa;Here it is.",
            "s;Incubus_King;Ew, what's with that gross face?",
            "s;Rosa;Aw, you poor thing. It seems you lack a mirror at your home.",
            "s;Incubus_King;Very funny, bitch! You're dead meat now!",
            "s;Rosa;I'll make sure to extinguish your very core.",
            "multi_remove_portrait;Rosa;Incubus_King"
        ],
        "nid": "P15 Rosa dialog"
    },
    {
        "name": "Milena dialog",
        "trigger": "combat_start",
        "level_nid": "P15",
        "condition": "(unit.nid == \"Milena\" and unit2.nid == 'Incubus_King') or (unit.nid == 'Incubus_King' and unit2.nid == \"Milena\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Milena;Right;Incubus_King;Left",
            "s;Milena;Aaaaaa!",
            "s;Incubus_King;What are you doing with them, are you stupid?!",
            "s;Milena;You're the one with problems! I'm done living in this hell!",
            "s;Incubus_King;I understand now, you just need a good time with me.",
            "s;Milena;Back away! What I really want will never happen as long as you live!",
            "multi_remove_portrait;Milena;Incubus_King"
        ],
        "nid": "P15 Milena dialog"
    },
    {
        "name": "Only Simon alive - Minerve sacrifice",
        "trigger": "enemy_turn_change",
        "level_nid": "P15",
        "condition": "len(game.get_player_units()) == 1 and game.check_alive('Simonyoung') == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_fade_back;1000",
            "center_cursor;Incubus_King",
            "wait;500",
            "add_portrait;Incubus_King;Right",
            "s;Incubus_King;Just one pest and I can go back to Praise the Penis day!",
            "remove_portrait;Incubus_King",
            "wait;500",
            "center_cursor;Simonyoung;2000",
            "wait;1000",
            "move_unit;Incubus_King;Simonyoung;warp;closest;no_follow",
            "wait;1000",
            "s;???;No!!",
            "wait;400",
            "sound;FireBall",
            "screen_shake;200;default",
            "map_anim;AOE_Meteor;Incubus_King",
            "screen_shake_end",
            "wait;1000",
            "music;Reinforcements",
            "add_unit;Minerve_true_2;Incubus_King;warp;push;fade",
            "wait;500",
            "interact_unit;Minerve_true_2;Incubus_King;crit1",
            "wait;1000",
            "sound;Torch",
            "map_anim;AOE_Rally;Minerve_true_2",
            "wait;500",
            "if;game.check_alive('elite_1')",
            "    center_cursor;elite_1;500",
            "    kill_unit;elite_1",
            "end",
            "if;game.check_alive('elite_2')",
            "    center_cursor;elite_2;500",
            "    kill_unit;elite_2",
            "end",
            "if;game.check_alive('elite_3')",
            "    center_cursor;elite_3;500",
            "    kill_unit;elite_3",
            "end",
            "if;game.check_alive('elite_4')",
            "    center_cursor;elite_4;500",
            "    kill_unit;elite_4",
            "end",
            "wait;500",
            "center_cursor;Minerve_true_2;500",
            "u;Minerve_true_2;Left;;NoSmile,CloseEyes",
            "s;Minerve_true_2;GO, SIMON!! LEAVE!",
            "music;IK attack",
            "u;Incubus_King;Right",
            "s;Incubus_King;You... You cretin! You'll pay dearly for your treason!|I'll rip the sex off of you!",
            "r;Minerve_true_2",
            "r;Incubus_King"
        ],
        "nid": "P15 Only Simon alive - Minerve sacrifice"
    },
    {
        "name": "ik2 counter increase",
        "trigger": "enemy_turn_change",
        "level_nid": "P15",
        "condition": "game.level_vars['ik'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_level_var;ik2"
        ],
        "nid": "P15 ik2 counter increase"
    },
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "Credits1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "transition;close",
            "show_layer;mountain1",
            "show_layer;mountain2",
            "center_cursor;5,19",
            "change_background",
            "transition;open;1000",
            "center_cursor;0,15;5000",
            "add_unit;Simonyoung;0,15;fade;giveup;west",
            "music;FuckEmblem",
            "wait;1000",
            "move_unit;Simonyoung;15,16;normal;giveup;silent;no_block;no_follow",
            "center_cursor;5,0;5000;no_block",
            "credits;;The Last Emblem,Prologue",
            "wait;2000",
            "transition;close;3000",
            "skip_save;t",
            "win_game"
        ],
        "nid": "Credits1 New Event"
    },
    {
        "name": "Credits",
        "trigger": "level_start",
        "level_nid": "Credits2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;FuckEmblem",
            "#1 - simon returns to the church, meets altina",
            "show_layer;1",
            "add_unit;priest;3,3",
            "transition;open;2000",
            "wait;1000",
            "add_unit;Simonyoung;3,5;fade;giveup;south",
            "wait;500",
            "move_unit;Simonyoung;3,4;silent",
            "wait;1000",
            "add_unit;altina;4,3;fade;giveup;north",
            "wait;500",
            "move_unit;altina;4,4;silent",
            "wait;600",
            "change_team;altina;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#2 - simon+altina withered new chosen",
            "show_layer;2",
            "show_layer;2-2",
            "add_unit;Simonyoung;4,4",
            "add_unit;altina;3,4",
            "transition;open;2000",
            "wait;1000",
            "add_unit;kai;3,5",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#3 - simon gets implanted the shard",
            "show_layer;3",
            "add_unit;Simonyoung;3,5",
            "add_unit;riala;3,3",
            "transition;open;2000",
            "wait;1000",
            "move_unit;riala;3,4;silent",
            "wait;500",
            "change_team;riala;other",
            "wait;500",
            "map_anim;OverchargeAura;Simonyoung",
            "wait;400",
            "change_class;Simonyoung;IncubusKing;silent",
            "wait;1000",
            "move_unit;riala;2,4;silent",
            "move_unit;Simonyoung;3,3;normal;silent",
            "remove_unit;Simonyoung;fade;north",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#4 - simon meets aka",
            "show_layer;4",
            "add_unit;aka;4,4",
            "transition;open;2000",
            "wait;1000",
            "add_unit;Simonyoung;2,4",
            "add_unit;kai;2,5",
            "wait;500",
            "move_unit;Simonyoung;3,4;silent",
            "wait;500",
            "change_team;aka;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#5 - simon meets yarra",
            "show_layer;5",
            "add_unit;Simonyoung;3,5",
            "add_unit;aka;2,5",
            "add_unit;kai;4,5",
            "add_unit;yarra;3,3",
            "transition;open;2000",
            "credits;;based on,The last sovereign,by sierra lee",
            "wait;1000",
            "move_unit;yarra;3,4;silent",
            "wait;1000",
            "change_team;yarra;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#6 - chosen death",
            "show_layer;6",
            "add_unit;aka;4,3",
            "give_skill;aka;Poisoned;;no_banner",
            "change_team;kai;enemy",
            "add_unit;kai;3,3",
            "transition;open;2000",
            "wait;1000",
            "add_unit;Simonyoung;3,5;fade;;south",
            "add_unit;yarra;2,5;fade;;south",
            "wait;500",
            "move_unit;Simonyoung;3,4;silent",
            "wait;500",
            "map_anim;HitSpark;kai",
            "wait;300",
            "kill_unit;kai",
            "remove_skill;aka;Poisoned;no_banner",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#7 - simon meets qum",
            "show_layer;7",
            "add_unit;qum;4,3",
            "transition;open;2000",
            "wait;1000",
            "add_unit;Simonyoung;3,5;fade;;south",
            "wait;500",
            "move_unit;Simonyoung;3,3;silent",
            "wait;500",
            "change_team;qum;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#8 - simon meets megail",
            "show_layer;8",
            "add_unit;megail;3,4",
            "add_unit;Simonyoung;3,5",
            "transition;open;2000",
            "wait;1000",
            "change_team;megail;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#9 - orcent appears",
            "show_layer;9",
            "add_unit;orc1;3,4",
            "add_unit;soldier;2,4",
            "add_unit;orcent;3,3",
            "transition;open;2000",
            "wait;1000",
            "kill_unit;orc1",
            "wait;500",
            "add_unit;Simonyoung;3,5;;;south",
            "wait;1000",
            "change_team;soldier;enemy",
            "wait;500",
            "move_unit;Simonyoung;3,4;silent",
            "wait;500",
            "kill_unit;soldier",
            "wait;1000",
            "change_team;orcent;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#10 - robin",
            "show_layer;10",
            "add_unit;robin;3,4",
            "transition;open;2000",
            "credits;;based on gameplay and aesthetics from,fire emblem,by intelligent systems",
            "wait;1000",
            "add_unit;Simonyoung;3,5",
            "wait;1000",
            "change_team;robin;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#11 - hilstara",
            "show_layer;11",
            "add_unit;hilstara;3,3",
            "add_unit;Simonyoung;3,4",
            "add_unit;yarra;4,4",
            "add_unit;aka;2,4",
            "transition;open;2000",
            "wait;1500",
            "change_team;hilstara;enemy",
            "wait;1500",
            "change_team;hilstara;player",
            "wait;1500",
            "transition;close;2000",
            "remove_all_units",
            "#12 - janine",
            "show_layer;12",
            "add_unit;janine;3,3",
            "transition;open;2000",
            "wait;1000",
            "add_unit;Simonyoung;3,5",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#13 - trin",
            "show_layer;13",
            "add_unit;Simonyoung;3,3",
            "transition;open;2000",
            "wait;1000",
            "add_unit;trin;3,5",
            "wait;500",
            "move_unit;Simonyoung;3,4;silent",
            "wait;500",
            "change_team;trin;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#14 - varia",
            "show_layer;14",
            "add_unit;thug1;2,3",
            "add_unit;varia;3,3",
            "add_unit;thug2;4,3",
            "transition;open;2000",
            "wait;1000",
            "add_unit;Simonyoung;3,5",
            "wait;1000",
            "change_team;varia;enemy2",
            "wait;500",
            "move_unit;Simonyoung;3,4;silent",
            "wait;1000",
            "kill_unit;thug1",
            "kill_unit;thug2",
            "wait;1000",
            "change_team;varia;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#15 - carina",
            "show_layer;15",
            "add_unit;carina;3,4",
            "add_unit;soldier2;2,3",
            "add_unit;soldier3;4,3",
            "add_unit;Simonyoung;3,5",
            "transition;open;2000",
            "credits;;game engine,lex tallionis,by rainlash",
            "wait;1000",
            "screen_shake;300;default",
            "show_layer;15-2",
            "add_unit;seed;3,3;swoosh",
            "remove_unit;soldier2;fade",
            "remove_unit;soldier3;fade",
            "give_skill;carina;Poisoned;;no_banner",
            "wait;2000",
            "change_team;carina;player",
            "remove_skill;carina;Poisoned;no_banner",
            "kill_unit;seed",
            "wait;2000",
            "transition;close;2000",
            "remove_all_units",
            "#16 - simon capture",
            "show_layer;16",
            "add_unit;Simonyoung;3,4",
            "add_unit;yarra;2,5",
            "add_unit;aka;3,5",
            "add_unit;megail;4,5",
            "change_team;megail;player",
            "transition;open;2000",
            "wait;1000",
            "screen_shake;200",
            "add_unit;esthera;3,3;warp",
            "wait;1000",
            "remove_unit;esthera;warp",
            "remove_unit;Simonyoung;warp",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#17 - yarra balia",
            "show_layer;17",
            "add_unit;balia;3,3",
            "add_unit;orc2;4,3",
            "transition;open;2000",
            "wait;1000",
            "add_unit;yarra;3,5",
            "wait;1000",
            "move_unit;yarra;3,4;silent",
            "wait;1000",
            "change_team;balia;other",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#18 - yarra ginasta",
            "show_layer;18",
            "add_unit;yarra;2,4",
            "add_unit;ginasta;4,4",
            "transition;open;2000",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#19 - simon nalili",
            "show_layer;19",
            "add_unit;nalili;3,5",
            "add_unit;Simonyoung;2,5",
            "transition;open;2000",
            "wait;1000",
            "change_team;nalili;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#20 - vhala and dari",
            "show_layer;20",
            "add_unit;vhala;3,5",
            "add_unit;dari;4,5",
            "add_unit;Simonyoung;3,4",
            "transition;open;2000",
            "credits;;playtesting and help by,kujibiki",
            "wait;1000",
            "change_team;vhala;player",
            "change_team;dari;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#21 - elves",
            "show_layer;21",
            "add_unit;lynine;2,3",
            "add_unit;orilise;4,3",
            "add_unit;Simonyoung;3,5",
            "transition;open;2000",
            "wait;1000",
            "change_team;orilise;player",
            "change_team;lynine;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#22 - wynn",
            "show_layer;22",
            "add_unit;wynn;3,5",
            "add_unit;robin;3,3",
            "map_anim;OverchargeAura;robin;overlay;permanent",
            "add_unit;nalili;2,3",
            "map_anim;OverchargeAura;nalili;overlay;permanent",
            "add_unit;carina;4,3",
            "map_anim;OverchargeAura;carina;overlay;permanent",
            "add_unit;aka;3,4",
            "map_anim;OverchargeAura;aka;overlay;permanent",
            "transition;open;2000",
            "wait;2000",
            "change_team;wynn;player",
            "remove_map_anim;OverchargeAura;robin;overlay",
            "remove_map_anim;OverchargeAura;nalili;overlay",
            "remove_map_anim;OverchargeAura;carina;overlay",
            "remove_map_anim;OverchargeAura;aka;overlay",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#23 - doom king",
            "show_layer;23",
            "add_unit;soldier4;2,3",
            "#add_unit;mage;3,3",
            "add_unit;soldier5;4,3",
            "add_unit;orc4;2,5",
            "#add_unit;orc5;3,5",
            "add_unit;orc6;4,5",
            "transition;open;2000",
            "wait;2000",
            "screen_shake;200",
            "add_unit;doomking;3,4;warp",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "#24 - uyae",
            "show_layer;24",
            "add_unit;yarra;2,4",
            "transition;open;2000",
            "credits;;made by,decarabia",
            "wait;1000",
            "add_unit;uyae;4,4;fade;;east",
            "wait;500",
            "move_unit;uyae;3,4;normal;silent",
            "wait;1000",
            "change_team;uyae;player",
            "wait;1000",
            "transition;close;2000",
            "remove_all_units",
            "music_clear;1000",
            "#25 - ik confrontation",
            "#show_layer;25",
            "#show_layer;25-2",
            "#music;Wind;2000",
            "show_layer;25throne",
            "add_unit;ik;7,2",
            "add_group;final;final;immediate",
            "wait;1000",
            "transition;open;3000",
            "wait;2000",
            "flicker_cursor;Simonyoung",
            "wait;1000",
            "multi_add_portrait;Simon;Left;Incubus_King;Right",
            "wait;1000",
            "s;Simon;Let's end this.",
            "wait;1000",
            "multi_remove_portrait;Simon;Incubus_King",
            "wait;500",
            "move_unit;ik;7,3;no_block;no_follow",
            "move_unit;Simonyoung;7,4;no_follow",
            "wait;1000",
            "transition;close;3000",
            "kill_unit;ik",
            "wait;3000",
            "set_next_chapter;Limit",
            "win_game"
        ],
        "nid": "Credits2 Credits"
    },
    {
        "name": "talk",
        "trigger": "level_start",
        "level_nid": "Limit",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "transition;close",
            "change_background",
            "transition;open;1000",
            "add_talk;Simon;deca",
            "#hide_layer;base",
            "#show_layer;base_1"
        ],
        "nid": "Limit talk"
    },
    {
        "name": "Talk deca",
        "trigger": "on_talk",
        "level_nid": "Limit",
        "condition": "unit.nid == 'Simon' and unit2.nid == 'deca'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "s;Decarabia;Hello!|The rest of the game is not yet finished.|Would you like to return to the main menu?",
            "choice;limitmenu;Go back to the title screen?;Yes,No",
            "if;'{v:_last_choice}' == 'No'",
            "    s;Decarabia;Let's share this moment of contemplation.",
            "    center_cursor;6,0;4000;no_block",
            "    music;Sea;2000",
            "    move_unit;Simon;7,7;silent;no_block",
            "    wait;4000",
            "    s;;...;;;cinematic",
            "    music_fade_back;2000",
            "    center_cursor;Simon;4000",
            "else",
            "    s;Decarabia;I hope to see you again!",
            "    wait;1000",
            "    main_menu",
            "end"
        ],
        "nid": "Limit Talk deca"
    },
    {
        "name": "Overworld",
        "trigger": "overworld_start",
        "level_nid": "P14",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "sound;MapHeal",
            "reveal_overworld_road;P13;P14",
            "wait;1000"
        ],
        "nid": "P14 Overworld"
    },
    {
        "name": "Recruit Safado - Monica",
        "trigger": "on_talk",
        "level_nid": "P5",
        "condition": "unit.nid == 'Monica' and unit2.nid == 'Safado'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Reinforcements",
            "add_portrait;Monica;Left",
            "add_portrait;Safado;Right",
            "s;Safado;A priestess, hmm? This is no place for you, dear.",
            "s;Monica;...;no_talk",
            "s;Safado;...;no_talk",
            "expression;Safado;CloseEyes",
            "s;Safado;Oh shit, she must be mad. I might have been too quick to avaliate her!!|Just because she is wearing the church's clothes shouldn't mean she's a nun!|But... it's a safe assumption to make, isn't it?!|So maybe she is mad because I was too condescending?|Stupid me, she must be here for a reason!|And why did I try that hard calling her \"dear\"?!;;;thought_bubble",
            "expression;Safado;OpenEyes",
            "s;Monica;...;no_talk",
            "s;Safado;Regardless, your presence here brings me joy.|Might I inquire you on the purpose of your group?",
            "expression;Monica;CloseEyes",
            "s;Monica;...;no_talk",
            "expression;Safado;CloseEyes",
            "s;Safado;It's over. It's already over for me.|She is not giving me shit. Who would just straight up tell intel to their enemy?!|I should have known. Why did I even ask? Do I WANT to be embarrassed?|What if she never even answers me? Do I just attack?|But then, if I attacked, just how patethic would I be...|I mean, I'm pretty low already, but it should have a limit, right?;;;thought_bubble",
            "expression;Monica;OpenEyes",
            "expression;Safado;OpenEyes",
            "s;Safado;...;no_talk",
            "s;Monica;...;no_talk",
            "expression;Safado;CloseEyes",
            "s;Safado;Maybe... Maybe this is where I should draw the line?|Is this what she is truly speaking without words?|That I should search within myself for the answers?|Whatever the case, I should just decide already...|I don't want to stare at her then just walk away...|I'll feel pretty embarrassed if the rest of the guys see me just awkwardly leaving a battle...;;;thought_bubble",
            "expression;Safado;OpenEyes",
            "expression;Monica;Smile",
            "s;Monica;...;no_talk",
            "expression;Safado;CloseEyes",
            "s;Safado;Wait... if I just join them, that'll explain everything!|I wouldn't have to awkwardly explain what happened to my colleagues!|Yeah, then it would be the hidden option, I'll neither have to attack or flee from her!|I'll just... casually make myself an ally... yeah.;;;thought_bubble",
            "expression;Safado;OpenEyes",
            "s;Safado;I have felt a higher calling through you, sister.|Thank you for the moment of enlightment. Let me join you through your ordeals.",
            "multi_remove_portrait;Safado;Monica",
            "change_team;Safado;player",
            "sound;Level Up",
            "alert;Safado has joined your party!",
            "music_fade_back",
            "remove_talk;Lucia;Safado",
            "remove_talk;Monica;Safado"
        ],
        "nid": "P5 Recruit Safado - Monica"
    },
    {
        "name": "Milena recruit - Mira",
        "trigger": "on_talk",
        "level_nid": "P9",
        "condition": "unit.nid == 'Mira' and unit2.nid == 'Milena'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Reinforcements",
            "multi_add_portrait;Mira;Left;Milena;Right",
            "s;Milena;*Sigh*... Ok, let's fight...",
            "s;Mira;Umm... I'm sorry, but I need to...",
            "s;Milena;It's a pity, but that's just what happens, right?|{c:expression;Milena;CloseEyes,NoSmile}Maybe some dreams are simply impossible...",
            "expression;Mira;CloseEyes",
            "s;Mira;...;no_talk",
            "expression;Mira;OpenEyes",
            "expression;Milena;OpenEyes",
            "bop_portrait;Mira",
            "s;Mira;I!{c:wait;300} I... am also fighting for my dream! You... shouldn't just give up!!",
            "s;Milena;Oh!{c:wait;400} Well, you're right, girl!",
            "s;Mira;It's... scary... and difficult...{c:wait;400} but we have to move forward!!",
            "s;Milena;You're a strong one, aren't you? That's too bad we're on opposite sides here, hehe~",
            "expression;Mira;CloseEyes",
            "s;Mira;...I'm sorry... we could never be friends...|...who I want to destroy is the one you want to protect...",
            "expression;Milena;CloseEyes",
            "s;Milena;Yes... our dreams are opposed... {c:wait;500}{c:expression;Milena;OpenEyes}Wait, what?|Who are you talking about?",
            "expression;Mira;OpenEyes",
            "s;Mira;The Incubus King, the root of all evil!",
            "s;Milena;Oh, I for sure agree he needs to be gone!",
            "s;Mira;Umm... really? But you are fighting for him...",
            "s;Milena;Haha, do you think everyone here is a hivemind? That would be silly!|Many of us are pissed at him, but we're just too weak to fight back!|At least *I* know I am... I'd much rather dance and sing!",
            "s;Mira;Oh... that's nice.",
            "s;Milena;Yep, that's how I keep myself sane around here.|What I really want is to explore the world. But that's an impossible dream with this war!|So if you want him gone, you for sure have my support!",
            "s;Mira;That's wonderful! Then we can become friends!",
            "bop_portrait;Milena",
            "s;Milena;Yay! Let's work on our dreams together!",
            "multi_remove_portrait;Mira;Milena",
            "change_team;Milena;player",
            "sound;Level Up",
            "alert;Milena has joined your party!",
            "wait;2000",
            "remove_talk;Mira;Milena",
            "remove_talk;Cassian;Milena"
        ],
        "nid": "P9 Milena recruit - Mira"
    },
    {
        "name": "Boss quote - Chosen",
        "trigger": "combat_start",
        "level_nid": "P3",
        "condition": "(unit.nid == \"Chosen\" and unit2.nid == 'SpiderEmpress')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "add_portrait;Chosen;Right,Bottom;;Smile",
            "s;Chosen;This is payback for earlier!",
            "remove_portrait;Chosen"
        ],
        "nid": "P3 Boss quote - Chosen"
    },
    {
        "name": "Boss quote - Cassian",
        "trigger": "combat_start",
        "level_nid": "P4",
        "condition": "(unit.nid == \"Cassian\" and unit2.nid == 'Crusher') or (unit.nid == 'Crusher' and unit2.nid == \"Cassian\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Crusher;Left,Bottom;Cassian;Right,Bottom",
            "s;Cassian;I guess the tables have turned now, hahaha!",
            "s;Crusher;Gah, you're a waste of breath. Rot in hell!",
            "multi_remove_portrait;Crusher;Cassian"
        ],
        "nid": "P4 Boss quote - Cassian"
    },
    {
        "name": "Boss quote - Lucia",
        "trigger": "combat_start",
        "level_nid": "P4",
        "condition": "(unit.nid == \"Lucia\" and unit2.nid == 'Crusher') or (unit.nid == 'Crusher' and unit2.nid == \"Lucia\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Crusher;Left,Bottom;Lucia;Right,Bottom",
            "s;Lucia;{tgm}Hmm...{tgm}{c:wait;300} You're calmer than I expected.",
            "s;Crusher;You called for help, I don't give a shit! You're still a bunch of insects I get to crush!",
            "multi_remove_portrait;Crusher;Lucia"
        ],
        "nid": "P4 Boss quote - Lucia"
    },
    {
        "name": "Boss quote - Antarion",
        "trigger": "combat_start",
        "level_nid": "P4",
        "condition": "(unit.nid == \"Antarion\" and unit2.nid == 'Crusher') or (unit.nid == 'Crusher' and unit2.nid == \"Antarion\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Crusher;Left,Bottom;Antarion;Right,Bottom",
            "s;Antarion;One more villain about to fall from my blade!|I shudder to imagine what would happen to the village women, if not for me.|Frankly, as their savior, they should dedicate the rest of their lives to me.",
            "s;Crusher;...am I really the villain here?",
            "multi_remove_portrait;Crusher;Antarion"
        ],
        "nid": "P4 Boss quote - Antarion"
    },
    {
        "name": "Wrecker - Simon",
        "trigger": "combat_start",
        "level_nid": "P5",
        "condition": "(unit.nid == \"Simonyoung\" and unit2.nid == 'Wrecker') or (unit.nid == 'Wrecker' and unit2.nid == \"Simonyoung\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Wrecker;Left,Bottom;Simonyoung;Right,Bottom",
            "s;Wrecker;WRECKER ANGRY!",
            "s;Simonyoung;I understand you are upset. Perhaps we should talk first.",
            "s;Wrecker;Wrecker not good at talk...",
            "s;Simonyoung;We are not competing, this is a matter of reaching mutual understanding.|We can resolve...",
            "s;Wrecker;No! NO! Just WRECK!",
            "expression;Simonyoung;CloseEyes",
            "s;Simonyoung;...;no_talk",
            "multi_remove_portrait;Wrecker;Simonyoung"
        ],
        "nid": "P5 Wrecker - Simon"
    },
    {
        "name": "Boss quote - Safado",
        "trigger": "combat_start",
        "level_nid": "P5",
        "condition": "(unit.nid == \"Safado\" and unit2.nid == 'Plank') or (unit.nid == 'Plank' and unit2.nid == \"Safado\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Plank;Left,Bottom;Safado;Right,Bottom",
            "s;Plank;Wait a minute, aren't you the milk boy?!|Are you rebelling because we're short on milk?!",
            "s;Safado;Who I am is not of your concern anymore.|Right now we are opponents, and we will engage in combat as such.",
            "expression;Safado;CloseEyes",
            "s;Safado;Holy shit, I hate these guys. I just asked ONCE.|Only one time. I didn't even demand or anything. That was just a question.|And they're still hung up on it. Unbelievable.|Who else knows?! Fuck...|Good riddance I'll be gone soon!;;;thought_bubble",
            "multi_remove_portrait;Wrecker;Safado"
        ],
        "nid": "P5 Boss quote - Safado"
    },
    {
        "name": "Boss quote - Mira",
        "trigger": "combat_start",
        "level_nid": "P8",
        "condition": "(unit.nid == \"Mira\" and unit2.nid == 'Ogre1') or (unit.nid == 'Ogre1' and unit2.nid == \"Mira\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Mira;Right,Bottom",
            "s;Mira;G-get out of my way!{c:wait;400} You won't stop my revenge!",
            "remove_portrait;Mira"
        ],
        "nid": "P8 Boss quote - Mira"
    },
    {
        "name": "Minerve - Duro",
        "trigger": "combat_start",
        "level_nid": "P9",
        "condition": "(unit.nid == \"Duro\" and unit2.nid == 'Minerve') or (unit.nid == 'Minerve' and unit2.nid == \"Duro\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Minerve;Left,Bottom;Duro;Right,Bottom",
            "s;Duro;Keep your stuff away from me, will you? I'm too old to play with magic, HAHAHA!",
            "s;Minerve;Aww, you don't seem old... But let me confirm, strip your armor please~",
            "multi_remove_portrait;Minerve;Duro"
        ],
        "nid": "P9 Minerve - Duro"
    },
    {
        "name": "Minerve - Antarion",
        "trigger": "combat_start",
        "level_nid": "P9",
        "condition": "(unit.nid == \"Antarion\" and unit2.nid == 'Minerve') or (unit.nid == 'Minerve' and unit2.nid == \"Antarion\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Minerve;Left,Bottom;Antarion;Right,Bottom",
            "s;Antarion;With beauty such as yourself, it is but a shame we're on opposite sides.|I am, however, a merciful man. With my great skill I shall swoon you over to my side!",
            "s;Minerve;That's sweet~ but I'm not reeally interested, sorry!",
            "expression;Antarion;NoSmile",
            "s;Antarion;H-how come?! I thought your kind would be throwing themselves at me!",
            "s;Minerve;Hehehe, you lack a certain seasoning I enjoy~",
            "multi_remove_portrait;Minerve;Antarion"
        ],
        "nid": "P9 Minerve - Antarion"
    },
    {
        "name": "test",
        "trigger": "level_start",
        "level_nid": "Title",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_weather;smoke;10,7",
            "show_layer;skybox",
            "show_layer;mtn",
            "show_layer;ground1",
            "show_layer;ground2",
            "show_layer;cliff",
            "show_layer;ruins",
            "show_layer;details2",
            "show_layer;mtn2",
            ""
        ],
        "nid": "Title test"
    },
    {
        "name": "Minerve_true random teleport",
        "trigger": "phase_change",
        "level_nid": "P12",
        "condition": "game.level_vars['minerveattacked'] == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;200",
            "lvar;minerveteleport;game.get_random_choice([1,2,3,4,5,6,7,8])",
            "wait;300",
            "center_cursor;Minerve_true",
            "wait;300",
            "if;{v:minerveteleport} == 1",
            "    move_unit;Minerve_true;1,1;warp;closest;no_follow",
            "elif;{v:minerveteleport} == 2",
            "    move_unit;Minerve_true;2,12;warp;closest;no_follow",
            "elif;{v:minerveteleport} == 3",
            "    move_unit;Minerve_true;10,3;warp;closest;no_follow",
            "elif;{v:minerveteleport} == 4",
            "    move_unit;Minerve_true;9,11;warp;closest;no_follow",
            "elif;{v:minerveteleport} == 5",
            "    move_unit;Minerve_true;14,2;warp;closest;no_follow",
            "elif;{v:minerveteleport} == 6",
            "    move_unit;Minerve_true;13,10;warp;closest;no_follow",
            "elif;{v:minerveteleport} == 7",
            "    move_unit;Minerve_true;18,5;warp;closest;no_follow",
            "elif;{v:minerveteleport} == 8",
            "    move_unit;Minerve_true;20,9;warp;closest;no_follow",
            "end",
            "wait;500"
        ],
        "nid": "P12 Minerve_true random teleport"
    },
    {
        "name": "Minerve_true attacked for the first time",
        "trigger": "combat_end",
        "level_nid": "P12",
        "condition": "unit2.nid == 'Minerve_true' and u('Minerve_true').get_hp() >= 1 and (u('Minerve_true').get_hp() < u('Minerve_true').get_max_hp())",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;minerveattacked;1",
            "add_portrait;Minerve_true;Left",
            "s;Minerve_true;Ohh, you caught me~|I better change my plan before you hurt me more...",
            "remove_portrait;Minerve_true",
            "wait;400",
            "move_unit;Minerve_true;22,13;warp;push;no_follow",
            "change_stats;Minerve_true;MOV,-99;immediate",
            "wait;500",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop"
        ],
        "nid": "P12 Minerve_true attacked for the first time"
    },
    {
        "name": "Trin setup",
        "trigger": "level_start",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_talk;Trin;t1",
            "add_talk;Trin;t2"
        ],
        "nid": "DEBUG Trin setup"
    },
    {
        "name": "Trin t1",
        "trigger": "on_talk",
        "level_nid": "DEBUG",
        "condition": "unit.nid == 'Trin' and unit2.nid == 't1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Trin;Left",
            "s;Trin;Do I copy this sucker?",
            "choice;trincopy;Copy this unit?;Yes,No;backable;arrows",
            "if;'{v:_last_choice}' == 'Yes'",
            "    music;Defense;1000",
            "    center_cursor;t1;500",
            "    wait;200",
            "    s;Trin;You're mine now!",
            "    wait;200",
            "    map_anim;AOE_Rally;t1",
            "    sound;ShadowshotHit",
            "    change_team;t1;other",
            "    wait;1000",
            "    remove_talk;Trin;t1",
            "else",
            "end",
            "music_fade_back;1000"
        ],
        "nid": "DEBUG Trin t1"
    },
    {
        "name": "New Event",
        "trigger": null,
        "level_nid": "DEBUG",
        "condition": "",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "DEBUG New Event"
    },
    {
        "name": "Reminder for people to get near IK",
        "trigger": "turn_change",
        "level_nid": "P15",
        "condition": "game.turncount == 5 and game.level_vars['ik'] == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "center_cursor;Chosen",
            "wait;500",
            "add_portrait;Chosen;Left",
            "s;Chosen;Come on!|<red>Let's get as close as possible</> to that assface!|My epic showdown needs witnesses!",
            "remove_portrait;Chosen",
            "wait;1000"
        ],
        "nid": "P15 Reminder for people to get near IK"
    },
    {
        "name": "pillar1",
        "trigger": "unit_death",
        "level_nid": "P14",
        "condition": "unit.nid == 'pillar1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;100",
            "center_cursor;pillar1;100",
            "map_anim;Snag;pillar1",
            "sound;VillageDestroyed",
            "hide_layer;pillar1A",
            "screen_shake;100",
            "show_layer;pillar1B",
            "wait;100"
        ],
        "nid": "P14 pillar1"
    },
    {
        "name": "pillar2",
        "trigger": "unit_death",
        "level_nid": "P14",
        "condition": "unit.nid == 'pillar2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;100",
            "center_cursor;pillar2;100",
            "map_anim;Snag;pillar2",
            "sound;VillageDestroyed",
            "hide_layer;pillar2A",
            "screen_shake;100",
            "show_layer;pillar2B",
            "wait;100"
        ],
        "nid": "P14 pillar2"
    },
    {
        "name": "pillar3",
        "trigger": "unit_death",
        "level_nid": "P14",
        "condition": "unit.nid == 'pillar3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;100",
            "center_cursor;pillar3;100",
            "map_anim;Snag;pillar3",
            "sound;VillageDestroyed",
            "hide_layer;pillar3A",
            "screen_shake;100",
            "show_layer;pillar3B",
            "wait;100"
        ],
        "nid": "P14 pillar3"
    },
    {
        "name": "pillar4",
        "trigger": "unit_death",
        "level_nid": "P14",
        "condition": "unit.nid == 'pillar4'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;100",
            "center_cursor;pillar4;100",
            "map_anim;Snag;pillar4",
            "sound;VillageDestroyed",
            "hide_layer;pillar4A",
            "screen_shake;100",
            "show_layer;pillar4B",
            "wait;100"
        ],
        "nid": "P14 pillar4"
    },
    {
        "name": "CommandSwap",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Preparation;1000",
            "center_cursor;{target}",
            "level_var;swap_gray;0",
            "    if;game.get_unit(\"{eval: target.nid}\").finished == True",
            "        level_var;swap_gray;1",
            "    end",
            "    if;u('{eval: target.nid}').lead_unit",
            "        level_var;swap_traveler;u('{eval: target.nid}').traveler",
            "        separate;{eval: target.nid}",
            "        add_unit;{v:swap_traveler};{eval: target.nid};fade;closest;fade",
            "    end",
            "#falas de personagens",
            "add_portrait;{target};Left;left",
            "s;{target};{e: \"Let me go behind their backs!\" if '{target}' == 'Aka' else \"Oh... Was I not good enough?\" if '{target}' == 'Altina' else \"Finally\" if '{target}' == 'Balia' else \"I see, I should support the backline too\"  if '{target}' == 'Carina' else \"Ok! I smell something fishy out there!\" if '{target}' == 'Dari' else \"I trust your judgement. Back to strategizing behind the scenes...\" if '{target}' == 'Hilstara' else \"Oh, I wanted to see more of the action, but that's okay!\" if '{target}' == 'Lynine' else \"Aww, but Daddy...\" if '{target}' == 'Nalili' else \"Understood. It seems this is not when I meet my demise.\" if '{target}' == 'Orcent' else \"Hmm. This is not the end they'll get from me.\" if '{target}' == 'Orilise' else \"Okay! Cumdump will give hugs to the others!\" if '{target}' == 'Qum' else \"I'll scan our surroundings. Be careful, everyone.\" if '{target}' == 'Riala' else \"Got it. Expect my report soon.\" if '{target}' == 'Robin' else \"Really? You pussy.\" if '{target}' == 'Trin' else \"This is- Forgive me, I value your plans. I will follow your instructions.\" if '{target}' == 'Uyae' else \"Seems like I got lucky once again.\" if '{target}' == 'Varia' else \"I hope you've put careful thought into this move.\" if '{target}' == 'Vhala' else \"Well, I had my fun.\" if '{target}' == 'Wynn' else \"If you say so, Simon!\" if '{target}' == 'Yarra' else \"Whaat?\"}",
            "    wait;1000",
            "    # Show menu of undeployed player units to choose a replacement",
            "    choice;replacement;Choose replacement:;{eval:[u.nid for u in game.get_units_in_party() if not u.position]};64;v;center;menu_bg_base;;type_unit;3,3;center;expression;",
            "# Save numeric coords (safe to store)",
            "level_var;swap_x;{eval: target.position[0]}",
            "level_var;swap_y;{eval: target.position[1]}",
            "",
            "# falas substituto",
            "add_portrait;{v:replacement};Right;right",
            "s;{v:replacement};{e: \"My turn, huh? I won't mess it up!\" if '{v:replacement}' == 'Aka' else \"Oh! Leave it to me!\" if '{v:replacement}' == 'Altina' else \"Are you sure? This is too boring...\" if '{v:replacement}' == 'Balia' else \"I'm coming to your aid! ...and no comment on that, Yarra!\" if '{v:replacement}' == 'Carina' else \"I'll show them what to fear!\" if '{v:replacement}' == 'Dari' else \"Stand behind me! Mostly Simon.\" if '{v:replacement}' == 'Hilstara' else \"It's now or never, everyone!\" if '{v:replacement}' == 'Lynine' else \"Yes!! Taste my luscious sword!\" if '{v:replacement}' == 'Nalili' else \"I shall do my utmost to effectuate your plans.\" if '{v:replacement}' == 'Orcent' else \"Nice timing. I've thought a couple of ways to finish this.\" if '{v:replacement}' == 'Orilise' else \"Yay! Cumdump will play with Simon and friends!\" if '{v:replacement}' == 'Qum' else \"Let's proceed with the next stage of our strategy.\" if '{v:replacement}' == 'Riala' else \"Understood, father. The spells are ready.\" if '{v:replacement}' == 'Robin' else \"FINALLY I get to wreck some shit around!\" if '{v:replacement}' == 'Trin' else \"It is an honour. Allow me to help my nestmates!\" if '{v:replacement}' == 'Uyae' else \"Thanks for clearing the way, now it's my time to shine!\" if '{v:replacement}' == 'Varia' else \"Follow my lead, everyone. Just don't get too close.\" if '{v:replacement}' == 'Vhala' else \"Wynn the magnificent enters the scene!\" if '{v:replacement}' == 'Wynn' else \"The best succubus has finally arrived!\" if '{v:replacement}' == 'Yarra' else \"Ok!\"}",
            "move_portrait;{target};CenterRight;no_block",
            "move_portrait;{v:replacement};CenterLeft",
            "wait;300",
            "",
            "",
            "# Remove the currently-deployed unit (target)",
            "remove_unit;{eval: target.nid};fade",
            "",
            "# Add the chosen undeployed ally at the same tile",
            "add_unit;{v:replacement};({v:swap_x},{v:swap_y});fade",
            "",
            "screen_shake;100;no_block",
            "sound;CutinCrit",
            "wait;500",
            "move_portrait;{target};OffscreenRight;no_block",
            "move_portrait;{v:replacement};OffscreenLeft;no_block",
            "wait;200",
            "remove_all_portraits",
            "wait;1000",
            "if;{v:swap_gray} == 1",
            "    has_finished;{v:replacement}",
            "end",
            "music_fade_back",
            "wait;1000"
        ],
        "nid": "Global CommandSwap"
    },
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "teste2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#prep;t",
            "give_skill;Aka;Deathblow;;no_banner",
            "give_skill;Aka;Flourished_Flurry;;no_banner",
            "#set_current_hp;Marlo;2",
            "add_talk;Orilise;Lynine",
            "add_talk;Lynine;Orilise",
            "enable_turnwheel;t",
            "enable_supports;t",
            "unlock_support_rank;Simon;Yarra;A",
            "unlock_support_rank;Simon;Aka;B",
            "unlock_support_rank;Simon;Robin;C",
            "unlock_support_rank;Simon;Qum;C",
            "unlock_support_rank;Simon;Hilstara;C",
            "unlock_support_rank;Simon;Balia;C",
            "unlock_support_rank;Simon;Wynn;C",
            "set_current_mana;Simon;12",
            "give_skill;Simon;Emergency_Shelter_buff;;no_banner",
            "give_skill;Simon;Rally_Resistance_buff;;no_banner",
            "give_skill;Simon;Provoked;;no_banner",
            "give_skill;Simon;Defiant_Strike_buff;;no_banner",
            "give_skill;Simon;Strength_Penalty;;no_banner",
            "give_item;Robin;Scroll_Bolting;;no_banner",
            "give_item;Robin;Scroll_Shine;;no_banner",
            "set_current_hp;101;1",
            "set_current_hp;102;12",
            "add_talk;Simon;Wynn",
            "give_skill;Orcent;Snipe_Target;;no_banner",
            "give_skill;Dari;Scout;;no_banner",
            "give_skill;Balia;Intervention;;no_banner",
            "give_skill;Hilstara;Mighty_Bash;;no_banner",
            "give_skill;Ginasta;Agile_Guard;;no_banner",
            "give_item;Simon;manauses;;no_banner",
            "give_skill;Orilise;Provoke;;no_banner",
            "give_skill;Orilise;Irritate;;no_banner",
            "give_skill;Lynine;Emergency_Shelter;;no_banner",
            "give_skill;Lynine;Affiliate_skill;;no_banner",
            "give_skill;Balia;Summon_orc;;no_banner",
            "give_skill;Wynn;Bone_stack;;no_banner",
            "give_skill;Lynine;Succubus_Growth;;no_banner",
            "give_skill;Simon;Multitask;;no_banner",
            "give_skill;Trin;Coated_weapon;;no_banner",
            "give_skill;Uyae;Stance_Switch;;no_banner",
            "set_current_hp;Simon;2",
            "give_skill;Yarra;combattest;;no_banner",
            "give_skill;Wynn;Efficient_Disposal;;no_banner",
            "give_skill;Aka;Sneaky_Stabs;;no_banner",
            "give_skill;Uyae;Agility_synergy;;no_banner",
            "give_skill;Altina;Elven_Trio;;no_banner",
            "give_skill;Carina;Burst_Cleanse;;no_banner",
            "give_skill;Lynine;Overgasm_Info;;no_banner",
            "give_skill;Megail;Deep_Loot;;no_banner",
            "give_skill;Wynn;Orc_Cauldron;;no_banner"
        ],
        "nid": "teste2 New Event"
    },
    {
        "name": "ReplaceProtect",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Loop through all allied units on the field",
            "for;ALLY;[u.nid for u in game.get_player_units() if u.nid != unit.nid]",
            "    # Check if this ally has the Protected skill",
            "    if;has_skill(game.get_unit('{ALLY}'), 'Protected')",
            "        remove_skill;{ALLY};Protected",
            "    end",
            "endf"
        ],
        "nid": "Global ReplaceProtect"
    },
    {
        "name": "Remove revive",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;{unit};Revive_effect;no_banner",
            "wait;200",
            "add_portrait;{unit};RightCorner;;NoSmile,CloseEyes",
            "s;{unit};{e: \"Shoot. Sorry. Thanks for covering my ass, Carina!\" if '{unit}' == 'Aka' else \"I... It won't happen again!\" if '{unit}' == 'Altina' else \"That was... unpleasant.\" if '{unit}' == 'Balia' else \"Ouch!\" if '{unit}' == 'Dari' else \"Tsc. Can't let my years catch up. Thanks, Carina.\" if '{unit}' == 'Hilstara' else \"AAAAH!\" if '{unit}' == 'Lynine' else \"That's what I call sexy teamwork! Now time for retribution!\" if '{unit}' == 'Nalili' else \"My erstwhile existence was but a shadow of what life has become. I cannot afford to forfeit my purpose.\" if '{unit}' == 'Orcent' else \"My mistake. Don't let this get to your head, otherwise you might pay dearly.\" if '{unit}' == 'Orilise' else \"Oh! Did Cumdump make a whoopsies?\" if '{unit}' == 'Qum' else \"It seems I underestimated them. I'm glad for your assistance, Carina.\" if '{unit}' == 'Riala' else \"Forgive me, everyone. I should have been more careful.\" if '{unit}' == 'Robin' else \"Guess what, cocksucer? You have to deal with more of me!\" if '{unit}' == 'Trin' else \"I will not back down yet. This is for my nestmates!\" if '{unit}' == 'Uyae' else \"Guess I got lucky, huh? As always.\" if '{unit}' == 'Varia' else \"Thank you, Carina. I'll seek a better position.\" if '{unit}' == 'Vhala' else \"Argh, strong idiots... Thankfully I have brilliant teammates!\" if '{unit}' == 'Wynn' else \"Carinaa! I could kiss you right now! And a lot more later, once I handle this first...\" if '{unit}' == 'Yarra' else \"I don't know what I would do without you, Carina.\" if '{unit}' == 'Simon' else \"Thanks for the second chance!\"}",
            "wait;100",
            "remove_portrait;{unit}",
            "wait;200"
        ],
        "nid": "Global Remove revive"
    },
    {
        "name": "Scroll Test",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_item;{target};ArcaneBolting",
            "remove_item;{target};ArcaneBolting;no_banner",
            "add_tag;{target};Bolting"
        ],
        "nid": "Global Scroll Test"
    },
    {
        "name": "Scroll Bolting",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "sound;Item",
            "alert;{target} learned Bolting!;ArcaneBolting",
            "add_tag;{target};Bolting"
        ],
        "nid": "Global Scroll Bolting"
    },
    {
        "name": "Scroll Shine",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "sound;Item",
            "alert;{target} learned Shine!;DivineShine",
            "add_tag;{target};Shine_scroll"
        ],
        "nid": "Global Scroll Shine"
    },
    {
        "name": "Scroll Physic",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "sound;Item",
            "alert;{target} learned Physic!;DivinePhysic",
            "add_tag;{target};Physic_scroll"
        ],
        "nid": "Global Scroll Physic"
    },
    {
        "name": "Orcent Brute remove calm stack and move again",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Orcent;Calm_Stack;1;no_banner",
            "",
            "#level_var;brutestacks;{eval: item_funcs.num_stacks(u('Orcent'), 'Brute_Stack')}",
            "",
            "#wait;400",
            "#choice;orcentmove;Move again?;Yes,No",
            "#if;'{v:_last_choice}' == 'Yes'",
            "#    wait;200",
            "#    reset;Orcent",
            "#    wait;200",
            "#    set_current_hp;Orcent;{eval: game.get_unit('Orcent').get_hp() - (5 * {v:brutestacks})}",
            "#end"
        ],
        "nid": "Global Orcent Brute remove calm stack and move again"
    },
    {
        "name": "Orcent Calm remove brute stack",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Orcent;Brute_Stack;1;no_banner"
        ],
        "nid": "Global Orcent Calm remove brute stack"
    },
    {
        "name": "Orcent check brute stack berserk",
        "trigger": "combat_end",
        "level_nid": null,
        "condition": "unit.nid == 'Orcent' or unit2.nid == 'Orcent'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{eval: item_funcs.num_stacks(u('Orcent'), 'Brute_Stack')} == 5",
            "    give_skill;Orcent;Confused;;no_banner",
            "end"
        ],
        "nid": "Global Orcent check brute stack berserk"
    },
    {
        "name": "Orcent check calm stack sleep",
        "trigger": "combat_end",
        "level_nid": null,
        "condition": "unit.nid == 'Orcent' or unit2.nid == 'Orcent'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{eval: item_funcs.num_stacks(u('Orcent'), 'Calm_Stack')} == 5",
            "    give_skill;Orcent;Sleep;;no_banner",
            "end"
        ],
        "nid": "Global Orcent check calm stack sleep"
    },
    {
        "name": "Orcent Plenitude",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "any(u.nid == 'Orcent' and u.position for u in game.get_units_in_party())",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;brutestacks;{eval: item_funcs.num_stacks(u('Orcent'), 'Brute_Stack')}",
            "level_var;calmstacks;{eval: item_funcs.num_stacks(u('Orcent'), 'Calm_Stack')}",
            "level_var;orcentstacks;{e: {v:brutestacks} + {v:calmstacks}}",
            "if;{v:brutestacks} == {v:calmstacks} and {v:orcentstacks} > 0",
            "    give_skill;Orcent;Plenitude",
            "end"
        ],
        "nid": "Global Orcent Plenitude"
    },
    {
        "name": "Orcent Reflection",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "music;Preparation;500",
            "add_portrait;Orcent;CenterLeft;;CloseEyes",
            "choice;orcentreflection;Reflect for which purpose?;Reduce <red>Brutality</>,Diminish <blue>Serenity</>,Decrease both",
            "if;'{v:_last_choice}' == 'Reduce <red>Brutality</>'",
            "    remove_skill;Orcent;Brute_Stack;no_banner",
            "elif;'{v:_last_choice}' == 'Diminish <blue>Serenity</>'",
            "    remove_skill;Orcent;Calm_Stack;no_banner",
            "else",
            "    remove_skill;Orcent;Brute_Stack;no_banner",
            "    remove_skill;Orcent;Calm_Stack;no_banner",
            "end",
            "wait;500",
            "",
            "level_var;orcentmonologue;{e: game.get_random(1, 5)}",
            "if;'{v:orcentmonologue}' == 1",
            "s;Orcent;There is no doubt within me that our pursuit is aimed toward a better world.|With the Incubus Emperor's fall, Arclent may finally begin to heal from its long and grievous afflictions.|Yet, I am not naive enough to believe he was the sole cause of our plight.|Though many evils sprang from his reign, he was not the root of all corruption.|Setting aside the myriad ethical considerations, he undeniably shaped the landscape, the very ecosystem of our world, instilling a new order throughout his reign.|This act unquestionably brought repercussions both tangible and, perhaps, unfathomable.|Were all the fruits of this vile tree rotten?|No, not entirely.|Yet no sweetness in the fruit can justify the devastation wrought by its accursed roots.|In felling this tree, we have also severed the potential for more sweet fruits to bloom.|But he, too, sabotaged futures, eliminated lives beyond comprehension.|This does not make us equals, but only underscores the futility of such comparisons.|To even entertain the notion of stasis, as a means to preserve possibility, is paradoxical and wholly antithetical to life itself.|A part of me clings to the hope that enough of history will endure to remember what was wrought.|It need not, nor should it, stand in defense of all that occurred.|Rather, it should stand as a grim reminder of the darkness we may yet be capable of.|And, perhaps, to honor those who, whether able or not, sought to shine amidst the oppressive shadow of that vicious tree.;;;thought_bubble;no_sound;no_talk",
            "elif;'{v:orcentmonologue}' == 2",
            "s;Orcent;Power is a slippery notion, forever shifting like silt in a riverbed.|Many deem it synonymous with brute force, the unbridled faculty to subdue, to cleave, to stamp one's will upon the fabric of things.|Yet I am not persuaded that such violence is its true core.|A boulder tumbling from a cliff wreaks havoc, yes, but once its momentum is spent it lies as inert as any common stone.|Power that depends solely on the spasm of impact is but a brief commotion.|I suspect the substance of strength may lie elsewhere, in a quieter faculty often overlooked.|Restraint, though seldom celebrated among my kin, has a curious gravity of its own.|To command one's impulse is to acknowledge the peril that lurks within one's sinews.|Even I, an orc with fingers too often ink-stained from ponderous scribblings, know the temptation to let arrows fly merely to prove that I can.|Yet the bow that holds its string taut, waiting for a worthy aim, possesses an authority far subtler than the flailing axe.|There is an austere dignity in withholding a blow, a mastery not only of one's weapon but of one's unruly self.|It is easy, after all, to lash out.|Even the dullest whelp may swing a club in peevishness and call it valor.|But to cradle force within and mete it with judicious care, there lies the rarer craft.|Restraint demands foresight, temperance, a willingness to appear hesitant in the eyes of those who equate noise with potency.|I have been chided for too much brooding, as if reflection were a defect|Yet, I would sooner bear that reproach than squander my limited might in some witless display.|My strength, such as it is, gains meaning only when I govern it, not when I let it govern me.|So I incline toward patience, even if it leaves me looking more monk than warrior.|A river is not mighty because it floods in frenzy, but because, year upon year, it sculpts the rock by steadfast attrition.|Force is loud but brittle.|Restraint, properly tended, endures.|If I have any claim to strength, it is not in the swiftness of my arrow|It is but in the halting breath before I loose it.|Though, truth be told, I miss as often as I strike.;;;thought_bubble;no_sound;no_talk",
            "elif;'{v:orcentmonologue}' == 3",
            "s;Orcent;Wisdom is a peculiar weight, heavier than any stone I have hefted in these hands.|Many extol it as a lamp against darkness, a boon to those who dare to look beyond the veil of ignorance.|Yet I have found its glow to be fickle, at times warming.|At others searing the flesh of thought until one longs for the cool shade of unknowing.|Knowledge is never simply a trove of pleasant certainties.|It is a tangle of riddles, often barbed, that cling to the mind long after one has ceased to seek them.|I have learned, somewhat grudgingly, that to see too much is to invite a quiet disquiet that no feast nor laughter can fully still.|Perhaps that is why so many prefer to brandish strength rather than pursue understanding.|I would not feign regret for my meagre insights, yet there are moments I envy the orc who thinks no further than his next meal or the gleam of steel in a fray.|Their world is small but merciful, while mine stretches wide and often bleak, a horizon lined with questions I can neither conquer nor lay to rest.|To be wise, or something adjacent to it, is to carry a pack filled with stones of speculation, each one whispering its own troublesome query.|I sometimes wonder if my bow grows heavier because of such musings, or if my shoulders simply tire from trying to bear both weapon and wondering alike.|Still, would I truly cast off this burden if I could?|I doubt it, for in spite of the weariness, there is a quiet savour in perceiving the subtler contours of life.|Even sorrow, viewed through the lens of understanding, gains a sombre dignity that brutish simplicity cannot fathom.|Perhaps wisdom is neither boon nor bane but a companion, stern and demanding, who insists I walk paths others leave untried.|If so, I ought to thank it for its discipline, even as I mutter against its cruelties.|I am, after all, only a thinker of middling calibre, fumbling after truths larger than my reach.|Yet I suspect the fumbling itself is part of the gift, or the curse, or whichever word one finds less burdensome.|And so I will shoulder this odd freight, for it is mine.|And though it bends my back, it keeps my gaze aloft.;;;thought_bubble;no_sound;no_talk",
            "elif;'{v:orcentmonologue}' == 4",
            "s;Orcent;Freedom is a word so bright that one must squint to look at it.|Many speak of it as though it were air itself, a boundless expanse into which one may stride unhampered.|Yet I have learned, sometimes the hard way, that liberty without shape is but a gust scattering leaves without purpose.|To act without measure is to tumble into chaos, to squander one's strength upon every fleeting urge.|Even an arrow, left unnotched, will never find its mark.|Only when set against the string and drawn with care can it reveal its flight.|I confess, there are moments when I envy the reckless, their laughter ringing as they dart from whim to whim.|They seem weightless, while I, with my long deliberations, feel as though I carry chains forged from my own reflections.|Still, I suspect those chains grant me a steadiness they cannot claim, a ballast against the storm of impulse.|Perhaps freedom is not the wildest leap but the choosing of which leap merits the risk.|A creature entirely unbound may find itself not free but adrift, bereft of course or anchor.|To bind oneself, willingly and wisely, is a subtler kind of release, one that lets a soul grow roots even as it reaches skyward.|I am no sage, only an orc muddling through lofty notions, yet it seems to me that restraint is not the enemy of liberty but its quiet architect.|My bow is proof enough.|Its strength resides not in slackness but in the tension that readies it for flight.|So I will keep my tether close, shaping my path with care, and trust that within such chosen bounds lies the truest breadth of all.;;;thought_bubble;no_sound;no_talk",
            "elif;'{v:orcentmonologue}' == 5",
            "s;Orcent;Strife is an unwelcome tutor, yet one whose lessons cling tighter than most.|Many would flee from discord as though it were a plague, and I cannot fault them for that urge.|Battle, whether of arms or of thought, leaves scars that no balm can wholly soothe.|Still, I wonder if meaning does not often bloom from the very soil turned by hardship.|An existence without friction might appear enviable, yet it risks becoming pale and hollow, a drift through quiet waters with no shore to name as destination.|It is in adversity that one meets the sinew of one's own spirit, and I say this as a creature hardly famed for subtle contemplation.|Even my own musings, ponderous though they are, were kindled by struggles I would not have chosen had I been given gentler roads.|Conflict, vexing as it is, shapes the edges of a life and gives it texture.|A bow earns its worth not by hanging idle but by weathering the strain that makes each shot possible.|Perhaps we do not seek turmoil for its own sake, but we find within it the spark that illuminates who we truly are.|Peace is sweet, yet without the memory of strife it risks becoming dull, a flavor too mild to savor.|I suspect the task lies not in banishing all struggle but in learning how to meet it with steadiness, even with a hint of grace.|For myself, I will not glorify battle, yet I cannot deny that every wound, every dispute, every weary march has carved some hidden clarity within me.|If there is purpose in the tumult, it is not in the noise itself but in how we emerge, however clumsily, from its clutches.|And though I am but an orc with a bow and an overworked mind, I would rather wrestle with the weight of striving than drift through a life too smooth to leave any mark.;;;thought_bubble;no_sound;no_talk",
            "else",
            "end",
            "#s;Orcent; ;;;thought_bubble;no_sound;no_talk",
            "#s;Orcent; ;;;thought_bubble;no_sound;no_talk",
            "#s;Orcent; ;;;thought_bubble;no_sound;no_talk",
            "#s;Orcent; ;;;thought_bubble;no_sound;no_talk",
            "wait;500",
            "remove_portrait;Orcent",
            "music_fade_back;500"
        ],
        "nid": "Global Orcent Reflection"
    },
    {
        "name": "Wynn soul collect",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;Wynn;200",
            "wait;200",
            "sound;Aura1",
            "map_anim;OverchargeAura;Wynn",
            "give_skill;Wynn;Bone_stack;;no_banner",
            "wait;300"
        ],
        "nid": "Global Wynn soul collect"
    },
    {
        "name": "Wynn soul spend",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Wynn;Bone_stack;no_banner",
            ""
        ],
        "nid": "Global Wynn soul spend"
    },
    {
        "name": "Wynn reanimate",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;deadlist;{eval:[u.nid for u in game.get_all_player_units() if u.dead]}",
            "",
            "if;{v:deadlist} != []",
            "    choice;reanimation;Choose ally to reanimate:;{eval:[u.nid for u in game.get_all_player_units() if u.dead]};64;v;center;menu_bg_dark;;type_unit;3,3;center;expression;",
            "    wait;500",
            "    center_cursor;{target_pos};500",
            "    wait;500",
            "    screen_shake;1500;celeste;no_block",
            "    map_anim;Warp;{target_pos}",
            "    sound;Barrier",
            "    wait;1000",
            "    resurrect;{v:reanimation}",
            "    screen_shake_end",
            "    add_unit;{v:reanimation};{target_pos};warp",
            "    wait;500",
            "    map_anim;MapSurprise;{target_pos};no_block",
            "    sound;Talk_Boop",
            "    wait;1000",
            "else",
            "    s;System;No available ally to reanimate.",
            "end",
            "remove_skill;Wynn;Bone_stack;no_banner"
        ],
        "nid": "Global Wynn reanimate"
    },
    {
        "name": "Death Aka",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Aka'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Aka;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    speak;Aka;That won't...{c:wait;300} fare well...{c:wait;300} with my wife...{c:wait;300} at all...{c:wait;300} ha...{c:wait;500}ha...",
            "else",
            "    s;Aka;Is someone...{c:wait;300} here...?{c:wait;300} I...{c:wait;1000}{c:expression;Aka;OpenEyes,Smile} I'm about to let out a huge fart!{c:bop_portrait;Aka} HAHAHAHA!",
            "end",
            "remove_portrait;Aka",
            "music_fade_back",
            "add_tag;Aka;Dead"
        ],
        "nid": "Global Death Aka"
    },
    {
        "name": "New Event_1",
        "trigger": "phase_change",
        "level_nid": "teste2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#kill_unit;Aka;immediate",
            "#kill_unit;Dari;immediate",
            "give_skill;Wynn;Bone_stack;;no_banner",
            "give_skill;Carina;Certain_Blow;;no_banner",
            "#give_item;Carina;Scroll_Lightning;;no_banner",
            "#set_current_mana;Riala;20",
            "set_current_mana;Qum;20"
        ],
        "nid": "teste2 New Event_1"
    },
    {
        "name": "New Event_2",
        "trigger": "on_talk",
        "level_nid": "teste2",
        "condition": "unit.nid == 'Simon' and unit2.nid == 'Wynn'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# List of (unit, dist) for enemy team",
            "level_var;enemy_close_1;{eval: [unit.nid for unit in get_units_within_distance('Vhala', 3, team='enemy')]}",
            "",
            "# List of (unit, dist) for enemy2 team",
            "level_var;enemy_close_2;{eval: [unit.nid for unit in get_units_within_distance('Vhala', 3, team='enemy2')]}",
            "",
            "# Merge into one list",
            "level_var;enemy_close_all;{eval: {v:enemy_close_1} + {v:enemy_close_2}}",
            "",
            "level_var;tsa;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Vhala;{v:tsa};hit1,end;Triple_Shot_helper",
            "",
            "level_var;tsb;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Vhala;{v:tsb};hit1,end;Triple_Shot_helper",
            "",
            "level_var;tsc;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Vhala;{v:tsc};hit1,end;Triple_Shot_helper",
            "",
            "#s;system;{e: game.get_random_choice({v:enemy_close_all})}",
            "",
            "#s;system;{e:(get_units_within_distance('Vhala', 3, team='enemy')) and (get_units_within_distance('Vhala', 3, team='enemy2'))}",
            "#give_skill;Orcent;Calm_Stack;;no_banner",
            "#give_skill;Lynine;Overgasm;;no_banner",
            "#create_unit;Simon;CopiedSimon;;Simon;fade;closest;copy_stats",
            "#give_item;Rosa;Iron_Axe",
            "#party_transfer;Simon;AramEsmera;;Doom King;Attack;;3",
            "#party_transfer;Simon;AramKeranii;;Doom King;Defense;;3",
            "#kill_unit;Orilise;immediate",
            "#s;System;Orilise pos = {eval: repr(u('Orilise').position)}",
            "#s;System;Orilise dead = {eval: str(u('Orilise').dead)}",
            "#s;System;Orilise dying = {eval: str(u('Orilise').is_dying)}",
            "#s;system;{eval:[u.nid for u in game.get_all_player_units() if u.dead]}",
            "",
            "#level_var;testereanim;{eval:[u.nid for u in game.get_all_player_units() if u.dead]}",
            "#if;{v:testereanim} != []",
            "#    choice;replacement;Choose replacement:;{eval:[u.nid for u in game.get_all_player_units() if u.dead]};64;v;center;menu_bg_dark;;type_unit;3,3;center;expression;",
            "#else",
            "#    s;system;Tem nao.",
            "#end",
            "#if;any_unit_in_region('teste', nid='Altina') == True",
            "#    s;system;lol",
            "#    for;testes;[unit.nid for unit in get_units_in_region('teste', team='player')]",
            "#        move_unit;{testes};10,5;normal;closest",
            "#    endf",
            "#end",
            "#interact_unit;Vhala;Aka;hit1;;force_no_animation"
        ],
        "nid": "teste2 New Event_2"
    },
    {
        "name": "Wynn can reanimate",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.team == 'player' and game.current_party == 'Simon'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;game.current_mode.permadeath",
            "    game_var;wynnress;1",
            "end"
        ],
        "nid": "Global Wynn can reanimate"
    },
    {
        "name": "Trin copy",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;Trin;300",
            "wait;200",
            "add_portrait;Trin;Left",
            "wait;300",
            "s;Trin;Do I copy this motherfucker?",
            "if;{v:trincopies} == 0",
            "    s;Trin;I'm not controlling anybody anyway.",
            "elif;{v:trincopies} == 1",
            "    s;Trin;I'm managing one copy.",
            "else",
            "    s;Trin;I'm managing {v:trincopies} copies.",
            "end",
            "if;{v:trincopies} == 0",
            "    s;Trin;I'm bored as hell, let me do something!",
            "elif;{v:trincopies} == 1",
            "    s;Trin;I can handle another loser just fine.",
            "elif;{v:trincopies} == 2",
            "    s;Trin;Let's make a trio of suckers!",
            "else",
            "    s;Trin;They're just getting shittier at this point.",
            "end",
            "choice;trincopy;Convert enemy?;Yes,No;;;;menu_bg_red",
            "if; '{v:_last_choice}' == 'Yes'",
            "    music;Tension2",
            "    s;Trin;You're mine now, cocksucker!",
            "    remove_portrait;Trin",
            "    center_cursor;{target};1000",
            "    sound;EvilEye",
            "    map_anim;OverchargeAura;{target}",
            "    wait;500",
            "    change_team;{target};other",
            "    wait;1000",
            "    add_tag;{target};puppet",
            "    if;{v:puppetAIchanged} == 1",
            "        change_ai;{target};{v:puppetAI}",
            "    else",
            "    end",
            "    give_skill;Trin;Trin_debuff;;no_banner",
            "    #check synergies",
            "    if;has_skill('Trin', 'Coated_weapon') == True",
            "        give_skill;{target};Blind_attack;;no_banner",
            "    else",
            "    end",
            "    if;has_skill('Wynn', 'Efficient_Disposal') == True",
            "        give_skill;Wynn;Bone_stack;;no_banner",
            "    else",
            "    end",
            "    #####",
            "    inc_game_var;trincopies;1",
            "    give_skill;{target};Copy_debuff;;no_banner",
            "    add_portrait;Trin;Left",
            "    s;Trin;Now follow my every whim, asshole.",
            "    remove_portrait;Trin",
            "    music_fade_back;500",
            "else",
            "    s;Trin;Make up your fucking mind, dammit...",
            "end"
        ],
        "nid": "Global Trin copy"
    },
    {
        "name": "Set trin copies variable",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "game.current_party == 'Simon' and game.check_alive('Trin') == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;trincopies;0",
            "game_var;puppetAIchanged;0"
        ],
        "nid": "Global Set trin copies variable"
    },
    {
        "name": "Trin copy dies",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "'puppet' in unit.tags",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_game_var;trincopies;-1",
            "remove_skill;Trin;Trin_debuff;1;no_banner"
        ],
        "nid": "Global Trin copy dies"
    },
    {
        "name": "Trin change copies AI",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;200",
            "center_cursor;Trin;200",
            "add_portrait;Trin;Left",
            "wait;200",
            "s;Trin;What do I make those fuckers do?",
            "choice;puppetsAI;Order copies to:;Pursue enemies,Protect Trin,Shove their heads up their own asses",
            "if;'{v:_last_choice}' == 'Pursue enemies'",
            "    for;PUP;[u.nid for u in game.get_all_units() if 'puppet' in u.tags]",
            "        change_ai;{PUP};Pursue",
            "    endf",
            "    game_var;puppetAI;'Pursue'",
            "    s;Trin;Kill them all!",
            "elif;'{v:_last_choice}' == 'Protect Trin'",
            "    for;PUP;[u.nid for u in game.get_all_units() if 'puppet' in u.tags]",
            "        change_ai;{PUP};DefendTrin",
            "    endf",
            "    game_var;puppetAI;'DefendTrin'",
            "    s;Trin;Cover my ass, damnit!",
            "else",
            "    for;PUP;[u.nid for u in game.get_all_units() if 'puppet' in u.tags]",
            "        change_ai;{PUP};None",
            "    endf",
            "    s;Trin;Stand still and entertain me, fools!",
            "    game_var;puppetAI;'None'",
            "end",
            "game_var;puppetAIchanged;1",
            "wait;300",
            "remove_portrait;Trin",
            "wait;300"
        ],
        "nid": "Global Trin change copies AI"
    },
    {
        "name": "Balia Intervention resets Orcent stacks",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "multi_add_portrait;Balia;Left;Orcent;Right",
            "remove_skill;Orcent;Brute_Stack;10;no_banner",
            "remove_skill;Orcent;Calm_Stack;10;no_banner",
            "s;Balia;There you go.",
            "s;Orcent;I am most grateful for your aid.",
            "multi_remove_portrait;Balia;Orcent",
            "wait;300"
        ],
        "nid": "Global Balia Intervention resets Orcent stacks"
    },
    {
        "name": "Trin copy kills Trin gains exp",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;100",
            "give_exp;Trin;50",
            "wait;100"
        ],
        "nid": "Global Trin copy kills Trin gains exp"
    },
    {
        "name": "Lynine overgasm",
        "trigger": null,
        "level_nid": null,
        "condition": "",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_skill;Lynine;Overgasm;;no_banner",
            "",
            "if;{v:lyntime} == None",
            "    level_var;lyntime;3",
            "else",
            "    inc_level_var;lyntime;1",
            "end",
            "",
            "if;{eval: item_funcs.num_stacks(u('Lynine'), 'Overgasm')} == 3",
            "    center_cursor;Lynine",
            "    wait;300",
            "    add_portrait;Lynine;Left",
            "    wait;100",
            "    expression;Lynine;CloseEyes,OpenMouth",
            "    s;Lynine;Aaaaaahhhhhhhh",
            "    r;Lynine",
            "    wait;300",
            "    map_anim;Snag;Lynine;no_block",
            "    sound;Restore",
            "    give_skill;Lynine;Overgasmed;;no_banner",
            "    remove_skill_component;Lynine;Overgasmed;time",
            "    add_skill_component;Lynine;Overgasmed;time;{v:lyntime}",
            "    remove_skill;Lynine;Overgasm;3;no_banner",
            "    wait;1000",
            "end"
        ],
        "nid": "Global Lynine overgasm"
    },
    {
        "name": "Emergency_shelter",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;Lynine;200",
            "wait;300",
            "add_portrait;Lynine;Left;;NoSmile",
            "s;Lynine;Here I go!",
            "remove_portrait;Lynine",
            "pose_unit;{target};start_cast;down",
            "map_anim;AOE_Rally;Lynine",
            "sound;CutinCrit",
            "level_var;lynpos;{eval:u('Lynine').position}",
            "move_unit;Lynine;{eval:target};swoosh;stack",
            "wait;500",
            "pair_up;{eval:target};{unit}",
            "wait;200",
            "move_unit;Lynine;{v:lynpos};swoosh",
            "wait;300",
            "reset;Lynine",
            "wait;300",
            "give_skill;Lynine;Overgasm;;no_banner",
            "give_skill;Lynine;Emergency_Shelter_buff;;no_banner"
        ],
        "nid": "Global Emergency_shelter"
    },
    {
        "name": "Summon orc balia",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Orc;{e:unit.level};other;Pursue;Orc;;Iron_Axe",
            "sound;CyclopsBattleCry",
            "add_unit;{created_unit};{eval:target_pos};warp",
            "add_tag;{created_unit};Summon",
            "give_skill;{created_unit};Summon_orc_exp;;no_banner",
            "wait;200"
        ],
        "nid": "Global Summon orc balia"
    },
    {
        "name": "New Event",
        "trigger": "turn_change",
        "level_nid": "aram1",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "aram1 New Event"
    },
    {
        "name": "New Event_1",
        "trigger": "level_start",
        "level_nid": "aram1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_team_palette;player;map_sprite_dark_red;GenericRed;red",
            "change_team_palette;enemy;map_sprite_blue;GenericBlue;blue",
            ""
        ],
        "nid": "aram1 New Event_1"
    },
    {
        "name": "New Event",
        "trigger": "enemy_turn_change",
        "level_nid": "aram2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "aram2 New Event"
    },
    {
        "name": "Wynn soul collect2",
        "trigger": null,
        "level_nid": null,
        "condition": "",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:soul_reap} == 0",
            "    center_cursor;Wynn;200",
            "    wait;200",
            "    sound;Aura1",
            "    map_anim;OverchargeAura;Wynn",
            "    give_skill;Wynn;Bone_stack;;no_banner",
            "    wait;300",
            "    level_var;soul_reap;1",
            "else",
            "end"
        ],
        "nid": "Global Wynn soul collect2"
    },
    {
        "name": "Wynn soul reaping turn resets to 0",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.current_party == 'Simon' and game.check_alive('Wynn') == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;soul_reap;0"
        ],
        "nid": "Global Wynn soul reaping turn resets to 0"
    },
    {
        "name": "Trin copy Simon",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "center_cursor;Simon",
            "wait;200",
            "create_unit;Simon;Simoncopy;;Simon;fade;closest;copy_stats",
            "level_var;simonhp;{e: u('Simon').get_hp()}",
            "set_current_hp;Simoncopy;{v:simonhp}",
            "give_skill;Simoncopy;Multitask_effect;;no_banner",
            "for;simon_item;[item.nid for item in u('Simon').items]",
            "    remove_item;Simoncopy;{simon_item};Simon;no_banner",
            "endf",
            "give_item;Simoncopy;Iron_Axe;no_banner",
            "give_item;Simoncopy;Iron_Lance;no_banner",
            "give_item;Simoncopy;Iron_Sword;no_banner",
            "wait;300"
        ],
        "nid": "Global Trin copy Simon"
    },
    {
        "name": "Trin copied Simon dies",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;200",
            "center_cursor;Simoncopy;200",
            "wait;200",
            "kill_unit;Simoncopy",
            "wait;200"
        ],
        "nid": "Global Trin copied Simon dies"
    },
    {
        "name": "Uyae return neutral",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;claw_item;[item.nid for item in u('Uyae').items if item.nid.startswith('Claw_')]",
            "    remove_item;Uyae;{claw_item};no_banner",
            "endf",
            "for;aura_skill;[skill.nid for skill in u('Uyae').skills if skill.nid.startswith('Aura_of')]",
            "    remove_skill;Uyae;{aura_skill};no_banner",
            "endf",
            "give_skill;Uyae;Aura_of_Neutrality;;no_banner",
            "give_item;Uyae;Claw_Neutral;;no_banner"
        ],
        "nid": "Global Uyae return neutral"
    },
    {
        "name": "Uyae healing stance",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;claw_item;[item.nid for item in u('Uyae').items if item.nid.startswith('Claw_')]",
            "    remove_item;Uyae;{claw_item};no_banner",
            "endf",
            "for;aura_skill;[skill.nid for skill in u('Uyae').skills if skill.nid.startswith('Aura_of')]",
            "    remove_skill;Uyae;{aura_skill};no_banner",
            "endf",
            "give_skill;Uyae;Aura_of_Healing",
            "give_item;Uyae;Claw_Healing;;no_banner"
        ],
        "nid": "Global Uyae healing stance"
    },
    {
        "name": "Uyae agility stance",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;claw_item;[item.nid for item in u('Uyae').items if item.nid.startswith('Claw_')]",
            "    remove_item;Uyae;{claw_item};no_banner",
            "endf",
            "for;aura_skill;[skill.nid for skill in u('Uyae').skills if skill.nid.startswith('Aura_of')]",
            "    remove_skill;Uyae;{aura_skill};no_banner",
            "endf",
            "give_skill;Uyae;Aura_of_Agility",
            "give_item;Uyae;Claw_Agility;;no_banner"
        ],
        "nid": "Global Uyae agility stance"
    },
    {
        "name": "Megail Wynn kill event",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_random(1, 3) <= 2",
            "    give_item;{unit};Health_Potion",
            "else",
            "    give_item;{unit};Mana_Potion",
            "end"
        ],
        "nid": "Global Megail Wynn kill event"
    },
    {
        "name": "Balia summon orc elite",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Orc_Elite;{e:unit.level};other;Pursue;Orc;;Steel_Axe",
            "add_unit;{created_unit};{eval:target_pos};warp",
            "sound;CyclopsBattleCry",
            "add_tag;{created_unit};Summon",
            "give_skill;{created_unit};Summon_orc_exp;;no_banner",
            "wait;200"
        ],
        "nid": "Global Balia summon orc elite"
    },
    {
        "name": "Balia summon orc thrower",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Orc_Thrower;{e:unit.level};other;Pursue;Orc;;Rock",
            "add_unit;{created_unit};{eval:target_pos};warp",
            "sound;CyclopsBattleCry",
            "add_tag;{created_unit};Summon",
            "give_skill;{created_unit};Summon_orc_exp;;no_banner",
            "wait;200"
        ],
        "nid": "Global Balia summon orc thrower"
    },
    {
        "name": "Balia summon imp",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Imp;{e:unit.level};other;Pursue;Orc;;Iron_Lance",
            "add_unit;{created_unit};{eval:target_pos};warp",
            "sound;GargoyleBattleCry",
            "add_tag;{created_unit};Summon",
            "give_skill;{created_unit};Summon_orc_exp;;no_banner",
            "wait;200"
        ],
        "nid": "Global Balia summon imp"
    },
    {
        "name": "New Event_3",
        "trigger": "level_start",
        "level_nid": "teste2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_item;Lynine;Hotblooded_Dive;;no_banner",
            "give_skill;Uyae;Stalk;;no_banner",
            "set_current_hp;102;10",
            "give_item;Lynine;Remodeling;;no_banner",
            "set_current_hp;Vhala;1",
            "give_skill;Orilise;Tag_Team_Orilise;;no_banner",
            "give_skill;Lynine;Tag_Team_Lynine;;no_banner",
            "give_skill;Nalili;Delayed_Gratification;;no_banner",
            "give_skill;Nalili;Dance_Nalili;;no_banner",
            "give_skill;Orcent;Aggressive_Attack_skill;;no_banner",
            "give_skill;Orcent;Piercing_Attack_skill;;no_banner",
            "give_skill;Simon;Incubus_Assault;;no_banner",
            "give_skill;Marlo;BossMiracle_1;;no_banner",
            "",
            "give_skill;Testeman;Emergency_Shelter_buff;;no_banner",
            "give_skill;Testeman;Rally_Resistance_buff;;no_banner",
            "give_skill;Testeman;Provoked;;no_banner",
            "give_skill;Testeman;Defiant_Strike_buff;;no_banner",
            "give_skill;Testeman;Strength_Penalty;;no_banner",
            "give_skill;Testeman;DamageNerf;;no_banner",
            "give_skill;Testeman;Striking_Defiance_buff;;no_banner",
            "give_skill;Carina;Ivala_Voice;;no_banner",
            "give_skill;Robin;Optimization_buff;;no_banner",
            "set_current_hp;Orilise;1",
            "set_current_hp;Lynine;1",
            "set_current_hp;Altina;1",
            "change_class;Simon;Testeman;silent",
            "unlock_support_rank;Testeman;Bruce;C",
            "unlock_support_rank;Testeman;Plank;C",
            "unlock_support_rank;Testeman;Wrecker;C",
            "give_skill;Simon;Duelists_Blow;;no_banner",
            "give_skill;Testeman;Duelists_Blow;;no_banner",
            "give_skill;Testeman;Death_Blow;;no_banner",
            "give_skill;Testeman;Darting_Blow;;no_banner",
            "give_skill;Testeman;Warding_Blow;;no_banner",
            "give_skill;Testeman;Armored_Blow;;no_banner",
            "give_skill;Testeman;Certain_Blow;;no_banner",
            "give_item;Yarra;Buttplug;;no_banner",
            "",
            "#give_item;Riala;Fires_of_Lust;;no_banner",
            "#give_item;Riala;Storm_of_Lust;;no_banner",
            "#give_item;Riala;Bolt_of_Lust;;no_banner",
            "",
            "give_item;Yarra;Sexual_Mana;;no_banner",
            "#give_item;Yarra;Take_flight;;no_banner",
            "",
            "give_skill;Simon;Illusioned;;no_banner",
            "give_skill;Riala;Teleport_effect;;no_banner",
            "",
            "give_skill;Qum;Mass_Kiss;;no_banner",
            "give_skill;Vhala;Triple_Shot;;no_banner"
        ],
        "nid": "teste2 New Event_3"
    },
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "Introtest",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "Introtest New Event"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "Intro1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Darian;BossMiracle_1;;no_banner",
            "end",
            "",
            "game_var;intro1villagers;0",
            "#bossquotes",
            "level_var;bq_hilstara;0",
            "level_var;bq_robin;0",
            "level_var;bq_yarra;0",
            "",
            "chapter_title",
            "change_background;BlackBackground",
            "wait;300",
            "move_cursor;Darian",
            "change_background;;300",
            "music;Tension",
            "wait;300",
            "flicker_cursor;Darian",
            "wait;100",
            "add_portrait;Darian;Left",
            "s;Darian;... and we're not gonna stand still while those monsters invade our home, are we?!",
            "s;Everyone;NO!",
            "s;Darian;Of course not! Because we know what's right! What we should stand up for!|It's up to us to protect what little dignity Yhilin has left!|And we have to act now, before all those <wave>succubi</> and <wave>orcs</> take everything from us!",
            "s;Everyone;YEAH!!",
            "s;Darian;They are all being brainwashed by those soul-sucking sluts, but not us, not YOU!|So what are you waiting for?! Join the resistance before it's too late!",
            "remove_portrait;Darian",
            "wait;100",
            "change_team;109;enemy",
            "wait;100",
            "change_team;110;enemy",
            "wait;100",
            "change_team;112;enemy",
            "wait;100",
            "change_team;111;enemy",
            "wait;100",
            "move_unit;109;12,1;;stack;no_block;no_follow",
            "move_unit;110;12,1;;stack;;no_block;no_follow",
            "move_unit;111;12,1;;stack;;no_block;no_follow",
            "move_unit;112;12,1;;stack;no_follow",
            "wait;200",
            "remove_unit;109;fade",
            "remove_unit;110;fade",
            "remove_unit;111;fade",
            "remove_unit;112;fade",
            "wait;1000",
            "center_cursor;0,9;1500",
            "wait;300",
            "add_unit;108;0,9;fade;giveup;west",
            "wait;300",
            "move_unit;108;12,3;normal;giveup",
            "wait;300",
            "add_portrait;SoldierRed;Right",
            "s;SoldierRed;S-sir! They... they're coming!!",
            "add_portrait;Darian;Left",
            "s;Darian;Speak clearly.",
            "s;SoldierRed;The <red>Doom King army</> is here!|Not only that, they seem to be the Doom King's generals!",
            "bop_portrait;Darian",
            "s;Darian;What?!{c:wait;400} That... can't...",
            "expression;Darian;CloseEyes",
            "s;Darian;Goddamnit, just when I was making my fortune.{c:wait;300} Fucking shitty life.;;;thought_bubble;no_talk;no_sound",
            "expression;Darian;OpenEyes",
            "s;Darian;We can't retreat now, or else we're killed either way.|Call for reinforcements.{c:wait;300} And get everyone into position!{c:expression;Darian;Smile}{c:wait;300} I have a plan...",
            "wait;100",
            "remove_portrait;SoldierRed;;left;no_block",
            "move_unit;108;0,9;normal;;no_follow",
            "wait;200",
            "expression;Darian;NoSmile",
            "s;Darian;I really don't want to risk my life here, but if push comes to shove...",
            "remove_portrait;Darian",
            "wait;300",
            "remove_unit;108;immediate",
            "end_skip",
            "add_unit;101;12,1;fade;stack;north",
            "add_unit;102;12,1;fade;stack;north",
            "add_unit;103;12,1;fade;stack;north",
            "add_unit;104;12,1;fade;stack;north",
            "add_unit;105;12,1;fade;stack;north",
            "add_unit;106;12,1;fade;stack;north",
            "add_unit;107;12,1;fade;stack;north",
            "move_group;pos;pos;normal;no_follow",
            "wait;1000",
            "move_cursor;15,23;3000",
            "transition;close;1500",
            "wait;500",
            "music;Battle6",
            "transition;open;1500",
            "wait;400",
            "spawn_group;dk;south;dk;normal;no_follow",
            "wait;1000"
        ],
        "nid": "Intro1 Intro"
    },
    {
        "name": "enemy wave",
        "trigger": "turn_change",
        "level_nid": "Intro2",
        "condition": "game.turncount < 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;w{e: game.turncount};w{e: game.turncount};fade;closest",
            "",
            "if;game.turncount == 3",
            "    move_cursor;108",
            "    wait;500",
            "    move_cursor;110",
            "    wait;500",
            "    move_cursor;116",
            "    wait;500",
            "elif;game.turncount == 4",
            "    move_cursor;102",
            "    wait;500",
            "    move_cursor;113",
            "    wait;500",
            "    move_cursor;117",
            "    wait;500",
            "elif;game.turncount == 5",
            "    move_cursor;105",
            "    wait;500",
            "    move_cursor;111",
            "    wait;500",
            "    move_cursor;118",
            "    wait;500",
            "elif;game.turncount == 6",
            "    move_cursor;114",
            "    wait;500",
            "    move_cursor;112",
            "    wait;500",
            "    move_cursor;109",
            "    wait;500",
            "elif;game.turncount == 7",
            "    move_cursor;103",
            "    wait;500",
            "    move_cursor;106",
            "    wait;500",
            "    move_cursor;115",
            "    wait;500",
            "end"
        ],
        "nid": "Intro2 enemy wave"
    },
    {
        "name": "Level start",
        "trigger": "level_start",
        "level_nid": "Intro3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Marlo;BossMiracle_1;;no_banner",
            "end",
            "change_team;Dari;player",
            "add_weather;night",
            "enable_fog_of_war;t",
            "set_fog_of_war;hybrid;5;5;5",
            "center_cursor;15,15",
            "wait;1000",
            "flicker_cursor;15,15",
            "wait;300",
            "multi_add_portrait;Perese;Left;Marlo;Right",
            "s;Perese;Do you think that low of my favor? Perhaps I should take back all my generous donations.",
            "bop_portrait;Marlo",
            "s;Marlo;O-of course not, madam! I promise I will properly honour your wishes this time.",
            "s;Perese;It's in your best interests that you fulfill that promise.|Otherwise... you might find out yourself that my wishes can be quite hurtful.",
            "move_portrait;Marlo;FarRight",
            "wait;300",
            "s;Perese;Do excuse me. I have places to be.",
            "multi_remove_portrait;Marlo;Perese",
            "wait;200",
            "move_unit;Perese;16,13",
            "wait;200",
            "multi_add_portrait;Perese;Right;Yett;Left",
            "s;Perese;We're done here.",
            "s;Yett;Yes, my liege.",
            "multi_remove_portrait;Perese;Yett",
            "wait;100",
            "move_unit;113;15,14;normal;;no_follow;no_block",
            "move_unit;114;16,14;normal;;no_follow",
            "if;game.mode == 'Hard'",
            "    add_portrait;Yett;Left",
            "    s;Yett;You can stay. They need help.",
            "    remove_portrait;Yett",
            "    wait;200",
            "    move_unit;113;13,15;normal;no_block",
            "    move_unit;114;18,15;normal;no_follow",
            "    wait;400",
            "end",
            "if;game.mode != 'Hard'",
            "    move_unit;113;2,1;normal;;no_block;no_follow",
            "    move_unit;114;3,1;normal;;no_block;no_follow",
            "end",
            "move_unit;Perese;3,0;normal;no_block",
            "move_unit;Yett;2,0;no_follow",
            "wait;300",
            "remove_unit;Perese;fade;north",
            "remove_unit;Yett;fade;north",
            "remove_unit;113;fade;north",
            "remove_unit;114;fade;north",
            "wait;500",
            "center_cursor;Marlo",
            "wait;1000",
            "add_portrait;Marlo;Right;;NoSmile,CloseEyes",
            "s;Marlo;Goddamnit.{c:wait;300} I better have it all ready for the raid tomorrow.",
            "remove_portrait;Marlo",
            "transition;close;1000",
            "",
            "wait;1000",
            "center_cursor;2,26",
            "transition;open;1000",
            "wait;1000",
            "spawn_group;play;west;play;normal",
            "move_unit;Nalili;4,25;no_block;no_follow",
            "wait;500",
            "s;Enemy;Huh?-{c:wait;200}{no_wait}",
            "kill_unit;115",
            "wait;100",
            "add_portrait;Aka;Left",
            "s;Aka;Shhh."
        ],
        "nid": "Intro3 Level start"
    },
    {
        "name": "Seize",
        "trigger": "Seize",
        "level_nid": "Intro1",
        "condition": "region.nid == 'Village'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "Intro1 Seize"
    },
    {
        "name": "House1",
        "trigger": "Visit",
        "level_nid": "Intro1",
        "condition": "region.nid == 'House1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;{unit};Left;Man1;Right",
            "s;Man1;Hmm... if you say so... I'll steer clear off those men.|Take this with you.",
            "give_item;{unit};Mana_Potion",
            "transition;Close"
        ],
        "nid": "Intro1 House1"
    },
    {
        "name": "House2",
        "trigger": "Visit",
        "level_nid": "Intro1",
        "condition": "region.nid == 'House2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;{unit};Left;Man2;Right",
            "s;Man2;Thank Ivala you've come! Please, protect my family from those criminals!",
            "give_item;{unit};Iron_Blade",
            "transition;Close"
        ],
        "nid": "Intro1 House2"
    },
    {
        "name": "House3",
        "trigger": "Visit",
        "level_nid": "Intro1",
        "condition": "region.nid == 'House3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;{unit};Left;Woman1;Right",
            "s;Woman1;... I have nothing to say to you. Yhilin will be purified someday.",
            "transition;Close"
        ],
        "nid": "Intro1 House3"
    },
    {
        "name": "House4",
        "trigger": "Visit",
        "level_nid": "Intro1",
        "condition": "region.nid == 'House4'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "multi_add_portrait;{unit};Left;OldMan1;Right",
            "s;OldMan1;You don't need to worry about me.|This is all just a silly distraction. Mere vagabonds seeking conflict.|You should prepare for darker times ahead. This might help you.",
            "give_item;{unit};Mage_Pin",
            "transition;Close"
        ],
        "nid": "Intro1 House4"
    },
    {
        "name": "Boss quotes",
        "trigger": "combat_start",
        "level_nid": "Intro1",
        "condition": "unit2.nid == 'Darian'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.nid == 'Hilstara' and {v:bq_hilstara} == 0",
            "    multi_add_portrait;Hilstara;Right;Darian;Left",
            "    s;Darian;You're gonna regret this!",
            "    s;Hilstara;Oh, I already do. There's a nice river nearby and I have to waste time with idiots like you.",
            "    multi_remove_portrait;Hilstara;Darian",
            "    level_var;bq_hilstara;1",
            "elif;unit.nid == 'Robin' and {v:bq_robin} == 0",
            "    multi_add_portrait;Robin;Right;Darian;Left",
            "    s;Darian;Go back to your books, we're dealing with reality here!",
            "    s;Robin;It's crystal clear how books have no place in your reality.",
            "    multi_remove_portrait;Robin;Darian",
            "    level_var;bq_robin;1",
            "elif;unit.nid == 'Yarra' and {v:bq_yarra} == 0",
            "    multi_add_portrait;Yarra;Right;Darian;Left",
            "    s;Darian;YOU're the reason everything's gone to shit!",
            "    s;Yarra;Were you attacked? What happened with you?",
            "    s;Darian;It's none of your business, slut!",
            "    s;Yarra;It's all of my business!|I need to know what happens in order to make this as smooth and painless as possible.",
            "    s;Darian;The only thing you need to know is that you don't belong here.|Now get out of my face!",
            "    expression;Yarra;CloseEyes",
            "    s;Yarra;Can't say I didn't try.",
            "    multi_remove_portrait;Yarra;Darian",
            "    level_var;bq_yarra;1",
            "end"
        ],
        "nid": "Intro1 Boss quotes"
    },
    {
        "name": "Boss death",
        "trigger": "unit_death",
        "level_nid": "Intro1",
        "condition": "unit.nid == 'Darian'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Darian;Left;;CloseEyes",
            "s;Darian;My... path... to...",
            "remove_portrait;Darian",
            "change_music;player_phase;Battle6",
            "change_music;enemy_phase;Battle6"
        ],
        "nid": "Intro1 Boss death"
    },
    {
        "name": "First combat boss change music",
        "trigger": "combat_start",
        "level_nid": "Intro1",
        "condition": "unit2.nid == 'Darian'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Boss1",
            "change_music;enemy_phase;Boss1"
        ],
        "nid": "Intro1 First combat boss change music"
    },
    {
        "name": "Yarra dies game over",
        "trigger": "unit_death",
        "level_nid": "Intro1",
        "condition": "unit.nid == 'Yarra'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Yarra;FarRight;normal;CloseEyes,NoSmile",
            "if;game.current_mode.permadeath",
            "    s;Yarra;My... dream...",
            "else",
            "    expression;Yarra;Smile,OpenEyes",
            "    s;Yarra;I... I have to rub one out! I'll come back later, sorry!",
            "end",
            "remove_portrait;Yarra",
            "music_fade_back",
            "if;game.current_mode.permadeath",
            "    lose_game",
            "else",
            "    activate_turnwheel;t",
            "end"
        ],
        "nid": "Intro1 Yarra dies game over"
    },
    {
        "name": "Magic1 destroy",
        "trigger": "unit_death",
        "level_nid": "P13",
        "condition": "unit.nid == 'magic1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;4,15",
            "wait;500",
            "add_portrait;Rialayoung;Right",
            "s;Rialayoung;They're in position. Release the spell!",
            "if;any_unit_in_region('magic1simon', nid='Simonyoung') == True",
            "    add_portrait;Simonyoung;Left",
            "    s;Simonyoung;Everyone, move out NOW!",
            "    multi_remove_portrait;Simonyoung;Rialayoung",
            "    for;magic1unit;[unit.nid for unit in get_units_in_region('magic1simon', team='player')]",
            "        move_unit;{magic1unit};4,21;normal;closest",
            "    endf",
            "    wait;1000",
            "    center_cursor;4,15",
            "    wait;1000",
            "    level_var;simoncounter1;1",
            "end",
            "remove_portrait;Rialayoung",
            "screen_shake;500",
            "sound;Burning",
            "show_layer;trap1;fade",
            "wait;1500",
            "screen_shake_end",
            "wait;2000",
            "add_portrait;Chosen;Left",
            "s;Chosen;What the fuck was that?! Not fair!",
            "wait;500",
            "add_portrait;Rialayoung;Right",
            "if;{v:simoncounter1} == 1",
            "    s;Rialayoung;Tsc.",
            "    multi_remove_portrait;Chosen;Rialayoung",
            "    wait;500",
            "    screen_shake;500",
            "    sound;Burning",
            "    hide_layer;trap1;fade",
            "    wait;1500",
            "    screen_shake_end",
            "else",
            "    s;Rialayoung;Forgive me, as I'm not just going to let this opportunity slip by.|Imps, your turn!",
            "    multi_remove_portrait;Chosen;Rialayoung",
            "    wait;500",
            "    center_cursor;2,1",
            "    wait;1000",
            "    spawn_group;ambush;north;ambush;normal;closest",
            "    wait;1000",
            "    level_var;magic1cliffsetup;True",
            "    level_var;magic1cliff;0",
            "end"
        ],
        "nid": "P13 Magic1 destroy"
    },
    {
        "name": "backup magic destroy",
        "trigger": null,
        "level_nid": "P13",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_map_anim;BlueDot;{unit}",
            "inc_level_var;barrier;1",
            "if;{v:barrier} == 1",
            "    center_cursor;Rialayoung",
            "    wait;500",
            "    sound;Final Hit",
            "    screen_shake;100",
            "    wait;500",
            "    add_portrait;Rialayoung;Right;;NoSmile,CloseEyes",
            "    s;Rialayoung;...;;no_talk;no_sound",
            "    remove_portrait;Rialayoung",
            "    end_skip",
            "    remove_region;ManaSip",
            "    alert;Debuff <red>[MANA SIP]</> was removed!",
            "elif;{v:barrier} == 2",
            "    center_cursor;Rialayoung",
            "    wait;500",
            "    sound;Final Hit",
            "    screen_shake;100",
            "    wait;500",
            "    give_skill;Rialayoung;Silence",
            "    add_portrait;Rialayoung;Right;;NoSmile",
            "    s;Rialayoung;Tsc.",
            "    remove_portrait;Rialayoung",
            "    s;???;Leave them to us, Miss Riala!",
            "    wait;200",
            "    end_skip",
            "    add_group;elite;elite;warp;closest",
            "    wait;1000",
            "elif;{v:barrier} == 3",
            "    center_cursor;Rialayoung",
            "    wait;500",
            "    sound;Final Hit",
            "    screen_shake;100",
            "    music;Reinforcements",
            "    center_cursor;10,5",
            "    wait;1000",
            "    sound;DemonKingRoar",
            "    screen_shake;1000;default",
            "    sound;Critical Kill",
            "    end_skip",
            "    remove_map_anim;AOE_Reinforce;10,5;overlay",
            "    wait;2000",
            "    remove_item;Rialayoung;Lusting_Gaze",
            "    remove_item;Rialayoung;Lethal_Lust",
            "    change_music;player_phase;Reinforcements",
            "    change_music;enemy_phase;Reinforcements",
            "    hide_layer;magic",
            "    add_portrait;Rialayoung;Right;;NoSmile,CloseEyes",
            "    wait;1000",
            "    expression;Rialayoung;OpenEyes",
            "    s;Rialayoung;Bring out the reinforcements!",
            "    remove_portrait;Rialayoung",
            "    wait;400",
            "    center_cursor;9,22",
            "    wait;1000",
            "    add_group;ambush;ambush;fade;stack",
            "    move_unit;127;8,21;normal;closest;no_block;no_follow",
            "    move_unit;128;8,22;normal;closest;no_block;no_follow",
            "    move_unit;129;8,23;normal;closest;no_block;no_follow",
            "    move_unit;130;10,21;normal;closest;no_block;no_follow",
            "    move_unit;131;10,22;normal;closest;no_block;no_follow",
            "    move_unit;132;10,23;normal;closest;no_block;no_follow",
            "    move_unit;OgreFinal;9,21;normal;closest",
            "    wait;2000",
            "end"
        ],
        "nid": "P13 backup magic destroy"
    },
    {
        "name": "Magic barrier reveal",
        "trigger": "unit_wait",
        "level_nid": "P13",
        "condition": "any(game.level.regions.get('magicsense').contains(unit.position) for unit in game.get_units_in_party())",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "level_var;true;1",
            "add_portrait;{unit};Left",
            "center_cursor;11,16",
            "wait;500",
            "if;'{unit}' == 'Chosen'",
            "    s;{unit};Aha! I knew something smelled fishy here!",
            "elif;'{unit}' == 'Simonyoung'",
            "    s;{unit};Of course, I should have known. Riala wouldn't have made it obvious.",
            "elif;'{unit}' == 'Mira'",
            "    s;{unit};There's something here!",
            "elif;'{unit}' == 'Duro'",
            "    s;{unit};HAHAHA! Nothing escapes my male gaze!",
            "elif;'{unit}' == 'Monica'",
            "    bop_portrait;Monica",
            "    wait;200",
            "elif;'{unit}' == 'Antarion'",
            "    s;{unit};Beautiful and intelligent. That's me alright. Reveal itself, foul magic!",
            "elif;'{unit}' == 'Cassian'",
            "    s;{unit};Huh? What is this?",
            "elif;'{unit}' == 'Lucia'",
            "    s;{unit};Just as I suspected. Take a look here, folks.",
            "elif;'{unit}' == 'Safado'",
            "    expression;{unit};CloseEyes",
            "    s;{unit};Let me just rest here for a bit...;;;thought_bubble;no_talk",
            "    expression;{unit};OpenEyes",
            "    bop_portrait;{unit}",
            "    s;{unit};What the hell is this? Oh no, did I activate something by mistake?!|What if I fuck up the whole party because of this?!|Shit shit shit shit;;;thought_bubble;no_talk",
            "elif;'{unit}' == 'Rosa'",
            "    s;{unit};Aha! That's the source of the magic I'm feeling.",
            "elif;'{unit}' == 'Milena'",
            "    s;{unit};Lady Riala is on another level, which means I should step up my game as well!|Everyone, come see this!",
            "else",
            "end",
            "wait;1000",
            "show_layer;trap3;fade",
            "wait;600",
            "sound;Berserk",
            "map_anim;AOE_Reinforce;11,16;no_block",
            "add_unit;magic3_true;11,16;warp;push;fade",
            "map_anim;BlueDot;11,16;permanent",
            "wait;1500",
            "add_portrait;Rialayoung;Right;;CloseEyes",
            "s;Rialayoung;Well done.",
            "wait;1000",
            "reset;{unit}"
        ],
        "nid": "P13 Magic barrier reveal"
    },
    {
        "name": "magic 1 cliff countdown",
        "trigger": "turn_change",
        "level_nid": "P13",
        "condition": "game.level_vars['magic1cliffsetup'] == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_level_var;magic1cliff;1",
            "",
            "if;{v:magic1cliff} == 3",
            "    center_cursor;4,15",
            "    wait;1000",
            "    screen_shake;500",
            "    hide_layer;trap1;fade",
            "    sound;Burning",
            "    wait;1500",
            "    screen_shake_end",
            "    wait;1500",
            "    level_var;magic1cliffsetup;0",
            "end"
        ],
        "nid": "P13 magic 1 cliff countdown"
    },
    {
        "name": "Magic2 destroy",
        "trigger": "unit_death",
        "level_nid": "P13",
        "condition": "unit.nid == 'magic2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;18,20",
            "wait;500",
            "add_portrait;Rialayoung;Right",
            "s;Rialayoung;Right where we want them. Proceed with the plan!",
            "remove_portrait;Rialayoung",
            "wait;500",
            "center_cursor;20,16",
            "wait;500",
            "add_unit;dambreaker;21,16;fade;push;east",
            "wait;500",
            "if;any_unit_in_region('magic2simon', nid='Simonyoung') == True",
            "    add_portrait;Simonyoung;Left",
            "    s;Simonyoung;That looks suspicious. Look out!",
            "    remove_portrait;Simonyoung",
            "    move_unit;dambreaker;19,16;normal;push;no_block;no_follow",
            "    move_unit;Simonyoung;19,17;normal;push",
            "    wait;100",
            "    interact_unit;Simonyoung;dambreaker;crit1;;force_no_animation",
            "    wait;300",
            "    add_portrait;Rialayoung;Right",
            "    s;Rialayoung;No!",
            "    expression;Rialayoung;CloseEyes,Smile",
            "    s;Rialayoung;Simon, you're so hot.",
            "    add_portrait;Chosen;Left",
            "    s;Chosen;Uh... I don't get it.",
            "    multi_remove_portrait;Chosen;Rialayoung",
            "    level_var;simoncounter2;1",
            "    wait;1000",
            "else",
            "    move_unit;dambreaker;19,16;normal;push;",
            "    wait;500",
            "    add_unit;dam;19,15;immediate;push;fade",
            "    interact_unit;dambreaker;dam;hit1;force_no_animation",
            "    kill_unit;dam",
            "    sound;Wall Attack",
            "    map_anim;Snag;19,15",
            "    wait;100",
            "    screen_shake;500",
            "    sound;VillageDestroyed",
            "    show_layer;trap2;fade",
            "    wait;1000",
            "    screen_shake_end",
            "    center_cursor;18,23;2000",
            "    add_portrait;Chosen;Left",
            "    s;Chosen;WHAAT?! She's fucking crazy!",
            "    add_portrait;Rialayoung;Right",
            "    s;Rialayoung;Fufufu. Girls, take control now.",
            "    multi_remove_portrait;Rialayoung;Chosen",
            "    wait;500",
            "    center_cursor;19,18",
            "    sound;PureWater",
            "    add_group;ambush2;ambush2;swoosh;closest",
            "    wait;1500",
            "    add_portrait;Chosen;Left",
            "    s;Chosen;Oh boy... Stop, get away, I get icky when doing it in water!",
            "    remove_portrait;Chosen",
            "    wait;1000",
            "    level_var;flood;1",
            "    level_var;floodcount;0",
            "end"
        ],
        "nid": "P13 Magic2 destroy"
    },
    {
        "name": "magic 2 flood countdown",
        "trigger": "turn_change",
        "level_nid": "P13",
        "condition": "game.level_vars['flood'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_level_var;floodcount;1",
            "",
            "if;{v:floodcount} == 2",
            "    show_layer;trap2_1;fade",
            "elif;{v:floodcount} == 3",
            "    show_layer;trap2_2;fade",
            "elif;{v:floodcount} == 4",
            "    show_layer;trap2_3;fade",
            "    level_var;flood;0",
            "end"
        ],
        "nid": "P13 magic 2 flood countdown"
    },
    {
        "name": "Magic3 destroy",
        "trigger": "unit_death",
        "level_nid": "P13",
        "condition": "unit.nid == 'magic3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear;1000",
            "center_cursor;19,3",
            "remove_map_anim;AOE_Rally;19,2;overlay",
            "wait;2500",
            "add_portrait;Chosen;Left",
            "s;Chosen;Huh? No reaction?",
            "center_cursor;10,6;2000",
            "wait;1000",
            "center_cursor;19,3;2000",
            "if;game.check_alive('magic1') and game.check_alive('magic2') == False",
            "    s;Chosen;This is the third one! It's supposed to end now!",
            "    wait;1500",
            "    add_portrait;Rialayoung;Right;;Smile",
            "    wait;1000",
            "    s;Rialayoung;It will end here indeed.",
            "    remove_portrait;Rialayoung",
            "else",
            "    wait;1500",
            "    add_portrait;Rialayoung;Right;;NoSmile,CloseEyes",
            "    wait;1000",
            "    s;Rialayoung;I'm sorry.",
            "    remove_portrait;Rialayoung",
            "    remove_portrait;Chosen",
            "wait;1000",
            "end",
            "if;any_unit_in_region('magic3simon', nid='Simonyoung') == True",
            "    add_portrait;Simonyoung;Left",
            "    s;Simonyoung;Wait.{c:e;Simon;CloseEyes}{c:wait;600}{c:e;Simon;OpenEyes} This looks like...|Not again! Let me through!",
            "    remove_portrait;Simonyoung",
            "    move_unit;Simonyoung;magic3;normal;closest",
            "    wait;300",
            "    sound;Weapon Click",
            "    remove_map_anim;BlueDot;19,2",
            "    remove_map_anim;AOE_Rally;19,2;overlay",
            "    wait;100",
            "    move_unit;Simonyoung;15,1;normal;push",
            "    wait;300",
            "    sound;Throw 1",
            "    center_cursor;11,1;200",
            "    map_anim;BlueDot;11,1",
            "    wait;1000",
            "    map_anim;HitSpark;11,1",
            "    screen_shake;1000;default",
            "    sound;Explosion3",
            "    show_layer;lakegone;fade",
            "    remove_map_anim;BlueDot;11,1",
            "    wait;500",
            "    screen_shake_end",
            "    level_var;simoncounter3;1",
            "    wait;1500",
            "    music_fade_back;1000",
            "    multi_add_portrait;Simonyoung;MidLeft;Chosen;FarLeft;Rialayoung;Right",
            "    s;Chosen;What the hell?! This could have ended badly!|Why did you let us get close to it in the first place, old ass?!",
            "    expression;Simonyoung;HalfCloseEyes",
            "    s;Simonyoung;...;;no_talk;no_sound",
            "    expression;Rialayoung;CloseEyes",
            "    s;Rialayoung;I should have expected you'd have seen through it.",
            "    if;game.check_alive('magic3_true')",
            "        expression;Rialayoung;Smile",
            "        s;Rialayoung;However, my barrier still remains.",
            "        expression;Simonyoung;OpenEyes",
            "        s;Simonyoung;I see.{c:wait;300} It's only a matter of time until we find the right source.",
            "        s;Chosen;Yeah! Come on, I'm too old to play hide and seek!",
            "        s;Rialayoung;Oh. I hand't realized.",
            "    else",
            "    end",
            "    multi_remove_portrait;Chosen;Simonyoung;Rialayoung",
            "else",
            "    sound;Weapon Shine",
            "    remove_map_anim;BlueDot;19,2",
            "    remove_map_anim;AOE_Rally;19,2;overlay",
            "    wait;500",
            "    screen_shake;1000;default",
            "    sound;Explosion3",
            "    show_layer;viltrap3;fade",
            "    for;unittrap;get_units_in_region('magic3simon', team='player')",
            "        sound;ElfireHit",
            "        map_anim;AOE_Wyrmsfire;{unittrap};no_block",
            "        set_current_hp;{unittrap};1",
            "        give_skill;{unittrap};Crippled;;no_banner",
            "    endf",
            "    wait;500",
            "    screen_shake_end",
            "    wait;1000",
            "    center_cursor;10,6;1500",
            "    wait;500",
            "    add_portrait;Rialayoung;Left;;CloseEyes",
            "    wait;400",
            "    expression;Rialayoung;OpenEyes",
            "    music;Boss1",
            "    change_music;player_phase;Boss1",
            "    change_music;enemy_phase;Boss1",
            "    s;Rialayoung;Finish them.",
            "    remove_portrait;Rialayoung",
            "    s;???;Leave them to us, Miss Riala!",
            "    wait;200",
            "    add_group;elite;elite;warp;closest",
            "    wait;1000",
            "end"
        ],
        "nid": "P13 Magic3 destroy"
    },
    {
        "name": "Start",
        "trigger": "level_start",
        "level_nid": "Intro0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "chapter_title",
            "transition;close",
            "wait;1000",
            "change_background;GradoCastle",
            "music;First Choice",
            "multi_add_portrait;Jack;Right;Tramond;Left",
            "transition;open;2000",
            "s;Tramond;Look at how far you've come! I'm proud of you.|You have recruited such great allies, you give us hope.",
            "bop_portrait;Jack",
            "s;Jack;This is just the beginning of my journey.|I will not rest until I save this kingdom!",
            "s;Tramond;Most excellent. It seems you are ready to wield our sacred treasure.",
            "s;Jack;Oh! Do you mean...",
            "s;Tramond;The one and only.",
            "give_item;Jack;Siegmund",
            "bop_portrait;Jack",
            "expression;Jack;Smile,CloseEyes",
            "s;Jack;Thank you, sir Tramond!|With this, I'm sure to defeat any great evil before me.",
            "add_portrait;Koromin;FarLeft;left;no_block",
            "move_portrait;Tramond;MidLeft",
            "music;Tension",
            "expression;Jack;NoSmile,OpenEyes",
            "s;Koromin;The tyrant's army has arrived.{c:wait;300} They're moving to siege the castle.",
            "expression;Tramond;CloseEyes",
            "s;Tramond;Could this be...{c:wait;200} our end...?",
            "s;Koromin;My troops are covering the bridges.{c:wait;300} I will guard the castle's gate.|{c:expression;Tramond;OpenEyes}Everyone, go hide. {c:wait;300}You are safe with me.",
            "bop_portrait;Jack;no_block",
            "s;Jack;Sir Koromin, there's no way I'll let you fight alone!|Leave the front to me and my group.{c:wait;300} I will fulfill my misson!",
            "mirror_portrait;Jack",
            "remove_portrait;Jack;;right;no_block",
            "wait;200",
            "mirror_portrait;Koromin",
            "remove_portrait;Koromin;;left",
            "wait;300",
            "expression;Tramond;CloseEyes",
            "s;Tramond;You are our only hope...;;;thought_bubble;;;;;;no_sound",
            "transition;close;1000",
            "center_cursor;13,11",
            "change_background",
            "transition;open;1000",
            "wait;1000",
            "add_portrait;Koromin;Left",
            "s;Koromin;Hold patiently! The drawbridges will protect us until our reinforcements arrive!",
            "wait;500",
            "remove_portrait;Koromin",
            "center_cursor;1,17;1000",
            "wait;1000",
            "center_cursor;23,11;1000",
            "wait;1000",
            "center_cursor;14,28;1000",
            "wait;1000",
            "center_cursor;13,15;1500",
            "#flicker_cursor;Barios",
            "#add_portrait;Barios;Left",
            "#s;Barios;Raise the bridges!",
            "#r;Barios",
            "#wait;500",
            "#sound;Axe Pull",
            "#hide_layer;bridges",
            "wait;2000",
            "music;Prologue battles",
            "add_group;partyjack;partyjackgate;fade;stack",
            "move_group;partyjack;partyjack;normal",
            "wait;2000",
            "center_cursor;Jack",
            "flicker_cursor;Jack",
            "add_portrait;Jack;Left",
            "s;Jack;They're never going past us!",
            "r;Jack",
            "center_cursor;Porhen",
            "flicker_cursor;Porhen",
            "add_portrait;Porhen;Left",
            "s;Porhen;You want a good fight, you gotta earn it!",
            "r;Porhen",
            "center_cursor;Logan",
            "flicker_cursor;Logan",
            "add_portrait;Logan;Left",
            "s;Logan;Ah... I can already see it. I'll paint our success in a magnificent manner.",
            "r;Logan",
            "center_cursor;Raylene",
            "flicker_cursor;Raylene",
            "add_portrait;Raylene;Left",
            "s;Raylene;You stay there painting, I'll be busy making the profit of a lifetime!",
            "r;Raylene",
            "center_cursor;Goreon",
            "flicker_cursor;Goreon",
            "add_portrait;Goreon;Left",
            "s;Goreon;Heh... First you need to survive...",
            "r;Goreon",
            "center_cursor;Zaryca",
            "flicker_cursor;Zaryca",
            "add_portrait;Zaryca;Left",
            "s;Zaryca;Don't worry, everyone, I'll protect you from any harm!",
            "r;Zaryca",
            "center_cursor;Numb",
            "flicker_cursor;Numb",
            "add_portrait;Numb;Left",
            "s;Numb;I don't need protection. Stay out of my way or I'll cut you too.",
            "r;Numb",
            "center_cursor;Dytri",
            "flicker_cursor;Dytri",
            "add_portrait;Dytri;Left",
            "s;Dytri;We're in this together, and by Ivala we will prevail.",
            "r;Dytri",
            "center_cursor;Tima",
            "flicker_cursor;Tima",
            "add_portrait;Tima;Left",
            "s;Tima;If Ivala wants to take my place here, she's free to do so anytime.",
            "r;Tima",
            "center_cursor;Kirina",
            "flicker_cursor;Kirina",
            "add_portrait;Kirina;Left;;Smile",
            "s;Kirina;Hahaha, don't be silly! Why give up your spot when it's so much fun?",
            "r;Kirina",
            "center_cursor;Barios",
            "flicker_cursor;Barios",
            "add_portrait;Barios;Left",
            "s;Barios;This is no laughing matter at all. You need to concentrate!",
            "r;Barios",
            "center_cursor;Jack",
            "flicker_cursor;Jack",
            "add_portrait;Jack;Left",
            "s;Jack;No need to fret, master Barios. Our hearts are united and our spirit unmatched.|To battle, friends!",
            "transition;close;2000",
            "remove_unit;Logan;immediate",
            "remove_unit;Porhen;immediate",
            "remove_unit;Raylene;immediate",
            "remove_unit;Goreon;immediate",
            "remove_unit;Zaryca;immediate",
            "remove_unit;Numb;immediate",
            "remove_unit;Dytri;immediate",
            "remove_unit;Tima;immediate",
            "remove_unit;Kirina;immediate",
            "remove_unit;Barios;immediate",
            "move_unit;Jack;13,13;immediate",
            "level_var;_minimum_deployment;8",
            "prep;t"
        ],
        "nid": "Intro0 Start"
    },
    {
        "name": "DK varia",
        "trigger": "enemy_turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 13,
        "_source": [
            "add_unit;Varia;8,2;immediate;push",
            "add_unit;Aka;10,2;immediate;push",
            "add_unit;Carina;9,1;immediate;push",
            "add_unit;Hilstara;8,3;immediate;push",
            "add_unit;Vhala;9,2;immediate;push;fade",
            "center_cursor;8,0;1500",
            "#add_unit;Dari;15,4;immediate;push;fade",
            "wait;1500",
            "move_unit;Varia;15,4;normal;push;no_block;",
            "move_unit;Aka;16,3;normal;push;no_block;no_follow",
            "move_unit;Carina;16,4;normal;push;no_block;no_follow",
            "move_unit;Hilstara;16,5;normal;push;no_block;no_follow",
            "move_unit;Vhala;16,4;normal;push;no_follow",
            "#center_cursor;14,5;1500",
            "wait;1500",
            "move_unit;Varia;14,4;normal;push;no_follow",
            "pose_unit;Varia;start_cast;down",
            "sound;Weapon Click",
            "map_anim;RedDot;14,5;permanent;overlay",
            "move_unit;Varia;14,3;normal;push;no_follow",
            "wait;500",
            "sound;Explosion3",
            "screen_shake;500",
            "show_layer;exploded",
            "remove_map_anim;RedDot;14,5;overlay",
            "screen_shake_end",
            "wait;500",
            "move_unit;Varia;15,10;normal;push;no_block",
            "move_unit;Aka;10,9;normal;push;no_follow;no_block",
            "move_unit;Carina;15,8;normal;push;no_follow;no_block",
            "move_unit;Hilstara;11,10;normal;push;no_follow;no_block",
            "move_unit;Vhala;15,9;normal;push;no_block;no_follow",
            "#move_unit;Dari;16,9;normal;push;no_follow",
            "wait;2000",
            "if;game.check_alive('ally_9')",
            "    move_unit;Aka;ally_9;swoosh;closest",
            "    wait;200",
            "    interact_unit;Aka;ally_9;hit1,hit1,end;;force_no_animation",
            "    wait;500",
            "end",
            "if;game.check_alive('ally_10')",
            "    interact_unit;Vhala;ally_10;hit1,hit1,end;force_no_animation",
            "    wait;500",
            "end",
            "wait;500"
        ],
        "nid": "Intro0 DK varia"
    },
    {
        "name": "DK intro",
        "trigger": "enemy_turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 25,
        "_source": [
            "music_clear;2000",
            "add_weather;rain",
            "add_weather;night",
            "center_cursor;13,14",
            "wait;2000",
            "music;IK attack;1000",
            "change_music;enemy_battle;IK attack",
            "set_name;Aka;???",
            "set_name;Vhala;???",
            "set_name;Robin;???",
            "set_name;Nalili;???",
            "set_name;Uyae;???"
        ],
        "nid": "Intro0 DK intro"
    },
    {
        "name": "deprecated Intro DK yarra trin ",
        "trigger": null,
        "level_nid": "Intro0",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 31,
        "_source": [
            "level_var;trincopied;0",
            "",
            "if;game.check_alive('Zaryca') == True",
            "    center_cursor;Zaryca;1500",
            "    wait;2000",
            "    add_unit;Yarra;Zaryca;fade;closest;fade",
            "    add_unit;Trin;Yarra;fade;closest;fade",
            "    wait;500",
            "    interact_unit;Trin;Zaryca;end",
            "    wait;1000",
            "    map_anim;AOE_Rally;Zaryca;no_block",
            "    change_team;Zaryca;enemy",
            "    wait;1000",
            "    if;game.check_alive('Logan') == True",
            "        move_unit;Zaryca;Logan;normal;closest",
            "        interact_unit;Zaryca;Logan;crit1",
            "    elif;game.check_alive('Kirina') == True",
            "        move_unit;Zaryca;Kirina;normal;closest",
            "        interact_unit;Zaryca;Kirina;crit1",
            "    elif;game.check_alive('Goreon') == True",
            "        move_unit;Zaryca;Goreon;normal;closest",
            "        interact_unit;Zaryca;Goreon;crit1",
            "    elif;game.check_alive('Numb') == True",
            "        move_unit;Zaryca;Numb;normal;closest",
            "        interact_unit;Zaryca;Numb;crit1",
            "    elif;game.check_alive('Raylene') == True",
            "        move_unit;Zaryca;Raylene;normal;closest",
            "        interact_unit;Zaryca;Raylene;crit1",
            "    end",
            "level_var;trincopied;1",
            "end",
            "",
            "if;game.level_vars['trincopied'] == 0 and game.check_alive('Barios') == True",
            "    center_cursor;Barios;1500",
            "    wait;2000",
            "    add_unit;Yarra;Barios;fade;closest;fade",
            "    add_unit;Trin;Yarra;fade;closest;fade",
            "    wait;500",
            "    interact_unit;Trin;Barios;end",
            "    wait;1000",
            "    map_anim;AOE_Rally;Barios;no_block",
            "    change_team;Barios;enemy",
            "    wait;1000",
            "    if;game.check_alive('Logan') == True",
            "        move_unit;Barios;Logan;normal;closest",
            "        interact_unit;Barios;Logan;crit1",
            "    elif;game.check_alive('Kirina') == True",
            "        move_unit;Barios;Kirina;normal;closest",
            "        interact_unit;Barios;Kirina;crit1",
            "    elif;game.check_alive('Goreon') == True",
            "        move_unit;Barios;Goreon;normal;closest",
            "        interact_unit;Barios;Goreon;crit1",
            "    elif;game.check_alive('Numb') == True",
            "        move_unit;Barios;Numb;normal;closest",
            "        interact_unit;Barios;Numb;crit1",
            "    elif;game.check_alive('Raylene') == True",
            "        move_unit;Barios;Raylene;normal;closest",
            "        interact_unit;Barios;Raylene;crit1",
            "    end",
            "level_var;trincopied;1",
            "end",
            "",
            "if;game.level_vars['trincopied'] == 0 and game.check_alive('Tima') == True",
            "    center_cursor;Tima;1500",
            "    wait;2000",
            "    add_unit;Yarra;Tima;fade;closest;fade",
            "    add_unit;Trin;Yarra;fade;closest;fade",
            "    wait;500",
            "    interact_unit;Trin;Tima;end",
            "    wait;1000",
            "    map_anim;AOE_Rally;Tima;no_block",
            "    change_team;Tima;enemy",
            "    wait;1000",
            "    if;game.check_alive('Logan') == True",
            "        move_unit;Tima;Logan;normal;closest",
            "        interact_unit;Tima;Logan;crit1",
            "    elif;game.check_alive('Kirina') == True",
            "        move_unit;Tima;Kirina;normal;closest",
            "        interact_unit;Tima;Kirina;crit1",
            "    elif;game.check_alive('Goreon') == True",
            "        move_unit;Tima;Goreon;normal;closest",
            "        interact_unit;Tima;Goreon;crit1",
            "    elif;game.check_alive('Numb') == True",
            "        move_unit;Tima;Numb;normal;closest",
            "        interact_unit;Tima;Numb;crit1",
            "    elif;game.check_alive('Raylene') == True",
            "        move_unit;Tima;Raylene;normal;closest",
            "        interact_unit;Tima;Raylene;crit1",
            "    end",
            "level_var;trincopied;1",
            "end",
            "",
            "if;game.level_vars['trincopied'] == 0 and game.check_alive('Porhen') == True",
            "    center_cursor;Porhen;1500",
            "    wait;2000",
            "    add_unit;Yarra;Porhen;fade;closest;fade",
            "    add_unit;Trin;Yarra;fade;closest;fade",
            "    wait;500",
            "    interact_unit;Trin;Porhen;end",
            "    wait;1000",
            "    map_anim;AOE_Rally;Porhen;no_block",
            "    change_team;Porhen;enemy",
            "    wait;1000",
            "    if;game.check_alive('Logan') == True",
            "        move_unit;Porhen;Logan;normal;closest",
            "        interact_unit;Porhen;Logan;crit1",
            "    elif;game.check_alive('Kirina') == True",
            "        move_unit;Porhen;Kirina;normal;closest",
            "        interact_unit;Porhen;Kirina;crit1",
            "    elif;game.check_alive('Goreon') == True",
            "        move_unit;Porhen;Goreon;normal;closest",
            "        interact_unit;Porhen;Goreon;crit1",
            "    elif;game.check_alive('Numb') == True",
            "        move_unit;Porhen;Numb;normal;closest",
            "        interact_unit;Porhen;Numb;crit1",
            "    elif;game.check_alive('Raylene') == True",
            "        move_unit;Porhen;Raylene;normal;closest",
            "        interact_unit;Porhen;Raylene;crit1",
            "    end",
            "level_var;trincopied;1",
            "end",
            "",
            "if;game.level_vars['trincopied'] == 0 and game.check_alive('Jack') == True",
            "    center_cursor;Jack;1500",
            "    wait;2000",
            "    add_unit;Yarra;Jack;fade;closest;fade",
            "    add_unit;Trin;Yarra;fade;closest;fade",
            "    wait;500",
            "    interact_unit;Trin;Jack;end",
            "    wait;1000",
            "    map_anim;AOE_Rally;Jack;no_block",
            "    change_team;Jack;enemy",
            "    wait;1000",
            "    if;game.check_alive('Logan') == True",
            "        move_unit;Jack;Logan;normal;closest",
            "        interact_unit;Jack;Logan;crit1",
            "    elif;game.check_alive('Kirina') == True",
            "        move_unit;Jack;Kirina;normal;closest",
            "        interact_unit;Jack;Kirina;crit1",
            "    elif;game.check_alive('Goreon') == True",
            "        move_unit;Jack;Goreon;normal;closest",
            "        interact_unit;Jack;Goreon;crit1",
            "    elif;game.check_alive('Numb') == True",
            "        move_unit;Jack;Numb;normal;closest",
            "        interact_unit;Jack;Numb;crit1",
            "    elif;game.check_alive('Raylene') == True",
            "        move_unit;Jack;Raylene;normal;closest",
            "        interact_unit;Jack;Raylene;crit1",
            "    end",
            "level_var;trincopied;1",
            "end"
        ],
        "nid": "Intro0 deprecated Intro DK yarra trin "
    },
    {
        "name": "DK yarra trin",
        "trigger": "enemy_turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 15,
        "_source": [
            "#level_var;randomcopy;'{e:game.get_random_choice(game.get_player_units())}'",
            "game_var;randomcopy;'{e:game.get_random_choice([u for u in game.get_player_units() if u.nid not in ['Jack', 'Dytri']])}'",
            "give_skill;Yarra;Illusioned;;no_banner",
            "give_skill;Trin;Illusioned;;no_banner",
            "center_cursor;{v:randomcopy};1500",
            "wait;2000",
            "add_unit;Yarra;{v:randomcopy};fade;closest;fade",
            "add_unit;Trin;{v:randomcopy};fade;closest;fade",
            "wait;1000",
            "pose_unit;Trin;active",
            "wait;1000",
            "sound;EvilEye",
            "map_anim;MapSpiritbane;{v:randomcopy}",
            "",
            "if;u('{v:randomcopy}').lead_unit",
            "    level_var;randomtraveler;u('{v:randomcopy}').traveler",
            "    separate;{v:randomcopy}",
            "    add_unit;{v:randomtraveler};{v:randomcopy};fade;closest;fade",
            "else",
            "    level_var;randomrescuer;'{eval:game.get_rescuer(u('{v:randomcopy}'))}'",
            "    separate;{v:randomrescuer}",
            "    add_unit;{v:randomcopy};{v:randomrescuer};fade;closest;fade",
            "end",
            "",
            "change_team;{v:randomcopy};enemy",
            "map_anim;OverchargeAura;{v:randomcopy}",
            "pose_unit;Trin;normal",
            "remove_skill;Yarra;Illusioned;;no_banner",
            "remove_skill;Trin;Illusioned;no_banner",
            "wait;2000",
            "level_var;randomattack;'{e:game.get_random_choice([u for u in game.get_player_units() if u.nid not in ['Jack', 'Barios']])}'",
            "move_unit;{v:randomcopy};{v:randomattack};normal;closest",
            "wait;1000",
            "interact_unit;{v:randomcopy};{v:randomattack};crit1,end",
            "#if;game.check_alive('{v:randomattack}')",
            "    #give_skill;{v:randomattack};Stunned;;no_banner",
            "    #kill_unit;{v:randomattack}",
            "#end",
            "wait;500",
            "",
            ""
        ],
        "nid": "Intro0 DK yarra trin"
    },
    {
        "name": "DK robin altina lyn ori",
        "trigger": "enemy_turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 19,
        "_source": [
            "add_unit;Lynine;11,29;fade;push;south",
            "add_unit;Altina;Lynine;immediate;closest",
            "pair_up;Altina;Lynine",
            "add_unit;Orilise;17,0;fade;push;north",
            "add_unit;Robin;Orilise;immediate;closest",
            "pair_up;Robin;Orilise",
            "center_cursor;11,29;2000",
            "move_unit;Lynine;11,14;normal;closest;no_follow;no_block",
            "wait;500",
            "center_cursor;16,0;2000",
            "move_unit;Orilise;16,13;normal;closest;no_block;no_follow",
            "wait;500",
            "center_cursor;13,13;2000",
            "wait;3000",
            "separate;Lynine",
            "separate;Orilise",
            "add_unit;Altina;Lynine;swoosh;closest;fade",
            "add_unit;Robin;Orilise;swoosh;closest;fade",
            "wait;1000",
            "flicker_cursor;Altina",
            "wait;500",
            "pose_unit;Altina;start_cast",
            "map_anim;AOE_Meteor;13,11",
            "sound;FireBall",
            "screen_shake;200",
            "map_anim;MapFire;12,11;permanent;overlay;no_block",
            "map_anim;MapFire;14,10;permanent;overlay;no_block",
            "map_anim;MapFire;14,12;permanent;overlay",
            "kill_unit;ally_2",
            "kill_unit;ally_3",
            "set_current_hp;Koromin;6",
            "set_current_hp;ally_9;9",
            "set_current_hp;ally_10;8",
            "pose_unit;Altina;end_cast",
            "wait;2000",
            "flicker_cursor;Robin",
            "wait;500",
            "move_unit;Robin;13,13;normal;push",
            "interact_unit;Robin;Koromin;crit1,end;LightningLance;force_no_animation",
            "wait;500",
            "move_unit;Robin;15,14;normal;closest;no_follow",
            "wait;500"
        ],
        "nid": "Intro0 DK robin altina lyn ori"
    },
    {
        "name": "DK qum heal",
        "trigger": "enemy_turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 16,
        "_source": [
            "wait;300",
            "center_cursor;24,12;1500",
            "add_unit;Qum;25,13;fade;push;east",
            "wait;1000",
            "move_unit;Qum;17,13;normal;closest;silent",
            "wait;1500",
            "pose_unit;Qum;start_cast",
            "wait;100",
            "sound;Mend",
            "map_anim;AOE_Rally;Qum",
            "add_weather;purple",
            "add_weather;purple",
            "add_weather;purple",
            "wait;500",
            "sound;MapHeal",
            "for;qumbomb;[unit.nid for unit in game.get_enemy1_units()]",
            "    map_anim;MapBigHealTrans;{qumbomb};overlay;no_block",
            "    set_current_hp;{qumbomb};{e: u('{qumbomb}').get_max_hp()}",
            "    give_skill;{qumbomb};Optimization_buff;;no_banner",
            "endf",
            "pose_unit;Qum;normal",
            "wait;300"
        ],
        "nid": "Intro0 DK qum heal"
    },
    {
        "name": "DK simon riala dk",
        "trigger": "enemy_turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 11,
        "_source": [
            "wait;1000",
            "center_cursor;Jack;1500",
            "add_portrait;Jack;CenterRight;;CloseEyes,NoSmile",
            "s;Jack;No, no!! This can't be happening!!!{c:wait;1000}{no_wait}",
            "remove_portrait;Jack;no_block",
            "move_unit;Jack;13,11;normal;push",
            "wait;1000",
            "sound;Weapon Shine",
            "map_anim;OverchargeAura;Jack",
            "pose_unit;Jack;start_cast;down",
            "add_portrait;Jack;CenterRight;;OpenEyes,NoSmile",
            "s;Jack;For all of my friends...{c:wait;300}{c:bop_portrait;Jack} You will never pass through me!!",
            "remove_portrait;Jack",
            "give_skill;Jack;Determination",
            "wait;1000",
            "pose_unit;Jack;normal",
            "music_clear;1000",
            "center_cursor;Dargai;1500",
            "wait;300",
            "remove_unit;Dargai;warp;fade",
            "center_cursor;13,15;2000",
            "wait;2000",
            "add_unit;Riala;13,16;warp;push;fade",
            "add_unit;Simon;13,15;warp;push;fade",
            "wait;2000",
            "sound;DemonKingRoar",
            "screen_shake;1000",
            "map_anim;AOE_Rally;13,14;overlay",
            "add_unit;DoomKing;13,14;swoosh;push;fade",
            "add_weather;dark;DoomKing",
            "show_layer;dk",
            "sound;DemonKingEntrance",
            "screen_shake_end",
            "wait;2000",
            "add_portrait;DoomKing;FarLeft;;CloseEyes",
            "wait;1000",
            "sound;Heaviest",
            "move_portrait;DoomKing;Left;no_block",
            "move_unit;DoomKing;13,13;;push;no_follow;silent",
            "wait;1000",
            "sound;Heaviest",
            "music;Main Theme_TLS",
            "move_portrait;DoomKing;CenterLeft;no_block",
            "move_unit;DoomKing;13,12;;push;no_follow;silent",
            "wait;1500",
            "screen_shake;100;celeste",
            "sound;Stare",
            "expression;DoomKing;OpenEyes",
            "screen_shake_end",
            "#changes color",
            "change_team_palette;player;map_sprite_red",
            "change_team_palette;enemy;map_sprite_blue",
            "change_team_palette;other;map_sprite_red",
            "wait;1000",
            "r;DoomKing",
            "wait;2000",
            "center_cursor;Simon;1500",
            "flicker_cursor;Simon",
            "add_portrait;Simon;CenterLeft",
            "s;Simon;This battle is over.{c:wait;300} Surrender now before any more bloodshed.",
            "move_unit;Yarra;Simon;normal;closest;no_follow",
            "wait;300",
            "add_portrait;Yarra;FarRight",
            "move_portrait;Yarra;CenterRight",
            "s;Yarra;Simon, I've confirmed that he is still holed up inside the castle.",
            "add_portrait;Robin;FarRight;right",
            "s;Robin;Our mages have already blocked any possible teleportation.",
            "s;Simon;Good. Without one of its leaders, this rebellion will soon meet its end.",
            "add_portrait;Riala;FarLeft;left",
            "s;Riala;These youngster seem like a new party of adventurers.|Perhaps they were manipulated into following their cause.",
            "expression;Simon;CloseEyes",
            "s;Simon;I see. This has spread farther than I anticipated.|{c:expression;Simon;OpenEyes}Can we use this to our advantage?",
            "s;Riala;Maybe we could show them the state of Ari-Yhilin.|It certainly won't seem as evil as they've been told.",
            "s;Yarra;They would soon realize how peaceful it is!",
            "s;Robin;Their voices would be more accepting to the ears of the extremists.",
            "s;Simon;I agree. Send the ones remaining to our transporters to Ari-Yhilin.",
            "remove_portrait;Riala;;left;no_block",
            "remove_portrait;Yarra;;right;no_block",
            "remove_portrait;Robin;;right",
            "move_unit;Orcent;Simon;normal;closest;no_block;no_follow",
            "move_unit;Hilstara;Simon;normal;closest;no_follow",
            "wait;500",
            "multi_add_portrait;Hilstara;CenterRight;Orcent;FarRight",
            "s;Simon;Instruct our captains to occupy the castle, but we won't stay here ourselves.",
            "s;Hilstara;Are we regrouping the old party?",
            "s;Simon;Yes, as I believe we need to act swiftly.",
            "s;Orcent;Understandable, as mobilizing our army is rather demanding.",
            "remove_portrait;Hilstara;;right;no_block",
            "remove_portrait;Orcent;;right",
            "wait;500",
            "expression;Simon;CloseEyes",
            "s;Simon;And I really thought we were going to take a break from conflicts for a while...;;;thought_bubble;no_sound",
            "transition;close;3000",
            "wait;1500",
            "end_skip",
            "set_name;Aka;Aka",
            "set_name;Vhala;Vhala",
            "set_name;Robin;Robin",
            "set_name;Nalili;Nalili",
            "set_name;Uyae;Uyae",
            "remove_generics_from_region;cleanup",
            "change_team_palette;player;map_sprite_blue",
            "change_team_palette;enemy;map_sprite_red",
            "change_team_palette;other;map_sprite_green",
            "for;alive;[u for u in game.get_player_units()]",
            "    game_var;{alive};1",
            "endf",
            "for;dk;[u for u in game.get_enemy1_units()]",
            "    change_team;{dk};player",
            "endf",
            "win_game",
            "wait;3000"
        ],
        "nid": "Intro0 DK simon riala dk"
    },
    {
        "name": "Unit deaths",
        "trigger": "unit_death",
        "level_nid": "Intro0",
        "condition": "unit.team == 'player'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;'{unit}' == 'Jack'",
            "    ",
            "    add_portrait;Jack;FarRight",
            "    expression;Jack;CloseEyes,NoSmile",
            "    speak;Jack;No...{c:wait;300} My...{c:wait;300} journey...",
            "    remove_portrait;Jack",
            "    if;game.current_mode.nid != 'Ironman'",
            "        activate_turnwheel",
            "    else",
            "        remove_unit;Jack;fade;fade",
            "        lose_game",
            "    end",
            "end",
            "",
            "if;'{unit}' == 'Porhen'",
            "    ",
            "    add_portrait;Porhen;FarRight",
            "    expression;Porhen;CloseEyes,Smile",
            "    speak;Porhen;I had...{c:wait;300} a good run...",
            "    remove_portrait;Porhen",
            "    remove_unit;Porhen;fade;fade",
            "end",
            "",
            "",
            "if;'{unit}' == 'Numb'",
            "    ",
            "    add_portrait;Numb;FarRight",
            "    expression;Numb;CloseEyes,NoSmile",
            "    speak;Numb;My vengeance... not until...",
            "    remove_portrait;Numb",
            "    remove_unit;Numb;fade;fade",
            "end",
            "",
            "if;'{unit}' == 'Logan'",
            "    ",
            "    add_portrait;Logan;FarRight",
            "    expression;Logan;CloseEyes,NoSmile",
            "    speak;Logan;Not... yet...!",
            "    remove_portrait;Logan",
            "    remove_unit;Logan;fade;fade",
            "end",
            "",
            "if;'{unit}' == 'Raylene'",
            "    ",
            "    add_portrait;Raylene;FarRight",
            "    expression;Raylene;CloseEyes,NoSmile",
            "    speak;Raylene;NO!! My... dream...",
            "    remove_portrait;Raylene",
            "    remove_unit;Raylene;fade;fade",
            "end",
            "",
            "if;'{unit}' == 'Goreon'",
            "    ",
            "    add_portrait;Goreon;FarRight",
            "    expression;Goreon;CloseEyes,NoSmile",
            "    speak;Goreon;You have no idea...{c:wait;300} What you caused...",
            "    remove_portrait;Goreon",
            "    remove_unit;Goreon;fade;fade",
            "end",
            "",
            "if;'{unit}' == 'Zaryca'",
            "    ",
            "    add_portrait;Zaryca;FarRight",
            "    expression;Zaryca;CloseEyes,NoSmile",
            "    speak;Zaryca;AAaaaahh...{c:wait;300} I messed up...",
            "    remove_portrait;Zaryca",
            "    remove_unit;Zaryca;fade;fade",
            "end",
            "",
            "if;'{unit}' == 'Dytri'",
            "    ",
            "    add_portrait;Dytri;FarRight",
            "    expression;Dytri;CloseEyes,NoSmile",
            "    speak;Dytri;If that is Ivala's will...",
            "    remove_portrait;Dytri",
            "    remove_unit;Dytri;fade;fade",
            "end",
            "",
            "if;'{unit}' == 'Tima'",
            "    ",
            "    add_portrait;Tima;FarRight",
            "    expression;Tima;CloseEyes,NoSmile",
            "    speak;Tima;...never...{c:wait;300} ...forgive...",
            "    remove_portrait;Tima",
            "    remove_unit;Tima;fade;fade",
            "end",
            "",
            "if;'{unit}' == 'Kirina'",
            "    ",
            "    add_portrait;Kirina;FarRight",
            "    expression;Kirina;CloseEyes,NoSmile",
            "    speak;Kirina;But... It can't be...?!",
            "    remove_portrait;Kirina",
            "    remove_unit;Kirina;fade;fade",
            "end",
            "",
            "if;'{unit}' == 'Barios'",
            "    ",
            "    add_portrait;Barios;FarRight",
            "    expression;Barios;CloseEyes,NoSmile",
            "    speak;Barios;Forgive me, Jack...{c:wait;300}",
            "    remove_portrait;Barios",
            "    remove_unit;Barios;fade;fade",
            "end"
        ],
        "nid": "Intro0 Unit deaths"
    },
    {
        "name": "Register alive",
        "trigger": "level_end",
        "level_nid": "Intro0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;alive;[u for u in game.get_player_units()]",
            "    game_var;{alive};1",
            "    game_var;{alive}_pos;{e: u('{alive}').position}",
            "endf"
        ],
        "nid": "Intro0 Register alive"
    },
    {
        "name": "Talks",
        "trigger": "on_talk",
        "level_nid": "Base1",
        "condition": "unit.nid == 'Simon'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit2.nid == 'Janine'",
            "multi_add_portrait;Janine;Left;Simon;Right",
            "expression;Janine;Smile",
            "s;Janine;Hello, my dear. We need to talk about the current situation.",
            "choice;advance;Proceed to next chapter?;Yes,No;backable",
            "    if;'{v:_last_choice}' == 'Yes'",
            "        music_clear;1500",
            "        wait;1000",
            "        transition;close;1000",
            "        win_game",
            "    else",
            "    end",
            "end",
            "",
            "if;unit2.nid == 'Aka'",
            "multi_add_portrait;Aka;Left;Simon;Right",
            "expression;Aka;Smile",
            "s;Aka;Hey, Simon. How's it going?",
            "s;Simon;Better with all of you here.",
            "s;Aka;Don't get sappy on me now.|How was the meeting?",
            "expression;Simon;CloseEyes",
            "s;Simon;Sometimes I end up thinking to myself that it was easier when I knew the enemy.",
            "expression;Simon;OpenEyes",
            "s;Simon;An absurd thought, of course.{c:wait;300} I'm grateful for the struggles of peaceful times.",
            "expression;Aka;NoSmile,CloseEyes",
            "s;Aka;Yeah, I feel for you.{c:wait;300} I'm sorry I can't be of much help there.|{c:expression;Aka;Smile,OpenEyes}{c:bop_portrait;Aka}Whenever you want me to stab logistics and politics in the back, just tell me!",
            "expression;Simon;Smile",
            "s;Simon;I will surely keep that in mind.",
            "remove_talk;Simon;Aka",
            "end",
            "",
            "if;unit2.nid == 'Altina'",
            "multi_add_portrait;Altina;Left;Simon;Right",
            "expression;Altina;Smile",
            "s;Altina;",
            "end",
            "",
            "if;unit2.nid == 'Balia'",
            "multi_add_portrait;Balia;Left;Simon;Right",
            "s;Balia;Simon.",
            "s;Simon;Hello, Balia. Did you miss me?",
            "s;Balia;?|Were you gone?",
            "s;Simon;Heh. Yes, but not for long.{c:wait;300} Any progress with the imps?",
            "expression;Balia;Smile",
            "s;Balia;I can feel a breakthrough is coming soon!|I'm close to reliably summoning more diverse orcs!",
            "s;Simon;I'm glad, Balia. Best of luck to you.",
            "mirror_portrait;Simon",
            "move_portrait;Simon;FarRight",
            "s;Balia;Simon.",
            "mirror_portrait;Simon",
            "s;Simon;Yes?",
            "expression;Balia;CloseEyes,NoSmile",
            "s;Balia;I like when you are here.",
            "expression;Simon;Smile",
            "s;Simon;I feel the same for you, Balia.",
            "remove_talk;Simon;Balia",
            "end",
            "",
            "if;unit2.nid == 'Carina'",
            "multi_add_portrait;Carina;Left;Simon;Right",
            "expression;Carina;Smile",
            "s;Carina;",
            "end",
            "",
            "if;unit2.nid == 'Dari'",
            "multi_add_portrait;Dari;Left;Simon;Right",
            "expression;Dari;Smile",
            "s;Dari;",
            "end",
            "",
            "if;unit2.nid == 'Hilstara'",
            "multi_add_portrait;Hilstara;Left;Simon;Right",
            "s;Hilstara;Simon. Good to see you.|We've received more reports of plunderings in the former Incubus King's territory.",
            "expression;Simon;CloseEyes",
            "s;Simon;We need more order, but the territory is too large and our foces too thin.|{c:expression;Simon;OpenEyes}Is there something else we can do to mitigate this issue?",
            "expression;Hilstara;CloseEyes",
            "s;Hilstara;No extraordinary solution here, unfortunately.|{c:expression;Hilstara;OpenEyes}However, I can employ more mercenaries to stand by at checkpoints in the borders.|I don't fully trust that they wouldn't just aggravate the problem...|but mixing our disciplined orcs among them could perhaps keep them in line.",
            "s;Simon;I see. Until we're able to regain more stability, this might be our only option.",
            "table;sxmerc;[{v:pron}];;;;top;funds_display;;center;expression",
            "s;Hilstara;I predict this would cost us about 300k ProN.{c:wait;300} Do you want me to go ahead?",
            "choice;mercs1;Reinforce borders with mercenaries?;Yes,No;backable",
            "    if;'{v:_last_choice}' == 'Yes'",
            "        inc_game_var;pron;-300",
            "        game_var;mercsborder;1",
            "        s;Simon;We should control any chaos before it gets out of control.|It's about time those lands start to heal.",
            "        s;Hilstara;Agreed. I will do my best to make it more secure.",
            "        remove_talk;Simon;Hilstara",
            "    else",
            "        expression;Simon;CloseEyes",
            "        s;Simon;Sorry, I need more time to think.|{c:expression;Simon;OpenEyes}Our funds are being drained fast by our current political battles.|This might be a hard moment, but I need to focus on the future of the societies there.",
            "        s;Hilstara;Of course, Simon. I trust your judgement.",
            "    end",
            "remove_table;sxmerc",
            "end",
            "",
            "end",
            "",
            "if;unit2.nid == 'Lynine'",
            "multi_add_portrait;Lynine;Left;Simon;Right",
            "expression;Lynine;Smile",
            "s;Lynine;",
            "end",
            "",
            "if;unit2.nid == 'Nalili'",
            "multi_add_portrait;Nalili;Left;Simon;Right",
            "expression;Nalili;Smile",
            "s;Nalili;",
            "end",
            "",
            "if;unit2.nid == 'Orcent'",
            "multi_add_portrait;Orcent;Left;Simon;Right",
            "expression;Orcent;Smile",
            "s;Orcent;",
            "end",
            "",
            "if;unit2.nid == 'Orilise'",
            "multi_add_portrait;Orilise;Left;Simon;Right",
            "expression;Orilise;Smile",
            "s;Orilise;",
            "end",
            "",
            "if;unit2.nid == 'Qum'",
            "multi_add_portrait;Qum;Left;Simon;Right",
            "expression;Qum;Smile",
            "s;Qum;",
            "end",
            "",
            "if;unit2.nid == 'Riala'",
            "multi_add_portrait;Riala;Left;Simon;Right",
            "expression;Riala;Smile",
            "s;Riala;",
            "end",
            "",
            "if;unit2.nid == 'Robin'",
            "multi_add_portrait;Robin;Left;Simon;Right",
            "expression;Robin;Smile",
            "s;Robin;",
            "end",
            "",
            "if;unit2.nid == 'Trin'",
            "multi_add_portrait;Trin;Left;Simon;Right",
            "expression;Trin;Smile",
            "s;Trin;",
            "end",
            "",
            "if;unit2.nid == 'Uyae'",
            "multi_add_portrait;Uyae;Left;Simon;Right",
            "expression;Uyae;Smile",
            "s;Uyae;",
            "end",
            "",
            "if;unit2.nid == 'Varia'",
            "multi_add_portrait;Varia;Left;Simon;Right",
            "expression;Varia;Smile",
            "s;Varia;",
            "end",
            "",
            "if;unit2.nid == 'Vhala'",
            "multi_add_portrait;Vhala;Left;Simon;Right",
            "expression;Vhala;Smile",
            "s;Vhala;",
            "end",
            "",
            "if;unit2.nid == 'Wynn'",
            "multi_add_portrait;Wynn;Left;Simon;Right",
            "expression;Wynn;Smile",
            "s;Wynn;",
            "end",
            "",
            "if;unit2.nid == 'Yarra'",
            "multi_add_portrait;Yarra;Left;Simon;Right",
            "expression;Yarra;Smile",
            "s;Yarra;",
            "end",
            "",
            "if;unit2.nid == 'Megail'",
            "multi_add_portrait;Megail;Left;Simon;Right",
            "expression;Megail;CloseEyes",
            "s;Megail;I want to punch that snobby son of a bitch.",
            "s;Simon;He has considerate influence, but we have an even greater power at our disposal.",
            "expression;Megail;OpenEyes",
            "s;Megail;No, we don't need to overcommit ourselves.|I already have a plan that will put a crack on his business.",
            "expression;Simon;Smile",
            "s;Simon;I thought for a moment you were frustrated for feeling defeated already.",
            "expression;Megail;Smile",
            "s;Megail;Then you need to know more of me, inside and out.|{c:expression;Megail;NoSmile,CloseEyes}But not today. I have many letters to write.",
            "s;Simon;I will leave you to it.",
            "end",
            "",
            "",
            ""
        ],
        "nid": "Base1 Talks"
    },
    {
        "name": "New Event",
        "trigger": null,
        "level_nid": "Base1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit2.nid == 'Nalili'",
            "multi_add_portrait;Nalili;Left;Simon;Right",
            "expression;Nalili;Smile",
            "s;Nalili;",
            "end"
        ],
        "nid": "Base1 New Event"
    },
    {
        "name": "New Event",
        "trigger": "on_talk",
        "level_nid": "Base2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit2.nid == 'Janine'",
            "multi_add_portrait;Janine;Left;Simon;Right",
            "expression;Janine;Smile",
            "s;Janine;Hello, my dear. We need to talk about the current situation.",
            "choice;advance;Proceed to next chapter?;Yes,No;backable",
            "    if;'{v:_last_choice}' == 'Yes'",
            "        wait;1000",
            "        transition;close;1000",
            "        win_game",
            "    else",
            "    end",
            "end",
            "",
            "if;unit2.nid == 'Aka'",
            "multi_add_portrait;Aka;Left;Simon;Right",
            "expression;Aka;Smile",
            "s;Aka;Hey, Simon. How's it going?",
            "end",
            "",
            "if;unit2.nid == 'Altina'",
            "multi_add_portrait;Altina;Left;Simon;Right",
            "expression;Altina;Smile",
            "s;Altina;",
            "end",
            "",
            "if;unit2.nid == 'Balia'",
            "multi_add_portrait;Balia;Left;Simon;Right",
            "expression;Balia;Smile",
            "s;Balia;",
            "end",
            "",
            "if;unit2.nid == 'Carina'",
            "multi_add_portrait;Carina;Left;Simon;Right",
            "expression;Carina;Smile",
            "s;Carina;",
            "end",
            "",
            "if;unit2.nid == 'Dari'",
            "multi_add_portrait;Dari;Left;Simon;Right",
            "expression;Dari;Smile",
            "s;Dari;",
            "end",
            "",
            "if;unit2.nid == 'Hilstara'",
            "multi_add_portrait;Hilstara;Left;Simon;Right",
            "expression;Hilstara;Smile",
            "s;Hilstara;",
            "end",
            "",
            "if;unit2.nid == 'Orcent'",
            "multi_add_portrait;Orcent;Left;Simon;Right",
            "expression;Orcent;Smile",
            "s;Orcent;",
            "end",
            "",
            "if;unit2.nid == 'Orilise'",
            "multi_add_portrait;Orilise;Left;Simon;Right",
            "expression;Orilise;Smile",
            "s;Orilise;",
            "end",
            "",
            "if;unit2.nid == 'Qum'",
            "multi_add_portrait;Qum;Left;Simon;Right",
            "expression;Qum;Smile",
            "s;Qum;",
            "end",
            "",
            "if;unit2.nid == 'Riala'",
            "multi_add_portrait;Riala;Left;Simon;Right",
            "expression;Riala;Smile",
            "s;Riala;",
            "end",
            "",
            "if;unit2.nid == 'Robin'",
            "multi_add_portrait;Robin;Left;Simon;Right",
            "expression;Robin;Smile",
            "s;Robin;",
            "end",
            "",
            "if;unit2.nid == 'Trin'",
            "multi_add_portrait;Trin;Left;Simon;Right",
            "expression;Trin;Smile",
            "s;Trin;",
            "end",
            "",
            "if;unit2.nid == 'Uyae'",
            "multi_add_portrait;Uyae;Left;Simon;Right",
            "expression;Uyae;Smile",
            "s;Uyae;",
            "end",
            "",
            "if;unit2.nid == 'Varia'",
            "multi_add_portrait;Varia;Left;Simon;Right",
            "expression;Varia;Smile",
            "s;Varia;",
            "end",
            "",
            "if;unit2.nid == 'Vhala'",
            "multi_add_portrait;Vhala;Left;Simon;Right",
            "expression;Vhala;Smile",
            "s;Vhala;",
            "end",
            "",
            "if;unit2.nid == 'Wynn'",
            "multi_add_portrait;Wynn;Left;Simon;Right",
            "expression;Wynn;Smile",
            "s;Wynn;",
            "end",
            "",
            "if;unit2.nid == 'Yarra'",
            "multi_add_portrait;Yarra;Left;Simon;Right",
            "expression;Yarra;Smile",
            "s;Yarra;",
            "end",
            "",
            "if;unit2.nid == 'Megail'",
            "multi_add_portrait;Megail;Left;Simon;Right",
            "expression;Megail;Smile",
            "s;Megail;",
            "end",
            "",
            "",
            ""
        ],
        "nid": "Base2 New Event"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "Intro2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Trisha;BossMiracle_1;;no_banner",
            "end",
            "",
            "chapter_title",
            "transition;close",
            "center_cursor;13,10",
            "music;Succubus City;1500",
            "transition;open;2000",
            "center_cursor;13,19;1500",
            "spawn_group;player;south;player;normal;giveup",
            "wait;3000",
            "add_portrait;Orcent;Left",
            "s;Succubus;Ah, finally! Please, protect us from those raids...",
            "s;Orcent;Of course. We believe the location of your settlement has been leaked to extremist groups.",
            "s;Succubus;Oh no...",
            "s;Orcent;However, as of today we will secure your position.",
            "s;Succubus;Oh, thank you so much!{c:wait;300} Before you work so hard, what about a quickie?",
            "s;Orcent;I apologize, as I am already well-fulfilled in monogamous a relationship.",
            "multi_remove_portrait;Orcent;Succubus",
            "music;Tension;1500",
            "center_cursor;23,1;1500",
            "spawn_group;boss;north;boss;normal",
            "wait;1000",
            "flicker_cursor;Trisha",
            "wait;500",
            "add_portrait;Trisha;Left",
            "s;Trisha;Damn, so the scum is already here.",
            "expression;Trisha;CloseEyes",
            "s;Trisha;On the other hand...",
            "expression;Trisha;OpenEyes,Smile",
            "s;Trisha;It's an opportunity of a lifetime!|Go, my men! Cleanse our Yhilin of this filth!",
            "transition;close;1000",
            "remove_unit;ally1;immediate",
            "remove_unit;ally2;immediate",
            "remove_unit;ally3;immediate"
        ],
        "nid": "Intro2 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "Intro1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "Intro1 Outro"
    },
    {
        "name": "Reinforcements",
        "trigger": "turn_change",
        "level_nid": "Intro2",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "music;Reinforcements",
            "center_cursor;13,2;1000",
            "add_unit;Lynine;13,0;fade;closest;north",
            "add_unit;Orilise;14,0;fade;closest;north",
            "move_unit;Lynine;12,9;normal;;no_block",
            "move_unit;Orilise;14,9;normal;closest",
            "wait;1500",
            "multi_add_portrait;Lynine;Left;Orilise;Right",
            "s;Lynine;Sorry for the wait, everyone!|More reinforcements should be coming up soon!",
            "s;Orilise;Meanwhile, we'll help you deal with those lunatics.|They should make for easy preys.",
            "#s;Orilise;Meanwhile, we brought some people quite useful already.",
            "#move_portrait;Orilise;MidRight",
            "#add_unit;Megail;14,10;swoosh;push;fade",
            "#add_portrait;Megail;FarRight;right",
            "#s;Megail;Yeah, yeah. What are you sucking me up for?|Anyway, I've brought some potions. As usual, I'll be managing the convoy.",
            "#move_portrait;Lynine;CenterLeft",
            "#add_unit;Balia;12,10;swoosh;push;fade",
            "#add_portrait;Balia;FarLeft;left",
            "#s;Balia;I heard they want to get rid of the orcs.|Very boring people.",
            "#multi_remove_portrait;Lynine;Orilise;Balia;Megail",
            "multi_remove_portrait;Lynine;Orilise"
        ],
        "nid": "Intro2 Reinforcements"
    },
    {
        "name": "Balia summon imp elite",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Imp_Elite;{e:unit.level};other;Pursue;Orc;;Steel_Lance",
            "add_unit;{created_unit};{eval:target_pos};warp",
            "sound;GargoyleBattleCry",
            "add_tag;{created_unit};Summon",
            "give_skill;{created_unit};Summon_orc_exp;;no_banner",
            "wait;200"
        ],
        "nid": "Global Balia summon imp elite"
    },
    {
        "name": "Balia summon ogre",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Ogre;{e:unit.level};other;Pursue;Orc;;Steel_Axe",
            "add_unit;{created_unit};{eval:target_pos};warp",
            "sound;CyclopsBattleCry",
            "add_tag;{created_unit};Summon",
            "give_skill;{created_unit};Summon_orc_exp;;no_banner",
            "wait;200"
        ],
        "nid": "Global Balia summon ogre"
    },
    {
        "name": "Balia orc kills gain exp",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;100",
            "give_exp;Balia;50",
            "wait;100"
        ],
        "nid": "Global Balia orc kills gain exp"
    },
    {
        "name": "Balia orc options level up",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Balia' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_unit('Balia').level == 3",
            "    add_item_to_multiitem;Balia;Orcmancy;Summon_imp",
            "    alert;Balia can summon imps.",
            "elif;game.get_unit('Balia').level == 5",
            "    add_item_to_multiitem;Balia;Orcmancy;Summon_orc_elite",
            "    alert;Balia can summon Elite orcs.",
            "elif;game.get_unit('Balia').level == 7",
            "    add_item_to_multiitem;Balia;Orcmancy;Summon_imp_elite",
            "    alert;Balia can summon Elite imps.",
            "elif;game.get_unit('Balia').level == 10",
            "    add_item_to_multiitem;Balia;Orcmancy;Summon_orc_thrower",
            "    alert;Balia can summon rock hurlers.",
            "elif;game.get_unit('Balia').level == 13",
            "    add_item_to_multiitem;Balia;Orcmancy;Summon_ogre",
            "    alert;Balia can summon ogres.",
            "end",
            ""
        ],
        "nid": "Global Balia orc options level up"
    },
    {
        "name": "testlake",
        "trigger": null,
        "level_nid": "P13",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "    for;unittrap;get_units_in_region('ManaSip', team='player')",
            "        sound;ElfireHit",
            "        map_anim;AOE_Wyrmsfire;{unittrap}",
            "        set_current_hp;{unittrap};1",
            "    endf"
        ],
        "nid": "P13 testlake"
    },
    {
        "name": "Key on title screen",
        "trigger": "on_title_screen",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#pyev1",
            "keys = '<yellow>'",
            "buttons = ''",
            "movement_keys = {} ",
            "correction_dict = {",
            "    'RETURN': 'ENTER'",
            "}",
            "",
            "count = 1",
            "for k in cf.SETTINGS.keys():",
            "    tokens = k.split('_')",
            "    if tokens[0] != 'key':",
            "        continue",
            "",
            "    key = tokens[1]",
            "    button = engine.get_key_name(cf.SETTINGS[k]).upper()",
            "    if key in ('UP', 'LEFT', 'DOWN', 'RIGHT'):",
            "        movement_keys[key] = button",
            "    else:",
            "        keys += '%s|' % key.lower().capitalize()",
            "        buttons += 'Press <blue>%s</>|' % correction_dict.get(button, button)",
            "        count += 1",
            "",
            "keys += 'Move</>'",
            "buttons += 'Press <blue>%s</>' % ''.join(movement_keys[k] for k in ('UP', 'LEFT', 'DOWN', 'RIGHT'))",
            "",
            "music_main = None",
            "if DB.constants.get('music_main'):",
            "    music_main = DB.constants.get('music_main').value",
            "    $music_clear 0",
            "",
            "$b \"BlackBackground\"",
            "$textbox None 'CONTROL GUIDE' 'top' 240 1 'clear'",
            "$textbox None keys 'left' 120 count 'clear'",
            "$textbox None buttons 'right' 120 count 'clear'",
            "$s None '' (999,999)",
            "$t \"close\" Speed=2000",
            "",
            "if music_main:",
            "    $m music_main"
        ],
        "nid": "Global Key on title screen"
    },
    {
        "name": "South first",
        "trigger": "unit_wait",
        "level_nid": "P14",
        "condition": "any_unit_in_region('lowcenter', team='player') == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;lowcenter;1",
            "wait;500",
            "add_portrait;Iris;Left",
            "s;Iris;So they're advancing through the south.",
            "s;Iris;Piriquita, you're good to go!",
            "remove_portrait;Iris",
            "center_cursor;17,19;1500",
            "wait;500",
            "add_group;Piriquita;Piriquita;swoosh;push",
            "wait;500",
            "level_var;mermaids;1",
            "add_portrait;Iris;Left",
            "if;{v:midright} == 0",
            "    center_cursor;elite_1;1500",
            "    s;Iris;Puki group, clear to engage!",
            "    remove_portrait;Iris",
            "    for;puki;[u.nid for u in game.get_units_in_ai_group('1')]",
            "        change_ai;{puki};Pursue",
            "        move_unit;{puki};31,22;normal;closest;100",
            "    endf",
            "end",
            "if;{v:highcenterchest} == 0",
            "    center_cursor;elite_2;1500",
            "    add_portrait;Iris;Left",
            "    s;Iris;Spol group. Go around!",
            "    remove_portrait;Iris",
            "    wait;500",
            "    for;spol;[u.nid for u in game.get_units_in_ai_group('3')]",
            "        move_unit;{spol};20,0;normal;push;100;no_follow",
            "        remove_unit;{spol};fade;north",
            "    endf",
            "    level_var;spoltrap;1",
            "    level_var;spoltrapturn;0",
            "else",
            "    if;{v:highcenterchest} == 1 and {v:midcenter} == 0",
            "        add_portrait;Iris;Left",
            "        s;Iris;Trying to pincer attack us? Good try.",
            "        center_cursor;17,12",
            "        s;Iris;Kyn group, you'll be surrounded soon.",
            "        if;{v:highleft} == 0",
            "            s;Iris;Fall back and the rock hurler will cover you.",
            "            remove_portrait;Iris",
            "            for;kyn;[u.nid for u in game.get_units_in_ai_group('4')]",
            "                move_unit;{kyn};10,6;normal;closest;100;no_block",
            "            endf",
            "        else",
            "            s;Iris;Fall back.",
            "            remove_portrait;Iris",
            "            for;kyn;[u.nid for u in game.get_units_in_ai_group('4')]",
            "                move_unit;{kyn};7,12;normal;closest;100;no_block",
            "            endf",
            "        end",
            "    end",
            "end",
            "wait;500",
            "center_cursor;19,24;1500",
            "wait;1000"
        ],
        "nid": "P14 South first"
    },
    {
        "name": "test",
        "trigger": null,
        "level_nid": "P14",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;spol;[u.nid for u in game.get_units_in_ai_group('3')]",
            "    s;system;{spol}",
            "endf",
            "",
            "center_cursor;elite_2;1500",
            "wait;500",
            "for;spol;[u.nid for u in game.get_units_in_ai_group('3')]",
            "    s;system;{spol}",
            "    move_unit;{spol};20,0;normal;push;no_follow",
            "    remove_unit;{spol};fade;north",
            "endf",
            "",
            ""
        ],
        "nid": "P14 test"
    },
    {
        "name": "spoltrap reinforcement",
        "trigger": "turn_change",
        "level_nid": "P14",
        "condition": "game.level_vars['spoltrap'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_level_var;spoltrapturn;1",
            "",
            "if;{v:spoltrapturn} == 3",
            "    wait;500",
            "    center_cursor;23,27;1500",
            "    wait;500",
            "    for;spoltrap;[u.nid for u in game.get_units_in_ai_group('3')]",
            "        add_unit;{spoltrap};25,29;fade;push;south",
            "        move_unit;{spoltrap};23,27;normal;closest;100;no_follow",
            "    endf",
            "    wait;500",
            "    level_var;spoltrap;0",
            "end"
        ],
        "nid": "P14 spoltrap reinforcement"
    },
    {
        "name": "North first",
        "trigger": "unit_wait",
        "level_nid": "P14",
        "condition": "any_unit_in_region('highcenterchest', team='player') == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;highcenterchest;1",
            "wait;500",
            "add_portrait;Iris;Left;;Smile",
            "s;Iris;I knew our chests were attractive.",
            "expression;Iris;RightWink",
            "wait;200",
            "expression;Iris;OpenEyes",
            "wait;500",
            "s;Iris;Kunaryepy group, this is your chance!",
            "remove_portrait;Iris",
            "center_cursor;26,9;1500",
            "wait;500",
            "add_group;Kunaryepy;Kunaryepy;swoosh;push",
            "wait;500",
            "level_var;mermaids;1",
            "add_portrait;Iris;Left",
            "if;{v:midright} == 0",
            "    center_cursor;elite_1;1500",
            "    s;Iris;Puki group, clear to engage!",
            "    remove_portrait;Iris",
            "    for;puki;[u.nid for u in game.get_units_in_ai_group('1')]",
            "        change_ai;{puki};Pursue",
            "        move_unit;{puki};32,8;normal;closest;100",
            "    endf",
            "end",
            "if;{v:lowcenter} == 0",
            "    center_cursor;centaur_4;1500",
            "    add_portrait;Iris;Left",
            "    s;Iris;Faighin team, circle around and pursue them.",
            "    remove_portrait;Iris",
            "    wait;500",
            "    for;faighin;[u.nid for u in game.get_units_in_ai_group('7')]",
            "        change_ai;{faighin};Pursue",
            "        move_unit;{faighin};9,29;normal;push;50",
            "        remove_unit;{faighin};fade;south",
            "    endf",
            "    level_var;faighintrap;1",
            "    level_var;faighinturn;0",
            "elif;{v:lowcenter} == 1 and {v:midcenter} == 0",
            "    add_portrait;Iris;Left",
            "    s;Iris;Trying to pincer attack us? Good try.",
            "    center_cursor;17,12",
            "    s;Iris;Kyn group, you'll be surrounded soon.",
            "    if;{v:highleft} == 0",
            "        s;Iris;Fall back.",
            "        remove_portrait;Iris",
            "        for;kyn;[u.nid for u in game.get_units_in_ai_group('4')]",
            "            move_unit;{kyn};7,12;normal;closest;100;no_block",
            "        endf",
            "    end",
            "end",
            "wait;500",
            "center_cursor;27,4;1500",
            "wait;1000",
            "    "
        ],
        "nid": "P14 North first"
    },
    {
        "name": "faighintrap reinforcement",
        "trigger": "turn_change",
        "level_nid": "P14",
        "condition": "game.level_vars['faighintrap'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_level_var;faighintrapturn;1",
            "",
            "if;{v:faighintrapturn} == 3",
            "    wait;500",
            "    center_cursor;19,1;1500",
            "    wait;500",
            "    for;faighin;[u.nid for u in game.get_units_in_ai_group('7')]",
            "        add_unit;{faighintrap};20,0;fade;push;south",
            "        move_unit;{faighintrap};20,5;normal;closest;100;no_follow",
            "    endf",
            "    wait;500",
            "    level_var;faighintrap;0",
            "end"
        ],
        "nid": "P14 faighintrap reinforcement"
    },
    {
        "name": "Reach midleft",
        "trigger": "unit_wait",
        "level_nid": "P14",
        "condition": "any_unit_in_region('midleft', team='player') == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;midleft;1",
            "if;game.mode != 'Hard'",
            "wait;500",
            "music_clear;1000",
            "add_portrait;Iris;Left",
            "s;Iris;This might not be enough after all.",
            "expression;Iris;CloseEyes",
            "s;Iris;Are they the ones who finally liberate us...{c:wait;500} or will this suffering never end...?;;;thought_bubble;no_talk;no_sound",
            "expression;Iris;OpenEyes",
            "wait;500",
            "s;Iris;No. My work is not done yet.",
            "remove_portrait;Iris",
            "music;Halfway change loop;1000",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "if;len(game.get_enemy_units()) > 5",
            "    for;pursueall;game.get_enemy_units()",
            "        change_ai;{pursueall};Pursue",
            "    end",
            "    change_ai;ogre_1;Guard",
            "    change_ai;ogre_2;Guard",
            "end",
            "center_cursor;4,2;1000",
            "wait;500",
            "add_unit;suc_dancer_1;3,2;warp;;fade",
            "add_unit;suc_dancer_2;5,2;warp;;fade",
            "wait;500",
            "move_unit;suc_dancer_1;1,6;normal;closest;no_block",
            "move_unit;suc_dancer_2;2,6;normal;closest;no_follow",
            "wait;1000",
            "center_cursor;Iris;1000",
            "give_skill;Iris;Optimization;;persistent",
            "wait;500",
            "end"
        ],
        "nid": "P14 Reach midleft"
    },
    {
        "name": "midright",
        "trigger": "unit_wait",
        "level_nid": "P14",
        "condition": "any_unit_in_region('midright', team='player') == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;midright;1"
        ],
        "nid": "P14 midright"
    },
    {
        "name": "midcenter",
        "trigger": "unit_wait",
        "level_nid": "P14",
        "condition": "any_unit_in_region('midcenter', team='player') == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;midcenter;1",
            "if;game.mode == 'Hard' and {v:irisbuff} == 0",
            "wait;500",
            "music_clear;1000",
            "add_portrait;Iris;Left",
            "s;Iris;This might not be enough after all.",
            "expression;Iris;CloseEyes",
            "s;Iris;Are they the ones who finally liberate us...{c:wait;500} or will this suffering never end...?;;;thought_bubble;no_talk;no_sound",
            "expression;Iris;OpenEyes",
            "wait;500",
            "s;Iris;No. My work is not done yet.",
            "remove_portrait;Iris",
            "music;Halfway change loop;1000",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "if;len(game.get_enemy_units()) > 5",
            "    for;pursueall;game.get_enemy_units()",
            "        change_ai;{pursueall};Pursue",
            "    end",
            "    change_ai;ogre_1;Guard",
            "    change_ai;ogre_2;Guard",
            "end",
            "center_cursor;4,2;1000",
            "wait;500",
            "add_unit;suc_dancer_1;3,2;warp;;fade",
            "add_unit;suc_dancer_2;5,2;warp;;fade",
            "wait;500",
            "move_unit;suc_dancer_1;1,6;normal;closest;no_block",
            "move_unit;suc_dancer_2;2,6;normal;closest;no_follow",
            "wait;1000",
            "center_cursor;Iris;1000",
            "give_skill;Iris;Optimization;;persistent",
            "wait;500",
            "level_var;irisbuff;1",
            "end"
        ],
        "nid": "P14 midcenter"
    },
    {
        "name": "highleft",
        "trigger": "unit_wait",
        "level_nid": "P14",
        "condition": "any_unit_in_region('highleft', team='player') == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;highleft;1",
            "if;game.mode == 'Hard' and {v:irisbuff} == 0",
            "wait;500",
            "music_clear;1000",
            "add_portrait;Iris;Left",
            "s;Iris;This might not be enough after all.",
            "expression;Iris;CloseEyes",
            "s;Iris;Are they the ones who finally liberate us...{c:wait;500} or will this suffering never end...?;;;thought_bubble;no_talk;no_sound",
            "expression;Iris;OpenEyes",
            "wait;500",
            "s;Iris;No. My work is not done yet.",
            "remove_portrait;Iris",
            "music;Halfway change loop;1000",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "if;len(game.get_enemy_units()) > 5",
            "    for;pursueall;game.get_enemy_units()",
            "        change_ai;{pursueall};Pursue",
            "    end",
            "    change_ai;ogre_1;Guard",
            "    change_ai;ogre_2;Guard",
            "end",
            "center_cursor;4,2;1000",
            "wait;500",
            "add_unit;suc_dancer_1;3,2;warp;;fade",
            "add_unit;suc_dancer_2;5,2;warp;;fade",
            "wait;500",
            "move_unit;suc_dancer_1;1,6;normal;closest;no_block",
            "move_unit;suc_dancer_2;2,6;normal;closest;no_follow",
            "wait;1000",
            "center_cursor;Iris;1000",
            "give_skill;Iris;Optimization;;persistent",
            "wait;500",
            "level_var;irisbuff;1",
            "end"
        ],
        "nid": "P14 highleft"
    },
    {
        "name": "lowleftcurve",
        "trigger": "unit_wait",
        "level_nid": "P14",
        "condition": "any_unit_in_region('lowleftcurve', team='player') == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "level_var;lowleftcurve;1",
            "if;game.mode == 'Hard' and {v:irisbuff} == 0",
            "wait;500",
            "music_clear;1000",
            "add_portrait;Iris;Left",
            "s;Iris;This might not be enough after all.",
            "expression;Iris;CloseEyes",
            "s;Iris;Are they the ones who finally liberate us...{c:wait;500} or will this suffering never end...?;;;thought_bubble;no_talk;no_sound",
            "expression;Iris;OpenEyes",
            "wait;500",
            "s;Iris;No. My work is not done yet.",
            "remove_portrait;Iris",
            "music;Halfway change loop;1000",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "if;len(game.get_enemy_units()) > 5",
            "    for;pursueall;game.get_enemy_units()",
            "        change_ai;{pursueall};Pursue",
            "    end",
            "    change_ai;ogre_1;Guard",
            "    change_ai;ogre_2;Guard",
            "end",
            "center_cursor;4,2;1000",
            "wait;500",
            "add_unit;suc_dancer_1;3,2;warp;;fade",
            "add_unit;suc_dancer_2;5,2;warp;;fade",
            "wait;500",
            "move_unit;suc_dancer_1;1,6;normal;closest;no_block",
            "move_unit;suc_dancer_2;2,6;normal;closest;no_follow",
            "wait;1000",
            "center_cursor;Iris;1000",
            "give_skill;Iris;Optimization;;persistent",
            "wait;500",
            "level_var;irisbuff;1",
            "end"
        ],
        "nid": "P14 lowleftcurve"
    },
    {
        "name": "Baruba death",
        "trigger": "unit_death",
        "level_nid": "P14",
        "condition": "unit.nid == 'Baruba'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Baruba;FarRight;normal;CloseEyes,NoSmile",
            "s;Baruba;Bah. Best of luck to y'all.",
            "remove_portrait;Baruba",
            "music_fade_back"
        ],
        "nid": "P14 Baruba death"
    },
    {
        "name": "Geoff death",
        "trigger": "unit_death",
        "level_nid": "P14",
        "condition": "unit.nid == 'Geoff'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Geoff;FarRight;normal;CloseEyes,NoSmile",
            "s;Geoff;Hmm. I'm retreating. Don't mess this up, Simon.",
            "remove_portrait;Geoff",
            "music_fade_back"
        ],
        "nid": "P14 Geoff death"
    },
    {
        "name": "Scroll Smite",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "sound;Item",
            "alert;{target} learned Smite!;DivineLightning",
            "add_tag;{target};Smite_scroll"
        ],
        "nid": "Global Scroll Smite"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "Intro4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#dialogo",
            "transition;close;1000",
            "music_clear;1000",
            "change_tilemap;arikhancastle;18,4",
            "load_unit;Seyta;enemy",
            "add_unit;Seyta;18,3;immediate",
            "music;Withered Mountain;2000",
            "make_generic;e1;Knight;1;enemy;None",
            "make_generic;e2;Knight;1;enemy;None",
            "make_generic;e3;Knight;1;enemy;None",
            "make_generic;e4;Knight;1;enemy;None",
            "make_generic;e5;Knight;1;enemy;None",
            "make_generic;e6;Knight;1;enemy;None",
            "load_unit;Ouyna;enemy",
            "load_unit;Deguile;enemy",
            "load_unit;Koromin;enemy",
            "load_unit;Stoval;enemy",
            "add_unit;e1;17,5",
            "add_unit;e2;17,6",
            "add_unit;e3;17,7",
            "add_unit;e4;19,5",
            "add_unit;e5;19,6",
            "add_unit;e6;19,7",
            "add_unit;Ouyna;16,4",
            "add_unit;Deguile;15,4",
            "add_unit;Koromin;20,4",
            "add_unit;Stoval;21,4",
            "load_unit;Simon;player",
            "add_unit;Simon;18,5",
            "wait;1000",
            "center_cursor;Simon",
            "transition;open",
            "wait;2000",
            "transition;close;500",
            "change_background;GradoCastle",
            "add_portrait;Simon;Left;no_block",
            "add_portrait;Seyta;Right;;Smile",
            "transition;open;500",
            "wait;1500",
            "s;Simon;You're holding the population itself as hostage in order to fulfill your ambition.|For all your talks of the good of Yhilin, you would trade it all for power.",
            "bop_portrait;Seyta;no_block",
            "s;Seyta;You talk as if you haven't made your own moves to achieve authority!|{c:expression;Seyta;CloseEyes}Let's drop the fa\u00e7ade and talk openly.|{c:expression;Seyta;OpenEyes,Smile}Are you willing to let us go peacefully?|Or do you want the whole kingdom to fall on its ruins?",
            "expression;Simon;CloseEyes,Smile",
            "expression;Seyta;NoSmile",
            "s;Simon;I give you credit for trying to present as such, but this is not really an option.|{c:expression;Simon;OpenEyes,NoSmile}There is no conceivable way in which letting you go would be peaceful.|It would not dishearten the present or any future separatist movements.|It's only logical that more would want to follow on its steps.|{c:expression;Simon;CloseEyes}It is regretful that it must come to this.|{c:expression;Simon;OpenEyes}However, the Doom King will be forced to respond with violence.",
            "expression;Seyta;CloseEyes",
            "s;Seyta; I thought so.|A shame, indeed.|{c:expression;Seyta;OpenEyes}If the Doom King chooses to crumble its own kingdom, then we will oblige.|{c:mirror_portrait;Seyta}{c:expression;Seyta;CloseEyes}Dargai, you are free to return to your master.{c:wait;500} Our talk is finished.",
            "s;Simon;Willing to let me go so easily?",
            "expression;Seyta;NoSmile,OpenEyes",
            "mirror_portrait;Seyta;no_block",
            "s;Seyta; If we drop our honor, then we would become mere <wave>beasts</> such as your kind.|Go, and let us meet next on the battlefield.",
            "s;Simon;{tgm}...",
            "transition;close;1000",
            "change_background",
            "multi_remove_portrait;Simon;Seyta",
            "transition;open;1000",
            "wait;1500",
            "move_unit;Simon;18,8;normal;;no_follow",
            "remove_unit;Simon;fade;south",
            "wait;2000",
            "add_portrait;Seyta;Left",
            "wait;500",
            "s;Seyta;Stoval.",
            "wait;300",
            "flicker_cursor;Stoval",
            "wait;500",
            "add_portrait;Stoval;Right",
            "wait;300",
            "s;Stoval;Yes, my lord!",
            "s;Seyta;Proceed as planned.",
            "s;Stoval;Right away!",
            "remove_portrait;Stoval",
            "remove_unit;Stoval;warp;fade",
            "wait;1500",
            "music_clear;1500",
            "end_skip",
            "transition;close;1500",
            "remove_portrait;Seyta",
            "remove_all_units",
            "change_tilemap;Intro5simon",
            "add_group;start;start;immediate",
            "center_cursor;19,34",
            "music;Sea;1500",
            "transition;open;2000",
            "wait;500",
            "center_cursor;Simon;3000",
            "wait;1000",
            "multi_add_portrait;Simon;Left;Iris;Right",
            "wait;500",
            "expression;Simon;CloseEyes",
            "s;Simon;There is something strange here.|{c:expression;Simon;OpenEyes}Would they really be willing to sacrifice themselves in order to spread civil unrest?|Maybe their followers, after being brainwashed.|But not this leader.",
            "s;Iris;You're right.|You can spread the belief that your opponent will lose eventually...|but it won't matter if you're dead.|For cunning nobles like him, a petty objective after death doesn't make sense.|They want more power now, not chaos for its own sake.",
            "s;Simon;Which leaves us the conclusion that he sincerely believes he has a victory chance.",
            "s;Iris;Their troops are not bad, but are far from being a menace to us.|Either they possess a secret weapon, greatly enhancing their power...|or have an influx of soldiers, reducing the gap between our numbers and theirs.",
            "s;Simon;Is it possible one of them has acquired an Emblem?",
            "s;Iris;I would say it is highly improbable.|The acquisition would need to be a recent event.|It's unlikely that a new IK would have the necessary prowess to erase their presence.|Although, of course, it wouldn't be impossible.",
            "s;Simon;I see.|Regardless, a single Emblem alone wouldn't be enough to meaningfully pose a threat.|Not unless accompanied by an army.",
            "s;Iris;So we can assume that they have been provided an army and all supplies.",
            "s;Simon;Correct. If we think about their neighbors...",
            "transition;close;500",
            "change_background;arikhanmap1",
            "transition;open;500",
            "wait;2000",
            "s;Simon;It's extremely unlikely that they would form an alliance with Darghelon.",
            "s;Iris;Lynine has not provided us with any information that would reinforce this.",
            "transition;close;500",
            "change_background;arikhanmap2;2000",
            "transition;open;500",
            "wait;2000",
            "s;Simon;The most likely option is...",
            "wait;1000",
            "transition;close;500",
            "change_background;arikhanmap3",
            "transition;open;500",
            "wait;2000",
            "s;Iris;Ardoheim.",
            "transition;close;500",
            "change_background;",
            "multi_add_portrait;Simon;Left;Iris;Right",
            "transition;open;500",
            "s;Simon;Perhaps even backed by the Church itself.",
            "s;Iris;This supposed new kingdom is a farse.|Just a way for them to indirectly undermine the Doom King.|All while avoiding commitment to a full scale war.",
            "s;Simon;Perhaps it's not that they don't want to mobilize their army...|but that they can't.|Instead of a royal strategy, it could be limited to a few scheming parties.",
            "s;Iris;I see, so a collusion between nobles of rival countries.",
            "s;Simon;Not powerful enough to overthrow any of their respective kingdoms.|On the other hand, each one can capitalize on insider information.",
            "s;Iris;Instead of letting you go because of mercy, they were buying time to keep each other updated!",
            "s;Simon;And with that-{no_wait}",
            "multi_remove_portrait;Simon;Iris",
            "music_clear",
            "sound;Explosion7",
            "screen_shake;1500",
            "show_layer;ship1",
            "add_group;first;first;immediate",
            "screen_shake_end",
            "music;Tension",
            "center_cursor;30,18;2000",
            "wait;2000",
            "add_portrait;Rimer;Right",
            "s;Rimer;Kill them all! FOR YHILIN!",
            "remove_portrait;Rimer",
            "wait;200",
            "move_unit;101;24,17;normal;no_block",
            "move_unit;g_1;25,17;no_follow",
            "wait;300",
            "interact_unit;101;g_1;miss1,hit2;;force_no_animation",
            "wait;500",
            "center_cursor;Simon;1000",
            "add_portrait;Iris;Left",
            "s;Iris;Everyone!{c:wait;300} Prepare for battle immediately!",
            "remove_portrait;Iris",
            "wait;200",
            "move_unit;Iris2;19,11",
            "wait;300",
            "sound;SkillActivate",
            "map_anim;AOE_Reinforce;Iris2;overlay",
            "wait;200",
            "",
            "center_cursor;28,17;1000",
            "move_unit;g_4;22,17;normal;no_block",
            "move_unit;g_1;23,16;normal;no_follow",
            "center_cursor;19,14;500",
            "music;Reinforcements",
            "add_unit;Trin;19,15;fade;;north",
            "wait;500",
            "flicker_cursor;Trin",
            "wait;500",
            "add_portrait;Trin;Left",
            "s;Trin;Who the fuck is making all this ruckus and didn't invite me?!",
            "center_cursor;g_4;500",
            "flicker_cursor;g_4",
            "wait;400",
            "s;Enemy;Shut up and die, cunt!",
            "move_unit;g_4;19,16;normal",
            "wait;300",
            "bop_portrait;Trin",
            "s;Trin;Hey, I'll show you the c-|{c:expression;Trin;CloseEyes}Actually, nevermind. I'm in a committed relationship now, you see.|{c:expression;Trin;Smile,OpenEyes}Speaking of which, you'd make a nice present!|Actually a shitty one. But it's the thought that counts, right?",
            "pose_unit;Trin;start_cast",
            "pose_unit;Trin;active",
            "wait;1000",
            "sound;EvilEye",
            "map_anim;MapSpiritbane;g_4",
            "change_team;g_4;other",
            "#give_skill;g_4;Copy_debuff;;no_banner",
            "#give_skill;Trin;Trin_debuff;;no_banner",
            "map_anim;OverchargeAura;g_4",
            "pose_unit;Trin;normal",
            "s;Trin;Make me proud now, bitch.",
            "remove_portrait;Trin",
            "wait;200",
            "move_unit;g_4;19,17;normal",
            "move_unit;g_4;22,16;normal",
            "wait;300",
            "interact_unit;g_4;g_1;hit1,hit2,crit1;;force_no_animation",
            "wait;500",
            "",
            "center_cursor;19,22;1000",
            "wait;100",
            "add_unit;Balia;19,22;fade;;fade",
            "move_unit;Balia;19,21;;;no_follow",
            "wait;300",
            "add_portrait;Balia;Left",
            "move_unit;g_5;21,21;normal;no_follow;no_block",
            "s;Balia;Stop shaking so much, it's bothering my research.",
            "wait;300",
            "s;Balia;Hmm? Is there something happening?",
            "move_unit;g_5;20,21;no_block;no_follow",
            "move_unit;Balia;18,21",
            "wait;100",
            "pose_unit;Balia;start_cast",
            "wait;100",
            "add_unit;103;19,21;warp;push;fade",
            "sound;CyclopsBattleCry",
            "wait;500",
            "interact_unit;103;g_5;crit1;;force_no_animation",
            "wait;500",
            "pose_unit;Balia;normal",
            "s;Balia;What a pain. At least this will let me test a few orcs.",
            "remove_portrait;Balia",
            "",
            "center_cursor;31,17;1500",
            "wait;500",
            "add_portrait;Rimer;Right",
            "s;Rimer;Don't falter!{c:wait;300} Move out!",
            "wait;200",
            "move_unit;Rimer;30,17",
            "add_unit;Riala;29,17;warp;push;fade",
            "wait;300",
            "flicker_cursor;Riala",
            "wait;200",
            "add_portrait;Riala;Left;;CloseEyes;no_block",
            "move_portrait;Rimer;FarRight",
            "move_unit;Rimer;31,17",
            "wait;600",
            "expression;Riala;OpenEyes,Smile",
            "s;Riala;Do not disturb the peace we have fought so hard to achieve.",
            "wait;300",
            "multi_remove_portrait;Riala;Rimer",
            "wait;100",
            "sound;Explosion3",
            "map_anim;MapFire;32,15;overlay;permanent;no_block",
            "map_anim;MapFire;28,19;overlay;permanent;no_block",
            "map_anim;MapFire;33,17;overlay;permanent",
            "interact_unit;Riala;Rimer;hit1;Fires_of_Lust_cutscene",
            "wait;500",
            "multi_add_portrait;Riala;Left;Rimer;Right",
            "expression;Rimer;CloseEyes",
            "s;Rimer;F-fucking...",
            "s;Riala;Oh, I would love to.{c:wait;300} With my man, of course, right after we're done here.",
            "multi_remove_portrait;Riala;Rimer",
            "remove_unit;Riala;warp;fade",
            "wait;300",
            "center_cursor;Simon;1500",
            "wait;100",
            "add_unit;Riala;17,9;warp;;fade",
            "wait;500",
            "",
            "center_cursor;18,7;500",
            "wait;300",
            "add_unit;Megail;18,7;fade;;fade",
            "wait;100",
            "flicker_cursor;Megail",
            "wait;1000",
            "move_unit;Megail;18,8;normal",
            "wait;1500",
            "multi_add_portrait;Megail;Left;Simon;Right",
            "s;Megail;Sooner than we expected.|But far from being surprising.",
            "s;Simon;We might be dealing with Ardan troops anytime soon, so be careful.",
            "s;Megail;Oh? Those rats have finally made their move, then.",
            "s;Simon;We will get to the bottom of this soon.|Did you bring it?",
            "s;Megail;Of course, what do you take me for?|Here is the weapon you requested.",
            "choice;simonweapon;Choose your initial weapon;Steel_Sword,Steel_Lance,Steel_Axe;;;center;;;type_base_item",
            "if;'{v:_last_choice}' == 'Steel_Sword'",
            "    s;Simon;Can't go wrong with swords.",
            "    s;Megail;Old and reliable, just like you.",
            "    give_item;Simon;Steel_Sword",
            "    give_wexp;Simon;Sword;70",
            "elif;'{v:_last_choice}' == 'Steel_Lance'",
            "    s;Simon;Keep them at bay and hinder their approach.",
            "    s;Megail;Patient tactics are your forte after all.",
            "    give_item;Simon;Steel_Lance",
            "    give_wexp;Simon;Lance;70",
            "else",
            "    s;Simon;An axe should intimidate their charge.",
            "    s;Megail;And if it doesn't, their loss.",
            "    give_item;Simon;Steel_Axe",
            "    give_wexp;Simon;Axe;70",
            "end",
            "s;Megail;I've got more in me. Just hit me up and you can access my <red>supply</>.",
            "s;Simon;Thanks again, Megail.",
            "expression;Megail;CloseEyes",
            "s;Megail;Just end this quickly. These boats aren't cheap.",
            "multi_remove_portrait;Simon;Megail",
            "wait;500",
            "",
            "move_unit;Simon;18,11",
            "wait;300",
            "add_portrait;Simon;Left",
            "s;Simon;More are coming!",
            "remove_portrait;Simon",
            "sound;Explosion7",
            "screen_shake;1500",
            "show_layer;ship2",
            "add_group;vinata;vinata;immediate",
            "screen_shake_end",
            "sound;Explosion7",
            "screen_shake;1500",
            "show_layer;ship4",
            "add_group;namado;namado;immediate",
            "screen_shake_end",
            "wait;1500",
            "center_cursor;Vinata;2000",
            "wait;1500",
            "flicker_cursor;Vinata",
            "wait;500",
            "add_portrait;Vinata;Right;;CloseEyes",
            "s;Vinata;You had the element of surprise and still failed.|{c:expression;Vinata;OpenEyes,Smile}No problem.{c:wait;400} It aaaalways falls back to me to fix things.",
            "center_cursor;Namado;2000",
            "wait;1500",
            "flicker_cursor;Namado",
            "wait;500",
            "add_portrait;Namado;Left",
            "s;Namado;Leave this to me!|The devil's spawns have no chance in our domain!",
            "wait;500",
            "multi_remove_portrait;Namado;Vinata",
            "center_cursor;Simon;2000",
            "wait;500",
            "add_portrait;Simon;Left;;CloseEyes",
            "s;Simon;{tgm}...",
            "expression;Simon;OpenEyes",
            "s;Simon;With me, everyone.",
            "remove_portrait;Simon",
            "move_unit;Simon;18,19;swoosh;no_block",
            "move_unit;Iris2;19,19;swoosh;no_block;no_follow",
            "move_unit;Riala;19,17;warp;no_follow",
            "center_cursor;Simon;1500",
            "wait;1500",
            "music_clear;1500",
            "transition;close;2000",
            "",
            "",
            "",
            "#nof inal:",
            "give_skill;Iris2;Optimization_main;;no_banner;persistent"
        ],
        "nid": "Intro4 Intro"
    },
    {
        "name": "Yarra sexual mana",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;plusmana;u('{target}').get_mana()",
            "set_current_mana;{target};{e: {v:plusmana} + 10}"
        ],
        "nid": "Global Yarra sexual mana"
    },
    {
        "name": "Riala remove witch warp",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Riala;Teleport_effect;;no_banner"
        ],
        "nid": "Global Riala remove witch warp"
    },
    {
        "name": "reinforcements",
        "trigger": "turn_change",
        "level_nid": "Intro1",
        "condition": "game.current_mode != 'Easy'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount == 3",
            "    add_unit;ref_3;19,14;fade;push;east",
            "    center_cursor;ref_3;1500",
            "    wait;500",
            "elif;game.turncount == 5",
            "    add_unit;ref_2;0,9;fade;push;north",
            "    center_cursor;ref_2;1500",
            "    wait;500",
            "elif;game.turncount == 7",
            "    add_unit;ref_1;14,24;fade;push;south",
            "    center_cursor;ref_1;1500",
            "    wait;500",
            "else",
            "end"
        ],
        "nid": "Intro1 reinforcements"
    },
    {
        "name": "Victory",
        "trigger": "turn_change",
        "level_nid": "Intro2",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "center_cursor;Orcent;1500",
            "wait;500",
            "add_portrait;Orcent;Left",
            "s;Orcent;They should be arriving any moment.",
            "add_portrait;Qum;Right",
            "s;Qum;Yay!",
            "move_portrait;Qum;CenterRight",
            "add_portrait;Vhala;Right;right",
            "s;Vhala;So soon? Tell them it's fine to spend some more minutes dressing.",
            "move_portrait;Orcent;CenterLeft",
            "add_portrait;Altina;Left",
            "s;Altina;It's not easy to set up the teleportation link...!",
            "s;Qum;The sparkles are going boom!",
            "multi_remove_portrait;Orcent;Qum;Vhala;Altina",
            "music;Reinforcements",
            "center_cursor;13,9;1500",
            "wait;500",
            "screen_shake;500",
            "add_group;vic;vic;warp;push",
            "screen_shake_end",
            "wait;1000",
            "if;game.get_alive('Trisha')",
            "    center_cursor;Trisha;1500",
            "    add_portrait;Trisha;Left",
            "    s;Trisha;Tsc. Too much vermin here.",
            "    remove_portrait;Trisha",
            "    remove_unit;Trisha;warp;fade",
            "    game_var;trishaalive;1",
            "end",
            "for;flee;[unit.nid for unit in game.get_enemy_units()]",
            "    move_unit;{flee};12,20;normal;push;no_follow;no_block",
            "endf",
            "wait;1500",
            "center_cursor;13,9;1000",
            "wait;1000",
            "music_clear",
            "victory_screen;Victory2",
            "wait;1000",
            "win_game"
        ],
        "nid": "Intro2 Victory"
    },
    {
        "name": "Boss death",
        "trigger": "unit_death",
        "level_nid": "Intro2",
        "condition": "unit.nid == 'Trisha'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Trisha;Left;;CloseEyes",
            "s;Trisha;Maggots... all of you...!",
            "remove_portrait;Trisha",
            "game_var;trishaalive;0"
        ],
        "nid": "Intro2 Boss death"
    },
    {
        "name": "Orcent death",
        "trigger": "unit_death",
        "level_nid": "Intro2",
        "condition": "unit.nid == 'Orcent'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Orcent;FarRight;;CloseEyes",
            "speak;Orcent;Will we... ever surmount... this endless turmoil...",
            "remove_portrait;Orcent",
            "if;game.current_mode.nid != 'Ironman'",
            "    activate_turnwheel",
            "else",
            "    remove_unit;Orcent;fade;fade",
            "    lose_game",
            "end"
        ],
        "nid": "Intro2 Orcent death"
    },
    {
        "name": "Qum cumdump mana",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;plusmana;u('{target}').get_mana()",
            "set_current_mana;{target};{e: {v:plusmana} + 15}"
        ],
        "nid": "Global Qum cumdump mana"
    },
    {
        "name": "Rimer death",
        "trigger": "unit_death",
        "level_nid": "Intro4",
        "condition": "unit.nid == 'Rimer'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Rimer;FarRight;;CloseEyes",
            "speak;Rimer;What will... he think...",
            "remove_portrait;Rimer"
        ],
        "nid": "Intro4 Rimer death"
    },
    {
        "name": "Vinata death",
        "trigger": "unit_death",
        "level_nid": "Intro4",
        "condition": "unit.nid == 'Vinata'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Vinata;FarRight;;CloseEyes",
            "speak;Vinata;Are you... kidding me...",
            "sound;SilenceCrack",
            "expression;Vinata;OpenEyes",
            "bop_portrait;Vinata;no_block",
            "move_portrait;Vinata;Right",
            "wait;500",
            "s;Vinata;I... still...",
            "expression;Vinata;CloseEyes",
            "wait;1000",
            "remove_portrait;Vinata"
        ],
        "nid": "Intro4 Vinata death"
    },
    {
        "name": "Namado death",
        "trigger": "unit_death",
        "level_nid": "Intro4",
        "condition": "unit.nid == 'Namado'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Namado;FarRight;;CloseEyes",
            "speak;Namado;It wasn't... supposed to...",
            "remove_portrait;Namado"
        ],
        "nid": "Intro4 Namado death"
    },
    {
        "name": "Aka death game over",
        "trigger": "unit_death",
        "level_nid": "Intro3",
        "condition": "unit.nid == 'Aka'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "add_portrait;Aka;FarRight;;CloseEyes",
            "speak;Aka;I'm sorry, everyone...",
            "remove_portrait;Aka",
            "if;game.current_mode.nid != 'Ironman'",
            "    activate_turnwheel",
            "else",
            "    remove_unit;Aka;fade;fade",
            "    lose_game",
            "end"
        ],
        "nid": "Intro3 Aka death game over"
    },
    {
        "name": "Marlo death victory",
        "trigger": "combat_end",
        "level_nid": "Intro3",
        "condition": "game.check_dead(\"Marlo\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Marlo;Left;;CloseEyes",
            "s;Marlo;Tsc.",
            "remove_portrait;Marlo",
            "",
            "wait;1500",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "Intro3 Marlo death victory"
    },
    {
        "name": "Outro simon 1",
        "trigger": "level_end",
        "level_nid": "Intro1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 29,
        "_source": [
            "change_tilemap;Arikhan;8,1",
            "music;Sea",
            "transition;open;1000",
            "load_unit;Ship;player",
            "add_unit;Ship;8,0;fade;;north",
            "wait;200",
            "move_unit;Ship;11,16;normal;;300;silent",
            "wait;1000",
            "flicker_cursor;Ship",
            "wait;500",
            "load_unit;Simon;player",
            "add_unit;Simon;12,16;fade;;west",
            "wait;1000",
            "remove_unit;Simon;fade;east",
            "wait;1500",
            "transition;close;1000",
            "music_clear;1000",
            "change_tilemap;arikhancastle;18,4",
            "load_unit;Seyta;enemy",
            "add_unit;Seyta;18,3;immediate",
            "make_generic;e1;Knight;1;enemy;None",
            "make_generic;e2;Knight;1;enemy;None",
            "make_generic;e3;Knight;1;enemy;None",
            "make_generic;e4;Knight;1;enemy;None",
            "make_generic;e5;Knight;1;enemy;None",
            "make_generic;e6;Knight;1;enemy;None",
            "load_unit;Ouyna;enemy",
            "load_unit;Deguile;enemy",
            "load_unit;Koromin;enemy",
            "load_unit;Stoval;enemy",
            "add_unit;e1;17,5",
            "add_unit;e2;17,6",
            "add_unit;e3;17,7",
            "add_unit;e4;19,5",
            "add_unit;e5;19,6",
            "add_unit;e6;19,7",
            "add_unit;Ouyna;16,4",
            "add_unit;Deguile;15,4",
            "add_unit;Koromin;20,4",
            "add_unit;Stoval;21,4",
            "wait;500",
            "music;Withered Mountain;1500",
            "multi_add_portrait;Ouyna;CenterLeft;Deguile;FarLeft;Koromin;CenterRight;Stoval;FarRight",
            "center_cursor;18,4",
            "transition;open;2000",
            "wait;2000",
            "multi_remove_portrait;Ouyna;Deguile;Koromin;Stoval",
            "center_cursor;0,10;1500",
            "wait;500",
            "add_unit;Simon;0,10;fade;;west",
            "wait;500",
            "move_unit;Simon;18,5;normal",
            "wait;1000",
            "multi_add_portrait;Simon;Left;Seyta;Right",
            "wait;1500",
            "transition;close;2000",
            "wait;2000"
        ],
        "nid": "Intro1 Outro simon 1"
    },
    {
        "name": "Outro Simon 2",
        "trigger": "level_end",
        "level_nid": "Intro2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 19,
        "_source": [
            "transition;close;1000",
            "music_clear;1000",
            "change_tilemap;arikhancastle;18,4",
            "load_unit;Seyta;enemy",
            "add_unit;Seyta;18,3;immediate",
            "music;Withered Mountain;2000",
            "make_generic;e1;Knight;1;enemy;None",
            "make_generic;e2;Knight;1;enemy;None",
            "make_generic;e3;Knight;1;enemy;None",
            "make_generic;e4;Knight;1;enemy;None",
            "make_generic;e5;Knight;1;enemy;None",
            "make_generic;e6;Knight;1;enemy;None",
            "load_unit;Ouyna;enemy",
            "load_unit;Deguile;enemy",
            "load_unit;Koromin;enemy",
            "load_unit;Stoval;enemy",
            "add_unit;e1;17,5",
            "add_unit;e2;17,6",
            "add_unit;e3;17,7",
            "add_unit;e4;19,5",
            "add_unit;e5;19,6",
            "add_unit;e6;19,7",
            "add_unit;Ouyna;16,4",
            "add_unit;Deguile;15,4",
            "add_unit;Koromin;20,4",
            "add_unit;Stoval;21,4",
            "load_unit;Simon;player",
            "add_unit;Simon;18,5",
            "wait;1000",
            "center_cursor;Simon",
            "transition;open",
            "wait;2000",
            "transition;close;500",
            "change_background;GradoCastle",
            "add_portrait;Simon;Left;no_block",
            "add_portrait;Seyta;Right;;Smile",
            "transition;open;500",
            "wait;1500",
            "s;Simon;I have come alone, as per our promise.|I hope we can reach a peaceful agreement.",
            "s;Seyta;Good.{c:wait;300} It might be that, despite it all, you do possess some sort of honor.",
            "s;Simon;Let me get to the point.|I believe you are well aware that the Doom King will not look kindly upon your actions.",
            "s;Seyta;Of course.{c:wait;300} But fearing that beast is what enslaved all the rest of Yhilin.|We, however, are determined to fight for our freedom.",
            "bop_portrait;Simon;no_block",
            "move_portrait;Simon;CenterLeft",
            "s;Simon;You do not have nearly enough of the military power required to compete with our army!|We wish to avoid senseless murder if possible.",
            "expression;Seyta;CloseEyes",
            "s;Seyta;Do you?{c:wait;300} Yhilin was fine before you violently took control of it.",
            "expression;Seyta;OpenEyes",
            "s;Simon;Regardless of what has transpired, the Doom King dictates the rules now.|A new civil war would be incredibly foolish and would cost you greatly!",
            "s;Seyta;We already pay a heavy enough cost.|{c:expression;Seyta;CloseEyes,NoSmile}Forced to serve this demon and to have its spawns infiltrate our society...|{c:expression;Seyta;OpenEyes}{c:bop_portrait;Seyta}that is not a life worth living!",
            "s;Simon;{tgm}...",
            "move_portrait;Simon;Left;no_block",
            "expression;Simon;CloseEyes",
            "s;Simon;If only you could see past your walls.|Perhaps you would witness that life has improved for a lot of our population.|{c:expression;Simon;OpenEyes}This is what you're rejecting with your ignorance.",
            "expression;Seyta;Smile",
            "s;Seyta;Heh.{c:wait;300} Maybe it has improved for your measure alone.|It is your closed mindness that has blocked you from seeing through our perspective.|You seem to be human, yet you're too far gone into their ways to understand our plight.|{c:expression;Seyta;CloseEyes}Tragic, really.",
            "wait;1500",
            "transition;close;2000"
        ],
        "nid": "Intro2 Outro Simon 2"
    },
    {
        "name": "Simon outro",
        "trigger": "level_end",
        "level_nid": "Intro3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 19,
        "_source": [
            "transition;close;1000",
            "music_clear;1000",
            "change_tilemap;arikhancastle;18,4",
            "load_unit;Seyta;enemy",
            "add_unit;Seyta;18,3;immediate",
            "music;Withered Mountain;2000",
            "make_generic;e1;Knight;1;enemy;None",
            "make_generic;e2;Knight;1;enemy;None",
            "make_generic;e3;Knight;1;enemy;None",
            "make_generic;e4;Knight;1;enemy;None",
            "make_generic;e5;Knight;1;enemy;None",
            "make_generic;e6;Knight;1;enemy;None",
            "load_unit;Ouyna;enemy",
            "load_unit;Deguile;enemy",
            "load_unit;Koromin;enemy",
            "load_unit;Stoval;enemy",
            "add_unit;e1;17,5",
            "add_unit;e2;17,6",
            "add_unit;e3;17,7",
            "add_unit;e4;19,5",
            "add_unit;e5;19,6",
            "add_unit;e6;19,7",
            "add_unit;Ouyna;16,4",
            "add_unit;Deguile;15,4",
            "add_unit;Koromin;20,4",
            "add_unit;Stoval;21,4",
            "load_unit;Simon;player",
            "add_unit;Simon;18,5",
            "wait;1000",
            "center_cursor;Simon",
            "transition;open",
            "wait;2000",
            "transition;close;500",
            "change_background;GradoCastle",
            "add_portrait;Simon;Left;no_block",
            "add_portrait;Seyta;Right;;Smile",
            "transition;open;500",
            "wait;1500",
            "s;Simon;What I am is of no concern here.|Let us return to the de facto negotiation.|Your group talks of liberating Yhilin, yet it's located entirely on Ari-Khan's state.|You want to give off an impression that this is a people's movement...|yet you're willing to put your face as the head of it.|What really is your end goal?",
            "expression;Seyta;CloseEyes",
            "s;Seyta;Nothing escapes Dargai, as they say.|{c:expression;Seyta;OpenEyes}If you've figured it out, I can spell it out clearly.|{c:expression;Seyta;NoSmile}I want independence.|This is the start of the Kingdom of Khan.|If you really want to avoid war, then you sever ties with us.",
            "s;Simon;Frankly, that is ridiculous.|What makes you think the Doom King would just sit and watch this happen?",
            "expression;Seyta;Smile",
            "s;Seyta;Oh, that is up to his preference.|{c:expression;Seyta;CloseEyes}As you've pointed out earlier, our resistance is still localized only within this region.|{c:expression;Seyta;OpenEyes}Yet, what do you think would happen if our ideals spread far and wide throughout Yhilin?",
            "s;Simon;{tgm}...",
            "s;Seyta;Suddenly, you're not dealing with a clear enemy anymore.|Our sentiment will infect those all around the kingdom, and a great unrest will follow.|Soon, a large scale civil war will be inevitable.|You might win, I'll give you that.|But are you really willing to sacrifice so much of your people?|{c:expression;Seyta;CloseEyes}Specially when other threats...{c:wait;300}{c:expression;Seyta;OpenEyes} no, nevermind.",
            "wait;1500",
            "transition;close;2000"
        ],
        "nid": "Intro3 Simon outro"
    },
    {
        "name": "Enemies dead Victory",
        "trigger": "combat_end",
        "level_nid": "Intro4",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1500",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game"
        ],
        "nid": "Intro4 Enemies dead Victory"
    },
    {
        "name": "Intro1 lore",
        "trigger": "level_start",
        "level_nid": "Intro5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.current_mode != 'Easy'",
            "    give_skill;Yorem;BossMiracle_1;;no_banner",
            "end",
            "level_var;seizes;0",
            "level_var;simoncoming;0",
            "level_var;mercshired;0",
            "",
            "transition;close",
            "change_background;CastleSepia",
            "music;Tension",
            "center_cursor;Perese",
            "add_portrait;Yett;FarLeft",
            "add_portrait;Razar;Right",
            "add_portrait;Perese;CenterLeft",
            "transition;open;1000",
            "wait;500",
            "s;Perese;It seems the top dogs have caught our scent.",
            "expression;Razar;CloseEyes",
            "s;Razar;No, they're only blindly trashing around.|{c:expression;Razar;OpenEyes}The fundamental pillar of our strategy remains untouched.|I trust you're able to maintain your part as well.",
            "expression;Perese;Smile",
            "s;Perese;Of course, of course.|I will do my utmost to execute it on our end.|{c:expression;Perese;CloseEyes}However, we can't be the first ones to strike, you must understand.",
            "expression;Perese;OpenEyes,NoSmile",
            "s;Razar;That was not up to discussion.|What matters is your follow-up.",
            "s;Perese;Don't worry.{c:wait;300} Haven't my contributions spoken for my loyalty?",
            "s;Razar;I hope so.|I need to leave before they arrive.{c:wait;300} I suggest you do the same.",
            "s;Perese;May we encounter each other above Yhilin's ruins.",
            "mirror_portrait;Perese;no_block",
            "mirror_portrait;Yett",
            "remove_portrait;Perese;;left",
            "remove_portrait;Yett;;left",
            "transition;close;300",
            "#multi_remove_portrait;Perese;Yett;Razar",
            "change_background",
            "transition;open;200",
            "wait;1000",
            "pair_up;Perese;Yett",
            "wait;1000",
            "move_unit;Yett;0,17;no_follow;no_block",
            "wait;2000",
            "add_portrait;Razar;Right;;CloseEyes",
            "s;Razar;\"For the powerless, trust is the last remaining weapon\".|{c:expression;Razar;OpenEyes}I can't rely on them, but this gamble is the best I can do for my people.;;;thought_bubble;no_sound",
            "wait;500",
            "remove_portrait;Razar",
            "wait;500",
            "remove_unit;Razar;swoosh;fade",
            "wait;1000",
            "music_clear;2000",
            "transition;close;3000",
            "",
            "wait;1000",
            "add_group;str;str;immediate",
            "center_cursor;6,4",
            "music;Battle4;1500",
            "transition;open;2000",
            "wait;1000",
            "flicker_cursor;Yorem",
            "wait;500",
            "add_portrait;Yorem;Left",
            "wait;500",
            "s;Yorem;Pah, they're coming anytime soon.|Hopefully the brat will keep his shit together.",
            "r;Yorem",
            "wait;1000",
            "center_cursor;Naro;1500",
            "wait;500",
            "flicker_cursor;Naro",
            "wait;500",
            "add_portrait;Naro;Right",
            "wait;500",
            "s;Naro;Sir Seyta promised me... we would only watch the masses fight...|{c:expression;Naro;CloseEyes}Oh, Ivala... please help me...",
            "remove_portrait;Naro",
            "wait;1000",
            "music;Reinforcements;1500",
            "center_cursor;40,19;1500",
            "wait;500",
            "spawn_group;yarra;east;yarra;normal",
            "wait;1000",
            "add_portrait;Yarra;Right",
            "s;Yarra;I'm here, ready to kick some ass!|And depending on the ass, some more stuff with it...",
            "remove_portrait;Yarra",
            "center_cursor;41,9;1500",
            "wait;500",
            "spawn_group;aka;east;aka;normal",
            "wait;1000",
            "add_portrait;Nalili;Right",
            "bop_portrait;Nalili;no_block",
            "s;Nalili;Race to the top! Last to confirm is a rotten sperm!",
            "remove_portrait;Nalili",
            "center_cursor;40,1;1500",
            "wait;500",
            "spawn_group;orcent;east;orcent;normal",
            "wait;1000",
            "add_portrait;Qum;Right",
            "s;Qum;Oh no! Cumdump will protect the poor sperm!",
            "remove_portrait;Qum",
            "end",
            "center_cursor;Yarra;1500",
            "wait;500",
            "add_portrait;Yarra;Right;;Smile,CloseEyes",
            "s;Yarra;Let's wrap this up quickly to return home and have a big, nice bath!"
        ],
        "nid": "Intro5 Intro1 lore"
    },
    {
        "name": "Vhala triple shot",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# List of (unit, dist) for enemy team",
            "level_var;enemy_close_1;{eval: [unit.nid for unit in get_units_within_distance('Vhala', 3, team='enemy')]}",
            "",
            "# List of (unit, dist) for enemy2 team",
            "level_var;enemy_close_2;{eval: [unit.nid for unit in get_units_within_distance('Vhala', 3, team='enemy2')]}",
            "",
            "# Merge into one list",
            "level_var;enemy_close_all;{eval: {v:enemy_close_1} + {v:enemy_close_2}}",
            "",
            "level_var;tsa;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Vhala;{v:tsa};hit1,end;Triple_Shot_helper;force_no_animation",
            "",
            "level_var;tsb;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Vhala;{v:tsb};hit1,end;Triple_Shot_helper;force_no_animation",
            "",
            "level_var;tsc;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Vhala;{v:tsc};hit1,end;Triple_Shot_helper;force_no_animation",
            "",
            "wait;200"
        ],
        "nid": "Global Vhala triple shot"
    },
    {
        "name": "Board ship deprecated",
        "trigger": null,
        "level_nid": "Intro5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;500",
            "center_cursor;{unit}",
            "wait;500",
            "textbox;boardexplanation;{unit} will be safe but unavailable for the rest of this chapter.;bottom;;2",
            "choice;board;Board the ship?;Yes,No;backable",
            "if;'{v:_last_choice}' == 'Yes'",
            "    wait;500",
            "    remove_unit;{unit};fade;fade",
            "    wait;500",
            "else",
            "end"
        ],
        "nid": "Intro5 Board ship deprecated"
    },
    {
        "name": "Check boss death",
        "trigger": "combat_end",
        "level_nid": "teste2",
        "condition": "game.check_dead('Marlo')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "s;System;jogo cabou",
            "wait;300",
            "win_game"
        ],
        "nid": "teste2 Check boss death"
    },
    {
        "name": "check death quote",
        "trigger": "unit_death",
        "level_nid": "teste2",
        "condition": "unit.nid == 'Marlo'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Marlo;FarLeft",
            "s;Marlo;Oh shit.",
            ""
        ],
        "nid": "teste2 check death quote"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "teste2",
        "condition": "'Boss' in unit.tags or 'Boss' in unit2.tags and game.level_vars['bossbuffed'] == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;miracle_charge;{eval:u('Marlo').get_skill('BossMiracle_1').data['charge']}",
            "",
            "if;{v:miracle_charge} == 0",
            "    change_music;player_phase;Boss1",
            "    change_music;enemy_phase;Boss1",
            "    change_music;other_phase;Boss1",
            "    music;Boss1",
            "    add_portrait;Marlo;Left",
            "    s;Marlo;You think that was enough to defeat me?",
            "    remove_portrait;Marlo",
            "    center_cursor;Marlo;500",
            "    screen_shake;200;celeste",
            "    sound;CutinCrit",
            "    map_anim;OverchargeAura;Marlo",
            "    screen_shake_end",
            "    wait;300",
            "    if;{eval:(game.current_mode.nid == 'Hard' or game.current_mode.nid == 'Ironman')}",
            "        give_skill;Marlo;SecondPhase",
            "    end",
            "    level_var;bossbuffed;1",
            "end"
        ],
        "nid": "teste2 Boss buff"
    },
    {
        "name": "Debug boss skill",
        "trigger": "on_talk",
        "level_nid": "teste2",
        "condition": "check_pair('Lynine','Orilise')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#s;system;{eval: [s for s in u('Marlo').skills if s.nid.startswith('BossMiracle')][0]}",
            "#s;System;{eval:[e for e in u('Marlo').skills]}",
            "#s;System;{eval:[s.data['charge'] for s in u('Marlo').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "#if;cf.SETTINGS['display_hints']",
            "#    s;Kent;The enemy is holding an axe. You have to use your sword, Sain.",
            "#end",
            "reset;Nalili",
            "reset;Lynine",
            "reset;Orilise",
            "s;a;{e:[item.nid for item in u('Uyae').items if item.nid.startswith('Claw')]}"
        ],
        "nid": "teste2 Debug boss skill"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "P1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('SpiderQueen').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('SpiderQueen').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;SpiderQueen;Left",
            "        s;SpiderQueen;I'm not done yet!",
            "        remove_portrait;SpiderQueen",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;SpiderQueen;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;SpiderQueen;{eval:[s.nid for s in u('SpiderQueen').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P1 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "P2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Batgal').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Batgal').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Batgal;Left",
            "        s;Batgal;Gaaaah!",
            "        remove_portrait;Batgal",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Batgal;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Batgal;{eval:[s.nid for s in u('Batgal').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P2 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "P3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('SpiderEmpress').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('SpiderEmpress').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;SpiderEmpress;Left",
            "        s;SpiderEmpress;I'm not giving up on our dream!",
            "        remove_portrait;SpiderEmpress",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;SpiderEmpress;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;SpiderEmpress;{eval:[s.nid for s in u('SpiderEmpress').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P3 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "P4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Crusher').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Crusher').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Crusher;Left",
            "        s;Crusher;I'LL CRUSH YOU!",
            "        remove_portrait;Crusher",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Crusher;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Crusher;{eval:[s.nid for s in u('Crusher').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P4 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "P8",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Ogre1').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Ogre1').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Ogre1;Left",
            "        sound;CyclopsBattleCry",
            "        s;Ogre1;AAAAGH!",
            "        remove_portrait;Ogre1",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Ogre1;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Ogre1;{eval:[s.nid for s in u('Ogre1').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P8 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": null,
        "level_nid": "P10",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Minerve_2').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Minerve_2').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Minerve_2;Left;;Smile",
            "        s;Minerve_2;Whoa... No hard feelings now, okay~?",
            "        remove_portrait;Minerve_2",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Minerve_2;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Minerve_2;{eval:[s.nid for s in u('Minerve_2').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P10 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "P11",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('SucBoss').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('SucBoss').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;SucBoss;Left",
            "        s;SucBoss;You're gonna pay!",
            "        remove_portrait;SucBoss",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;SucBoss;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;SucBoss;{eval:[s.nid for s in u('SucBoss').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P11 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "P12",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Minerve_true').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Minerve_true').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Minerve_true;Left",
            "        s;Minerve_true;Heeey~ no bullying!",
            "        remove_portrait;Minerve_true",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Minerve_true;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Minerve_true;{eval:[s.nid for s in u('Minerve_true').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P12 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "P13",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Rialayoung').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Rialayoung').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Rialayoung;Left;;CloseEyes",
            "        s;Rialayoung;There is too much at stake here.",
            "        remove_portrait;Rialayoung",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Rialayoung;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Rialayoung;{eval:[s.nid for s in u('Rialayoung').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "P13 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "Intro1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;miracle_charge;{eval:u('Template').get_skill('BossMiracle_1').data['charge']}",
            "",
            "if;{v:miracle_charge} == 0",
            "    change_music;player_phase;Boss1",
            "    change_music;enemy_phase;Boss1",
            "    change_music;other_phase;Boss1",
            "    music;Boss1",
            "    add_portrait;Template;Left",
            "    s;Template;You think that was enough to defeat me?",
            "    remove_portrait;Template",
            "    center_cursor;Template;500",
            "    screen_shake;200;celeste",
            "    sound;CutinCrit",
            "    map_anim;OverchargeAura;Template",
            "    screen_shake_end",
            "    wait;300",
            "    if;{eval:(game.current_mode.nid == 'Hard' or game.current_mode.nid == 'Ironman')}",
            "        give_skill;Template;SecondPhase",
            "    end",
            "    level_var;bossbuffed;1",
            "end"
        ],
        "nid": "Intro1 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "Intro2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Trisha').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Trisha').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Trisha;Left",
            "        s;Trisha;Not a chance!",
            "        remove_portrait;Trisha",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Trisha;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Trisha;{eval:[s.nid for s in u('Trisha').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "Intro2 Boss buff"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "Intro3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Marlo').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Marlo').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Marlo;Left",
            "        s;Marlo;Not today...!",
            "        remove_portrait;Marlo",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Marlo;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Marlo;{eval:[s.nid for s in u('Marlo').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "Intro3 Boss buff"
    },
    {
        "name": "New Event_3",
        "trigger": "on_talk",
        "level_nid": "DEBUG_2",
        "condition": "unit.nid == 'Cassian' and unit2.nid == 'Lucia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "reset;Chosen",
            "# Debug pairing representation",
            "s;System;Chosen.position = {eval: repr(u('Chosen').position)}",
            "s;System;Simonyoung.position = {eval: repr(u('Simonyoung').position)}",
            "s;System;Chosen.traveler = {eval: repr(getattr(u('Chosen'), 'traveler', None))}",
            "s;System;Simonyoung.traveler = {eval: repr(getattr(u('Simonyoung'), 'traveler', None))}",
            "s;System;adjacent_to_simonyoung = {eval: [u.nid for u in target_system.get_adj_units(u('Simomyoung')) if True] if True else None}",
            "# safer adjacency print (no exceptions)",
            "s;System;any_adjacent_chosen = {eval: any(u.nid == 'Chosen' for u in target_system.get_adj_units(u('Simonyoung')))}"
        ],
        "nid": "DEBUG_2 New Event_3"
    },
    {
        "name": "Simon reinforcements",
        "trigger": "turn_change",
        "level_nid": "Intro5",
        "condition": "game.level_vars['simoncoming'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;13,30;3000",
            "wait;1500",
            "music;Reinforcements",
            "add_unit;Ship;13,30;fade;;south",
            "wait;200",
            "move_unit;Ship;12,27;silent",
            "wait;700",
            "add_group;simon;simon;fade;push",
            "#add_unit;Simon;12,26;fade;;south",
            "#wait;300",
            "#add_unit;Megail;11,26;fade;;east",
            "wait;1000",
            "add_portrait;Simon;Left",
            "s;Simon;They're here already.|Anyone who is in no condition to participate in the battle, board the ship!|The rest of you, advance!",
            "remove_portrait;Simon",
            "wait;500"
        ],
        "nid": "Intro5 Simon reinforcements"
    },
    {
        "name": "Simon reinforc setup",
        "trigger": "unit_wait",
        "level_nid": "Intro5",
        "condition": "any(game.level.regions.get('simon').contains(unit.position) for unit in game.get_units_in_party()) == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#simon chega proximo turno",
            "level_var;simoncoming;1"
        ],
        "nid": "Intro5 Simon reinforc setup"
    },
    {
        "name": "Beef1",
        "trigger": "turn_change",
        "level_nid": "Intro5",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;Naro",
            "music;Funny",
            "wait;500",
            "add_portrait;Naro;Left",
            "bop_portrait;Naro;no_block",
            "s;Naro;They're coming from our side!|Hey, you there!",
            "center_cursor;misc_3;1000",
            "wait;300",
            "move_unit;misc_3;Naro;normal;closest",
            "wait;300",
            "add_portrait;SoldierRed;Right",
            "s;SoldierRed;Sir!",
            "s;Naro;I need Yorem's archers right now!|We have use our high ground to stop them before they get here!",
            "s;SoldierRed;Understood.",
            "remove_portrait;SoldierRed;;left",
            "move_unit;misc_3;Yorem;normal;closest;no_block;no_follow",
            "s;Naro;He doesn't have much time left, but I'm young. I need to live!",
            "remove_portrait;Naro",
            "center_cursor;Yorem;2000",
            "wait;1500",
            "multi_add_portrait;Yorem;Left;SoldierRed;Right",
            "s;Yorem;What?!{c:wait;200} Such insolence.{c:wait;200} I won't let him waste my men!",
            "s;SoldierRed;Understood.",
            "remove_portrait;SoldierRed;;right",
            "move_unit;misc_3;Naro;normal;closest;no_block;no_follow",
            "s;Yorem;Who does he think he is?!{c:wait;200} He didn't realize his role yet. Stupid fool.",
            "remove_portrait;Yorem",
            "center_cursor;Naro;2000",
            "multi_add_portrait;Naro;Left;SoldierRed;Right",
            "s;Naro;Are you kidding me?|If you don't come back with the archers, it's your head on the table!",
            "s;SoldierRed;{tgm}...",
            "s;SoldierRed;Understood.",
            "remove_portrait;SoldierRed;;left",
            "move_unit;misc_3;Yorem;normal;closest;no_block;no_follow",
            "s;Naro;I'm gonna kill this old man one day.",
            "remove_portrait;Naro",
            "music_fade_back"
        ],
        "nid": "Intro5 Beef1"
    },
    {
        "name": "Beef2",
        "trigger": "turn_change",
        "level_nid": "Intro5",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.check_alive('Naro')",
            "    center_cursor;Naro;1500",
            "    music;Funny",
            "    move_unit;misc_3;Naro;normal;closest;no_block;no_follow",
            "    add_portrait;Naro;Left;;CloseEyes",
            "    wait;3000",
            "    add_portrait;SoldierRed;Right",
            "    s;SoldierRed;Sir.{c:wait;300} Sir Yorem refuses to mobilize his troops.",
            "    expression;Naro;OpenEyes",
            "    s;Naro;Did you understand what I told you?",
            "    s;SoldierRed;Yes, sir...",
            "    bop_portrait;Naro;no_block",
            "    s;Naro;What do you have to say for yourself?!",
            "    bop_portrait;SoldierRed;no_block",
            "    s;SoldierRed;My life is in your hands, sir!",
            "    expression;Naro;NoSmile,CloseEyes",
            "    s;Naro;{tgm}...",
            "    expression;Naro;OpenEyes",
            "    s;Naro;Then give me your horse.",
            "    s;SoldierRed;Sorry, what did you say?",
            "    s;Naro;Your horse, right now!",
            "    wait;300",
            "    multi_remove_portrait;Naro;SoldierRed",
            "    wait;1000",
            "    change_class;Naro;Noble;silent",
            "    wait;500",
            "    change_class;misc_3;Soldier;silent",
            "    wait;500",
            "    change_class;Naro;Cavalier;silent",
            "    wait;1000",
            "    multi_add_portrait;Naro;Left;SoldierRed;Right",
            "    s;Naro;Take care of this shithole.{c:wait;400} We're done for.",
            "    mirror_portrait;Naro",
            "    remove_portrait;Naro;;left",
            "    move_unit;Naro;0,17;normal;push;no_block;no_follow",
            "    s;SoldierRed;{tgm}...",
            "    remove_unit;Naro;immediate;fade",
            "    remove_portrait;SoldierRed",
            "    wait;300",
            "    move_unit;misc_3;22,18;normal;push",
            "    wait;2000",
            "    change_ai;misc_3;Guard",
            "    music_fade_back",
            "else",
            "end"
        ],
        "nid": "Intro5 Beef2"
    },
    {
        "name": "Simon incubus assault",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# List of (unit, dist) for enemy team",
            "level_var;enemy_close_1;{eval: [unit.nid for unit in get_units_within_distance('Simon', 3, team='enemy')]}",
            "",
            "# List of (unit, dist) for enemy2 team",
            "level_var;enemy_close_2;{eval: [unit.nid for unit in get_units_within_distance('Simon', 3, team='enemy2')]}",
            "",
            "# Merge into one list",
            "level_var;enemy_close_all;{eval: {v:enemy_close_1} + {v:enemy_close_2}}",
            "",
            "level_var;tsa;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Simon;{v:tsa};hit1,end;Incubus_Assault_helper;force_no_animation",
            "",
            "level_var;tsb;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Simon;{v:tsb};hit1,end;Incubus_Assault_helper;force_no_animation",
            "",
            "level_var;tsc;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Simon;{v:tsc};hit1,end;Incubus_Assault_helper;force_no_animation",
            "",
            "wait;200"
        ],
        "nid": "Global Simon incubus assault"
    },
    {
        "name": "Camp",
        "trigger": "level_end",
        "level_nid": "P4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Monica').team == 'player'",
            "    add_lore;Monica",
            "end",
            "if;u('Cassian').team == 'player'",
            "    add_lore;Cassian",
            "end",
            "if;u('Lucia').team == 'player'",
            "    add_lore;Lucia",
            "end",
            "add_lore;Antarion"
        ],
        "nid": "P4 Camp"
    },
    {
        "name": "Camp",
        "trigger": "level_end",
        "level_nid": "P5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Safado').team == 'player'",
            "    add_lore;Safado",
            "end"
        ],
        "nid": "P5 Camp"
    },
    {
        "name": "Camp",
        "trigger": "level_end",
        "level_nid": "P6",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Rosa').team == 'player'",
            "    add_lore;Rosa",
            "end"
        ],
        "nid": "P6 Camp"
    },
    {
        "name": "Camp",
        "trigger": "level_end",
        "level_nid": "P9",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Milena').team == 'player'",
            "    add_lore;Milena",
            "end",
            "add_lore;Riala"
        ],
        "nid": "P9 Camp"
    },
    {
        "name": "Camp",
        "trigger": "level_end",
        "level_nid": "P7",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_lore;Minerve"
        ],
        "nid": "P7 Camp"
    },
    {
        "name": "Camp",
        "trigger": "level_end",
        "level_nid": "P2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_lore;Duro"
        ],
        "nid": "P2 Camp"
    },
    {
        "name": "Seize castle south",
        "trigger": "Seize",
        "level_nid": "Intro5",
        "condition": "region.nid == 'gate1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;500",
            "center_cursor;Simon;500",
            "inc_level_var;seizes;1",
            ""
        ],
        "nid": "Intro5 Seize castle south"
    },
    {
        "name": "Boss buff",
        "trigger": "combat_end",
        "level_nid": "Intro5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Yorem').position",
            "    # Check the charge directly",
            "    level_var;miracle_charge;{eval:[s.data['charge'] for s in u('Yorem').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "",
            "    if; {v:miracle_charge} == 0",
            "        change_music;player_phase;Boss1",
            "        change_music;enemy_phase;Boss1",
            "        change_music;other_phase;Boss1",
            "        add_portrait;Yorem;Left",
            "        s;Yorem;I've fought way worse than you!",
            "        remove_portrait;Yorem",
            "        if;game.current_mode == 'Hard' or 'Ironman'",
            "            give_skill;Yorem;SecondPhase",
            "        end",
            "        ",
            "        # Remove skill",
            "        remove_skill;Yorem;{eval:[s.nid for s in u('Yorem').skills if getattr(s,'nid','').startswith('BossMiracle')][0]}",
            "    end",
            "end"
        ],
        "nid": "Intro5 Boss buff"
    },
    {
        "name": "Supply items",
        "trigger": "turn_change",
        "level_nid": "Intro4",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;game.current_mode == 'Easy'",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "end",
            "",
            "if;game.current_mode == 'Normal'",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "end",
            "",
            "if;game.current_mode == 'Hard'",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "end",
            "",
            "if;game.current_mode == 'Ironman'",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Health_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "    give_item;convoy;Mana_Potion;Simon;no_banner",
            "end",
            "",
            "give_item;convoy;Iron_Sword;Simon;no_banner",
            "give_item;convoy;Iron_Axe;Simon;no_banner",
            "give_item;convoy;Iron_Lance;Simon;no_banner"
        ],
        "nid": "Intro4 Supply items"
    },
    {
        "name": "Seize castle north",
        "trigger": "Seize",
        "level_nid": "Intro5",
        "condition": "region.nid == 'gate2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_level_var;seizes;1"
        ],
        "nid": "Intro5 Seize castle north"
    },
    {
        "name": "Both seizes",
        "trigger": "unit_wait",
        "level_nid": "Intro5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:seizes} == 2",
            "wait;1500",
            "music_clear",
            "victory_screen;Victory",
            "wait;1000",
            "win_game",
            "else",
            "end"
        ],
        "nid": "Intro5 Both seizes"
    },
    {
        "name": "Merc trap activate",
        "trigger": "unit_wait",
        "level_nid": "Intro5",
        "condition": "any(game.level.regions.get('merctrap').contains(unit.position) for unit in game.get_units_in_party()) == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;{v:mercshired} == 0",
            "    wait;400",
            "    center_cursor;Yorem;1500",
            "    wait;300",
            "    add_portrait;Yorem;Left",
            "    s;Yorem;Call them!",
            "    remove_portrait;Yorem",
            "    center_cursor;village;1500",
            "    spawn_group;merc;south;merc;normal;closest",
            "    wait;400",
            "else",
            "end"
        ],
        "nid": "Intro5 Merc trap activate"
    },
    {
        "name": "Village visit",
        "trigger": "Visit",
        "level_nid": "Intro5",
        "condition": "region.nid == 'village'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "multi_add_portrait;{unit};Left;SoldierBlue;Right",
            "s;SoldierBlue;We're mercenaries. Want our help? Our fee is 1000 Sx.",
            "table;sx;[game.get_money()];Sx;;;top;funds_display;;center",
            "choice;mercs;Hire mercenaries?;Yes,No",
            "if;{v:_last_choice} == 'Yes'",
            "    give_money;-1000;Simon",
            "    level_var;mercshired;1",
            "    spawn_group;merc;south;merc;normal;closest",
            "    change_team;merc_1;other",
            "    change_team;merc_2;other",
            "    change_team;merc_3;other",
            "    change_team;merc_4;other",
            "else",
            "s;SoldierBlue;Your loss.",
            "end"
        ],
        "nid": "Intro5 Village visit"
    },
    {
        "name": "Boss buffed set to 0 start chapter",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;bossbuffed;0"
        ],
        "nid": "Global Boss buffed set to 0 start chapter"
    },
    {
        "name": "DK nalili uyae",
        "trigger": "enemy_turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 12,
        "_source": [
            "center_cursor;1,15;1500",
            "wait;300",
            "add_unit;Nalili;1,16;fade;closest;west",
            "add_unit;Uyae;2,16;fade;closest;west",
            "wait;500",
            "level_var;randomuyli;'{e:game.get_random_choice([u for u in game.get_player_units() if u.nid not in ['Jack', '{v:randomcopy}']])}'",
            "wait;500",
            "move_unit;Uyae;{v:randomuyli};normal;closest;no_block",
            "move_unit;Nalili;{v:randomuyli};normal;closest;no_follow",
            "wait;1500",
            "give_skill;Uyae;Aura_of_Might;;no_banner",
            "wait;200",
            "interact_unit;Uyae;{v:randomuyli};hit1,hit1,end;Claw_Might;force_no_animation",
            "if;game.check_alive('{v:randomuyli}')",
            "    move_unit;Nalili;Uyae;normal;closest;no_follow",
            "    interact_unit;Nalili;Uyae;hit1;Dance;force_no_animation",
            "    wait;200",
            "    remove_skill;Uyae;Aura_of_Might;no_banner",
            "    give_skill;Uyae;Aura_of_Spirit;;no_banner",
            "    interact_unit;Uyae;{v:randomuyli};hit1,crit1,end;Claw_Spirit;force_no_animation",
            "end",
            "wait;500"
        ],
        "nid": "Intro0 DK nalili uyae"
    },
    {
        "name": "DK Orcent",
        "trigger": "enemy_turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "center_cursor;14,27;1500",
            "wait;500",
            "add_unit;Orcent;15,29;fade;push;south",
            "wait;200",
            "move_unit;Orcent;14,26;normal;push;no_block;no_follow",
            "spawn_group;extraorcs;south;extraorcs;normal;push;no_follow",
            "wait;500",
            "sound;CyclopsBattleCry",
            "pose_unit;Orcent;start_cast",
            "wait;700",
            "pose_unit;Orcent;normal",
            "wait;300"
        ],
        "nid": "Intro0 DK Orcent"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "Introreunion",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "add_weather;rain",
            "add_weather;night",
            "add_weather;purple",
            "add_weather;purple",
            "add_weather;purple",
            "show_layer;dk",
            "show_layer;exploded",
            "show_layer;bridges",
            "give_skill;Jack;Determination;;no_banner",
            "add_tag;Jack;Boss",
            "add_tag;Jack;ZeroMove",
            "give_item;Jack;Siegmund;;no_banner",
            "",
            "",
            "if;game.game_vars['Porhen'] == 1",
            "    add_unit;Porhen;{v:Porhen_pos}",
            "    change_team;Porhen;enemy",
            "end",
            "",
            "if;game.game_vars['Logan'] == 1",
            "    add_unit;Logan;{v:Logan_pos}",
            "    change_team;Logan;enemy",
            "end",
            "",
            "if;game.game_vars['Raylene'] == 1",
            "    add_unit;Raylene;{v:Raylene_pos}",
            "    change_team;Raylene;enemy",
            "end",
            "",
            "if;game.game_vars['Goreon'] == 1",
            "    add_unit;Goreon;{v:Goreon_pos}",
            "    change_team;Goreon;enemy",
            "end",
            "",
            "if;game.game_vars['Zaryca'] == 1",
            "    add_unit;Zaryca;{v:Zaryca_pos}",
            "    change_team;Zaryca;enemy",
            "end",
            "",
            "if;game.game_vars['Numb'] == 1",
            "    add_unit;Numb;{v:Numb_pos}",
            "    change_team;Numb;enemy",
            "end",
            "",
            "if;game.game_vars['Dytri'] == 1",
            "    add_unit;Dytri;{v:Dytri_pos}",
            "    change_team;Dytri;enemy",
            "end",
            "",
            "if;game.game_vars['Tima'] == 1",
            "    add_unit;Tima;{v:Tima_pos}",
            "    change_team;Tima;enemy",
            "end",
            "",
            "if;game.game_vars['Kirina'] == 1",
            "    add_unit;Kirina;{v:Kirina_pos}",
            "    change_team;Kirina;enemy",
            "end",
            "",
            "if;game.game_vars['Barios'] == 1",
            "    add_unit;Barios;{v:Barios_pos}",
            "    change_team;Barios;enemy",
            "end",
            "",
            "change_team;Jack;enemy",
            "change_team;Ship;enemy",
            "change_team;{v:randomcopy};other",
            "change_team;DoomKing;other",
            "",
            "add_unit;Varia;15,10;immediate;closest",
            "add_unit;Aka;10,9;immediate;closest",
            "add_unit;Carina;15,8;immediate;closest",
            "add_unit;Hilstara;11,10;immediate;closest",
            "add_unit;Vhala;15,9;immediate;closest",
            "add_unit;Robin;15,14;immediate;closest",
            "add_unit;Orilise;16,13;immediate;closest",
            "add_unit;Lynine;11,14;immediate;closest",
            "add_unit;Altina;10,13;immediate;closest",
            "add_unit;Qum;8,13;immediate;closest",
            "add_unit;Riala;13,16;immediate;closest",
            "add_unit;Simon;13,15;immediate;closest",
            "add_unit;Nalili;16,14;immediate;closest",
            "add_unit;Uyae;16,14;immediate;closest",
            "add_unit;Yarra;9,12;immediate;closest",
            "add_unit;Trin;9,12;immediate;closest",
            "add_unit;Dari;Vhala;immediate;closest",
            "add_unit;Orcent;14,26;immediate;closest",
            "",
            "add_unit;DoomKing;13,12;immediate;push",
            "",
            "music;Magma IK;1500",
            "center_cursor;Jack",
            "transition;open;2500",
            "center_cursor;7,13;1500",
            "center_cursor;13,20;1500",
            "center_cursor;19,12;1500",
            "center_cursor;13,5;1500",
            "center_cursor;Simon;1500",
            "wait;300",
            "add_portrait;Simon;Left;;CloseEyes",
            "s;Simon;Our initial blow was very effective. However...|{c:expression;Simon;OpenEyes}Do we continue from this position or regroup?;;;thought_bubble;no_talk;no_sound",
            "expression;Simon;CloseEyes",
            "textbox;regroup;Regrouping lets you manage your unit's initial positions, but less units may be deployed.;top;;2",
            "choice;regroup;Regroup?;Yes,No",
            "if;'{v:_last_choice}' == 'Yes'",
            "    expression;Simon;OpenEyes",
            "    remove_table;regroup",
            "    wait;300",
            "    bop_portrait;Simon",
            "    s;Simon;We've overextended our position! Regroup!",
            "    remove_portrait;Simon",
            "    sound;Warp",
            "    for;warp;[u for u in game.get_units_in_party('Simon')]",
            "        map_anim;Warp;{warp};no_block",
            "    endf",
            "    transition;close;500",
            "    remove_all_units",
            "    for;readd;[u for u in game.get_units_in_party('Simon')]",
            "        load_unit;{readd}",
            "    endf",
            "    add_unit;Simon;13,22;immediate",
            "    add_group;partyjack;partyjack;immediate",
            "    move_unit;Jack;13,11;immediate",
            "    move_unit;Dytri;15,11;immediate",
            "    add_unit;DoomKing;13,12;immediate",
            "    for;jackenemy;[u for u in game.get_units_in_ai_group('j')]",
            "        change_team;{jackenemy};enemy",
            "    endf",
            "    change_team;{v:randomcopy};other",
            "    prep;t;Magma IK",
            "else",
            "    expression;Simon;OpenEyes",
            "    remove_table;regroup",
            "    bop_portrait;Simon",
            "    s;Simon;We continue the attack!",
            "    r;Simon",
            "end"
        ],
        "nid": "Introreunion Intro"
    },
    {
        "name": "New Event",
        "trigger": null,
        "level_nid": "Introreunion",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "Introreunion New Event"
    },
    {
        "name": "Varia furious strikes",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# List of (unit, dist) for enemy team",
            "level_var;enemy_close_1;{eval: [unit.nid for unit in get_units_within_distance('Varia', 2, team='enemy')]}",
            "",
            "# List of (unit, dist) for enemy2 team",
            "level_var;enemy_close_2;{eval: [unit.nid for unit in get_units_within_distance('Varia', 2, team='enemy2')]}",
            "",
            "# Merge into one list",
            "level_var;enemy_close_all;{eval: {v:enemy_close_1} + {v:enemy_close_2}}",
            "",
            "level_var;fsa;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Varia;{v:fsa};hit1,end;Furious_Strikes_helper;force_no_animation",
            "",
            "level_var;fsb;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Varia;{v:fsb};hit1,end;Furious_Strikes_helper;force_no_animation",
            "",
            "level_var;fsc;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Varia;{v:fsc};hit1,end;Furious_Strikes_helper;force_no_animation",
            "",
            "wait;200"
        ],
        "nid": "Global Varia furious strikes"
    },
    {
        "name": "Varia death cursed",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;100",
            "add_portrait;Varia;FarRight;;CloseEyes.Smile",
            "s;Varia;Escaped from it again, huh...",
            "remove_portrait;Varia",
            "wait;300",
            "give_skill;Varia;Cursed_Varia",
            "wait;300"
        ],
        "nid": "Global Varia death cursed"
    },
    {
        "name": "Monica sacred field",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;100",
            "level_var;sacredfieldpos;{target_pos}",
            "level_var;sfalert;0",
            "#   -",
            "# - - -",
            "#   x",
            "#   -",
            "add_region;sacredfield1;{target_pos};1,1;status;Sacred_Field_effect;5;f",
            "add_weather;event_tile;{target_pos}",
            "map_anim;BlueDot;{target_pos};permanent;overlay",
            "",
            "#   -",
            "# - x -",
            "#   -",
            "#   -",
            "add_region;sacredfield2;{e: ({target_pos}[0], {target_pos}[1] + 1)};1,1;status;Sacred_Field_effect;5;t",
            "add_weather;event_tile;{e: ({target_pos}[0], {target_pos}[1] + 1)}",
            "map_anim;BlueDot;{e: ({target_pos}[0], {target_pos}[1] + 1)};permanent;overlay",
            "#   -",
            "# - - -",
            "#   -",
            "#   x",
            "add_region;sacredfield3;{e: ({target_pos}[0], {target_pos}[1] - 1)};1,1;status;Sacred_Field_effect;5;t",
            "add_weather;event_tile;{e: ({target_pos}[0], {target_pos}[1] - 1)}",
            "map_anim;BlueDot;{e: ({target_pos}[0], {target_pos}[1] - 1)};permanent;overlay",
            "#   x",
            "# - - -",
            "#   -",
            "#   -",
            "add_region;sacredfield4;{e: ({target_pos}[0], {target_pos}[1])};1,1;status;Sacred_Field_effect;5;t",
            "add_weather;event_tile;{e: ({target_pos}[0], {target_pos}[1])}",
            "map_anim;BlueDot;{e: ({target_pos}[0], {target_pos}[1])};permanent;overlay",
            "#   -",
            "# x - -",
            "#   -",
            "#   -",
            "add_region;sacredfield5;{e: ({target_pos}[0] - 1, {target_pos}[1])};1,1;status;Sacred_Field_effect;5;t",
            "add_weather;event_tile;{e: ({target_pos}[0] - 1, {target_pos}[1])}",
            "map_anim;BlueDot;{e: ({target_pos}[0] - 1, {target_pos}[1])};permanent;overlay",
            "#   -",
            "# - - x",
            "#   -",
            "#   -",
            "add_region;sacredfield6;{e: ({target_pos}[0] + 1, {target_pos}[1])};1,1;status;Sacred_Field_effect;5;t",
            "add_weather;event_tile;{e: ({target_pos}[0] + 1, {target_pos}[1])}",
            "map_anim;BlueDot;{e: ({target_pos}[0] + 1, {target_pos}[1])};permanent;overlay",
            ""
        ],
        "nid": "Global Monica sacred field"
    },
    {
        "name": "Monica sacred field expire",
        "trigger": "time_region_complete",
        "level_nid": null,
        "condition": "region.nid.startswith('sacredfield') == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:sfalert} == 0",
            "    center_cursor;{v:sacredfieldpos};1000",
            "    wait;500",
            "    alert;Sacred Field has expired.;;Sacred_Field",
            "    wait;300",
            "    level_var;sfalert;1",
            "end",
            "remove_weather;event_tile;{eval:position}",
            "remove_map_anim;BlueDot;{eval:position};overlay"
        ],
        "nid": "Global Monica sacred field expire"
    },
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "6",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_skill;Monica;Sacred_Field;;no_banner",
            "set_current_mana;Robin;0",
            "give_skill;Qum;Little_Death;;no_banner"
        ],
        "nid": "6 New Event"
    },
    {
        "name": "boss plan 1 villagers",
        "trigger": "unit_wait",
        "level_nid": "Intro1",
        "condition": "(game.current_mode.nid != 'Easy') and (any(game.level.regions.get('bossplan1').contains(unit.position) for unit in game.get_units_in_party())) == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;300",
            "music;Tension",
            "center_cursor;Darian;1500",
            "add_portrait;Darian;FarRight",
            "s;Darian;Are you new recruits just gonna stand around uselessly like chickens?!|This is your first trial.{c:wait;300} Grab some weapons and move!",
            "add_unit;109;12,3;fade;;north",
            "move_unit;109;10,3;normal;;no_follow;no_block",
            "add_unit;110;12,3;fade;;north",
            "move_unit;110;11,4;normal;;no_follow;no_block",
            "add_unit;111;12,4;fade;;north",
            "move_unit;111;12,4;normal;;no_follow;no_block",
            "add_unit;112;13,3;fade;;north",
            "move_unit;112;13,3;normal;;no_follow",
            "wait;1000",
            "give_item;109;Slim_Sword;;no_banner",
            "give_item;110;Slim_Sword;;no_banner",
            "give_item;111;Slim_Sword;;no_banner",
            "give_item;112;Slim_Sword;;no_banner",
            "change_class;109;Citizen_Armed;silent",
            "change_class;110;Citizen_Armed;silent",
            "change_class;111;Citizen_Armed;silent",
            "change_class;112;Citizen_Armed;silent",
            "wait;1000",
            "remove_portrait;Darian",
            "center_cursor;Yarra;1500",
            "add_portrait;Yarra;CenterLeft",
            "s;Yarra;Hey! Using those impressionable villagers as meat shields?! Despicable!",
            "add_portrait;Carina;FarLeft",
            "s;Carina;We have to save them.",
            "add_portrait;Hilstara;FarRight",
            "s;Hilstara;It's a noble thought, but they won't extend their kindness to us.",
            "add_portrait;Robin;CenterRight",
            "s;Robin;Regardless, engaging them would not bode well for us.",
            "s;Carina;We should talk to them and convince them of our cause!",
            "s;Yarra;Or avoid them altogether.",
            "s;Hilstara;It will all depend on what happens on the battlefield. Let's go.",
            "multi_remove_portrait;Yarra;Hilstara;Carina;Robin",
            "wait;400",
            "music_fade_back",
            "for;talks;[u for u in game.get_player_units()]",
            "    add_talk;{talks};109",
            "    add_talk;{talks};110",
            "    add_talk;{talks};111",
            "    add_talk;{talks};112",
            "endf"
        ],
        "nid": "Intro1 boss plan 1 villagers"
    },
    {
        "name": "boss plan 2 charge",
        "trigger": "unit_wait",
        "level_nid": "Intro1",
        "condition": "(game.current_mode.nid != 'Easy') and (any(game.level.regions.get('bossplan2').contains(unit.position) for unit in game.get_units_in_party())) == True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;300",
            "music_clear;1000",
            "center_cursor;Darian",
            "wait;300",
            "add_portrait;Darian;Right;;CloseEyes",
            "s;Darian;...;no_talk",
            "s;Darian;Maybe if I charge and survive I'll actually get a huge influence...!;;;thought_bubble;no_talk;no_sound",
            "wait;300",
            "expression;Darian;OpenEyes",
            "bop_portrait;Darian;no_block",
            "music;Halfway change loop",
            "change_music;player_phase;Halfway change loop",
            "change_music;enemy_phase;Halfway change loop",
            "change_music;other_phase;Halfway change loop",
            "s;Darian;Everyone, witness how it's done!{c:wait;300} I will deal with them myself!",
            "remove_portrait;Darian",
            "change_ai;Darian;Pursue",
            "sound;FormationSelect",
            "alert;Darian will now move to attack.",
            "wait;300"
        ],
        "nid": "Intro1 boss plan 2 charge"
    },
    {
        "name": "talk rescue villagers",
        "trigger": "on_talk",
        "level_nid": "Intro1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "add_portrait;{unit1};Left;;Smile",
            "center_cursor;{unit2};1500",
            "wait;300",
            "change_class;{unit2};Citizen;silent",
            "wait;500",
            "change_team;{unit2};other",
            "wait;500",
            "remove_unit;{unit2};fade;fade",
            "remove_portrait;{unit}",
            "sound;FormationSelect",
            "alert;Villager saved.",
            "wait;200",
            "inc_game_var;intro1villagers"
        ],
        "nid": "Intro1 talk rescue villagers"
    },
    {
        "name": "sup teste adj pair",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "check_pair('Cassian','Lucia')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;support_rank_nid == 'C'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank C!",
            "    sound;Item",
            "    alert;Unlocked affinity bonuses!",
            "elif;support_rank_nid == 'B'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank B!",
            "    give_skill;Cassian;synergy_adj",
            "elif;support_rank_nid == 'A'",
            "    s;System;Support conversation not yet implemented.;;;narration",
            "    sound;Item",
            "    alert;Reached rank A!",
            "    sound;Item",
            "    alert;Synergy skills work on pair-up!",
            "    modify_skill_component;Cassian;synergy_adj;condition;'{eval:(game.get_unit('Cassian') and game.get_unit('Lucia') and (any(u.nid=='Lucia' for u in target_system.get_adj_units(game.get_unit('Cassian'))) or game.get_unit('Cassian').traveler=='Lucia' or game.get_unit('Lucia').traveler=='Cassian'))}'",
            "else",
            "end"
        ],
        "nid": "Global sup teste adj pair"
    },
    {
        "name": "talk sup",
        "trigger": "on_talk",
        "level_nid": "DEBUG_2",
        "condition": "check_pair('Chosen','Simonyoung')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "increment_support_points;Cassian;Lucia;10",
            "reset;Cassian",
            "s;system;{print(game.get_unit('Cassian').skills['synergy_adj'].components['condition'])}"
        ],
        "nid": "DEBUG_2 talk sup"
    },
    {
        "name": "PROL support unified",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;check_pair('Chosen','Antarion')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Chosen;Peacocking_Rivalry",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Chosen;Peacocking_Rivalry_pair;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Simonyoung','Lucia')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Simonyoung;Reprimand",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Simonyoung;Reprimand_pair;;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Mira','Safado')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Mira;Unintentional_Boost",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Mira;Unintentional_Boost_pair;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Duro','Rosa')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Duro;Burning_Shield",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Duro;Burning_Shield_pair;;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Antarion','Monica')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Antarion;Powerful_Headcanon",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Antarion;Powerful_Headcanon_pair;;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Monica','Simonyoung')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Monica;Comforting_Anchor",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Monica;Comforting_Anchor_pair;;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Cassian','Lucia')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Lucia;Encouraging_Mistakes",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Lucia;Encouraging_Mistakes;;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Cassian','Mira')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Cassian;Pure_Motive",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Cassian;Pure_Motive_pair;;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Safado','Milena')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Safado;Flustered_Focus",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Safado;Flustered_Focus_pair;;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Rosa','Chosen')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Rosa;Heroic_Fireworks",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Rosa;Heroic_Fireworks_pair;;no_banner",
            "    else",
            "    end",
            "elif;check_pair('Milena','Duro')",
            "    if;support_rank_nid == 'C'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank C!",
            "        sound;Item",
            "        alert;Unlocked affinity bonuses!",
            "    elif;support_rank_nid == 'B'",
            "        s;System;Support conversation not yet implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank B!",
            "        give_skill;Milena;Waggish_Reassurance",
            "    elif;support_rank_nid == 'A'",
            "        s;System;Support conversation not yet   implemented.;;;narration",
            "        sound;Item",
            "        alert;Reached rank A!",
            "        sound;Item",
            "        alert;Synergy skills work on pair-up!",
            "        give_skill;Milena;Waggish_Reassurance_pair;;no_banner",
            "    else",
            "    end",
            "end"
        ],
        "nid": "Global PROL support unified"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "Base1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "Base1 Outro"
    },
    {
        "name": "Aka deathblow death's door",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "center_cursor;{unit};1500",
            "flicker_cursor;{unit}",
            "wait;1000",
            "if;game.check_alive('Aka')",
            "    add_portrait;Aka;FarLeft;;NoSmile,CloseEyes",
            "    wait;300",
            "    move_portrait;Aka;FarRight;no_block",
            "    sound;Attack Hit 1",
            "    map_anim;HitSpark;{unit}",
            "    set_current_hp;{unit};1",
            "    wait;200",
            "    remove_portrait;Aka;;right",
            "    wait;300",
            "else",
            "    wait;300",
            "    set_current_hp;{unit};1",
            "    wait;300",
            "end"
        ],
        "nid": "Global Aka deathblow death's door"
    },
    {
        "name": "Aka flourished flurry",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;300",
            "center_cursor;{target};500",
            "interact_unit;Aka;{target};hit1,hit1,hit1,end;Flourished_Flurries_helper",
            "wait;1000"
        ],
        "nid": "Global Aka flourished flurry"
    },
    {
        "name": "Qumbomb end",
        "trigger": "turn_change",
        "level_nid": "Introreunion",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_weather;purple",
            "remove_weather;purple",
            "remove_weather;purple"
        ],
        "nid": "Introreunion Qumbomb end"
    },
    {
        "name": "green boss reinforcement deprecated",
        "trigger": null,
        "level_nid": "Intro0",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;4,3;1500",
            "music_clear;1500",
            "wait;500",
            "music;Halfway change loop",
            "spawn_group;reinf;west;reinf;normal;closest;no_follow",
            "wait;500",
            "flicker_cursor;Deguile",
            "wait;300",
            "add_portrait;Deguile;Left;;Smile",
            "bop_portrait;Deguile;no_block",
            "s;Deguile;Yahooo, I'm here!",
            "add_portrait;Koromin;FarRight;;Smile",
            "s;Koromin;Deguile!",
            "s;Deguile;You did well holding out so far, but leave the rest to me!|Chaaarge!",
            "wait;300",
            "multi_remove_portrait;Deguile;Koromin",
            "center_cursor;Jack;1500",
            "add_portrait;Jack;LeftCorner",
            "s;Jack;Alright! Now we surround them!",
            "r;Jack",
            "wait;500"
        ],
        "nid": "Intro0 green boss reinforcement deprecated"
    },
    {
        "name": "Aka level up skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Aka' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Aka').klass == 'Thief'",
            "    if;game.get_unit('Aka').level == 2",
            "        add_item_to_multiitem;Aka;Sneaky_Stabs;Piercing_Stab",
            "    elif;game.get_unit('Aka').level == 4",
            "        add_item_to_multiitem;Aka;Sneaky_Stabs;Disconcerting_Stab",
            "    elif;game.get_unit('Aka').level == 6",
            "        add_item_to_multiitem;Aka;Sneaky_Stabs;Weakening_Stab",
            "    elif;game.get_unit('Aka').level == 8",
            "        add_item_to_multiitem;Aka;Sneaky_Stabs;Crippling_Stab",
            "    end",
            "end"
        ],
        "nid": "Global Aka level up skills"
    },
    {
        "name": "Carina level up skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Carina' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Carina').klass == 'Priestess'",
            "    elif;game.get_unit('Carina').level == 4",
            "        add_item_to_multiitem;Carina;DivineSpells_Carina;DivineFortify",
            "    elif;game.get_unit('Carina').level == 7",
            "        add_item_to_multiitem;Carina;DivineSpells_Carina;Shield_of_Purity",
            "    elif;game.get_unit('Carina').level == 10",
            "        add_item_to_multiitem;Carina;DivineSpells_Carina;Revive",
            "    end",
            "end"
        ],
        "nid": "Global Carina level up skills"
    },
    {
        "name": "dk ending failsafe if earlier doesnt trigger",
        "trigger": "turn_change",
        "level_nid": "Intro0",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "wait;1000",
            "center_cursor;Jack;1500",
            "add_portrait;Jack;CenterRight;;CloseEyes,NoSmile",
            "s;Jack;No, no!! This can't be happening!!!{c:wait;1000}{no_wait}",
            "remove_portrait;Jack;no_block",
            "move_unit;Jack;13,11;normal;push",
            "wait;1000",
            "sound;Weapon Shine",
            "map_anim;OverchargeAura;Jack",
            "pose_unit;Jack;start_cast;down",
            "add_portrait;Jack;CenterRight;;OpenEyes,NoSmile",
            "s;Jack;For all of my friends...{c:wait;300}{c:bop_portrait;Jack} You will never pass through me!!",
            "remove_portrait;Jack",
            "give_skill;Jack;Determination",
            "wait;1000",
            "pose_unit;Jack;normal",
            "music_clear;1000",
            "center_cursor;Dargai;1500",
            "wait;300",
            "remove_unit;Dargai;warp;fade",
            "center_cursor;13,15;2000",
            "wait;2000",
            "add_unit;Riala;13,16;warp;push;fade",
            "add_unit;Simon;13,15;warp;push;fade",
            "wait;2000",
            "sound;DemonKingRoar",
            "screen_shake;1000",
            "map_anim;AOE_Rally;13,14;overlay",
            "add_unit;DoomKing;13,14;swoosh;push;fade",
            "add_weather;dark;DoomKing",
            "show_layer;dk",
            "sound;DemonKingEntrance",
            "screen_shake_end",
            "wait;2000",
            "add_portrait;DoomKing;FarLeft;;CloseEyes",
            "wait;1000",
            "sound;Heaviest",
            "move_portrait;DoomKing;Left;no_block",
            "move_unit;DoomKing;13,13;;push;no_follow;silent",
            "wait;1000",
            "sound;Heaviest",
            "music;Main Theme_TLS",
            "move_portrait;DoomKing;CenterLeft;no_block",
            "move_unit;DoomKing;13,12;;push;no_follow;silent",
            "wait;1500",
            "screen_shake;100;celeste",
            "sound;Stare",
            "expression;DoomKing;OpenEyes",
            "screen_shake_end",
            "#changes color",
            "change_team_palette;player;map_sprite_red",
            "change_team_palette;enemy;map_sprite_blue",
            "change_team_palette;other;map_sprite_red",
            "wait;1000",
            "r;DoomKing",
            "wait;2000",
            "center_cursor;Simon;1500",
            "flicker_cursor;Simon",
            "add_portrait;Simon;CenterLeft",
            "s;Simon;This battle is over.{c:wait;300} Surrender now before any more bloodshed.",
            "move_unit;Yarra;Simon;normal;closest;no_follow",
            "wait;300",
            "add_portrait;Yarra;FarRight",
            "move_portrait;Yarra;CenterRight",
            "s;Yarra;Simon, I've confirmed that he is still holed up inside the castle.",
            "add_portrait;Robin;FarRight;right",
            "s;Robin;Our mages have already blocked any possible teleportation.",
            "s;Simon;Good. Without one of its leaders, this rebellion will soon meet its end.",
            "add_portrait;Riala;FarLeft;left",
            "s;Riala;These youngster seem like a new party of adventurers.|Perhaps they were manipulated into following their cause.",
            "expression;Simon;CloseEyes",
            "s;Simon;I see. This has spread farther than I anticipated.|{c:expression;Simon;OpenEyes}Can we use this to our advantage?",
            "s;Riala;Maybe we could show them the state of Ari-Yhilin.|It certainly won't seem as evil as they've been told.",
            "s;Yarra;They would soon realize how peaceful it is!",
            "s;Robin;Their voices would be more accepting to the ears of the extremists.",
            "s;Simon;I agree. Send the ones remaining to our transporters to Ari-Yhilin.",
            "remove_portrait;Riala;;left;no_block",
            "remove_portrait;Yarra;;right;no_block",
            "remove_portrait;Robin;;right",
            "move_unit;Orcent;Simon;normal;closest;no_block;no_follow",
            "move_unit;Hilstara;Simon;normal;closest;no_follow",
            "wait;500",
            "multi_add_portrait;Hilstara;CenterRight;Orcent;FarRight",
            "s;Simon;Instruct our captains to occupy the castle, but we won't stay here ourselves.",
            "s;Hilstara;Are we regrouping the old party?",
            "s;Simon;Yes, as I believe we need to act swiftly.",
            "s;Orcent;Understandable, as mobilizing our army is rather demanding.",
            "remove_portrait;Hilstara;;right;no_block",
            "remove_portrait;Orcent;;right",
            "wait;500",
            "expression;Simon;CloseEyes",
            "s;Simon;And I really thought we were going to take a break from conflicts for a while...;;;thought_bubble;no_sound",
            "transition;close;3000",
            "wait;1500",
            "end_skip",
            "set_name;Aka;Aka",
            "set_name;Vhala;Vhala",
            "set_name;Robin;Robin",
            "set_name;Nalili;Nalili",
            "set_name;Uyae;Uyae",
            "remove_generics_from_region;cleanup",
            "change_team_palette;player;map_sprite_blue",
            "change_team_palette;enemy;map_sprite_red",
            "change_team_palette;other;map_sprite_green",
            "for;alive;[u for u in game.get_player_units()]",
            "    game_var;{alive};1",
            "endf",
            "for;dk;[u for u in game.get_enemy1_units()]",
            "    change_team;{dk};player",
            "endf",
            "win_game",
            "wait;3000"
        ],
        "nid": "Intro0 dk ending failsafe if earlier doesnt trigger"
    },
    {
        "name": "dargai actions",
        "trigger": "turn_change",
        "level_nid": "Intro0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount == 1",
            "    center_cursor;Jack;1500",
            "    wait;300",
            "    add_portrait;Jack;CenterLeft",
            "    s;Jack;Let's prepare for them by positioning ourselves in advance!",
            "    r;Jack",
            "    wait;300",
            "elif;game.turncount == 2",
            "    music;Prologue enemy phase",
            "    center_cursor;20,24;1500",
            "    wait;1000",
            "    add_unit;Dargai;20,24;warp",
            "    wait;1000",
            "    flicker_cursor;Dargai",
            "    wait;300",
            "    add_portrait;Dargai;FarRight",
            "    wait;300",
            "    s;Dargai;Send the flyers.",
            "    wait;300",
            "    r;Dargai",
            "    wait;500",
            "    center_cursor;5,20;500",
            "    add_unit;fly_1;5,20;warp;closest;fade",
            "    wait;200",
            "    center_cursor;20,17;500",
            "    add_unit;fly_2;20,17;warp;closest;fade",
            "    wait;200",
            "    center_cursor;13,2;500",
            "    add_unit;fly_3;13,2;warp;closest;fade",
            "    wait;500",
            "    center_cursor;8,29;500",
            "    add_unit;imp_1;8,29;fade;closest;south",
            "    wait;200",
            "    center_cursor;11,2;500",
            "    add_unit;imp_2;11,29;fade;closest;south",
            "    wait;200",
            "    center_cursor;13,29;500",
            "    add_unit;imp_3;13,29;fade;closest;south",
            "    wait;200",
            "    center_cursor;15,29;500",
            "    add_unit;imp_1;15,29;fade;closest;south",
            "    wait;500",
            "elif;game.turncount == 3",
            "    music;Prologue enemy phase",
            "    center_cursor;20,24;1500",
            "    wait;1000",
            "    add_portrait;Dargai;FarRight",
            "    wait;300",
            "    s;Dargai;The clones are in position. Lower the bridges.",
            "    wait;300",
            "    r;Dargai",
            "    music_clear;2000",
            "    wait;1000",
            "    center_cursor;13,16;1500",
            "    wait;100",
            "    screen_shake;100",
            "    sound;Heaviest",
            "    show_layer;bridges",
            "    screen_shake_end",
            "    music;Halfway change loop",
            "    wait;2000",
            "    change_music;player_phase;Halfway change loop",
            "    change_music;enemy_phase;Halfway change loop",
            "    change_music;other_phase;Halfway change loop",
            "    center_cursor;25,11;500",
            "    add_unit;yhilin_cav_1;25,11;fade;closest;east",
            "    wait;200",
            "    center_cursor;25,10;500",
            "    add_unit;yhilin_cav_2;25,10;fade;closest;east",
            "    wait;200",
            "    wait;500",
            "    center_cursor;0,17;500",
            "    add_unit;yhilin_cav_3;0,17;fade;closest;west",
            "    wait;200",
            "    center_cursor;0,18;500",
            "    add_unit;yhilin_cav_4;0,18;fade;closest;east",
            "    wait;1000",
            "    center_cursor;Koromin",
            "    add_portrait;Koromin;Left",
            "    bop_portrait;Koromin;no_block",
            "    move_portrait;Koromin;CenterLeft",
            "    s;Koromin;What?! Why did they disobey me?!|How did they...",
            "    center_cursor;Jack",
            "    add_portrait;Jack;Right",
            "    s;Jack;It's not a problem, sir Koromin.|Regardless of their nerfarious tricks, they will soon regret it.|{c:bop_portrait;Jack}Our path is now open as well!",
            "    wait;300",
            "    multi_remove_portrait;Jack;Koromin",
            "end"
        ],
        "nid": "Intro0 dargai actions"
    },
    {
        "name": "Suc ruins",
        "trigger": "Destructible",
        "level_nid": "Intro2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "flicker_cursor;13,9",
            "wait;300",
            "sound;VillageDestroyed",
            "show_layer;ruins",
            "wait;1500",
            "if;game.current_mode.nid != 'Ironman'",
            "    activate_turnwheel;t",
            "else",
            "    lose_game",
            "end"
        ],
        "nid": "Intro2 Suc ruins"
    },
    {
        "name": "Chests",
        "trigger": "Chest",
        "level_nid": "Intro3",
        "condition": "region.nid.startswith(\"Chest\") == True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;region.nid == 'Chest1'",
            "    unlock;{unit}",
            "    show_layer;chest1",
            "    give_item;{unit};Master_Seal",
            "    remove_region;Chest1",
            "elif;region.nid == 'Chest2'",
            "    unlock;{unit}",
            "    show_layer;chest2",
            "    give_item;{unit};Large_Mana_Potion",
            "    remove_region;Chest2",
            "elif;region.nid == 'Chest3'",
            "    unlock;{unit}",
            "    show_layer;chest3",
            "    give_item;{unit};Lust_Draught",
            "    remove_region;Chest3",
            "elif;region.nid == 'Chest4'",
            "    unlock;{unit}",
            "    show_layer;chest4",
            "    give_item;{unit};Cloak",
            "    remove_region;Chest4",
            "elif;region.nid == 'Chest5'",
            "    unlock;{unit}",
            "    show_layer;chest5",
            "    give_item;{unit};Unperson_Charm",
            "    remove_region;Chest5",
            "else",
            "end"
        ],
        "nid": "Intro3 Chests"
    },
    {
        "name": "Nalili charge skill use all",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;nalilicharges;[s for s in u('Nalili').skills]",
            "    set_skill_data;Nalili;{nalilicharges};charge;0",
            "endf"
        ],
        "nid": "Global Nalili charge skill use all"
    },
    {
        "name": "Nalili orgy of blows",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# List of (unit, dist) for enemy team",
            "level_var;enemy_close_1;{eval: [unit.nid for unit in get_units_within_distance('Nalili', 3, team='enemy')]}",
            "",
            "# List of (unit, dist) for enemy2 team",
            "level_var;enemy_close_2;{eval: [unit.nid for unit in get_units_within_distance('Nalili', 3, team='enemy2')]}",
            "",
            "# Merge into one list",
            "level_var;enemy_close_all;{eval: {v:enemy_close_1} + {v:enemy_close_2}}",
            "",
            "level_var;oba;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Nalili;{v:oba};hit1,end;Orgy_of_Blows_helper;force_no_animation",
            "",
            "level_var;obb;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Nalili;{v:obb};hit1,end;Orgy_of_Blows_helper;force_no_animation",
            "",
            "level_var;obc;'{e: game.get_random_choice({v:enemy_close_all})}'",
            "interact_unit;Nalili;{v:obc};hit1,end;Orgy_of_Blows_helper;force_no_animation",
            "",
            "wait;200"
        ],
        "nid": "Global Nalili orgy of blows"
    },
    {
        "name": "Qum little death charges to 0",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "set_skill_data;Qum;Little_Death;charge;0",
            "give_skill;Qum;Little_Death_block;;no_banner"
        ],
        "nid": "Global Qum little death charges to 0"
    },
    {
        "name": "Qum level up skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Qum' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_unit('Qum').level == 2",
            "    add_item_to_multiitem;Qum;LustSpells_Qum;Cleansing_Wink",
            "elif;game.get_unit('Qum').level == 4",
            "    add_item_to_multiitem;Qum;LustSpells_Qum;Orgasmic_Thoughts",
            "elif;game.get_unit('Qum').level == 6",
            "    add_item_to_multiitem;Qum;LustSpells_Qum;Arousing_Kiss",
            "elif;game.get_unit('Qum').level == 8",
            "    add_item_to_multiitem;Qum;LustSpells_Qum;Illusory_Orgy",
            "elif;game.get_unit('Qum').level == 12",
            "    add_item_to_multiitem;Qum;LustSpells_Qum;Arousing_Aura",
            "elif;game.get_unit('Qum').level == 14",
            "    add_item_to_multiitem;Qum;LustSpells_Qum;Cumdump",
            "elif;game.get_unit('Qum').level == 18",
            "    add_item_to_multiitem;Qum;LustSpells_Qum;Protective_Hug",
            "end",
            ""
        ],
        "nid": "Global Qum level up skills"
    },
    {
        "name": "Riala Combat Teleport",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Preparation;1000",
            "center_cursor;{target}",
            "level_var;swap_gray;0",
            "    if;game.get_unit(\"{eval: target.nid}\").finished == True",
            "        level_var;swap_gray;1",
            "    end",
            "    if;u('{eval: target.nid}').lead_unit",
            "        level_var;swap_traveler;u('{eval: target.nid}').traveler",
            "        separate;{eval: target.nid}",
            "        add_unit;{v:swap_traveler};{eval: target.nid};fade;closest;fade",
            "    end",
            "#falas de personagens",
            "add_portrait;{target};Left;left",
            "s;{target};{e: \"Let me go behind their backs!\" if '{target}' == 'Aka' else \"Oh... Was I not good enough?\" if '{target}' == 'Altina' else \"Finally\" if '{target}' == 'Balia' else \"I see, I should support the backline too\"  if '{target}' == 'Carina' else \"Ok! I smell something fishy out there!\" if '{target}' == 'Dari' else \"I trust your judgement. Back to strategizing behind the scenes...\" if '{target}' == 'Hilstara' else \"Oh, I wanted to see more of the action, but that's okay!\" if '{target}' == 'Lynine' else \"Aww...\" if '{target}' == 'Nalili' else \"Understood. It seems this is not when I meet my demise.\" if '{target}' == 'Orcent' else \"Hmm. This is not the end they'll get from me.\" if '{target}' == 'Orilise' else \"Okay! Cumdump will give hugs to the others!\" if '{target}' == 'Qum' else \"I'll scan our surroundings. Be careful, everyone.\" if '{target}' == 'Riala' else \"Got it. Expect my report soon.\" if '{target}' == 'Robin' else \"Really? You pussy.\" if '{target}' == 'Trin' else \"This is- Forgive me, I value your plans. I will follow your instructions.\" if '{target}' == 'Uyae' else \"Seems like I got lucky once again.\" if '{target}' == 'Varia' else \"I hope you've put careful thought into this move.\" if '{target}' == 'Vhala' else \"Well, I had my fun.\" if '{target}' == 'Wynn' else \"If you say so!\" if '{target}' == 'Yarra' else \"Oh.\"}",
            "    wait;1000",
            "    # Show menu of undeployed player units to choose a replacement",
            "    choice;replacement;Choose replacement:;{eval:[u.nid for u in game.get_units_in_party() if not u.position]};64;v;center;menu_bg_base;;type_unit;3,3;center;expression;",
            "# Save numeric coords (safe to store)",
            "level_var;swap_x;{eval: target.position[0]}",
            "level_var;swap_y;{eval: target.position[1]}",
            "",
            "# falas substituto",
            "add_portrait;{v:replacement};Right;right",
            "s;{v:replacement};{e: \"My turn, huh? I won't mess it up!\" if '{v:replacement}' == 'Aka' else \"Oh! Leave it to me!\" if '{v:replacement}' == 'Altina' else \"Are you sure? This is too boring...\" if '{v:replacement}' == 'Balia' else \"I'm coming to your aid! ...and no comment on that, Yarra!\" if '{v:replacement}' == 'Carina' else \"I'll show them what to fear!\" if '{v:replacement}' == 'Dari' else \"Stand behind me!\" if '{v:replacement}' == 'Hilstara' else \"It's now or never, everyone!\" if '{v:replacement}' == 'Lynine' else \"Yes!! Taste my luscious sword!\" if '{v:replacement}' == 'Nalili' else \"I shall do my utmost to effectuate your plans.\" if '{v:replacement}' == 'Orcent' else \"Nice timing. I've thought a couple of ways to finish this.\" if '{v:replacement}' == 'Orilise' else \"Yay! Cumdump will play with Simon and friends!\" if '{v:replacement}' == 'Qum' else \"Let's proceed with the next stage of our strategy.\" if '{v:replacement}' == 'Riala' else \"Understood. The spells are ready.\" if '{v:replacement}' == 'Robin' else \"FINALLY I get to wreck some shit around!\" if '{v:replacement}' == 'Trin' else \"It is an honour. Allow me to help my nestmates!\" if '{v:replacement}' == 'Uyae' else \"Thanks for clearing the way, now it's my time to shine!\" if '{v:replacement}' == 'Varia' else \"Follow my lead, everyone. Just don't get too close.\" if '{v:replacement}' == 'Vhala' else \"Wynn the magnificent enters the scene!\" if '{v:replacement}' == 'Wynn' else \"The best succubus has finally arrived!\" if '{v:replacement}' == 'Yarra' else \"Ok!\"}",
            "move_portrait;{target};CenterRight;no_block",
            "move_portrait;{v:replacement};CenterLeft",
            "wait;300",
            "",
            "",
            "# Remove the currently-deployed unit (target)",
            "remove_unit;{eval: target.nid};fade",
            "",
            "# Add the chosen undeployed ally at the same tile",
            "add_unit;{v:replacement};({v:swap_x},{v:swap_y});fade",
            "",
            "screen_shake;100;no_block",
            "sound;CutinCrit",
            "wait;500",
            "move_portrait;{target};OffscreenRight;no_block",
            "move_portrait;{v:replacement};OffscreenLeft;no_block",
            "wait;200",
            "remove_all_portraits",
            "wait;1000",
            "if;{v:swap_gray} == 1",
            "    has_finished;{v:replacement}",
            "end",
            "music_fade_back",
            "wait;1000"
        ],
        "nid": "Global Riala Combat Teleport"
    },
    {
        "name": "Hilstara Harem Tactics",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Preparation;1000",
            "center_cursor;{target}",
            "level_var;swap_gray;0",
            "    if;game.get_unit(\"{eval: target.nid}\").finished == True",
            "        level_var;swap_gray;1",
            "    end",
            "    if;u('{eval: target.nid}').lead_unit",
            "        level_var;swap_traveler;u('{eval: target.nid}').traveler",
            "        separate;{eval: target.nid}",
            "        add_unit;{v:swap_traveler};{eval: target.nid};fade;closest;fade",
            "    end",
            "#falas de personagens",
            "add_portrait;{target};Left;left",
            "s;{target};{e: \"Let me go behind their backs!\" if '{target}' == 'Aka' else \"Oh... Was I not good enough?\" if '{target}' == 'Altina' else \"Finally\" if '{target}' == 'Balia' else \"I see, I should support the backline too\"  if '{target}' == 'Carina' else \"Ok! I smell something fishy out there!\" if '{target}' == 'Dari' else \"I trust your judgement. Back to strategizing behind the scenes...\" if '{target}' == 'Hilstara' else \"Oh, I wanted to see more of the action, but that's okay!\" if '{target}' == 'Lynine' else \"Aww...\" if '{target}' == 'Nalili' else \"Understood. It seems this is not when I meet my demise.\" if '{target}' == 'Orcent' else \"Hmm. This is not the end they'll get from me.\" if '{target}' == 'Orilise' else \"Okay! Cumdump will give hugs to the others!\" if '{target}' == 'Qum' else \"I'll scan our surroundings. Be careful, everyone.\" if '{target}' == 'Riala' else \"Got it. Expect my report soon.\" if '{target}' == 'Robin' else \"Really? You pussy.\" if '{target}' == 'Trin' else \"This is- Forgive me, I value your plans. I will follow your instructions.\" if '{target}' == 'Uyae' else \"Seems like I got lucky once again.\" if '{target}' == 'Varia' else \"I hope you've put careful thought into this move.\" if '{target}' == 'Vhala' else \"Well, I had my fun.\" if '{target}' == 'Wynn' else \"If you say so!\" if '{target}' == 'Yarra' else \"Oh.\"}",
            "    wait;1000",
            "    # Show menu of undeployed player units to choose a replacement",
            "    choice;replacement;Choose replacement:;{eval:[u.nid for u in game.get_units_in_party() if not u.position]};64;v;center;menu_bg_base;;type_unit;3,3;center;expression;",
            "# Save numeric coords (safe to store)",
            "level_var;swap_x;{eval: target.position[0]}",
            "level_var;swap_y;{eval: target.position[1]}",
            "",
            "# falas substituto",
            "add_portrait;{v:replacement};Right;right",
            "s;{v:replacement};{e: \"My turn, huh? I won't mess it up!\" if '{v:replacement}' == 'Aka' else \"Oh! Leave it to me!\" if '{v:replacement}' == 'Altina' else \"Are you sure? This is too boring...\" if '{v:replacement}' == 'Balia' else \"I'm coming to your aid! ...and no comment on that, Yarra!\" if '{v:replacement}' == 'Carina' else \"I'll show them what to fear!\" if '{v:replacement}' == 'Dari' else \"Stand behind me!\" if '{v:replacement}' == 'Hilstara' else \"It's now or never, everyone!\" if '{v:replacement}' == 'Lynine' else \"Yes!! Taste my luscious sword!\" if '{v:replacement}' == 'Nalili' else \"I shall do my utmost to effectuate your plans.\" if '{v:replacement}' == 'Orcent' else \"Nice timing. I've thought a couple of ways to finish this.\" if '{v:replacement}' == 'Orilise' else \"Yay! Cumdump will play with Simon and friends!\" if '{v:replacement}' == 'Qum' else \"Let's proceed with the next stage of our strategy.\" if '{v:replacement}' == 'Riala' else \"Understood. The spells are ready.\" if '{v:replacement}' == 'Robin' else \"FINALLY I get to wreck some shit around!\" if '{v:replacement}' == 'Trin' else \"It is an honour. Allow me to help my nestmates!\" if '{v:replacement}' == 'Uyae' else \"Thanks for clearing the way, now it's my time to shine!\" if '{v:replacement}' == 'Varia' else \"Follow my lead, everyone. Just don't get too close.\" if '{v:replacement}' == 'Vhala' else \"Wynn the magnificent enters the scene!\" if '{v:replacement}' == 'Wynn' else \"The best succubus has finally arrived!\" if '{v:replacement}' == 'Yarra' else \"Ok!\"}",
            "move_portrait;{target};CenterRight;no_block",
            "move_portrait;{v:replacement};CenterLeft",
            "wait;300",
            "",
            "",
            "# Remove the currently-deployed unit (target)",
            "remove_unit;{eval: target.nid};fade",
            "",
            "# Add the chosen undeployed ally at the same tile",
            "add_unit;{v:replacement};({v:swap_x},{v:swap_y});fade",
            "",
            "screen_shake;100;no_block",
            "sound;CutinCrit",
            "wait;500",
            "move_portrait;{target};OffscreenRight;no_block",
            "move_portrait;{v:replacement};OffscreenLeft;no_block",
            "wait;200",
            "remove_all_portraits",
            "wait;1000",
            "if;{v:swap_gray} == 1",
            "    has_finished;{v:replacement}",
            "end",
            "music_fade_back",
            "wait;1000"
        ],
        "nid": "Global Hilstara Harem Tactics"
    },
    {
        "name": "Riala level up skills",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Riala' and source == 'exp_gain'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_unit('Riala').level == 9",
            "    add_item_to_multiitem;Riala;RialaSpells_Arcane;Cyclical_Fire",
            "elif;game.get_unit('Lucia').level == 11",
            "    add_item_to_multiitem;Riala;RialaSpells_Lust;Nostalgic_lust",
            "end"
        ],
        "nid": "Global Riala level up skills"
    },
    {
        "name": "Uyae takedown",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;utkd;{e:[item.nid for item in u('Uyae').items if item.nid.startswith('Claw')]}",
            "level_var;uclaw;'{e:game.get_random_choice({v:utkd})}'",
            "",
            "interact_unit;Uyae;{target};;{v:uclaw};20"
        ],
        "nid": "Global Uyae takedown"
    },
    {
        "name": "Uyae stalk setup",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;stalked;'{target}'"
        ],
        "nid": "Global Uyae stalk setup"
    },
    {
        "name": "Uyae stalked prey dies",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "has_skill(unit, 'Stalked')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Uyae;Stalking"
        ],
        "nid": "Global Uyae stalked prey dies"
    }
]